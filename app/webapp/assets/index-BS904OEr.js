function $k(t,s){for(var n=0;n<s.length;n++){const i=s[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(t,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function ih(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qf={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function Hk(){if(fb)return Ql;fb=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(i,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var l in o)l!=="key"&&(u[l]=o[l])}else u=o;return o=u.ref,{$$typeof:t,type:i,key:h,ref:o!==void 0?o:null,props:u}}return Ql.Fragment=s,Ql.jsx=n,Ql.jsxs=n,Ql}var pb;function zk(){return pb||(pb=1,Qf.exports=Hk()),Qf.exports}var e=zk(),Zf={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function Fk(){if(xb)return Xe;xb=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function j(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,g={};function v(L,Y,J){this.props=L,this.context=Y,this.refs=g,this.updater=J||S}v.prototype.isReactComponent={},v.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},v.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function b(){}b.prototype=v.prototype;function _(L,Y,J){this.props=L,this.context=Y,this.refs=g,this.updater=J||S}var C=_.prototype=new b;C.constructor=_,w(C,v.prototype),C.isPureReactComponent=!0;var A=Array.isArray;function D(){}var R={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function M(L,Y,J){var K=J.ref;return{$$typeof:t,type:L,key:Y,ref:K!==void 0?K:null,props:J}}function I(L,Y){return M(L.type,Y,L.props)}function q(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function W(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(J){return Y[J]})}var G=/\/+/g;function $(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?W(""+L.key):Y.toString(36)}function F(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(D,D):(L.status="pending",L.then(function(Y){L.status==="pending"&&(L.status="fulfilled",L.value=Y)},function(Y){L.status==="pending"&&(L.status="rejected",L.reason=Y)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function B(L,Y,J,K,Z){var oe=typeof L;(oe==="undefined"||oe==="boolean")&&(L=null);var P=!1;if(L===null)P=!0;else switch(oe){case"bigint":case"string":case"number":P=!0;break;case"object":switch(L.$$typeof){case t:case s:P=!0;break;case p:return P=L._init,B(P(L._payload),Y,J,K,Z)}}if(P)return Z=Z(L),P=K===""?"."+$(L,0):K,A(Z)?(J="",P!=null&&(J=P.replace(G,"$&/")+"/"),B(Z,Y,J,"",function(te){return te})):Z!=null&&(q(Z)&&(Z=I(Z,J+(Z.key==null||L&&L.key===Z.key?"":(""+Z.key).replace(G,"$&/")+"/")+P)),Y.push(Z)),1;P=0;var Q=K===""?".":K+":";if(A(L))for(var ee=0;ee<L.length;ee++)K=L[ee],oe=Q+$(K,ee),P+=B(K,Y,J,oe,Z);else if(ee=j(L),typeof ee=="function")for(L=ee.call(L),ee=0;!(K=L.next()).done;)K=K.value,oe=Q+$(K,ee++),P+=B(K,Y,J,oe,Z);else if(oe==="object"){if(typeof L.then=="function")return B(F(L),Y,J,K,Z);throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return P}function V(L,Y,J){if(L==null)return L;var K=[],Z=0;return B(L,K,"","",function(oe){return Y.call(J,oe,Z++)}),K}function O(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(J){(L._status===0||L._status===-1)&&(L._status=1,L._result=J)},function(J){(L._status===0||L._status===-1)&&(L._status=2,L._result=J)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var H=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},U={map:V,forEach:function(L,Y,J){V(L,function(){Y.apply(this,arguments)},J)},count:function(L){var Y=0;return V(L,function(){Y++}),Y},toArray:function(L){return V(L,function(Y){return Y})||[]},only:function(L){if(!q(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Xe.Activity=m,Xe.Children=U,Xe.Component=v,Xe.Fragment=n,Xe.Profiler=o,Xe.PureComponent=_,Xe.StrictMode=i,Xe.Suspense=d,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},Xe.cache=function(L){return function(){return L.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(L,Y,J){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var K=w({},L.props),Z=L.key;if(Y!=null)for(oe in Y.key!==void 0&&(Z=""+Y.key),Y)!k.call(Y,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&Y.ref===void 0||(K[oe]=Y[oe]);var oe=arguments.length-2;if(oe===1)K.children=J;else if(1<oe){for(var P=Array(oe),Q=0;Q<oe;Q++)P[Q]=arguments[Q+2];K.children=P}return M(L.type,Z,K)},Xe.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Xe.createElement=function(L,Y,J){var K,Z={},oe=null;if(Y!=null)for(K in Y.key!==void 0&&(oe=""+Y.key),Y)k.call(Y,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Z[K]=Y[K]);var P=arguments.length-2;if(P===1)Z.children=J;else if(1<P){for(var Q=Array(P),ee=0;ee<P;ee++)Q[ee]=arguments[ee+2];Z.children=Q}if(L&&L.defaultProps)for(K in P=L.defaultProps,P)Z[K]===void 0&&(Z[K]=P[K]);return M(L,oe,Z)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(L){return{$$typeof:l,render:L}},Xe.isValidElement=q,Xe.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:O}},Xe.memo=function(L,Y){return{$$typeof:f,type:L,compare:Y===void 0?null:Y}},Xe.startTransition=function(L){var Y=R.T,J={};R.T=J;try{var K=L(),Z=R.S;Z!==null&&Z(J,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(D,H)}catch(oe){H(oe)}finally{Y!==null&&J.types!==null&&(Y.types=J.types),R.T=Y}},Xe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Xe.use=function(L){return R.H.use(L)},Xe.useActionState=function(L,Y,J){return R.H.useActionState(L,Y,J)},Xe.useCallback=function(L,Y){return R.H.useCallback(L,Y)},Xe.useContext=function(L){return R.H.useContext(L)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(L,Y){return R.H.useDeferredValue(L,Y)},Xe.useEffect=function(L,Y){return R.H.useEffect(L,Y)},Xe.useEffectEvent=function(L){return R.H.useEffectEvent(L)},Xe.useId=function(){return R.H.useId()},Xe.useImperativeHandle=function(L,Y,J){return R.H.useImperativeHandle(L,Y,J)},Xe.useInsertionEffect=function(L,Y){return R.H.useInsertionEffect(L,Y)},Xe.useLayoutEffect=function(L,Y){return R.H.useLayoutEffect(L,Y)},Xe.useMemo=function(L,Y){return R.H.useMemo(L,Y)},Xe.useOptimistic=function(L,Y){return R.H.useOptimistic(L,Y)},Xe.useReducer=function(L,Y,J){return R.H.useReducer(L,Y,J)},Xe.useRef=function(L){return R.H.useRef(L)},Xe.useState=function(L){return R.H.useState(L)},Xe.useSyncExternalStore=function(L,Y,J){return R.H.useSyncExternalStore(L,Y,J)},Xe.useTransition=function(){return R.H.useTransition()},Xe.version="19.2.0",Xe}var gb;function Tc(){return gb||(gb=1,Zf.exports=Fk()),Zf.exports}var E=Tc();const ae=ih(E),qj=$k({__proto__:null,default:ae},[E]);var Jf={exports:{}},Zl={},ep={exports:{}},tp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function Uk(){return vb||(vb=1,(function(t){function s(B,V){var O=B.length;B.push(V);e:for(;0<O;){var H=O-1>>>1,U=B[H];if(0<o(U,V))B[H]=V,B[O]=U,O=H;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var V=B[0],O=B.pop();if(O!==V){B[0]=O;e:for(var H=0,U=B.length,L=U>>>1;H<L;){var Y=2*(H+1)-1,J=B[Y],K=Y+1,Z=B[K];if(0>o(J,O))K<U&&0>o(Z,J)?(B[H]=Z,B[K]=O,H=K):(B[H]=J,B[Y]=O,H=Y);else if(K<U&&0>o(Z,O))B[H]=Z,B[K]=O,H=K;else break e}}return V}function o(B,V){var O=B.sortIndex-V.sortIndex;return O!==0?O:B.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,l=h.now();t.unstable_now=function(){return h.now()-l}}var d=[],f=[],p=1,m=null,y=3,j=!1,S=!1,w=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function C(B){for(var V=n(f);V!==null;){if(V.callback===null)i(f);else if(V.startTime<=B)i(f),V.sortIndex=V.expirationTime,s(d,V);else break;V=n(f)}}function A(B){if(w=!1,C(B),!S)if(n(d)!==null)S=!0,D||(D=!0,W());else{var V=n(f);V!==null&&F(A,V.startTime-B)}}var D=!1,R=-1,k=5,M=-1;function I(){return g?!0:!(t.unstable_now()-M<k)}function q(){if(g=!1,D){var B=t.unstable_now();M=B;var V=!0;try{e:{S=!1,w&&(w=!1,b(R),R=-1),j=!0;var O=y;try{t:{for(C(B),m=n(d);m!==null&&!(m.expirationTime>B&&I());){var H=m.callback;if(typeof H=="function"){m.callback=null,y=m.priorityLevel;var U=H(m.expirationTime<=B);if(B=t.unstable_now(),typeof U=="function"){m.callback=U,C(B),V=!0;break t}m===n(d)&&i(d),C(B)}else i(d);m=n(d)}if(m!==null)V=!0;else{var L=n(f);L!==null&&F(A,L.startTime-B),V=!1}}break e}finally{m=null,y=O,j=!1}V=void 0}}finally{V?W():D=!1}}}var W;if(typeof _=="function")W=function(){_(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,$=G.port2;G.port1.onmessage=q,W=function(){$.postMessage(null)}}else W=function(){v(q,0)};function F(B,V){R=v(function(){B(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var V=3;break;default:V=y}var O=y;y=V;try{return B()}finally{y=O}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var O=y;y=B;try{return V()}finally{y=O}},t.unstable_scheduleCallback=function(B,V,O){var H=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?H+O:H):O=H,B){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=O+U,B={id:p++,callback:V,priorityLevel:B,startTime:O,expirationTime:U,sortIndex:-1},O>H?(B.sortIndex=O,s(f,B),n(d)===null&&B===n(f)&&(w?(b(R),R=-1):w=!0,F(A,O-H))):(B.sortIndex=U,s(d,B),S||j||(S=!0,D||(D=!0,W()))),B},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(B){var V=y;return function(){var O=y;y=V;try{return B.apply(this,arguments)}finally{y=O}}}})(tp)),tp}var yb;function Wk(){return yb||(yb=1,ep.exports=Uk()),ep.exports}var sp={exports:{}},Hs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb;function Vk(){if(bb)return Hs;bb=1;var t=Tc();function s(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Hs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hs.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(s(299));return u(d,f,null,p)},Hs.flushSync=function(d){var f=h.T,p=i.p;try{if(h.T=null,i.p=2,d)return d()}finally{h.T=f,i.p=p,i.d.f()}},Hs.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Hs.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Hs.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=l(p,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,j=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:j}):p==="script"&&i.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:j,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Hs.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=l(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Hs.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=l(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Hs.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=l(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Hs.requestFormReset=function(d){i.d.r(d)},Hs.unstable_batchedUpdates=function(d,f){return d(f)},Hs.useFormState=function(d,f,p){return h.H.useFormState(d,f,p)},Hs.useFormStatus=function(){return h.H.useHostTransitionStatus()},Hs.version="19.2.0",Hs}var _b;function Gj(){if(_b)return sp.exports;_b=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),sp.exports=Vk(),sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function qk(){if(jb)return Zl;jb=1;var t=Wk(),s=Tc(),n=Gj();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function u(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function h(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function l(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(u(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=u(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,x=a;;){var N=c.return;if(N===null)break;var T=N.alternate;if(T===null){if(x=N.return,x!==null){c=x;continue}break}if(N.child===T.child){for(T=N.child;T;){if(T===c)return d(N),r;if(T===x)return d(N),a;T=T.sibling}throw Error(i(188))}if(c.return!==x.return)c=N,x=T;else{for(var z=!1,X=N.child;X;){if(X===c){z=!0,c=N,x=T;break}if(X===x){z=!0,x=N,c=T;break}X=X.sibling}if(!z){for(X=T.child;X;){if(X===c){z=!0,c=T,x=N;break}if(X===x){z=!0,x=T,c=N;break}X=X.sibling}if(!z)throw Error(i(189))}}if(c.alternate!==x)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function p(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=p(r),a!==null)return a;r=r.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),_=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function W(r){return r===null||typeof r!="object"?null:(r=q&&r[q]||r["@@iterator"],typeof r=="function"?r:null)}var G=Symbol.for("react.client.reference");function $(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===G?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case w:return"Fragment";case v:return"Profiler";case g:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList";case M:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case _:return r.displayName||"Context";case b:return(r._context.displayName||"Context")+".Consumer";case C:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return a=r.displayName||null,a!==null?a:$(r.type)||"Memo";case k:a=r._payload,r=r._init;try{return $(r(a))}catch{}}return null}var F=Array.isArray,B=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},H=[],U=-1;function L(r){return{current:r}}function Y(r){0>U||(r.current=H[U],H[U]=null,U--)}function J(r,a){U++,H[U]=r.current,r.current=a}var K=L(null),Z=L(null),oe=L(null),P=L(null);function Q(r,a){switch(J(oe,a),J(Z,r),J(K,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?By(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=By(a),r=Iy(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Y(K),J(K,r)}function ee(){Y(K),Y(Z),Y(oe)}function te(r){r.memoizedState!==null&&J(P,r);var a=K.current,c=Iy(a,r.type);a!==c&&(J(Z,r),J(K,c))}function ye(r){Z.current===r&&(Y(K),Y(Z)),P.current===r&&(Y(P),Gl._currentValue=O)}var me,Ce;function Ue(r){if(me===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);me=a&&a[1]||"",Ce=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+r+Ce}var Ge=!1;function pt(r,a){if(!r||Ge)return"";Ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(a){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(he){var ue=he}Reflect.construct(r,[],_e)}else{try{_e.call()}catch(he){ue=he}r.call(_e.prototype)}}else{try{throw Error()}catch(he){ue=he}(_e=r())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(he){if(he&&ue&&typeof he.stack=="string")return[he.stack,ue.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=x.DetermineComponentFrameRoot(),z=T[0],X=T[1];if(z&&X){var se=z.split(`
`),de=X.split(`
`);for(N=x=0;x<se.length&&!se[x].includes("DetermineComponentFrameRoot");)x++;for(;N<de.length&&!de[N].includes("DetermineComponentFrameRoot");)N++;if(x===se.length||N===de.length)for(x=se.length-1,N=de.length-1;1<=x&&0<=N&&se[x]!==de[N];)N--;for(;1<=x&&0<=N;x--,N--)if(se[x]!==de[N]){if(x!==1||N!==1)do if(x--,N--,0>N||se[x]!==de[N]){var ve=`
`+se[x].replace(" at new "," at ");return r.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",r.displayName)),ve}while(1<=x&&0<=N);break}}}finally{Ge=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ue(c):""}function Ne(r,a){switch(r.tag){case 26:case 27:case 5:return Ue(r.type);case 16:return Ue("Lazy");case 13:return r.child!==a&&a!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return pt(r.type,!1);case 11:return pt(r.type.render,!1);case 1:return pt(r.type,!0);case 31:return Ue("Activity");default:return""}}function ke(r){try{var a="",c=null;do a+=Ne(r,c),c=r,r=r.return;while(r);return a}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var ht=Object.prototype.hasOwnProperty,us=t.unstable_scheduleCallback,Us=t.unstable_cancelCallback,kt=t.unstable_shouldYield,wt=t.unstable_requestPaint,xt=t.unstable_now,qt=t.unstable_getCurrentPriorityLevel,Gt=t.unstable_ImmediatePriority,Ps=t.unstable_UserBlockingPriority,$t=t.unstable_NormalPriority,Ls=t.unstable_LowPriority,Bt=t.unstable_IdlePriority,At=t.log,Ke=t.unstable_setDisableYieldValue,Cs=null,Ht=null;function gs(r){if(typeof At=="function"&&Ke(r),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Cs,r)}catch{}}var Tt=Math.clz32?Math.clz32:Ys,Ir=Math.log,_n=Math.LN2;function Ys(r){return r>>>=0,r===0?32:31-(Ir(r)/_n|0)|0}var _r=256,tn=262144,sn=4194304;function vs(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qe(r,a,c){var x=r.pendingLanes;if(x===0)return 0;var N=0,T=r.suspendedLanes,z=r.pingedLanes;r=r.warmLanes;var X=x&134217727;return X!==0?(x=X&~T,x!==0?N=vs(x):(z&=X,z!==0?N=vs(z):c||(c=X&~r,c!==0&&(N=vs(c))))):(X=x&~T,X!==0?N=vs(X):z!==0?N=vs(z):c||(c=x&~r,c!==0&&(N=vs(c)))),N===0?0:a!==0&&a!==N&&(a&T)===0&&(T=N&-N,c=a&-a,T>=c||T===32&&(c&4194048)!==0)?a:N}function Dt(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function ss(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(){var r=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),r}function rn(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function Mt(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Bs(r,a,c,x,N,T){var z=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var X=r.entanglements,se=r.expirationTimes,de=r.hiddenUpdates;for(c=z&~c;0<c;){var ve=31-Tt(c),_e=1<<ve;X[ve]=0,se[ve]=-1;var ue=de[ve];if(ue!==null)for(de[ve]=null,ve=0;ve<ue.length;ve++){var he=ue[ve];he!==null&&(he.lane&=-536870913)}c&=~_e}x!==0&&jn(r,x,0),T!==0&&N===0&&r.tag!==0&&(r.suspendedLanes|=T&~(z&~a))}function jn(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var x=31-Tt(a);r.entangledLanes|=a,r.entanglements[x]=r.entanglements[x]|1073741824|c&261930}function Is(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var x=31-Tt(c),N=1<<x;N&a|r[x]&a&&(r[x]|=a),c&=~N}}function $s(r,a){var c=a&-a;return c=(c&42)!==0?1:oa(c),(c&(r.suspendedLanes|a))!==0?0:c}function oa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ar(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function il(){var r=V.p;return r!==0?r:(r=window.event,r===void 0?32:ob(r.type))}function $c(r,a){var c=V.p;try{return V.p=r,a()}finally{V.p=c}}var nn=Math.random().toString(36).slice(2),hs="__reactFiber$"+nn,Es="__reactProps$"+nn,la="__reactContainer$"+nn,ol="__reactEvents$"+nn,Hh="__reactListeners$"+nn,zh="__reactHandles$"+nn,Hc="__reactResources$"+nn,Za="__reactMarker$"+nn;function ll(r){delete r[hs],delete r[Es],delete r[ol],delete r[Hh],delete r[zh]}function ca(r){var a=r[hs];if(a)return a;for(var c=r.parentNode;c;){if(a=c[la]||c[hs]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=Vy(r);r!==null;){if(c=r[hs])return c;r=Vy(r)}return a}r=c,c=r.parentNode}return null}function wn(r){if(r=r[hs]||r[la]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Ja(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function da(r){var a=r[Hc];return a||(a=r[Hc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function rs(r){r[Za]=!0}var zc=new Set,Fc={};function Sn(r,a){Nn(r,a),Nn(r+"Capture",a)}function Nn(r,a){for(Fc[r]=a,r=0;r<a.length;r++)zc.add(a[r])}var Fh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uc={},Wc={};function cl(r){return ht.call(Wc,r)?!0:ht.call(Uc,r)?!1:Fh.test(r)?Wc[r]=!0:(Uc[r]=!0,!1)}function Vc(r,a,c){if(cl(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var x=a.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function qc(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function Cn(r,a,c,x){if(x===null)r.removeAttribute(c);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+x)}}function jr(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ag(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function D2(r,a,c){var x=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var N=x.get,T=x.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return N.call(this)},set:function(z){c=""+z,T.call(this,z)}}),Object.defineProperty(r,a,{enumerable:x.enumerable}),{getValue:function(){return c},setValue:function(z){c=""+z},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Uh(r){if(!r._valueTracker){var a=Ag(r)?"checked":"value";r._valueTracker=D2(r,a,""+r[a])}}function Tg(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),x="";return r&&(x=Ag(r)?r.checked?"true":"false":r.value),r=x,r!==c?(a.setValue(r),!0):!1}function Gc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var M2=/[\n"\\]/g;function wr(r){return r.replace(M2,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Wh(r,a,c,x,N,T,z,X){r.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?r.type=z:r.removeAttribute("type"),a!=null?z==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+jr(a)):r.value!==""+jr(a)&&(r.value=""+jr(a)):z!=="submit"&&z!=="reset"||r.removeAttribute("value"),a!=null?Vh(r,z,jr(a)):c!=null?Vh(r,z,jr(c)):x!=null&&r.removeAttribute("value"),N==null&&T!=null&&(r.defaultChecked=!!T),N!=null&&(r.checked=N&&typeof N!="function"&&typeof N!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?r.name=""+jr(X):r.removeAttribute("name")}function Rg(r,a,c,x,N,T,z,X){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.type=T),a!=null||c!=null){if(!(T!=="submit"&&T!=="reset"||a!=null)){Uh(r);return}c=c!=null?""+jr(c):"",a=a!=null?""+jr(a):c,X||a===r.value||(r.value=a),r.defaultValue=a}x=x??N,x=typeof x!="function"&&typeof x!="symbol"&&!!x,r.checked=X?r.checked:!!x,r.defaultChecked=!!x,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(r.name=z),Uh(r)}function Vh(r,a,c){a==="number"&&Gc(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Oi(r,a,c,x){if(r=r.options,a){a={};for(var N=0;N<c.length;N++)a["$"+c[N]]=!0;for(c=0;c<r.length;c++)N=a.hasOwnProperty("$"+r[c].value),r[c].selected!==N&&(r[c].selected=N),N&&x&&(r[c].defaultSelected=!0)}else{for(c=""+jr(c),a=null,N=0;N<r.length;N++){if(r[N].value===c){r[N].selected=!0,x&&(r[N].defaultSelected=!0);return}a!==null||r[N].disabled||(a=r[N])}a!==null&&(a.selected=!0)}}function Dg(r,a,c){if(a!=null&&(a=""+jr(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+jr(c):""}function Mg(r,a,c,x){if(a==null){if(x!=null){if(c!=null)throw Error(i(92));if(F(x)){if(1<x.length)throw Error(i(93));x=x[0]}c=x}c==null&&(c=""),a=c}c=jr(a),r.defaultValue=c,x=r.textContent,x===c&&x!==""&&x!==null&&(r.value=x),Uh(r)}function Pi(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var O2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Og(r,a,c){var x=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?x?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":x?r.setProperty(a,c):typeof c!="number"||c===0||O2.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function Pg(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var x in c)!c.hasOwnProperty(x)||a!=null&&a.hasOwnProperty(x)||(x.indexOf("--")===0?r.setProperty(x,""):x==="float"?r.cssFloat="":r[x]="");for(var N in a)x=a[N],a.hasOwnProperty(N)&&c[N]!==x&&Og(r,N,x)}else for(var T in a)a.hasOwnProperty(T)&&Og(r,T,a[T])}function qh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),L2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yc(r){return L2.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function En(){}var Gh=null;function Yh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Li=null,Bi=null;function Lg(r){var a=wn(r);if(a&&(r=a.stateNode)){var c=r[Es]||null;e:switch(r=a.stateNode,a.type){case"input":if(Wh(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+wr(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var x=c[a];if(x!==r&&x.form===r.form){var N=x[Es]||null;if(!N)throw Error(i(90));Wh(x,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(a=0;a<c.length;a++)x=c[a],x.form===r.form&&Tg(x)}break e;case"textarea":Dg(r,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Oi(r,!!c.multiple,a,!1)}}}var Xh=!1;function Bg(r,a,c){if(Xh)return r(a,c);Xh=!0;try{var x=r(a);return x}finally{if(Xh=!1,(Li!==null||Bi!==null)&&(Pd(),Li&&(a=Li,r=Bi,Bi=Li=null,Lg(a),r)))for(a=0;a<r.length;a++)Lg(r[a])}}function dl(r,a){var c=r.stateNode;if(c===null)return null;var x=c[Es]||null;if(x===null)return null;c=x[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(r=r.type,x=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!x;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kh=!1;if(kn)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Kh=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Kh=!1}var ua=null,Qh=null,Xc=null;function Ig(){if(Xc)return Xc;var r,a=Qh,c=a.length,x,N="value"in ua?ua.value:ua.textContent,T=N.length;for(r=0;r<c&&a[r]===N[r];r++);var z=c-r;for(x=1;x<=z&&a[c-x]===N[T-x];x++);return Xc=N.slice(r,1<x?1-x:void 0)}function Kc(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Qc(){return!0}function $g(){return!1}function Xs(r){function a(c,x,N,T,z){this._reactName=c,this._targetInst=N,this.type=x,this.nativeEvent=T,this.target=z,this.currentTarget=null;for(var X in r)r.hasOwnProperty(X)&&(c=r[X],this[X]=c?c(T):T[X]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Qc:$g,this.isPropagationStopped=$g,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Qc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Qc)},persist:function(){},isPersistent:Qc}),a}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zc=Xs(ei),hl=m({},ei,{view:0,detail:0}),B2=Xs(hl),Zh,Jh,ml,Jc=m({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ml&&(ml&&r.type==="mousemove"?(Zh=r.screenX-ml.screenX,Jh=r.screenY-ml.screenY):Jh=Zh=0,ml=r),Zh)},movementY:function(r){return"movementY"in r?r.movementY:Jh}}),Hg=Xs(Jc),I2=m({},Jc,{dataTransfer:0}),$2=Xs(I2),H2=m({},hl,{relatedTarget:0}),em=Xs(H2),z2=m({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),F2=Xs(z2),U2=m({},ei,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),W2=Xs(U2),V2=m({},ei,{data:0}),zg=Xs(V2),q2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X2(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Y2[r])?!!a[r]:!1}function tm(){return X2}var K2=m({},hl,{key:function(r){if(r.key){var a=q2[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Kc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?G2[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(r){return r.type==="keypress"?Kc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Kc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Q2=Xs(K2),Z2=m({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fg=Xs(Z2),J2=m({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),eE=Xs(J2),tE=m({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),sE=Xs(tE),rE=m({},Jc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=Xs(rE),aE=m({},ei,{newState:0,oldState:0}),iE=Xs(aE),oE=[9,13,27,32],sm=kn&&"CompositionEvent"in window,fl=null;kn&&"documentMode"in document&&(fl=document.documentMode);var lE=kn&&"TextEvent"in window&&!fl,Ug=kn&&(!sm||fl&&8<fl&&11>=fl),Wg=" ",Vg=!1;function qg(r,a){switch(r){case"keyup":return oE.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ii=!1;function cE(r,a){switch(r){case"compositionend":return Gg(a);case"keypress":return a.which!==32?null:(Vg=!0,Wg);case"textInput":return r=a.data,r===Wg&&Vg?null:r;default:return null}}function dE(r,a){if(Ii)return r==="compositionend"||!sm&&qg(r,a)?(r=Ig(),Xc=Qh=ua=null,Ii=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ug&&a.locale!=="ko"?null:a.data;default:return null}}var uE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yg(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!uE[r.type]:a==="textarea"}function Xg(r,a,c,x){Li?Bi?Bi.push(x):Bi=[x]:Li=x,a=Fd(a,"onChange"),0<a.length&&(c=new Zc("onChange","change",null,c,x),r.push({event:c,listeners:a}))}var pl=null,xl=null;function hE(r){Ry(r,0)}function ed(r){var a=Ja(r);if(Tg(a))return r}function Kg(r,a){if(r==="change")return a}var Qg=!1;if(kn){var rm;if(kn){var nm="oninput"in document;if(!nm){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),nm=typeof Zg.oninput=="function"}rm=nm}else rm=!1;Qg=rm&&(!document.documentMode||9<document.documentMode)}function Jg(){pl&&(pl.detachEvent("onpropertychange",e0),xl=pl=null)}function e0(r){if(r.propertyName==="value"&&ed(xl)){var a=[];Xg(a,xl,r,Yh(r)),Bg(hE,a)}}function mE(r,a,c){r==="focusin"?(Jg(),pl=a,xl=c,pl.attachEvent("onpropertychange",e0)):r==="focusout"&&Jg()}function fE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ed(xl)}function pE(r,a){if(r==="click")return ed(a)}function xE(r,a){if(r==="input"||r==="change")return ed(a)}function gE(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var ir=typeof Object.is=="function"?Object.is:gE;function gl(r,a){if(ir(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),x=Object.keys(a);if(c.length!==x.length)return!1;for(x=0;x<c.length;x++){var N=c[x];if(!ht.call(a,N)||!ir(r[N],a[N]))return!1}return!0}function t0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function s0(r,a){var c=t0(r);r=0;for(var x;c;){if(c.nodeType===3){if(x=r+c.textContent.length,r<=a&&x>=a)return{node:c,offset:a-r};r=x}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=t0(c)}}function r0(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?r0(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function n0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Gc(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=Gc(r.document)}return a}function am(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var vE=kn&&"documentMode"in document&&11>=document.documentMode,$i=null,im=null,vl=null,om=!1;function a0(r,a,c){var x=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;om||$i==null||$i!==Gc(x)||(x=$i,"selectionStart"in x&&am(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),vl&&gl(vl,x)||(vl=x,x=Fd(im,"onSelect"),0<x.length&&(a=new Zc("onSelect","select",null,a,c),r.push({event:a,listeners:x}),a.target=$i)))}function ti(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var Hi={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionrun:ti("Transition","TransitionRun"),transitionstart:ti("Transition","TransitionStart"),transitioncancel:ti("Transition","TransitionCancel"),transitionend:ti("Transition","TransitionEnd")},lm={},i0={};kn&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function si(r){if(lm[r])return lm[r];if(!Hi[r])return r;var a=Hi[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in i0)return lm[r]=a[c];return r}var o0=si("animationend"),l0=si("animationiteration"),c0=si("animationstart"),yE=si("transitionrun"),bE=si("transitionstart"),_E=si("transitioncancel"),d0=si("transitionend"),u0=new Map,cm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cm.push("scrollEnd");function $r(r,a){u0.set(r,a),Sn(a,[r])}var td=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Sr=[],zi=0,dm=0;function sd(){for(var r=zi,a=dm=zi=0;a<r;){var c=Sr[a];Sr[a++]=null;var x=Sr[a];Sr[a++]=null;var N=Sr[a];Sr[a++]=null;var T=Sr[a];if(Sr[a++]=null,x!==null&&N!==null){var z=x.pending;z===null?N.next=N:(N.next=z.next,z.next=N),x.pending=N}T!==0&&h0(c,N,T)}}function rd(r,a,c,x){Sr[zi++]=r,Sr[zi++]=a,Sr[zi++]=c,Sr[zi++]=x,dm|=x,r.lanes|=x,r=r.alternate,r!==null&&(r.lanes|=x)}function um(r,a,c,x){return rd(r,a,c,x),nd(r)}function ri(r,a){return rd(r,null,null,a),nd(r)}function h0(r,a,c){r.lanes|=c;var x=r.alternate;x!==null&&(x.lanes|=c);for(var N=!1,T=r.return;T!==null;)T.childLanes|=c,x=T.alternate,x!==null&&(x.childLanes|=c),T.tag===22&&(r=T.stateNode,r===null||r._visibility&1||(N=!0)),r=T,T=T.return;return r.tag===3?(T=r.stateNode,N&&a!==null&&(N=31-Tt(c),r=T.hiddenUpdates,x=r[N],x===null?r[N]=[a]:x.push(a),a.lane=c|536870912),T):null}function nd(r){if(50<Hl)throw Hl=0,_f=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Fi={};function jE(r,a,c,x){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(r,a,c,x){return new jE(r,a,c,x)}function hm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function An(r,a){var c=r.alternate;return c===null?(c=or(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function m0(r,a){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function ad(r,a,c,x,N,T){var z=0;if(x=r,typeof r=="function")hm(r)&&(z=1);else if(typeof r=="string")z=Ek(r,c,K.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case M:return r=or(31,c,a,N),r.elementType=M,r.lanes=T,r;case w:return ni(c.children,N,T,a);case g:z=8,N|=24;break;case v:return r=or(12,c,a,N|2),r.elementType=v,r.lanes=T,r;case A:return r=or(13,c,a,N),r.elementType=A,r.lanes=T,r;case D:return r=or(19,c,a,N),r.elementType=D,r.lanes=T,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:z=10;break e;case b:z=9;break e;case C:z=11;break e;case R:z=14;break e;case k:z=16,x=null;break e}z=29,c=Error(i(130,r===null?"null":typeof r,"")),x=null}return a=or(z,c,a,N),a.elementType=r,a.type=x,a.lanes=T,a}function ni(r,a,c,x){return r=or(7,r,x,a),r.lanes=c,r}function mm(r,a,c){return r=or(6,r,null,a),r.lanes=c,r}function f0(r){var a=or(18,null,null,0);return a.stateNode=r,a}function fm(r,a,c){return a=or(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var p0=new WeakMap;function Nr(r,a){if(typeof r=="object"&&r!==null){var c=p0.get(r);return c!==void 0?c:(a={value:r,source:a,stack:ke(a)},p0.set(r,a),a)}return{value:r,source:a,stack:ke(a)}}var Ui=[],Wi=0,id=null,yl=0,Cr=[],Er=0,ha=null,an=1,on="";function Tn(r,a){Ui[Wi++]=yl,Ui[Wi++]=id,id=r,yl=a}function x0(r,a,c){Cr[Er++]=an,Cr[Er++]=on,Cr[Er++]=ha,ha=r;var x=an;r=on;var N=32-Tt(x)-1;x&=~(1<<N),c+=1;var T=32-Tt(a)+N;if(30<T){var z=N-N%5;T=(x&(1<<z)-1).toString(32),x>>=z,N-=z,an=1<<32-Tt(a)+N|c<<N|x,on=T+r}else an=1<<T|c<<N|x,on=r}function pm(r){r.return!==null&&(Tn(r,1),x0(r,1,0))}function xm(r){for(;r===id;)id=Ui[--Wi],Ui[Wi]=null,yl=Ui[--Wi],Ui[Wi]=null;for(;r===ha;)ha=Cr[--Er],Cr[Er]=null,on=Cr[--Er],Cr[Er]=null,an=Cr[--Er],Cr[Er]=null}function g0(r,a){Cr[Er++]=an,Cr[Er++]=on,Cr[Er++]=ha,an=a.id,on=a.overflow,ha=r}var ks=null,Ot=null,dt=!1,ma=null,kr=!1,gm=Error(i(519));function fa(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(Nr(a,r)),gm}function v0(r){var a=r.stateNode,c=r.type,x=r.memoizedProps;switch(a[hs]=r,a[Es]=x,c){case"dialog":it("cancel",a),it("close",a);break;case"iframe":case"object":case"embed":it("load",a);break;case"video":case"audio":for(c=0;c<Fl.length;c++)it(Fl[c],a);break;case"source":it("error",a);break;case"img":case"image":case"link":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"input":it("invalid",a),Rg(a,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":it("invalid",a);break;case"textarea":it("invalid",a),Mg(a,x.value,x.defaultValue,x.children)}c=x.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||x.suppressHydrationWarning===!0||Py(a.textContent,c)?(x.popover!=null&&(it("beforetoggle",a),it("toggle",a)),x.onScroll!=null&&it("scroll",a),x.onScrollEnd!=null&&it("scrollend",a),x.onClick!=null&&(a.onclick=En),a=!0):a=!1,a||fa(r,!0)}function y0(r){for(ks=r.return;ks;)switch(ks.tag){case 5:case 31:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:ks=ks.return}}function Vi(r){if(r!==ks)return!1;if(!dt)return y0(r),dt=!0,!1;var a=r.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Lf(r.type,r.memoizedProps)),c=!c),c&&Ot&&fa(r),y0(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=Wy(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=Wy(r)}else a===27?(a=Ot,ka(r.type)?(r=zf,zf=null,Ot=r):Ot=a):Ot=ks?Tr(r.stateNode.nextSibling):null;return!0}function ai(){Ot=ks=null,dt=!1}function vm(){var r=ma;return r!==null&&(Js===null?Js=r:Js.push.apply(Js,r),ma=null),r}function bl(r){ma===null?ma=[r]:ma.push(r)}var ym=L(null),ii=null,Rn=null;function pa(r,a,c){J(ym,a._currentValue),a._currentValue=c}function Dn(r){r._currentValue=ym.current,Y(ym)}function bm(r,a,c){for(;r!==null;){var x=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,x!==null&&(x.childLanes|=a)):x!==null&&(x.childLanes&a)!==a&&(x.childLanes|=a),r===c)break;r=r.return}}function _m(r,a,c,x){var N=r.child;for(N!==null&&(N.return=r);N!==null;){var T=N.dependencies;if(T!==null){var z=N.child;T=T.firstContext;e:for(;T!==null;){var X=T;T=N;for(var se=0;se<a.length;se++)if(X.context===a[se]){T.lanes|=c,X=T.alternate,X!==null&&(X.lanes|=c),bm(T.return,c,r),x||(z=null);break e}T=X.next}}else if(N.tag===18){if(z=N.return,z===null)throw Error(i(341));z.lanes|=c,T=z.alternate,T!==null&&(T.lanes|=c),bm(z,c,r),z=null}else z=N.child;if(z!==null)z.return=N;else for(z=N;z!==null;){if(z===r){z=null;break}if(N=z.sibling,N!==null){N.return=z.return,z=N;break}z=z.return}N=z}}function qi(r,a,c,x){r=null;for(var N=a,T=!1;N!==null;){if(!T){if((N.flags&524288)!==0)T=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var z=N.alternate;if(z===null)throw Error(i(387));if(z=z.memoizedProps,z!==null){var X=N.type;ir(N.pendingProps.value,z.value)||(r!==null?r.push(X):r=[X])}}else if(N===P.current){if(z=N.alternate,z===null)throw Error(i(387));z.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(r!==null?r.push(Gl):r=[Gl])}N=N.return}r!==null&&_m(a,r,c,x),a.flags|=262144}function od(r){for(r=r.firstContext;r!==null;){if(!ir(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function oi(r){ii=r,Rn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function As(r){return b0(ii,r)}function ld(r,a){return ii===null&&oi(r),b0(r,a)}function b0(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Rn===null){if(r===null)throw Error(i(308));Rn=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Rn=Rn.next=a;return c}var wE=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,x){r.push(x)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},SE=t.unstable_scheduleCallback,NE=t.unstable_NormalPriority,ns={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jm(){return{controller:new wE,data:new Map,refCount:0}}function _l(r){r.refCount--,r.refCount===0&&SE(NE,function(){r.controller.abort()})}var jl=null,wm=0,Gi=0,Yi=null;function CE(r,a){if(jl===null){var c=jl=[];wm=0,Gi=Ef(),Yi={status:"pending",value:void 0,then:function(x){c.push(x)}}}return wm++,a.then(_0,_0),a}function _0(){if(--wm===0&&jl!==null){Yi!==null&&(Yi.status="fulfilled");var r=jl;jl=null,Gi=0,Yi=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function EE(r,a){var c=[],x={status:"pending",value:null,reason:null,then:function(N){c.push(N)}};return r.then(function(){x.status="fulfilled",x.value=a;for(var N=0;N<c.length;N++)(0,c[N])(a)},function(N){for(x.status="rejected",x.reason=N,N=0;N<c.length;N++)(0,c[N])(void 0)}),x}var j0=B.S;B.S=function(r,a){ay=xt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&CE(r,a),j0!==null&&j0(r,a)};var li=L(null);function Sm(){var r=li.current;return r!==null?r:Rt.pooledCache}function cd(r,a){a===null?J(li,li.current):J(li,a.pool)}function w0(){var r=Sm();return r===null?null:{parent:ns._currentValue,pool:r}}var Xi=Error(i(460)),Nm=Error(i(474)),dd=Error(i(542)),ud={then:function(){}};function S0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function N0(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(En,En),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,E0(r),r;default:if(typeof a.status=="string")a.then(En,En);else{if(r=Rt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(x){if(a.status==="pending"){var N=a;N.status="fulfilled",N.value=x}},function(x){if(a.status==="pending"){var N=a;N.status="rejected",N.reason=x}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,E0(r),r}throw di=a,Xi}}function ci(r){try{var a=r._init;return a(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(di=c,Xi):c}}var di=null;function C0(){if(di===null)throw Error(i(459));var r=di;return di=null,r}function E0(r){if(r===Xi||r===dd)throw Error(i(483))}var Ki=null,wl=0;function hd(r){var a=wl;return wl+=1,Ki===null&&(Ki=[]),N0(Ki,r,a)}function Sl(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function md(r,a){throw a.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function k0(r){function a(le,ne){if(r){var ce=le.deletions;ce===null?(le.deletions=[ne],le.flags|=16):ce.push(ne)}}function c(le,ne){if(!r)return null;for(;ne!==null;)a(le,ne),ne=ne.sibling;return null}function x(le){for(var ne=new Map;le!==null;)le.key!==null?ne.set(le.key,le):ne.set(le.index,le),le=le.sibling;return ne}function N(le,ne){return le=An(le,ne),le.index=0,le.sibling=null,le}function T(le,ne,ce){return le.index=ce,r?(ce=le.alternate,ce!==null?(ce=ce.index,ce<ne?(le.flags|=67108866,ne):ce):(le.flags|=67108866,ne)):(le.flags|=1048576,ne)}function z(le){return r&&le.alternate===null&&(le.flags|=67108866),le}function X(le,ne,ce,be){return ne===null||ne.tag!==6?(ne=mm(ce,le.mode,be),ne.return=le,ne):(ne=N(ne,ce),ne.return=le,ne)}function se(le,ne,ce,be){var He=ce.type;return He===w?ve(le,ne,ce.props.children,be,ce.key):ne!==null&&(ne.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===k&&ci(He)===ne.type)?(ne=N(ne,ce.props),Sl(ne,ce),ne.return=le,ne):(ne=ad(ce.type,ce.key,ce.props,null,le.mode,be),Sl(ne,ce),ne.return=le,ne)}function de(le,ne,ce,be){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ce.containerInfo||ne.stateNode.implementation!==ce.implementation?(ne=fm(ce,le.mode,be),ne.return=le,ne):(ne=N(ne,ce.children||[]),ne.return=le,ne)}function ve(le,ne,ce,be,He){return ne===null||ne.tag!==7?(ne=ni(ce,le.mode,be,He),ne.return=le,ne):(ne=N(ne,ce),ne.return=le,ne)}function _e(le,ne,ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=mm(""+ne,le.mode,ce),ne.return=le,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case j:return ce=ad(ne.type,ne.key,ne.props,null,le.mode,ce),Sl(ce,ne),ce.return=le,ce;case S:return ne=fm(ne,le.mode,ce),ne.return=le,ne;case k:return ne=ci(ne),_e(le,ne,ce)}if(F(ne)||W(ne))return ne=ni(ne,le.mode,ce,null),ne.return=le,ne;if(typeof ne.then=="function")return _e(le,hd(ne),ce);if(ne.$$typeof===_)return _e(le,ld(le,ne),ce);md(le,ne)}return null}function ue(le,ne,ce,be){var He=ne!==null?ne.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return He!==null?null:X(le,ne,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:return ce.key===He?se(le,ne,ce,be):null;case S:return ce.key===He?de(le,ne,ce,be):null;case k:return ce=ci(ce),ue(le,ne,ce,be)}if(F(ce)||W(ce))return He!==null?null:ve(le,ne,ce,be,null);if(typeof ce.then=="function")return ue(le,ne,hd(ce),be);if(ce.$$typeof===_)return ue(le,ne,ld(le,ce),be);md(le,ce)}return null}function he(le,ne,ce,be,He){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return le=le.get(ce)||null,X(ne,le,""+be,He);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case j:return le=le.get(be.key===null?ce:be.key)||null,se(ne,le,be,He);case S:return le=le.get(be.key===null?ce:be.key)||null,de(ne,le,be,He);case k:return be=ci(be),he(le,ne,ce,be,He)}if(F(be)||W(be))return le=le.get(ce)||null,ve(ne,le,be,He,null);if(typeof be.then=="function")return he(le,ne,ce,hd(be),He);if(be.$$typeof===_)return he(le,ne,ce,ld(ne,be),He);md(ne,be)}return null}function Ae(le,ne,ce,be){for(var He=null,mt=null,Oe=ne,et=ne=0,lt=null;Oe!==null&&et<ce.length;et++){Oe.index>et?(lt=Oe,Oe=null):lt=Oe.sibling;var ft=ue(le,Oe,ce[et],be);if(ft===null){Oe===null&&(Oe=lt);break}r&&Oe&&ft.alternate===null&&a(le,Oe),ne=T(ft,ne,et),mt===null?He=ft:mt.sibling=ft,mt=ft,Oe=lt}if(et===ce.length)return c(le,Oe),dt&&Tn(le,et),He;if(Oe===null){for(;et<ce.length;et++)Oe=_e(le,ce[et],be),Oe!==null&&(ne=T(Oe,ne,et),mt===null?He=Oe:mt.sibling=Oe,mt=Oe);return dt&&Tn(le,et),He}for(Oe=x(Oe);et<ce.length;et++)lt=he(Oe,le,et,ce[et],be),lt!==null&&(r&&lt.alternate!==null&&Oe.delete(lt.key===null?et:lt.key),ne=T(lt,ne,et),mt===null?He=lt:mt.sibling=lt,mt=lt);return r&&Oe.forEach(function(Ma){return a(le,Ma)}),dt&&Tn(le,et),He}function Ve(le,ne,ce,be){if(ce==null)throw Error(i(151));for(var He=null,mt=null,Oe=ne,et=ne=0,lt=null,ft=ce.next();Oe!==null&&!ft.done;et++,ft=ce.next()){Oe.index>et?(lt=Oe,Oe=null):lt=Oe.sibling;var Ma=ue(le,Oe,ft.value,be);if(Ma===null){Oe===null&&(Oe=lt);break}r&&Oe&&Ma.alternate===null&&a(le,Oe),ne=T(Ma,ne,et),mt===null?He=Ma:mt.sibling=Ma,mt=Ma,Oe=lt}if(ft.done)return c(le,Oe),dt&&Tn(le,et),He;if(Oe===null){for(;!ft.done;et++,ft=ce.next())ft=_e(le,ft.value,be),ft!==null&&(ne=T(ft,ne,et),mt===null?He=ft:mt.sibling=ft,mt=ft);return dt&&Tn(le,et),He}for(Oe=x(Oe);!ft.done;et++,ft=ce.next())ft=he(Oe,le,et,ft.value,be),ft!==null&&(r&&ft.alternate!==null&&Oe.delete(ft.key===null?et:ft.key),ne=T(ft,ne,et),mt===null?He=ft:mt.sibling=ft,mt=ft);return r&&Oe.forEach(function(Ik){return a(le,Ik)}),dt&&Tn(le,et),He}function Ct(le,ne,ce,be){if(typeof ce=="object"&&ce!==null&&ce.type===w&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:e:{for(var He=ce.key;ne!==null;){if(ne.key===He){if(He=ce.type,He===w){if(ne.tag===7){c(le,ne.sibling),be=N(ne,ce.props.children),be.return=le,le=be;break e}}else if(ne.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===k&&ci(He)===ne.type){c(le,ne.sibling),be=N(ne,ce.props),Sl(be,ce),be.return=le,le=be;break e}c(le,ne);break}else a(le,ne);ne=ne.sibling}ce.type===w?(be=ni(ce.props.children,le.mode,be,ce.key),be.return=le,le=be):(be=ad(ce.type,ce.key,ce.props,null,le.mode,be),Sl(be,ce),be.return=le,le=be)}return z(le);case S:e:{for(He=ce.key;ne!==null;){if(ne.key===He)if(ne.tag===4&&ne.stateNode.containerInfo===ce.containerInfo&&ne.stateNode.implementation===ce.implementation){c(le,ne.sibling),be=N(ne,ce.children||[]),be.return=le,le=be;break e}else{c(le,ne);break}else a(le,ne);ne=ne.sibling}be=fm(ce,le.mode,be),be.return=le,le=be}return z(le);case k:return ce=ci(ce),Ct(le,ne,ce,be)}if(F(ce))return Ae(le,ne,ce,be);if(W(ce)){if(He=W(ce),typeof He!="function")throw Error(i(150));return ce=He.call(ce),Ve(le,ne,ce,be)}if(typeof ce.then=="function")return Ct(le,ne,hd(ce),be);if(ce.$$typeof===_)return Ct(le,ne,ld(le,ce),be);md(le,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ne!==null&&ne.tag===6?(c(le,ne.sibling),be=N(ne,ce),be.return=le,le=be):(c(le,ne),be=mm(ce,le.mode,be),be.return=le,le=be),z(le)):c(le,ne)}return function(le,ne,ce,be){try{wl=0;var He=Ct(le,ne,ce,be);return Ki=null,He}catch(Oe){if(Oe===Xi||Oe===dd)throw Oe;var mt=or(29,Oe,null,le.mode);return mt.lanes=be,mt.return=le,mt}finally{}}}var ui=k0(!0),A0=k0(!1),xa=!1;function Cm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Em(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ga(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function va(r,a,c){var x=r.updateQueue;if(x===null)return null;if(x=x.shared,(gt&2)!==0){var N=x.pending;return N===null?a.next=a:(a.next=N.next,N.next=a),x.pending=a,a=nd(r),h0(r,null,c),a}return rd(r,x,a,c),nd(r)}function Nl(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var x=a.lanes;x&=r.pendingLanes,c|=x,a.lanes=c,Is(r,c)}}function km(r,a){var c=r.updateQueue,x=r.alternate;if(x!==null&&(x=x.updateQueue,c===x)){var N=null,T=null;if(c=c.firstBaseUpdate,c!==null){do{var z={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};T===null?N=T=z:T=T.next=z,c=c.next}while(c!==null);T===null?N=T=a:T=T.next=a}else N=T=a;c={baseState:x.baseState,firstBaseUpdate:N,lastBaseUpdate:T,shared:x.shared,callbacks:x.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var Am=!1;function Cl(){if(Am){var r=Yi;if(r!==null)throw r}}function El(r,a,c,x){Am=!1;var N=r.updateQueue;xa=!1;var T=N.firstBaseUpdate,z=N.lastBaseUpdate,X=N.shared.pending;if(X!==null){N.shared.pending=null;var se=X,de=se.next;se.next=null,z===null?T=de:z.next=de,z=se;var ve=r.alternate;ve!==null&&(ve=ve.updateQueue,X=ve.lastBaseUpdate,X!==z&&(X===null?ve.firstBaseUpdate=de:X.next=de,ve.lastBaseUpdate=se))}if(T!==null){var _e=N.baseState;z=0,ve=de=se=null,X=T;do{var ue=X.lane&-536870913,he=ue!==X.lane;if(he?(ot&ue)===ue:(x&ue)===ue){ue!==0&&ue===Gi&&(Am=!0),ve!==null&&(ve=ve.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Ae=r,Ve=X;ue=a;var Ct=c;switch(Ve.tag){case 1:if(Ae=Ve.payload,typeof Ae=="function"){_e=Ae.call(Ct,_e,ue);break e}_e=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ve.payload,ue=typeof Ae=="function"?Ae.call(Ct,_e,ue):Ae,ue==null)break e;_e=m({},_e,ue);break e;case 2:xa=!0}}ue=X.callback,ue!==null&&(r.flags|=64,he&&(r.flags|=8192),he=N.callbacks,he===null?N.callbacks=[ue]:he.push(ue))}else he={lane:ue,tag:X.tag,payload:X.payload,callback:X.callback,next:null},ve===null?(de=ve=he,se=_e):ve=ve.next=he,z|=ue;if(X=X.next,X===null){if(X=N.shared.pending,X===null)break;he=X,X=he.next,he.next=null,N.lastBaseUpdate=he,N.shared.pending=null}}while(!0);ve===null&&(se=_e),N.baseState=se,N.firstBaseUpdate=de,N.lastBaseUpdate=ve,T===null&&(N.shared.lanes=0),wa|=z,r.lanes=z,r.memoizedState=_e}}function T0(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function R0(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)T0(c[r],a)}var Qi=L(null),fd=L(0);function D0(r,a){r=zn,J(fd,r),J(Qi,a),zn=r|a.baseLanes}function Tm(){J(fd,zn),J(Qi,Qi.current)}function Rm(){zn=fd.current,Y(Qi),Y(fd)}var lr=L(null),Ar=null;function ya(r){var a=r.alternate;J(Yt,Yt.current&1),J(lr,r),Ar===null&&(a===null||Qi.current!==null||a.memoizedState!==null)&&(Ar=r)}function Dm(r){J(Yt,Yt.current),J(lr,r),Ar===null&&(Ar=r)}function M0(r){r.tag===22?(J(Yt,Yt.current),J(lr,r),Ar===null&&(Ar=r)):ba()}function ba(){J(Yt,Yt.current),J(lr,lr.current)}function cr(r){Y(lr),Ar===r&&(Ar=null),Y(Yt)}var Yt=L(0);function pd(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||$f(c)||Hf(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Mn=0,Ze=null,St=null,as=null,xd=!1,Zi=!1,hi=!1,gd=0,kl=0,Ji=null,kE=0;function Ft(){throw Error(i(321))}function Mm(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!ir(r[c],a[c]))return!1;return!0}function Om(r,a,c,x,N,T){return Mn=T,Ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=r===null||r.memoizedState===null?xv:Xm,hi=!1,T=c(x,N),hi=!1,Zi&&(T=P0(a,c,x,N)),O0(r),T}function O0(r){B.H=Rl;var a=St!==null&&St.next!==null;if(Mn=0,as=St=Ze=null,xd=!1,kl=0,Ji=null,a)throw Error(i(300));r===null||is||(r=r.dependencies,r!==null&&od(r)&&(is=!0))}function P0(r,a,c,x){Ze=r;var N=0;do{if(Zi&&(Ji=null),kl=0,Zi=!1,25<=N)throw Error(i(301));if(N+=1,as=St=null,r.updateQueue!=null){var T=r.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}B.H=gv,T=a(c,x)}while(Zi);return T}function AE(){var r=B.H,a=r.useState()[0];return a=typeof a.then=="function"?Al(a):a,r=r.useState()[0],(St!==null?St.memoizedState:null)!==r&&(Ze.flags|=1024),a}function Pm(){var r=gd!==0;return gd=0,r}function Lm(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function Bm(r){if(xd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}xd=!1}Mn=0,as=St=Ze=null,Zi=!1,kl=gd=0,Ji=null}function Ws(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return as===null?Ze.memoizedState=as=r:as=as.next=r,as}function Xt(){if(St===null){var r=Ze.alternate;r=r!==null?r.memoizedState:null}else r=St.next;var a=as===null?Ze.memoizedState:as.next;if(a!==null)as=a,St=r;else{if(r===null)throw Ze.alternate===null?Error(i(467)):Error(i(310));St=r,r={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},as===null?Ze.memoizedState=as=r:as=as.next=r}return as}function vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(r){var a=kl;return kl+=1,Ji===null&&(Ji=[]),r=N0(Ji,r,a),a=Ze,(as===null?a.memoizedState:as.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?xv:Xm),r}function yd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Al(r);if(r.$$typeof===_)return As(r)}throw Error(i(438,String(r)))}function Im(r){var a=null,c=Ze.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var x=Ze.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(a={data:x.data.map(function(N){return N.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=vd(),Ze.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),x=0;x<r;x++)c[x]=I;return a.index++,c}function On(r,a){return typeof a=="function"?a(r):a}function bd(r){var a=Xt();return $m(a,St,r)}function $m(r,a,c){var x=r.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=c;var N=r.baseQueue,T=x.pending;if(T!==null){if(N!==null){var z=N.next;N.next=T.next,T.next=z}a.baseQueue=N=T,x.pending=null}if(T=r.baseState,N===null)r.memoizedState=T;else{a=N.next;var X=z=null,se=null,de=a,ve=!1;do{var _e=de.lane&-536870913;if(_e!==de.lane?(ot&_e)===_e:(Mn&_e)===_e){var ue=de.revertLane;if(ue===0)se!==null&&(se=se.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),_e===Gi&&(ve=!0);else if((Mn&ue)===ue){de=de.next,ue===Gi&&(ve=!0);continue}else _e={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},se===null?(X=se=_e,z=T):se=se.next=_e,Ze.lanes|=ue,wa|=ue;_e=de.action,hi&&c(T,_e),T=de.hasEagerState?de.eagerState:c(T,_e)}else ue={lane:_e,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},se===null?(X=se=ue,z=T):se=se.next=ue,Ze.lanes|=_e,wa|=_e;de=de.next}while(de!==null&&de!==a);if(se===null?z=T:se.next=X,!ir(T,r.memoizedState)&&(is=!0,ve&&(c=Yi,c!==null)))throw c;r.memoizedState=T,r.baseState=z,r.baseQueue=se,x.lastRenderedState=T}return N===null&&(x.lanes=0),[r.memoizedState,x.dispatch]}function Hm(r){var a=Xt(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var x=c.dispatch,N=c.pending,T=a.memoizedState;if(N!==null){c.pending=null;var z=N=N.next;do T=r(T,z.action),z=z.next;while(z!==N);ir(T,a.memoizedState)||(is=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),c.lastRenderedState=T}return[T,x]}function L0(r,a,c){var x=Ze,N=Xt(),T=dt;if(T){if(c===void 0)throw Error(i(407));c=c()}else c=a();var z=!ir((St||N).memoizedState,c);if(z&&(N.memoizedState=c,is=!0),N=N.queue,Um($0.bind(null,x,N,r),[r]),N.getSnapshot!==a||z||as!==null&&as.memoizedState.tag&1){if(x.flags|=2048,eo(9,{destroy:void 0},I0.bind(null,x,N,c,a),null),Rt===null)throw Error(i(349));T||(Mn&127)!==0||B0(x,a,c)}return c}function B0(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=Ze.updateQueue,a===null?(a=vd(),Ze.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function I0(r,a,c,x){a.value=c,a.getSnapshot=x,H0(a)&&z0(r)}function $0(r,a,c){return c(function(){H0(a)&&z0(r)})}function H0(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!ir(r,c)}catch{return!0}}function z0(r){var a=ri(r,2);a!==null&&er(a,r,2)}function zm(r){var a=Ws();if(typeof r=="function"){var c=r;if(r=c(),hi){gs(!0);try{c()}finally{gs(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:r},a}function F0(r,a,c,x){return r.baseState=c,$m(r,St,typeof x=="function"?x:On)}function TE(r,a,c,x,N){if(wd(r))throw Error(i(485));if(r=a.action,r!==null){var T={payload:N,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){T.listeners.push(z)}};B.T!==null?c(!0):T.isTransition=!1,x(T),c=a.pending,c===null?(T.next=a.pending=T,U0(a,T)):(T.next=c.next,a.pending=c.next=T)}}function U0(r,a){var c=a.action,x=a.payload,N=r.state;if(a.isTransition){var T=B.T,z={};B.T=z;try{var X=c(N,x),se=B.S;se!==null&&se(z,X),W0(r,a,X)}catch(de){Fm(r,a,de)}finally{T!==null&&z.types!==null&&(T.types=z.types),B.T=T}}else try{T=c(N,x),W0(r,a,T)}catch(de){Fm(r,a,de)}}function W0(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(x){V0(r,a,x)},function(x){return Fm(r,a,x)}):V0(r,a,c)}function V0(r,a,c){a.status="fulfilled",a.value=c,q0(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,U0(r,c)))}function Fm(r,a,c){var x=r.pending;if(r.pending=null,x!==null){x=x.next;do a.status="rejected",a.reason=c,q0(a),a=a.next;while(a!==x)}r.action=null}function q0(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function G0(r,a){return a}function Y0(r,a){if(dt){var c=Rt.formState;if(c!==null){e:{var x=Ze;if(dt){if(Ot){t:{for(var N=Ot,T=kr;N.nodeType!==8;){if(!T){N=null;break t}if(N=Tr(N.nextSibling),N===null){N=null;break t}}T=N.data,N=T==="F!"||T==="F"?N:null}if(N){Ot=Tr(N.nextSibling),x=N.data==="F!";break e}}fa(x)}x=!1}x&&(a=c[0])}}return c=Ws(),c.memoizedState=c.baseState=a,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G0,lastRenderedState:a},c.queue=x,c=mv.bind(null,Ze,x),x.dispatch=c,x=zm(!1),T=Ym.bind(null,Ze,!1,x.queue),x=Ws(),N={state:a,dispatch:null,action:r,pending:null},x.queue=N,c=TE.bind(null,Ze,N,T,c),N.dispatch=c,x.memoizedState=r,[a,c,!1]}function X0(r){var a=Xt();return K0(a,St,r)}function K0(r,a,c){if(a=$m(r,a,G0)[0],r=bd(On)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var x=Al(a)}catch(z){throw z===Xi?dd:z}else x=a;a=Xt();var N=a.queue,T=N.dispatch;return c!==a.memoizedState&&(Ze.flags|=2048,eo(9,{destroy:void 0},RE.bind(null,N,c),null)),[x,T,r]}function RE(r,a){r.action=a}function Q0(r){var a=Xt(),c=St;if(c!==null)return K0(a,c,r);Xt(),a=a.memoizedState,c=Xt();var x=c.queue.dispatch;return c.memoizedState=r,[a,x,!1]}function eo(r,a,c,x){return r={tag:r,create:c,deps:x,inst:a,next:null},a=Ze.updateQueue,a===null&&(a=vd(),Ze.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(x=c.next,c.next=r,r.next=x,a.lastEffect=r),r}function Z0(){return Xt().memoizedState}function _d(r,a,c,x){var N=Ws();Ze.flags|=r,N.memoizedState=eo(1|a,{destroy:void 0},c,x===void 0?null:x)}function jd(r,a,c,x){var N=Xt();x=x===void 0?null:x;var T=N.memoizedState.inst;St!==null&&x!==null&&Mm(x,St.memoizedState.deps)?N.memoizedState=eo(a,T,c,x):(Ze.flags|=r,N.memoizedState=eo(1|a,T,c,x))}function J0(r,a){_d(8390656,8,r,a)}function Um(r,a){jd(2048,8,r,a)}function DE(r){Ze.flags|=4;var a=Ze.updateQueue;if(a===null)a=vd(),Ze.updateQueue=a,a.events=[r];else{var c=a.events;c===null?a.events=[r]:c.push(r)}}function ev(r){var a=Xt().memoizedState;return DE({ref:a,nextImpl:r}),function(){if((gt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function tv(r,a){return jd(4,2,r,a)}function sv(r,a){return jd(4,4,r,a)}function rv(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function nv(r,a,c){c=c!=null?c.concat([r]):null,jd(4,4,rv.bind(null,a,r),c)}function Wm(){}function av(r,a){var c=Xt();a=a===void 0?null:a;var x=c.memoizedState;return a!==null&&Mm(a,x[1])?x[0]:(c.memoizedState=[r,a],r)}function iv(r,a){var c=Xt();a=a===void 0?null:a;var x=c.memoizedState;if(a!==null&&Mm(a,x[1]))return x[0];if(x=r(),hi){gs(!0);try{r()}finally{gs(!1)}}return c.memoizedState=[x,a],x}function Vm(r,a,c){return c===void 0||(Mn&1073741824)!==0&&(ot&261930)===0?r.memoizedState=a:(r.memoizedState=c,r=oy(),Ze.lanes|=r,wa|=r,c)}function ov(r,a,c,x){return ir(c,a)?c:Qi.current!==null?(r=Vm(r,c,x),ir(r,a)||(is=!0),r):(Mn&42)===0||(Mn&1073741824)!==0&&(ot&261930)===0?(is=!0,r.memoizedState=c):(r=oy(),Ze.lanes|=r,wa|=r,a)}function lv(r,a,c,x,N){var T=V.p;V.p=T!==0&&8>T?T:8;var z=B.T,X={};B.T=X,Ym(r,!1,a,c);try{var se=N(),de=B.S;if(de!==null&&de(X,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var ve=EE(se,x);Tl(r,a,ve,hr(r))}else Tl(r,a,x,hr(r))}catch(_e){Tl(r,a,{then:function(){},status:"rejected",reason:_e},hr())}finally{V.p=T,z!==null&&X.types!==null&&(z.types=X.types),B.T=z}}function ME(){}function qm(r,a,c,x){if(r.tag!==5)throw Error(i(476));var N=cv(r).queue;lv(r,N,a,O,c===null?ME:function(){return dv(r),c(x)})}function cv(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:O},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function dv(r){var a=cv(r);a.next===null&&(a=r.alternate.memoizedState),Tl(r,a.next.queue,{},hr())}function Gm(){return As(Gl)}function uv(){return Xt().memoizedState}function hv(){return Xt().memoizedState}function OE(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=hr();r=ga(c);var x=va(a,r,c);x!==null&&(er(x,a,c),Nl(x,a,c)),a={cache:jm()},r.payload=a;return}a=a.return}}function PE(r,a,c){var x=hr();c={lane:x,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},wd(r)?fv(a,c):(c=um(r,a,c,x),c!==null&&(er(c,r,x),pv(c,a,x)))}function mv(r,a,c){var x=hr();Tl(r,a,c,x)}function Tl(r,a,c,x){var N={lane:x,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(wd(r))fv(a,N);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var z=a.lastRenderedState,X=T(z,c);if(N.hasEagerState=!0,N.eagerState=X,ir(X,z))return rd(r,a,N,0),Rt===null&&sd(),!1}catch{}finally{}if(c=um(r,a,N,x),c!==null)return er(c,r,x),pv(c,a,x),!0}return!1}function Ym(r,a,c,x){if(x={lane:2,revertLane:Ef(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},wd(r)){if(a)throw Error(i(479))}else a=um(r,c,x,2),a!==null&&er(a,r,2)}function wd(r){var a=r.alternate;return r===Ze||a!==null&&a===Ze}function fv(r,a){Zi=xd=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function pv(r,a,c){if((c&4194048)!==0){var x=a.lanes;x&=r.pendingLanes,c|=x,a.lanes=c,Is(r,c)}}var Rl={readContext:As,use:yd,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};Rl.useEffectEvent=Ft;var xv={readContext:As,use:yd,useCallback:function(r,a){return Ws().memoizedState=[r,a===void 0?null:a],r},useContext:As,useEffect:J0,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,_d(4194308,4,rv.bind(null,a,r),c)},useLayoutEffect:function(r,a){return _d(4194308,4,r,a)},useInsertionEffect:function(r,a){_d(4,2,r,a)},useMemo:function(r,a){var c=Ws();a=a===void 0?null:a;var x=r();if(hi){gs(!0);try{r()}finally{gs(!1)}}return c.memoizedState=[x,a],x},useReducer:function(r,a,c){var x=Ws();if(c!==void 0){var N=c(a);if(hi){gs(!0);try{c(a)}finally{gs(!1)}}}else N=a;return x.memoizedState=x.baseState=N,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:N},x.queue=r,r=r.dispatch=PE.bind(null,Ze,r),[x.memoizedState,r]},useRef:function(r){var a=Ws();return r={current:r},a.memoizedState=r},useState:function(r){r=zm(r);var a=r.queue,c=mv.bind(null,Ze,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:Wm,useDeferredValue:function(r,a){var c=Ws();return Vm(c,r,a)},useTransition:function(){var r=zm(!1);return r=lv.bind(null,Ze,r.queue,!0,!1),Ws().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var x=Ze,N=Ws();if(dt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),Rt===null)throw Error(i(349));(ot&127)!==0||B0(x,a,c)}N.memoizedState=c;var T={value:c,getSnapshot:a};return N.queue=T,J0($0.bind(null,x,T,r),[r]),x.flags|=2048,eo(9,{destroy:void 0},I0.bind(null,x,T,c,a),null),c},useId:function(){var r=Ws(),a=Rt.identifierPrefix;if(dt){var c=on,x=an;c=(x&~(1<<32-Tt(x)-1)).toString(32)+c,a="_"+a+"R_"+c,c=gd++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=kE++,a="_"+a+"r_"+c.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Gm,useFormState:Y0,useActionState:Y0,useOptimistic:function(r){var a=Ws();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Ym.bind(null,Ze,!0,c),c.dispatch=a,[r,a]},useMemoCache:Im,useCacheRefresh:function(){return Ws().memoizedState=OE.bind(null,Ze)},useEffectEvent:function(r){var a=Ws(),c={impl:r};return a.memoizedState=c,function(){if((gt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Xm={readContext:As,use:yd,useCallback:av,useContext:As,useEffect:Um,useImperativeHandle:nv,useInsertionEffect:tv,useLayoutEffect:sv,useMemo:iv,useReducer:bd,useRef:Z0,useState:function(){return bd(On)},useDebugValue:Wm,useDeferredValue:function(r,a){var c=Xt();return ov(c,St.memoizedState,r,a)},useTransition:function(){var r=bd(On)[0],a=Xt().memoizedState;return[typeof r=="boolean"?r:Al(r),a]},useSyncExternalStore:L0,useId:uv,useHostTransitionStatus:Gm,useFormState:X0,useActionState:X0,useOptimistic:function(r,a){var c=Xt();return F0(c,St,r,a)},useMemoCache:Im,useCacheRefresh:hv};Xm.useEffectEvent=ev;var gv={readContext:As,use:yd,useCallback:av,useContext:As,useEffect:Um,useImperativeHandle:nv,useInsertionEffect:tv,useLayoutEffect:sv,useMemo:iv,useReducer:Hm,useRef:Z0,useState:function(){return Hm(On)},useDebugValue:Wm,useDeferredValue:function(r,a){var c=Xt();return St===null?Vm(c,r,a):ov(c,St.memoizedState,r,a)},useTransition:function(){var r=Hm(On)[0],a=Xt().memoizedState;return[typeof r=="boolean"?r:Al(r),a]},useSyncExternalStore:L0,useId:uv,useHostTransitionStatus:Gm,useFormState:Q0,useActionState:Q0,useOptimistic:function(r,a){var c=Xt();return St!==null?F0(c,St,r,a):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Im,useCacheRefresh:hv};gv.useEffectEvent=ev;function Km(r,a,c,x){a=r.memoizedState,c=c(x,a),c=c==null?a:m({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Qm={enqueueSetState:function(r,a,c){r=r._reactInternals;var x=hr(),N=ga(x);N.payload=a,c!=null&&(N.callback=c),a=va(r,N,x),a!==null&&(er(a,r,x),Nl(a,r,x))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var x=hr(),N=ga(x);N.tag=1,N.payload=a,c!=null&&(N.callback=c),a=va(r,N,x),a!==null&&(er(a,r,x),Nl(a,r,x))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=hr(),x=ga(c);x.tag=2,a!=null&&(x.callback=a),a=va(r,x,c),a!==null&&(er(a,r,c),Nl(a,r,c))}};function vv(r,a,c,x,N,T,z){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(x,T,z):a.prototype&&a.prototype.isPureReactComponent?!gl(c,x)||!gl(N,T):!0}function yv(r,a,c,x){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,x),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,x),a.state!==r&&Qm.enqueueReplaceState(a,a.state,null)}function mi(r,a){var c=a;if("ref"in a){c={};for(var x in a)x!=="ref"&&(c[x]=a[x])}if(r=r.defaultProps){c===a&&(c=m({},c));for(var N in r)c[N]===void 0&&(c[N]=r[N])}return c}function bv(r){td(r)}function _v(r){console.error(r)}function jv(r){td(r)}function Sd(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(x){setTimeout(function(){throw x})}}function wv(r,a,c){try{var x=r.onCaughtError;x(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function Zm(r,a,c){return c=ga(c),c.tag=3,c.payload={element:null},c.callback=function(){Sd(r,a)},c}function Sv(r){return r=ga(r),r.tag=3,r}function Nv(r,a,c,x){var N=c.type.getDerivedStateFromError;if(typeof N=="function"){var T=x.value;r.payload=function(){return N(T)},r.callback=function(){wv(a,c,x)}}var z=c.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(r.callback=function(){wv(a,c,x),typeof N!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var X=x.stack;this.componentDidCatch(x.value,{componentStack:X!==null?X:""})})}function LE(r,a,c,x,N){if(c.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(a=c.alternate,a!==null&&qi(a,c,N,!0),c=lr.current,c!==null){switch(c.tag){case 31:case 13:return Ar===null?Ld():c.alternate===null&&Ut===0&&(Ut=3),c.flags&=-257,c.flags|=65536,c.lanes=N,x===ud?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([x]):a.add(x),Sf(r,x,N)),!1;case 22:return c.flags|=65536,x===ud?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([x])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([x]):c.add(x)),Sf(r,x,N)),!1}throw Error(i(435,c.tag))}return Sf(r,x,N),Ld(),!1}if(dt)return a=lr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=N,x!==gm&&(r=Error(i(422),{cause:x}),bl(Nr(r,c)))):(x!==gm&&(a=Error(i(423),{cause:x}),bl(Nr(a,c))),r=r.current.alternate,r.flags|=65536,N&=-N,r.lanes|=N,x=Nr(x,c),N=Zm(r.stateNode,x,N),km(r,N),Ut!==4&&(Ut=2)),!1;var T=Error(i(520),{cause:x});if(T=Nr(T,c),$l===null?$l=[T]:$l.push(T),Ut!==4&&(Ut=2),a===null)return!0;x=Nr(x,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=N&-N,c.lanes|=r,r=Zm(c.stateNode,x,r),km(c,r),!1;case 1:if(a=c.type,T=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Sa===null||!Sa.has(T))))return c.flags|=65536,N&=-N,c.lanes|=N,N=Sv(N),Nv(N,r,c,x),km(c,N),!1}c=c.return}while(c!==null);return!1}var Jm=Error(i(461)),is=!1;function Ts(r,a,c,x){a.child=r===null?A0(a,null,c,x):ui(a,r.child,c,x)}function Cv(r,a,c,x,N){c=c.render;var T=a.ref;if("ref"in x){var z={};for(var X in x)X!=="ref"&&(z[X]=x[X])}else z=x;return oi(a),x=Om(r,a,c,z,T,N),X=Pm(),r!==null&&!is?(Lm(r,a,N),Pn(r,a,N)):(dt&&X&&pm(a),a.flags|=1,Ts(r,a,x,N),a.child)}function Ev(r,a,c,x,N){if(r===null){var T=c.type;return typeof T=="function"&&!hm(T)&&T.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=T,kv(r,a,T,x,N)):(r=ad(c.type,null,x,a,a.mode,N),r.ref=a.ref,r.return=a,a.child=r)}if(T=r.child,!lf(r,N)){var z=T.memoizedProps;if(c=c.compare,c=c!==null?c:gl,c(z,x)&&r.ref===a.ref)return Pn(r,a,N)}return a.flags|=1,r=An(T,x),r.ref=a.ref,r.return=a,a.child=r}function kv(r,a,c,x,N){if(r!==null){var T=r.memoizedProps;if(gl(T,x)&&r.ref===a.ref)if(is=!1,a.pendingProps=x=T,lf(r,N))(r.flags&131072)!==0&&(is=!0);else return a.lanes=r.lanes,Pn(r,a,N)}return ef(r,a,c,x,N)}function Av(r,a,c,x){var N=x.children,T=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((a.flags&128)!==0){if(T=T!==null?T.baseLanes|c:c,r!==null){for(x=a.child=r.child,N=0;x!==null;)N=N|x.lanes|x.childLanes,x=x.sibling;x=N&~T}else x=0,a.child=null;return Tv(r,a,T,c,x)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&cd(a,T!==null?T.cachePool:null),T!==null?D0(a,T):Tm(),M0(a);else return x=a.lanes=536870912,Tv(r,a,T!==null?T.baseLanes|c:c,c,x)}else T!==null?(cd(a,T.cachePool),D0(a,T),ba(),a.memoizedState=null):(r!==null&&cd(a,null),Tm(),ba());return Ts(r,a,N,c),a.child}function Dl(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Tv(r,a,c,x,N){var T=Sm();return T=T===null?null:{parent:ns._currentValue,pool:T},a.memoizedState={baseLanes:c,cachePool:T},r!==null&&cd(a,null),Tm(),M0(a),r!==null&&qi(r,a,x,!0),a.childLanes=N,null}function Nd(r,a){return a=Ed({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function Rv(r,a,c){return ui(a,r.child,null,c),r=Nd(a,a.pendingProps),r.flags|=2,cr(a),a.memoizedState=null,r}function BE(r,a,c){var x=a.pendingProps,N=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(dt){if(x.mode==="hidden")return r=Nd(a,x),a.lanes=536870912,Dl(null,r);if(Dm(a),(r=Ot)?(r=Uy(r,kr),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ha!==null?{id:an,overflow:on}:null,retryLane:536870912,hydrationErrors:null},c=f0(r),c.return=a,a.child=c,ks=a,Ot=null)):r=null,r===null)throw fa(a);return a.lanes=536870912,null}return Nd(a,x)}var T=r.memoizedState;if(T!==null){var z=T.dehydrated;if(Dm(a),N)if(a.flags&256)a.flags&=-257,a=Rv(r,a,c);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(is||qi(r,a,c,!1),N=(c&r.childLanes)!==0,is||N){if(x=Rt,x!==null&&(z=$s(x,c),z!==0&&z!==T.retryLane))throw T.retryLane=z,ri(r,z),er(x,r,z),Jm;Ld(),a=Rv(r,a,c)}else r=T.treeContext,Ot=Tr(z.nextSibling),ks=a,dt=!0,ma=null,kr=!1,r!==null&&g0(a,r),a=Nd(a,x),a.flags|=4096;return a}return r=An(r.child,{mode:x.mode,children:x.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Cd(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=4194816)}}function ef(r,a,c,x,N){return oi(a),c=Om(r,a,c,x,void 0,N),x=Pm(),r!==null&&!is?(Lm(r,a,N),Pn(r,a,N)):(dt&&x&&pm(a),a.flags|=1,Ts(r,a,c,N),a.child)}function Dv(r,a,c,x,N,T){return oi(a),a.updateQueue=null,c=P0(a,x,c,N),O0(r),x=Pm(),r!==null&&!is?(Lm(r,a,T),Pn(r,a,T)):(dt&&x&&pm(a),a.flags|=1,Ts(r,a,c,T),a.child)}function Mv(r,a,c,x,N){if(oi(a),a.stateNode===null){var T=Fi,z=c.contextType;typeof z=="object"&&z!==null&&(T=As(z)),T=new c(x,T),a.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Qm,a.stateNode=T,T._reactInternals=a,T=a.stateNode,T.props=x,T.state=a.memoizedState,T.refs={},Cm(a),z=c.contextType,T.context=typeof z=="object"&&z!==null?As(z):Fi,T.state=a.memoizedState,z=c.getDerivedStateFromProps,typeof z=="function"&&(Km(a,c,z,x),T.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(z=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),z!==T.state&&Qm.enqueueReplaceState(T,T.state,null),El(a,x,T,N),Cl(),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308),x=!0}else if(r===null){T=a.stateNode;var X=a.memoizedProps,se=mi(c,X);T.props=se;var de=T.context,ve=c.contextType;z=Fi,typeof ve=="object"&&ve!==null&&(z=As(ve));var _e=c.getDerivedStateFromProps;ve=typeof _e=="function"||typeof T.getSnapshotBeforeUpdate=="function",X=a.pendingProps!==X,ve||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(X||de!==z)&&yv(a,T,x,z),xa=!1;var ue=a.memoizedState;T.state=ue,El(a,x,T,N),Cl(),de=a.memoizedState,X||ue!==de||xa?(typeof _e=="function"&&(Km(a,c,_e,x),de=a.memoizedState),(se=xa||vv(a,c,se,x,ue,de,z))?(ve||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=x,a.memoizedState=de),T.props=x,T.state=de,T.context=z,x=se):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),x=!1)}else{T=a.stateNode,Em(r,a),z=a.memoizedProps,ve=mi(c,z),T.props=ve,_e=a.pendingProps,ue=T.context,de=c.contextType,se=Fi,typeof de=="object"&&de!==null&&(se=As(de)),X=c.getDerivedStateFromProps,(de=typeof X=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(z!==_e||ue!==se)&&yv(a,T,x,se),xa=!1,ue=a.memoizedState,T.state=ue,El(a,x,T,N),Cl();var he=a.memoizedState;z!==_e||ue!==he||xa||r!==null&&r.dependencies!==null&&od(r.dependencies)?(typeof X=="function"&&(Km(a,c,X,x),he=a.memoizedState),(ve=xa||vv(a,c,ve,x,ue,he,se)||r!==null&&r.dependencies!==null&&od(r.dependencies))?(de||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(x,he,se),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(x,he,se)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||z===r.memoizedProps&&ue===r.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ue===r.memoizedState||(a.flags|=1024),a.memoizedProps=x,a.memoizedState=he),T.props=x,T.state=he,T.context=se,x=ve):(typeof T.componentDidUpdate!="function"||z===r.memoizedProps&&ue===r.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ue===r.memoizedState||(a.flags|=1024),x=!1)}return T=x,Cd(r,a),x=(a.flags&128)!==0,T||x?(T=a.stateNode,c=x&&typeof c.getDerivedStateFromError!="function"?null:T.render(),a.flags|=1,r!==null&&x?(a.child=ui(a,r.child,null,N),a.child=ui(a,null,c,N)):Ts(r,a,c,N),a.memoizedState=T.state,r=a.child):r=Pn(r,a,N),r}function Ov(r,a,c,x){return ai(),a.flags|=256,Ts(r,a,c,x),a.child}var tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sf(r){return{baseLanes:r,cachePool:w0()}}function rf(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=ur),r}function Pv(r,a,c){var x=a.pendingProps,N=!1,T=(a.flags&128)!==0,z;if((z=T)||(z=r!==null&&r.memoizedState===null?!1:(Yt.current&2)!==0),z&&(N=!0,a.flags&=-129),z=(a.flags&32)!==0,a.flags&=-33,r===null){if(dt){if(N?ya(a):ba(),(r=Ot)?(r=Uy(r,kr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ha!==null?{id:an,overflow:on}:null,retryLane:536870912,hydrationErrors:null},c=f0(r),c.return=a,a.child=c,ks=a,Ot=null)):r=null,r===null)throw fa(a);return Hf(r)?a.lanes=32:a.lanes=536870912,null}var X=x.children;return x=x.fallback,N?(ba(),N=a.mode,X=Ed({mode:"hidden",children:X},N),x=ni(x,N,c,null),X.return=a,x.return=a,X.sibling=x,a.child=X,x=a.child,x.memoizedState=sf(c),x.childLanes=rf(r,z,c),a.memoizedState=tf,Dl(null,x)):(ya(a),nf(a,X))}var se=r.memoizedState;if(se!==null&&(X=se.dehydrated,X!==null)){if(T)a.flags&256?(ya(a),a.flags&=-257,a=af(r,a,c)):a.memoizedState!==null?(ba(),a.child=r.child,a.flags|=128,a=null):(ba(),X=x.fallback,N=a.mode,x=Ed({mode:"visible",children:x.children},N),X=ni(X,N,c,null),X.flags|=2,x.return=a,X.return=a,x.sibling=X,a.child=x,ui(a,r.child,null,c),x=a.child,x.memoizedState=sf(c),x.childLanes=rf(r,z,c),a.memoizedState=tf,a=Dl(null,x));else if(ya(a),Hf(X)){if(z=X.nextSibling&&X.nextSibling.dataset,z)var de=z.dgst;z=de,x=Error(i(419)),x.stack="",x.digest=z,bl({value:x,source:null,stack:null}),a=af(r,a,c)}else if(is||qi(r,a,c,!1),z=(c&r.childLanes)!==0,is||z){if(z=Rt,z!==null&&(x=$s(z,c),x!==0&&x!==se.retryLane))throw se.retryLane=x,ri(r,x),er(z,r,x),Jm;$f(X)||Ld(),a=af(r,a,c)}else $f(X)?(a.flags|=192,a.child=r.child,a=null):(r=se.treeContext,Ot=Tr(X.nextSibling),ks=a,dt=!0,ma=null,kr=!1,r!==null&&g0(a,r),a=nf(a,x.children),a.flags|=4096);return a}return N?(ba(),X=x.fallback,N=a.mode,se=r.child,de=se.sibling,x=An(se,{mode:"hidden",children:x.children}),x.subtreeFlags=se.subtreeFlags&65011712,de!==null?X=An(de,X):(X=ni(X,N,c,null),X.flags|=2),X.return=a,x.return=a,x.sibling=X,a.child=x,Dl(null,x),x=a.child,X=r.child.memoizedState,X===null?X=sf(c):(N=X.cachePool,N!==null?(se=ns._currentValue,N=N.parent!==se?{parent:se,pool:se}:N):N=w0(),X={baseLanes:X.baseLanes|c,cachePool:N}),x.memoizedState=X,x.childLanes=rf(r,z,c),a.memoizedState=tf,Dl(r.child,x)):(ya(a),c=r.child,r=c.sibling,c=An(c,{mode:"visible",children:x.children}),c.return=a,c.sibling=null,r!==null&&(z=a.deletions,z===null?(a.deletions=[r],a.flags|=16):z.push(r)),a.child=c,a.memoizedState=null,c)}function nf(r,a){return a=Ed({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Ed(r,a){return r=or(22,r,null,a),r.lanes=0,r}function af(r,a,c){return ui(a,r.child,null,c),r=nf(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Lv(r,a,c){r.lanes|=a;var x=r.alternate;x!==null&&(x.lanes|=a),bm(r.return,a,c)}function of(r,a,c,x,N,T){var z=r.memoizedState;z===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:x,tail:c,tailMode:N,treeForkCount:T}:(z.isBackwards=a,z.rendering=null,z.renderingStartTime=0,z.last=x,z.tail=c,z.tailMode=N,z.treeForkCount=T)}function Bv(r,a,c){var x=a.pendingProps,N=x.revealOrder,T=x.tail;x=x.children;var z=Yt.current,X=(z&2)!==0;if(X?(z=z&1|2,a.flags|=128):z&=1,J(Yt,z),Ts(r,a,x,c),x=dt?yl:0,!X&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Lv(r,c,a);else if(r.tag===19)Lv(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(N){case"forwards":for(c=a.child,N=null;c!==null;)r=c.alternate,r!==null&&pd(r)===null&&(N=c),c=c.sibling;c=N,c===null?(N=a.child,a.child=null):(N=c.sibling,c.sibling=null),of(a,!1,N,c,T,x);break;case"backwards":case"unstable_legacy-backwards":for(c=null,N=a.child,a.child=null;N!==null;){if(r=N.alternate,r!==null&&pd(r)===null){a.child=N;break}r=N.sibling,N.sibling=c,c=N,N=r}of(a,!0,c,null,T,x);break;case"together":of(a,!1,null,null,void 0,x);break;default:a.memoizedState=null}return a.child}function Pn(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),wa|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(qi(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=An(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=An(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function lf(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&od(r)))}function IE(r,a,c){switch(a.tag){case 3:Q(a,a.stateNode.containerInfo),pa(a,ns,r.memoizedState.cache),ai();break;case 27:case 5:te(a);break;case 4:Q(a,a.stateNode.containerInfo);break;case 10:pa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Dm(a),null;break;case 13:var x=a.memoizedState;if(x!==null)return x.dehydrated!==null?(ya(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Pv(r,a,c):(ya(a),r=Pn(r,a,c),r!==null?r.sibling:null);ya(a);break;case 19:var N=(r.flags&128)!==0;if(x=(c&a.childLanes)!==0,x||(qi(r,a,c,!1),x=(c&a.childLanes)!==0),N){if(x)return Bv(r,a,c);a.flags|=128}if(N=a.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),J(Yt,Yt.current),x)break;return null;case 22:return a.lanes=0,Av(r,a,c,a.pendingProps);case 24:pa(a,ns,r.memoizedState.cache)}return Pn(r,a,c)}function Iv(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)is=!0;else{if(!lf(r,c)&&(a.flags&128)===0)return is=!1,IE(r,a,c);is=(r.flags&131072)!==0}else is=!1,dt&&(a.flags&1048576)!==0&&x0(a,yl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var x=a.pendingProps;if(r=ci(a.elementType),a.type=r,typeof r=="function")hm(r)?(x=mi(r,x),a.tag=1,a=Mv(null,a,r,x,c)):(a.tag=0,a=ef(null,a,r,x,c));else{if(r!=null){var N=r.$$typeof;if(N===C){a.tag=11,a=Cv(null,a,r,x,c);break e}else if(N===R){a.tag=14,a=Ev(null,a,r,x,c);break e}}throw a=$(r)||r,Error(i(306,a,""))}}return a;case 0:return ef(r,a,a.type,a.pendingProps,c);case 1:return x=a.type,N=mi(x,a.pendingProps),Mv(r,a,x,N,c);case 3:e:{if(Q(a,a.stateNode.containerInfo),r===null)throw Error(i(387));x=a.pendingProps;var T=a.memoizedState;N=T.element,Em(r,a),El(a,x,null,c);var z=a.memoizedState;if(x=z.cache,pa(a,ns,x),x!==T.cache&&_m(a,[ns],c,!0),Cl(),x=z.element,T.isDehydrated)if(T={element:x,isDehydrated:!1,cache:z.cache},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){a=Ov(r,a,x,c);break e}else if(x!==N){N=Nr(Error(i(424)),a),bl(N),a=Ov(r,a,x,c);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=Tr(r.firstChild),ks=a,dt=!0,ma=null,kr=!0,c=A0(a,null,x,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ai(),x===N){a=Pn(r,a,c);break e}Ts(r,a,x,c)}a=a.child}return a;case 26:return Cd(r,a),r===null?(c=Xy(a.type,null,a.pendingProps,null))?a.memoizedState=c:dt||(c=a.type,r=a.pendingProps,x=Ud(oe.current).createElement(c),x[hs]=a,x[Es]=r,Rs(x,c,r),rs(x),a.stateNode=x):a.memoizedState=Xy(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return te(a),r===null&&dt&&(x=a.stateNode=qy(a.type,a.pendingProps,oe.current),ks=a,kr=!0,N=Ot,ka(a.type)?(zf=N,Ot=Tr(x.firstChild)):Ot=N),Ts(r,a,a.pendingProps.children,c),Cd(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&dt&&((N=x=Ot)&&(x=fk(x,a.type,a.pendingProps,kr),x!==null?(a.stateNode=x,ks=a,Ot=Tr(x.firstChild),kr=!1,N=!0):N=!1),N||fa(a)),te(a),N=a.type,T=a.pendingProps,z=r!==null?r.memoizedProps:null,x=T.children,Lf(N,T)?x=null:z!==null&&Lf(N,z)&&(a.flags|=32),a.memoizedState!==null&&(N=Om(r,a,AE,null,null,c),Gl._currentValue=N),Cd(r,a),Ts(r,a,x,c),a.child;case 6:return r===null&&dt&&((r=c=Ot)&&(c=pk(c,a.pendingProps,kr),c!==null?(a.stateNode=c,ks=a,Ot=null,r=!0):r=!1),r||fa(a)),null;case 13:return Pv(r,a,c);case 4:return Q(a,a.stateNode.containerInfo),x=a.pendingProps,r===null?a.child=ui(a,null,x,c):Ts(r,a,x,c),a.child;case 11:return Cv(r,a,a.type,a.pendingProps,c);case 7:return Ts(r,a,a.pendingProps,c),a.child;case 8:return Ts(r,a,a.pendingProps.children,c),a.child;case 12:return Ts(r,a,a.pendingProps.children,c),a.child;case 10:return x=a.pendingProps,pa(a,a.type,x.value),Ts(r,a,x.children,c),a.child;case 9:return N=a.type._context,x=a.pendingProps.children,oi(a),N=As(N),x=x(N),a.flags|=1,Ts(r,a,x,c),a.child;case 14:return Ev(r,a,a.type,a.pendingProps,c);case 15:return kv(r,a,a.type,a.pendingProps,c);case 19:return Bv(r,a,c);case 31:return BE(r,a,c);case 22:return Av(r,a,c,a.pendingProps);case 24:return oi(a),x=As(ns),r===null?(N=Sm(),N===null&&(N=Rt,T=jm(),N.pooledCache=T,T.refCount++,T!==null&&(N.pooledCacheLanes|=c),N=T),a.memoizedState={parent:x,cache:N},Cm(a),pa(a,ns,N)):((r.lanes&c)!==0&&(Em(r,a),El(a,null,null,c),Cl()),N=r.memoizedState,T=a.memoizedState,N.parent!==x?(N={parent:x,cache:x},a.memoizedState=N,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=N),pa(a,ns,x)):(x=T.cache,pa(a,ns,x),x!==N.cache&&_m(a,[ns],c,!0))),Ts(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ln(r){r.flags|=4}function cf(r,a,c,x,N){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(N&335544128)===N)if(r.stateNode.complete)r.flags|=8192;else if(uy())r.flags|=8192;else throw di=ud,Nm}else r.flags&=-16777217}function $v(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!eb(a))if(uy())r.flags|=8192;else throw di=ud,Nm}function kd(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?ys():536870912,r.lanes|=a,no|=a)}function Ml(r,a){if(!dt)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var x=null;c!==null;)c.alternate!==null&&(x=c),c=c.sibling;x===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:x.sibling=null}}function Pt(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,x=0;if(a)for(var N=r.child;N!==null;)c|=N.lanes|N.childLanes,x|=N.subtreeFlags&65011712,x|=N.flags&65011712,N.return=r,N=N.sibling;else for(N=r.child;N!==null;)c|=N.lanes|N.childLanes,x|=N.subtreeFlags,x|=N.flags,N.return=r,N=N.sibling;return r.subtreeFlags|=x,r.childLanes=c,a}function $E(r,a,c){var x=a.pendingProps;switch(xm(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return c=a.stateNode,x=null,r!==null&&(x=r.memoizedState.cache),a.memoizedState.cache!==x&&(a.flags|=2048),Dn(ns),ee(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Vi(a)?Ln(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vm())),Pt(a),null;case 26:var N=a.type,T=a.memoizedState;return r===null?(Ln(a),T!==null?(Pt(a),$v(a,T)):(Pt(a),cf(a,N,null,x,c))):T?T!==r.memoizedState?(Ln(a),Pt(a),$v(a,T)):(Pt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==x&&Ln(a),Pt(a),cf(a,N,r,x,c)),null;case 27:if(ye(a),c=oe.current,N=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==x&&Ln(a);else{if(!x){if(a.stateNode===null)throw Error(i(166));return Pt(a),null}r=K.current,Vi(a)?v0(a):(r=qy(N,x,c),a.stateNode=r,Ln(a))}return Pt(a),null;case 5:if(ye(a),N=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==x&&Ln(a);else{if(!x){if(a.stateNode===null)throw Error(i(166));return Pt(a),null}if(T=K.current,Vi(a))v0(a);else{var z=Ud(oe.current);switch(T){case 1:T=z.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:T=z.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":T=z.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":T=z.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":T=z.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof x.is=="string"?z.createElement("select",{is:x.is}):z.createElement("select"),x.multiple?T.multiple=!0:x.size&&(T.size=x.size);break;default:T=typeof x.is=="string"?z.createElement(N,{is:x.is}):z.createElement(N)}}T[hs]=a,T[Es]=x;e:for(z=a.child;z!==null;){if(z.tag===5||z.tag===6)T.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===a)break e;for(;z.sibling===null;){if(z.return===null||z.return===a)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}a.stateNode=T;e:switch(Rs(T,N,x),N){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&Ln(a)}}return Pt(a),cf(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,c),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==x&&Ln(a);else{if(typeof x!="string"&&a.stateNode===null)throw Error(i(166));if(r=oe.current,Vi(a)){if(r=a.stateNode,c=a.memoizedProps,x=null,N=ks,N!==null)switch(N.tag){case 27:case 5:x=N.memoizedProps}r[hs]=a,r=!!(r.nodeValue===c||x!==null&&x.suppressHydrationWarning===!0||Py(r.nodeValue,c)),r||fa(a,!0)}else r=Ud(r).createTextNode(x),r[hs]=a,a.stateNode=r}return Pt(a),null;case 31:if(c=a.memoizedState,r===null||r.memoizedState!==null){if(x=Vi(a),c!==null){if(r===null){if(!x)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[hs]=a}else ai(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),r=!1}else c=vm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return a.flags&256?(cr(a),a):(cr(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Pt(a),null;case 13:if(x=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(N=Vi(a),x!==null&&x.dehydrated!==null){if(r===null){if(!N)throw Error(i(318));if(N=a.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(i(317));N[hs]=a}else ai(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),N=!1}else N=vm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=N),N=!0;if(!N)return a.flags&256?(cr(a),a):(cr(a),null)}return cr(a),(a.flags&128)!==0?(a.lanes=c,a):(c=x!==null,r=r!==null&&r.memoizedState!==null,c&&(x=a.child,N=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(N=x.alternate.memoizedState.cachePool.pool),T=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(T=x.memoizedState.cachePool.pool),T!==N&&(x.flags|=2048)),c!==r&&c&&(a.child.flags|=8192),kd(a,a.updateQueue),Pt(a),null);case 4:return ee(),r===null&&Rf(a.stateNode.containerInfo),Pt(a),null;case 10:return Dn(a.type),Pt(a),null;case 19:if(Y(Yt),x=a.memoizedState,x===null)return Pt(a),null;if(N=(a.flags&128)!==0,T=x.rendering,T===null)if(N)Ml(x,!1);else{if(Ut!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(T=pd(r),T!==null){for(a.flags|=128,Ml(x,!1),r=T.updateQueue,a.updateQueue=r,kd(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)m0(c,r),c=c.sibling;return J(Yt,Yt.current&1|2),dt&&Tn(a,x.treeForkCount),a.child}r=r.sibling}x.tail!==null&&xt()>Md&&(a.flags|=128,N=!0,Ml(x,!1),a.lanes=4194304)}else{if(!N)if(r=pd(T),r!==null){if(a.flags|=128,N=!0,r=r.updateQueue,a.updateQueue=r,kd(a,r),Ml(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!dt)return Pt(a),null}else 2*xt()-x.renderingStartTime>Md&&c!==536870912&&(a.flags|=128,N=!0,Ml(x,!1),a.lanes=4194304);x.isBackwards?(T.sibling=a.child,a.child=T):(r=x.last,r!==null?r.sibling=T:a.child=T,x.last=T)}return x.tail!==null?(r=x.tail,x.rendering=r,x.tail=r.sibling,x.renderingStartTime=xt(),r.sibling=null,c=Yt.current,J(Yt,N?c&1|2:c&1),dt&&Tn(a,x.treeForkCount),r):(Pt(a),null);case 22:case 23:return cr(a),Rm(),x=a.memoizedState!==null,r!==null?r.memoizedState!==null!==x&&(a.flags|=8192):x&&(a.flags|=8192),x?(c&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),c=a.updateQueue,c!==null&&kd(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),x=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(x=a.memoizedState.cachePool.pool),x!==c&&(a.flags|=2048),r!==null&&Y(li),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Dn(ns),Pt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function HE(r,a){switch(xm(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Dn(ns),ee(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return ye(a),null;case 31:if(a.memoizedState!==null){if(cr(a),a.alternate===null)throw Error(i(340));ai()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(cr(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ai()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Y(Yt),null;case 4:return ee(),null;case 10:return Dn(a.type),null;case 22:case 23:return cr(a),Rm(),r!==null&&Y(li),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Dn(ns),null;case 25:return null;default:return null}}function Hv(r,a){switch(xm(a),a.tag){case 3:Dn(ns),ee();break;case 26:case 27:case 5:ye(a);break;case 4:ee();break;case 31:a.memoizedState!==null&&cr(a);break;case 13:cr(a);break;case 19:Y(Yt);break;case 10:Dn(a.type);break;case 22:case 23:cr(a),Rm(),r!==null&&Y(li);break;case 24:Dn(ns)}}function Ol(r,a){try{var c=a.updateQueue,x=c!==null?c.lastEffect:null;if(x!==null){var N=x.next;c=N;do{if((c.tag&r)===r){x=void 0;var T=c.create,z=c.inst;x=T(),z.destroy=x}c=c.next}while(c!==N)}}catch(X){_t(a,a.return,X)}}function _a(r,a,c){try{var x=a.updateQueue,N=x!==null?x.lastEffect:null;if(N!==null){var T=N.next;x=T;do{if((x.tag&r)===r){var z=x.inst,X=z.destroy;if(X!==void 0){z.destroy=void 0,N=a;var se=c,de=X;try{de()}catch(ve){_t(N,se,ve)}}}x=x.next}while(x!==T)}}catch(ve){_t(a,a.return,ve)}}function zv(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{R0(a,c)}catch(x){_t(r,r.return,x)}}}function Fv(r,a,c){c.props=mi(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(x){_t(r,a,x)}}function Pl(r,a){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var x=r.stateNode;break;case 30:x=r.stateNode;break;default:x=r.stateNode}typeof c=="function"?r.refCleanup=c(x):c.current=x}}catch(N){_t(r,a,N)}}function ln(r,a){var c=r.ref,x=r.refCleanup;if(c!==null)if(typeof x=="function")try{x()}catch(N){_t(r,a,N)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(N){_t(r,a,N)}else c.current=null}function Uv(r){var a=r.type,c=r.memoizedProps,x=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&x.focus();break e;case"img":c.src?x.src=c.src:c.srcSet&&(x.srcset=c.srcSet)}}catch(N){_t(r,r.return,N)}}function df(r,a,c){try{var x=r.stateNode;lk(x,r.type,c,a),x[Es]=a}catch(N){_t(r,r.return,N)}}function Wv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ka(r.type)||r.tag===4}function uf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Wv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ka(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hf(r,a,c){var x=r.tag;if(x===5||x===6)r=r.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(r),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=En));else if(x!==4&&(x===27&&ka(r.type)&&(c=r.stateNode,a=null),r=r.child,r!==null))for(hf(r,a,c),r=r.sibling;r!==null;)hf(r,a,c),r=r.sibling}function Ad(r,a,c){var x=r.tag;if(x===5||x===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(x!==4&&(x===27&&ka(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Ad(r,a,c),r=r.sibling;r!==null;)Ad(r,a,c),r=r.sibling}function Vv(r){var a=r.stateNode,c=r.memoizedProps;try{for(var x=r.type,N=a.attributes;N.length;)a.removeAttributeNode(N[0]);Rs(a,x,c),a[hs]=r,a[Es]=c}catch(T){_t(r,r.return,T)}}var Bn=!1,os=!1,mf=!1,qv=typeof WeakSet=="function"?WeakSet:Set,bs=null;function zE(r,a){if(r=r.containerInfo,Of=Kd,r=n0(r),am(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var x=c.getSelection&&c.getSelection();if(x&&x.rangeCount!==0){c=x.anchorNode;var N=x.anchorOffset,T=x.focusNode;x=x.focusOffset;try{c.nodeType,T.nodeType}catch{c=null;break e}var z=0,X=-1,se=-1,de=0,ve=0,_e=r,ue=null;t:for(;;){for(var he;_e!==c||N!==0&&_e.nodeType!==3||(X=z+N),_e!==T||x!==0&&_e.nodeType!==3||(se=z+x),_e.nodeType===3&&(z+=_e.nodeValue.length),(he=_e.firstChild)!==null;)ue=_e,_e=he;for(;;){if(_e===r)break t;if(ue===c&&++de===N&&(X=z),ue===T&&++ve===x&&(se=z),(he=_e.nextSibling)!==null)break;_e=ue,ue=_e.parentNode}_e=he}c=X===-1||se===-1?null:{start:X,end:se}}else c=null}c=c||{start:0,end:0}}else c=null;for(Pf={focusedElem:r,selectionRange:c},Kd=!1,bs=a;bs!==null;)if(a=bs,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,bs=r;else for(;bs!==null;){switch(a=bs,T=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)N=r[c],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&T!==null){r=void 0,c=a,N=T.memoizedProps,T=T.memoizedState,x=c.stateNode;try{var Ae=mi(c.type,N);r=x.getSnapshotBeforeUpdate(Ae,T),x.__reactInternalSnapshotBeforeUpdate=r}catch(Ve){_t(c,c.return,Ve)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)If(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":If(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,bs=r;break}bs=a.return}}function Gv(r,a,c){var x=c.flags;switch(c.tag){case 0:case 11:case 15:$n(r,c),x&4&&Ol(5,c);break;case 1:if($n(r,c),x&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(z){_t(c,c.return,z)}else{var N=mi(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(N,a,r.__reactInternalSnapshotBeforeUpdate)}catch(z){_t(c,c.return,z)}}x&64&&zv(c),x&512&&Pl(c,c.return);break;case 3:if($n(r,c),x&64&&(r=c.updateQueue,r!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{R0(r,a)}catch(z){_t(c,c.return,z)}}break;case 27:a===null&&x&4&&Vv(c);case 26:case 5:$n(r,c),a===null&&x&4&&Uv(c),x&512&&Pl(c,c.return);break;case 12:$n(r,c);break;case 31:$n(r,c),x&4&&Kv(r,c);break;case 13:$n(r,c),x&4&&Qv(r,c),x&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=KE.bind(null,c),xk(r,c))));break;case 22:if(x=c.memoizedState!==null||Bn,!x){a=a!==null&&a.memoizedState!==null||os,N=Bn;var T=os;Bn=x,(os=a)&&!T?Hn(r,c,(c.subtreeFlags&8772)!==0):$n(r,c),Bn=N,os=T}break;case 30:break;default:$n(r,c)}}function Yv(r){var a=r.alternate;a!==null&&(r.alternate=null,Yv(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&ll(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var It=null,Ks=!1;function In(r,a,c){for(c=c.child;c!==null;)Xv(r,a,c),c=c.sibling}function Xv(r,a,c){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Cs,c)}catch{}switch(c.tag){case 26:os||ln(c,a),In(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:os||ln(c,a);var x=It,N=Ks;ka(c.type)&&(It=c.stateNode,Ks=!1),In(r,a,c),Wl(c.stateNode),It=x,Ks=N;break;case 5:os||ln(c,a);case 6:if(x=It,N=Ks,It=null,In(r,a,c),It=x,Ks=N,It!==null)if(Ks)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(c.stateNode)}catch(T){_t(c,a,T)}else try{It.removeChild(c.stateNode)}catch(T){_t(c,a,T)}break;case 18:It!==null&&(Ks?(r=It,zy(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),mo(r)):zy(It,c.stateNode));break;case 4:x=It,N=Ks,It=c.stateNode.containerInfo,Ks=!0,In(r,a,c),It=x,Ks=N;break;case 0:case 11:case 14:case 15:_a(2,c,a),os||_a(4,c,a),In(r,a,c);break;case 1:os||(ln(c,a),x=c.stateNode,typeof x.componentWillUnmount=="function"&&Fv(c,a,x)),In(r,a,c);break;case 21:In(r,a,c);break;case 22:os=(x=os)||c.memoizedState!==null,In(r,a,c),os=x;break;default:In(r,a,c)}}function Kv(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{mo(r)}catch(c){_t(a,a.return,c)}}}function Qv(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{mo(r)}catch(c){_t(a,a.return,c)}}function FE(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new qv),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new qv),a;default:throw Error(i(435,r.tag))}}function Td(r,a){var c=FE(r);a.forEach(function(x){if(!c.has(x)){c.add(x);var N=QE.bind(null,r,x);x.then(N,N)}})}function Qs(r,a){var c=a.deletions;if(c!==null)for(var x=0;x<c.length;x++){var N=c[x],T=r,z=a,X=z;e:for(;X!==null;){switch(X.tag){case 27:if(ka(X.type)){It=X.stateNode,Ks=!1;break e}break;case 5:It=X.stateNode,Ks=!1;break e;case 3:case 4:It=X.stateNode.containerInfo,Ks=!0;break e}X=X.return}if(It===null)throw Error(i(160));Xv(T,z,N),It=null,Ks=!1,T=N.alternate,T!==null&&(T.return=null),N.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Zv(a,r),a=a.sibling}var Hr=null;function Zv(r,a){var c=r.alternate,x=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Qs(a,r),Zs(r),x&4&&(_a(3,r,r.return),Ol(3,r),_a(5,r,r.return));break;case 1:Qs(a,r),Zs(r),x&512&&(os||c===null||ln(c,c.return)),x&64&&Bn&&(r=r.updateQueue,r!==null&&(x=r.callbacks,x!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?x:c.concat(x))));break;case 26:var N=Hr;if(Qs(a,r),Zs(r),x&512&&(os||c===null||ln(c,c.return)),x&4){var T=c!==null?c.memoizedState:null;if(x=r.memoizedState,c===null)if(x===null)if(r.stateNode===null){e:{x=r.type,c=r.memoizedProps,N=N.ownerDocument||N;t:switch(x){case"title":T=N.getElementsByTagName("title")[0],(!T||T[Za]||T[hs]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=N.createElement(x),N.head.insertBefore(T,N.querySelector("head > title"))),Rs(T,x,c),T[hs]=r,rs(T),x=T;break e;case"link":var z=Zy("link","href",N).get(x+(c.href||""));if(z){for(var X=0;X<z.length;X++)if(T=z[X],T.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&T.getAttribute("rel")===(c.rel==null?null:c.rel)&&T.getAttribute("title")===(c.title==null?null:c.title)&&T.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){z.splice(X,1);break t}}T=N.createElement(x),Rs(T,x,c),N.head.appendChild(T);break;case"meta":if(z=Zy("meta","content",N).get(x+(c.content||""))){for(X=0;X<z.length;X++)if(T=z[X],T.getAttribute("content")===(c.content==null?null:""+c.content)&&T.getAttribute("name")===(c.name==null?null:c.name)&&T.getAttribute("property")===(c.property==null?null:c.property)&&T.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&T.getAttribute("charset")===(c.charSet==null?null:c.charSet)){z.splice(X,1);break t}}T=N.createElement(x),Rs(T,x,c),N.head.appendChild(T);break;default:throw Error(i(468,x))}T[hs]=r,rs(T),x=T}r.stateNode=x}else Jy(N,r.type,r.stateNode);else r.stateNode=Qy(N,x,r.memoizedProps);else T!==x?(T===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):T.count--,x===null?Jy(N,r.type,r.stateNode):Qy(N,x,r.memoizedProps)):x===null&&r.stateNode!==null&&df(r,r.memoizedProps,c.memoizedProps)}break;case 27:Qs(a,r),Zs(r),x&512&&(os||c===null||ln(c,c.return)),c!==null&&x&4&&df(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Qs(a,r),Zs(r),x&512&&(os||c===null||ln(c,c.return)),r.flags&32){N=r.stateNode;try{Pi(N,"")}catch(Ae){_t(r,r.return,Ae)}}x&4&&r.stateNode!=null&&(N=r.memoizedProps,df(r,N,c!==null?c.memoizedProps:N)),x&1024&&(mf=!0);break;case 6:if(Qs(a,r),Zs(r),x&4){if(r.stateNode===null)throw Error(i(162));x=r.memoizedProps,c=r.stateNode;try{c.nodeValue=x}catch(Ae){_t(r,r.return,Ae)}}break;case 3:if(qd=null,N=Hr,Hr=Wd(a.containerInfo),Qs(a,r),Hr=N,Zs(r),x&4&&c!==null&&c.memoizedState.isDehydrated)try{mo(a.containerInfo)}catch(Ae){_t(r,r.return,Ae)}mf&&(mf=!1,Jv(r));break;case 4:x=Hr,Hr=Wd(r.stateNode.containerInfo),Qs(a,r),Zs(r),Hr=x;break;case 12:Qs(a,r),Zs(r);break;case 31:Qs(a,r),Zs(r),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,Td(r,x)));break;case 13:Qs(a,r),Zs(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Dd=xt()),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,Td(r,x)));break;case 22:N=r.memoizedState!==null;var se=c!==null&&c.memoizedState!==null,de=Bn,ve=os;if(Bn=de||N,os=ve||se,Qs(a,r),os=ve,Bn=de,Zs(r),x&8192)e:for(a=r.stateNode,a._visibility=N?a._visibility&-2:a._visibility|1,N&&(c===null||se||Bn||os||fi(r)),c=null,a=r;;){if(a.tag===5||a.tag===26){if(c===null){se=c=a;try{if(T=se.stateNode,N)z=T.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{X=se.stateNode;var _e=se.memoizedProps.style,ue=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;X.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ae){_t(se,se.return,Ae)}}}else if(a.tag===6){if(c===null){se=a;try{se.stateNode.nodeValue=N?"":se.memoizedProps}catch(Ae){_t(se,se.return,Ae)}}}else if(a.tag===18){if(c===null){se=a;try{var he=se.stateNode;N?Fy(he,!0):Fy(se.stateNode,!1)}catch(Ae){_t(se,se.return,Ae)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}x&4&&(x=r.updateQueue,x!==null&&(c=x.retryQueue,c!==null&&(x.retryQueue=null,Td(r,c))));break;case 19:Qs(a,r),Zs(r),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,Td(r,x)));break;case 30:break;case 21:break;default:Qs(a,r),Zs(r)}}function Zs(r){var a=r.flags;if(a&2){try{for(var c,x=r.return;x!==null;){if(Wv(x)){c=x;break}x=x.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var N=c.stateNode,T=uf(r);Ad(r,T,N);break;case 5:var z=c.stateNode;c.flags&32&&(Pi(z,""),c.flags&=-33);var X=uf(r);Ad(r,X,z);break;case 3:case 4:var se=c.stateNode.containerInfo,de=uf(r);hf(r,de,se);break;default:throw Error(i(161))}}catch(ve){_t(r,r.return,ve)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Jv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Jv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function $n(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Gv(r,a.alternate,a),a=a.sibling}function fi(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:_a(4,a,a.return),fi(a);break;case 1:ln(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Fv(a,a.return,c),fi(a);break;case 27:Wl(a.stateNode);case 26:case 5:ln(a,a.return),fi(a);break;case 22:a.memoizedState===null&&fi(a);break;case 30:fi(a);break;default:fi(a)}r=r.sibling}}function Hn(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var x=a.alternate,N=r,T=a,z=T.flags;switch(T.tag){case 0:case 11:case 15:Hn(N,T,c),Ol(4,T);break;case 1:if(Hn(N,T,c),x=T,N=x.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(de){_t(x,x.return,de)}if(x=T,N=x.updateQueue,N!==null){var X=x.stateNode;try{var se=N.shared.hiddenCallbacks;if(se!==null)for(N.shared.hiddenCallbacks=null,N=0;N<se.length;N++)T0(se[N],X)}catch(de){_t(x,x.return,de)}}c&&z&64&&zv(T),Pl(T,T.return);break;case 27:Vv(T);case 26:case 5:Hn(N,T,c),c&&x===null&&z&4&&Uv(T),Pl(T,T.return);break;case 12:Hn(N,T,c);break;case 31:Hn(N,T,c),c&&z&4&&Kv(N,T);break;case 13:Hn(N,T,c),c&&z&4&&Qv(N,T);break;case 22:T.memoizedState===null&&Hn(N,T,c),Pl(T,T.return);break;case 30:break;default:Hn(N,T,c)}a=a.sibling}}function ff(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&_l(c))}function pf(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&_l(r))}function zr(r,a,c,x){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ey(r,a,c,x),a=a.sibling}function ey(r,a,c,x){var N=a.flags;switch(a.tag){case 0:case 11:case 15:zr(r,a,c,x),N&2048&&Ol(9,a);break;case 1:zr(r,a,c,x);break;case 3:zr(r,a,c,x),N&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&_l(r)));break;case 12:if(N&2048){zr(r,a,c,x),r=a.stateNode;try{var T=a.memoizedProps,z=T.id,X=T.onPostCommit;typeof X=="function"&&X(z,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(se){_t(a,a.return,se)}}else zr(r,a,c,x);break;case 31:zr(r,a,c,x);break;case 13:zr(r,a,c,x);break;case 23:break;case 22:T=a.stateNode,z=a.alternate,a.memoizedState!==null?T._visibility&2?zr(r,a,c,x):Ll(r,a):T._visibility&2?zr(r,a,c,x):(T._visibility|=2,to(r,a,c,x,(a.subtreeFlags&10256)!==0||!1)),N&2048&&ff(z,a);break;case 24:zr(r,a,c,x),N&2048&&pf(a.alternate,a);break;default:zr(r,a,c,x)}}function to(r,a,c,x,N){for(N=N&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var T=r,z=a,X=c,se=x,de=z.flags;switch(z.tag){case 0:case 11:case 15:to(T,z,X,se,N),Ol(8,z);break;case 23:break;case 22:var ve=z.stateNode;z.memoizedState!==null?ve._visibility&2?to(T,z,X,se,N):Ll(T,z):(ve._visibility|=2,to(T,z,X,se,N)),N&&de&2048&&ff(z.alternate,z);break;case 24:to(T,z,X,se,N),N&&de&2048&&pf(z.alternate,z);break;default:to(T,z,X,se,N)}a=a.sibling}}function Ll(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,x=a,N=x.flags;switch(x.tag){case 22:Ll(c,x),N&2048&&ff(x.alternate,x);break;case 24:Ll(c,x),N&2048&&pf(x.alternate,x);break;default:Ll(c,x)}a=a.sibling}}var Bl=8192;function so(r,a,c){if(r.subtreeFlags&Bl)for(r=r.child;r!==null;)ty(r,a,c),r=r.sibling}function ty(r,a,c){switch(r.tag){case 26:so(r,a,c),r.flags&Bl&&r.memoizedState!==null&&kk(c,Hr,r.memoizedState,r.memoizedProps);break;case 5:so(r,a,c);break;case 3:case 4:var x=Hr;Hr=Wd(r.stateNode.containerInfo),so(r,a,c),Hr=x;break;case 22:r.memoizedState===null&&(x=r.alternate,x!==null&&x.memoizedState!==null?(x=Bl,Bl=16777216,so(r,a,c),Bl=x):so(r,a,c));break;default:so(r,a,c)}}function sy(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Il(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var x=a[c];bs=x,ny(x,r)}sy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ry(r),r=r.sibling}function ry(r){switch(r.tag){case 0:case 11:case 15:Il(r),r.flags&2048&&_a(9,r,r.return);break;case 3:Il(r);break;case 12:Il(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Rd(r)):Il(r);break;default:Il(r)}}function Rd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var x=a[c];bs=x,ny(x,r)}sy(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:_a(8,a,a.return),Rd(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Rd(a));break;default:Rd(a)}r=r.sibling}}function ny(r,a){for(;bs!==null;){var c=bs;switch(c.tag){case 0:case 11:case 15:_a(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var x=c.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:_l(c.memoizedState.cache)}if(x=c.child,x!==null)x.return=c,bs=x;else e:for(c=r;bs!==null;){x=bs;var N=x.sibling,T=x.return;if(Yv(x),x===c){bs=null;break e}if(N!==null){N.return=T,bs=N;break e}bs=T}}}var UE={getCacheForType:function(r){var a=As(ns),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c},cacheSignal:function(){return As(ns).controller.signal}},WE=typeof WeakMap=="function"?WeakMap:Map,gt=0,Rt=null,at=null,ot=0,bt=0,dr=null,ja=!1,ro=!1,xf=!1,zn=0,Ut=0,wa=0,pi=0,gf=0,ur=0,no=0,$l=null,Js=null,vf=!1,Dd=0,ay=0,Md=1/0,Od=null,Sa=null,ms=0,Na=null,ao=null,Fn=0,yf=0,bf=null,iy=null,Hl=0,_f=null;function hr(){return(gt&2)!==0&&ot!==0?ot&-ot:B.T!==null?Ef():il()}function oy(){if(ur===0)if((ot&536870912)===0||dt){var r=tn;tn<<=1,(tn&3932160)===0&&(tn=262144),ur=r}else ur=536870912;return r=lr.current,r!==null&&(r.flags|=32),ur}function er(r,a,c){(r===Rt&&(bt===2||bt===9)||r.cancelPendingCommit!==null)&&(io(r,0),Ca(r,ot,ur,!1)),Mt(r,c),((gt&2)===0||r!==Rt)&&(r===Rt&&((gt&2)===0&&(pi|=c),Ut===4&&Ca(r,ot,ur,!1)),cn(r))}function ly(r,a,c){if((gt&6)!==0)throw Error(i(327));var x=!c&&(a&127)===0&&(a&r.expiredLanes)===0||Dt(r,a),N=x?GE(r,a):wf(r,a,!0),T=x;do{if(N===0){ro&&!x&&Ca(r,a,0,!1);break}else{if(c=r.current.alternate,T&&!VE(c)){N=wf(r,a,!1),T=!1;continue}if(N===2){if(T=a,r.errorRecoveryDisabledLanes&T)var z=0;else z=r.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){a=z;e:{var X=r;N=$l;var se=X.current.memoizedState.isDehydrated;if(se&&(io(X,z).flags|=256),z=wf(X,z,!1),z!==2){if(xf&&!se){X.errorRecoveryDisabledLanes|=T,pi|=T,N=4;break e}T=Js,Js=N,T!==null&&(Js===null?Js=T:Js.push.apply(Js,T))}N=z}if(T=!1,N!==2)continue}}if(N===1){io(r,0),Ca(r,a,0,!0);break}e:{switch(x=r,T=N,T){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ca(x,a,ur,!ja);break e;case 2:Js=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(N=Dd+300-xt(),10<N)){if(Ca(x,a,ur,!ja),qe(x,0,!0)!==0)break e;Fn=a,x.timeoutHandle=$y(cy.bind(null,x,c,Js,Od,vf,a,ur,pi,no,ja,T,"Throttled",-0,0),N);break e}cy(x,c,Js,Od,vf,a,ur,pi,no,ja,T,null,-0,0)}}break}while(!0);cn(r)}function cy(r,a,c,x,N,T,z,X,se,de,ve,_e,ue,he){if(r.timeoutHandle=-1,_e=a.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:En},ty(a,T,_e);var Ae=(T&62914560)===T?Dd-xt():(T&4194048)===T?ay-xt():0;if(Ae=Ak(_e,Ae),Ae!==null){Fn=T,r.cancelPendingCommit=Ae(gy.bind(null,r,a,T,c,x,N,z,X,se,ve,_e,null,ue,he)),Ca(r,T,z,!de);return}}gy(r,a,T,c,x,N,z,X,se)}function VE(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var x=0;x<c.length;x++){var N=c[x],T=N.getSnapshot;N=N.value;try{if(!ir(T(),N))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ca(r,a,c,x){a&=~gf,a&=~pi,r.suspendedLanes|=a,r.pingedLanes&=~a,x&&(r.warmLanes|=a),x=r.expirationTimes;for(var N=a;0<N;){var T=31-Tt(N),z=1<<T;x[T]=-1,N&=~z}c!==0&&jn(r,c,a)}function Pd(){return(gt&6)===0?(zl(0),!1):!0}function jf(){if(at!==null){if(bt===0)var r=at.return;else r=at,Rn=ii=null,Bm(r),Ki=null,wl=0,r=at;for(;r!==null;)Hv(r.alternate,r),r=r.return;at=null}}function io(r,a){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,uk(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Fn=0,jf(),Rt=r,at=c=An(r.current,null),ot=a,bt=0,dr=null,ja=!1,ro=Dt(r,a),xf=!1,no=ur=gf=pi=wa=Ut=0,Js=$l=null,vf=!1,(a&8)!==0&&(a|=a&32);var x=r.entangledLanes;if(x!==0)for(r=r.entanglements,x&=a;0<x;){var N=31-Tt(x),T=1<<N;a|=r[N],x&=~T}return zn=a,sd(),c}function dy(r,a){Ze=null,B.H=Rl,a===Xi||a===dd?(a=C0(),bt=3):a===Nm?(a=C0(),bt=4):bt=a===Jm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,dr=a,at===null&&(Ut=1,Sd(r,Nr(a,r.current)))}function uy(){var r=lr.current;return r===null?!0:(ot&4194048)===ot?Ar===null:(ot&62914560)===ot||(ot&536870912)!==0?r===Ar:!1}function hy(){var r=B.H;return B.H=Rl,r===null?Rl:r}function my(){var r=B.A;return B.A=UE,r}function Ld(){Ut=4,ja||(ot&4194048)!==ot&&lr.current!==null||(ro=!0),(wa&134217727)===0&&(pi&134217727)===0||Rt===null||Ca(Rt,ot,ur,!1)}function wf(r,a,c){var x=gt;gt|=2;var N=hy(),T=my();(Rt!==r||ot!==a)&&(Od=null,io(r,a)),a=!1;var z=Ut;e:do try{if(bt!==0&&at!==null){var X=at,se=dr;switch(bt){case 8:jf(),z=6;break e;case 3:case 2:case 9:case 6:lr.current===null&&(a=!0);var de=bt;if(bt=0,dr=null,oo(r,X,se,de),c&&ro){z=0;break e}break;default:de=bt,bt=0,dr=null,oo(r,X,se,de)}}qE(),z=Ut;break}catch(ve){dy(r,ve)}while(!0);return a&&r.shellSuspendCounter++,Rn=ii=null,gt=x,B.H=N,B.A=T,at===null&&(Rt=null,ot=0,sd()),z}function qE(){for(;at!==null;)fy(at)}function GE(r,a){var c=gt;gt|=2;var x=hy(),N=my();Rt!==r||ot!==a?(Od=null,Md=xt()+500,io(r,a)):ro=Dt(r,a);e:do try{if(bt!==0&&at!==null){a=at;var T=dr;t:switch(bt){case 1:bt=0,dr=null,oo(r,a,T,1);break;case 2:case 9:if(S0(T)){bt=0,dr=null,py(a);break}a=function(){bt!==2&&bt!==9||Rt!==r||(bt=7),cn(r)},T.then(a,a);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:S0(T)?(bt=0,dr=null,py(a)):(bt=0,dr=null,oo(r,a,T,7));break;case 5:var z=null;switch(at.tag){case 26:z=at.memoizedState;case 5:case 27:var X=at;if(z?eb(z):X.stateNode.complete){bt=0,dr=null;var se=X.sibling;if(se!==null)at=se;else{var de=X.return;de!==null?(at=de,Bd(de)):at=null}break t}}bt=0,dr=null,oo(r,a,T,5);break;case 6:bt=0,dr=null,oo(r,a,T,6);break;case 8:jf(),Ut=6;break e;default:throw Error(i(462))}}YE();break}catch(ve){dy(r,ve)}while(!0);return Rn=ii=null,B.H=x,B.A=N,gt=c,at!==null?0:(Rt=null,ot=0,sd(),Ut)}function YE(){for(;at!==null&&!kt();)fy(at)}function fy(r){var a=Iv(r.alternate,r,zn);r.memoizedProps=r.pendingProps,a===null?Bd(r):at=a}function py(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=Dv(c,a,a.pendingProps,a.type,void 0,ot);break;case 11:a=Dv(c,a,a.pendingProps,a.type.render,a.ref,ot);break;case 5:Bm(a);default:Hv(c,a),a=at=m0(a,zn),a=Iv(c,a,zn)}r.memoizedProps=r.pendingProps,a===null?Bd(r):at=a}function oo(r,a,c,x){Rn=ii=null,Bm(a),Ki=null,wl=0;var N=a.return;try{if(LE(r,N,a,c,ot)){Ut=1,Sd(r,Nr(c,r.current)),at=null;return}}catch(T){if(N!==null)throw at=N,T;Ut=1,Sd(r,Nr(c,r.current)),at=null;return}a.flags&32768?(dt||x===1?r=!0:ro||(ot&536870912)!==0?r=!1:(ja=r=!0,(x===2||x===9||x===3||x===6)&&(x=lr.current,x!==null&&x.tag===13&&(x.flags|=16384))),xy(a,r)):Bd(a)}function Bd(r){var a=r;do{if((a.flags&32768)!==0){xy(a,ja);return}r=a.return;var c=$E(a.alternate,a,zn);if(c!==null){at=c;return}if(a=a.sibling,a!==null){at=a;return}at=a=r}while(a!==null);Ut===0&&(Ut=5)}function xy(r,a){do{var c=HE(r.alternate,r);if(c!==null){c.flags&=32767,at=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){at=r;return}at=r=c}while(r!==null);Ut=6,at=null}function gy(r,a,c,x,N,T,z,X,se){r.cancelPendingCommit=null;do Id();while(ms!==0);if((gt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(T=a.lanes|a.childLanes,T|=dm,Bs(r,c,T,z,X,se),r===Rt&&(at=Rt=null,ot=0),ao=a,Na=r,Fn=c,yf=T,bf=N,iy=x,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,ZE($t,function(){return jy(),null})):(r.callbackNode=null,r.callbackPriority=0),x=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||x){x=B.T,B.T=null,N=V.p,V.p=2,z=gt,gt|=4;try{zE(r,a,c)}finally{gt=z,V.p=N,B.T=x}}ms=1,vy(),yy(),by()}}function vy(){if(ms===1){ms=0;var r=Na,a=ao,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var x=V.p;V.p=2;var N=gt;gt|=4;try{Zv(a,r);var T=Pf,z=n0(r.containerInfo),X=T.focusedElem,se=T.selectionRange;if(z!==X&&X&&X.ownerDocument&&r0(X.ownerDocument.documentElement,X)){if(se!==null&&am(X)){var de=se.start,ve=se.end;if(ve===void 0&&(ve=de),"selectionStart"in X)X.selectionStart=de,X.selectionEnd=Math.min(ve,X.value.length);else{var _e=X.ownerDocument||document,ue=_e&&_e.defaultView||window;if(ue.getSelection){var he=ue.getSelection(),Ae=X.textContent.length,Ve=Math.min(se.start,Ae),Ct=se.end===void 0?Ve:Math.min(se.end,Ae);!he.extend&&Ve>Ct&&(z=Ct,Ct=Ve,Ve=z);var le=s0(X,Ve),ne=s0(X,Ct);if(le&&ne&&(he.rangeCount!==1||he.anchorNode!==le.node||he.anchorOffset!==le.offset||he.focusNode!==ne.node||he.focusOffset!==ne.offset)){var ce=_e.createRange();ce.setStart(le.node,le.offset),he.removeAllRanges(),Ve>Ct?(he.addRange(ce),he.extend(ne.node,ne.offset)):(ce.setEnd(ne.node,ne.offset),he.addRange(ce))}}}}for(_e=[],he=X;he=he.parentNode;)he.nodeType===1&&_e.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<_e.length;X++){var be=_e[X];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Kd=!!Of,Pf=Of=null}finally{gt=N,V.p=x,B.T=c}}r.current=a,ms=2}}function yy(){if(ms===2){ms=0;var r=Na,a=ao,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var x=V.p;V.p=2;var N=gt;gt|=4;try{Gv(r,a.alternate,a)}finally{gt=N,V.p=x,B.T=c}}ms=3}}function by(){if(ms===4||ms===3){ms=0,wt();var r=Na,a=ao,c=Fn,x=iy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ms=5:(ms=0,ao=Na=null,_y(r,r.pendingLanes));var N=r.pendingLanes;if(N===0&&(Sa=null),ar(c),a=a.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Cs,a,void 0,(a.current.flags&128)===128)}catch{}if(x!==null){a=B.T,N=V.p,V.p=2,B.T=null;try{for(var T=r.onRecoverableError,z=0;z<x.length;z++){var X=x[z];T(X.value,{componentStack:X.stack})}}finally{B.T=a,V.p=N}}(Fn&3)!==0&&Id(),cn(r),N=r.pendingLanes,(c&261930)!==0&&(N&42)!==0?r===_f?Hl++:(Hl=0,_f=r):Hl=0,zl(0)}}function _y(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,_l(a)))}function Id(){return vy(),yy(),by(),jy()}function jy(){if(ms!==5)return!1;var r=Na,a=yf;yf=0;var c=ar(Fn),x=B.T,N=V.p;try{V.p=32>c?32:c,B.T=null,c=bf,bf=null;var T=Na,z=Fn;if(ms=0,ao=Na=null,Fn=0,(gt&6)!==0)throw Error(i(331));var X=gt;if(gt|=4,ry(T.current),ey(T,T.current,z,c),gt=X,zl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Cs,T)}catch{}return!0}finally{V.p=N,B.T=x,_y(r,a)}}function wy(r,a,c){a=Nr(c,a),a=Zm(r.stateNode,a,2),r=va(r,a,2),r!==null&&(Mt(r,2),cn(r))}function _t(r,a,c){if(r.tag===3)wy(r,r,c);else for(;a!==null;){if(a.tag===3){wy(a,r,c);break}else if(a.tag===1){var x=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Sa===null||!Sa.has(x))){r=Nr(c,r),c=Sv(2),x=va(a,c,2),x!==null&&(Nv(c,x,a,r),Mt(x,2),cn(x));break}}a=a.return}}function Sf(r,a,c){var x=r.pingCache;if(x===null){x=r.pingCache=new WE;var N=new Set;x.set(a,N)}else N=x.get(a),N===void 0&&(N=new Set,x.set(a,N));N.has(c)||(xf=!0,N.add(c),r=XE.bind(null,r,a,c),a.then(r,r))}function XE(r,a,c){var x=r.pingCache;x!==null&&x.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Rt===r&&(ot&c)===c&&(Ut===4||Ut===3&&(ot&62914560)===ot&&300>xt()-Dd?(gt&2)===0&&io(r,0):gf|=c,no===ot&&(no=0)),cn(r)}function Sy(r,a){a===0&&(a=ys()),r=ri(r,a),r!==null&&(Mt(r,a),cn(r))}function KE(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),Sy(r,c)}function QE(r,a){var c=0;switch(r.tag){case 31:case 13:var x=r.stateNode,N=r.memoizedState;N!==null&&(c=N.retryLane);break;case 19:x=r.stateNode;break;case 22:x=r.stateNode._retryCache;break;default:throw Error(i(314))}x!==null&&x.delete(a),Sy(r,c)}function ZE(r,a){return us(r,a)}var $d=null,lo=null,Nf=!1,Hd=!1,Cf=!1,Ea=0;function cn(r){r!==lo&&r.next===null&&(lo===null?$d=lo=r:lo=lo.next=r),Hd=!0,Nf||(Nf=!0,ek())}function zl(r,a){if(!Cf&&Hd){Cf=!0;do for(var c=!1,x=$d;x!==null;){if(r!==0){var N=x.pendingLanes;if(N===0)var T=0;else{var z=x.suspendedLanes,X=x.pingedLanes;T=(1<<31-Tt(42|r)+1)-1,T&=N&~(z&~X),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(c=!0,ky(x,T))}else T=ot,T=qe(x,x===Rt?T:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(T&3)===0||Dt(x,T)||(c=!0,ky(x,T));x=x.next}while(c);Cf=!1}}function JE(){Ny()}function Ny(){Hd=Nf=!1;var r=0;Ea!==0&&dk()&&(r=Ea);for(var a=xt(),c=null,x=$d;x!==null;){var N=x.next,T=Cy(x,a);T===0?(x.next=null,c===null?$d=N:c.next=N,N===null&&(lo=c)):(c=x,(r!==0||(T&3)!==0)&&(Hd=!0)),x=N}ms!==0&&ms!==5||zl(r),Ea!==0&&(Ea=0)}function Cy(r,a){for(var c=r.suspendedLanes,x=r.pingedLanes,N=r.expirationTimes,T=r.pendingLanes&-62914561;0<T;){var z=31-Tt(T),X=1<<z,se=N[z];se===-1?((X&c)===0||(X&x)!==0)&&(N[z]=ss(X,a)):se<=a&&(r.expiredLanes|=X),T&=~X}if(a=Rt,c=ot,c=qe(r,r===a?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),x=r.callbackNode,c===0||r===a&&(bt===2||bt===9)||r.cancelPendingCommit!==null)return x!==null&&x!==null&&Us(x),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Dt(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(x!==null&&Us(x),ar(c)){case 2:case 8:c=Ps;break;case 32:c=$t;break;case 268435456:c=Bt;break;default:c=$t}return x=Ey.bind(null,r),c=us(c,x),r.callbackPriority=a,r.callbackNode=c,a}return x!==null&&x!==null&&Us(x),r.callbackPriority=2,r.callbackNode=null,2}function Ey(r,a){if(ms!==0&&ms!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Id()&&r.callbackNode!==c)return null;var x=ot;return x=qe(r,r===Rt?x:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),x===0?null:(ly(r,x,a),Cy(r,xt()),r.callbackNode!=null&&r.callbackNode===c?Ey.bind(null,r):null)}function ky(r,a){if(Id())return null;ly(r,a,!0)}function ek(){hk(function(){(gt&6)!==0?us(Gt,JE):Ny()})}function Ef(){if(Ea===0){var r=Gi;r===0&&(r=_r,_r<<=1,(_r&261888)===0&&(_r=256)),Ea=r}return Ea}function Ay(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Yc(""+r)}function Ty(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function tk(r,a,c,x,N){if(a==="submit"&&c&&c.stateNode===N){var T=Ay((N[Es]||null).action),z=x.submitter;z&&(a=(a=z[Es]||null)?Ay(a.formAction):z.getAttribute("formAction"),a!==null&&(T=a,z=null));var X=new Zc("action","action",null,x,N);r.push({event:X,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Ea!==0){var se=z?Ty(N,z):new FormData(N);qm(c,{pending:!0,data:se,method:N.method,action:T},null,se)}}else typeof T=="function"&&(X.preventDefault(),se=z?Ty(N,z):new FormData(N),qm(c,{pending:!0,data:se,method:N.method,action:T},T,se))},currentTarget:N}]})}}for(var kf=0;kf<cm.length;kf++){var Af=cm[kf],sk=Af.toLowerCase(),rk=Af[0].toUpperCase()+Af.slice(1);$r(sk,"on"+rk)}$r(o0,"onAnimationEnd"),$r(l0,"onAnimationIteration"),$r(c0,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(yE,"onTransitionRun"),$r(bE,"onTransitionStart"),$r(_E,"onTransitionCancel"),$r(d0,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function Ry(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var x=r[c],N=x.event;x=x.listeners;e:{var T=void 0;if(a)for(var z=x.length-1;0<=z;z--){var X=x[z],se=X.instance,de=X.currentTarget;if(X=X.listener,se!==T&&N.isPropagationStopped())break e;T=X,N.currentTarget=de;try{T(N)}catch(ve){td(ve)}N.currentTarget=null,T=se}else for(z=0;z<x.length;z++){if(X=x[z],se=X.instance,de=X.currentTarget,X=X.listener,se!==T&&N.isPropagationStopped())break e;T=X,N.currentTarget=de;try{T(N)}catch(ve){td(ve)}N.currentTarget=null,T=se}}}}function it(r,a){var c=a[ol];c===void 0&&(c=a[ol]=new Set);var x=r+"__bubble";c.has(x)||(Dy(a,r,2,!1),c.add(x))}function Tf(r,a,c){var x=0;a&&(x|=4),Dy(c,r,x,a)}var zd="_reactListening"+Math.random().toString(36).slice(2);function Rf(r){if(!r[zd]){r[zd]=!0,zc.forEach(function(c){c!=="selectionchange"&&(nk.has(c)||Tf(c,!1,r),Tf(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[zd]||(a[zd]=!0,Tf("selectionchange",!1,a))}}function Dy(r,a,c,x){switch(ob(a)){case 2:var N=Dk;break;case 8:N=Mk;break;default:N=qf}c=N.bind(null,a,c,r),N=void 0,!Kh||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(N=!0),x?N!==void 0?r.addEventListener(a,c,{capture:!0,passive:N}):r.addEventListener(a,c,!0):N!==void 0?r.addEventListener(a,c,{passive:N}):r.addEventListener(a,c,!1)}function Df(r,a,c,x,N){var T=x;if((a&1)===0&&(a&2)===0&&x!==null)e:for(;;){if(x===null)return;var z=x.tag;if(z===3||z===4){var X=x.stateNode.containerInfo;if(X===N)break;if(z===4)for(z=x.return;z!==null;){var se=z.tag;if((se===3||se===4)&&z.stateNode.containerInfo===N)return;z=z.return}for(;X!==null;){if(z=ca(X),z===null)return;if(se=z.tag,se===5||se===6||se===26||se===27){x=T=z;continue e}X=X.parentNode}}x=x.return}Bg(function(){var de=T,ve=Yh(c),_e=[];e:{var ue=u0.get(r);if(ue!==void 0){var he=Zc,Ae=r;switch(r){case"keypress":if(Kc(c)===0)break e;case"keydown":case"keyup":he=Q2;break;case"focusin":Ae="focus",he=em;break;case"focusout":Ae="blur",he=em;break;case"beforeblur":case"afterblur":he=em;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=$2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=eE;break;case o0:case l0:case c0:he=F2;break;case d0:he=sE;break;case"scroll":case"scrollend":he=B2;break;case"wheel":he=nE;break;case"copy":case"cut":case"paste":he=W2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Fg;break;case"toggle":case"beforetoggle":he=iE}var Ve=(a&4)!==0,Ct=!Ve&&(r==="scroll"||r==="scrollend"),le=Ve?ue!==null?ue+"Capture":null:ue;Ve=[];for(var ne=de,ce;ne!==null;){var be=ne;if(ce=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ce===null||le===null||(be=dl(ne,le),be!=null&&Ve.push(Ul(ne,be,ce))),Ct)break;ne=ne.return}0<Ve.length&&(ue=new he(ue,Ae,null,c,ve),_e.push({event:ue,listeners:Ve}))}}if((a&7)===0){e:{if(ue=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",ue&&c!==Gh&&(Ae=c.relatedTarget||c.fromElement)&&(ca(Ae)||Ae[la]))break e;if((he||ue)&&(ue=ve.window===ve?ve:(ue=ve.ownerDocument)?ue.defaultView||ue.parentWindow:window,he?(Ae=c.relatedTarget||c.toElement,he=de,Ae=Ae?ca(Ae):null,Ae!==null&&(Ct=u(Ae),Ve=Ae.tag,Ae!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Ae=null)):(he=null,Ae=de),he!==Ae)){if(Ve=Hg,be="onMouseLeave",le="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(Ve=Fg,be="onPointerLeave",le="onPointerEnter",ne="pointer"),Ct=he==null?ue:Ja(he),ce=Ae==null?ue:Ja(Ae),ue=new Ve(be,ne+"leave",he,c,ve),ue.target=Ct,ue.relatedTarget=ce,be=null,ca(ve)===de&&(Ve=new Ve(le,ne+"enter",Ae,c,ve),Ve.target=ce,Ve.relatedTarget=Ct,be=Ve),Ct=be,he&&Ae)t:{for(Ve=ak,le=he,ne=Ae,ce=0,be=le;be;be=Ve(be))ce++;be=0;for(var He=ne;He;He=Ve(He))be++;for(;0<ce-be;)le=Ve(le),ce--;for(;0<be-ce;)ne=Ve(ne),be--;for(;ce--;){if(le===ne||ne!==null&&le===ne.alternate){Ve=le;break t}le=Ve(le),ne=Ve(ne)}Ve=null}else Ve=null;he!==null&&My(_e,ue,he,Ve,!1),Ae!==null&&Ct!==null&&My(_e,Ct,Ae,Ve,!0)}}e:{if(ue=de?Ja(de):window,he=ue.nodeName&&ue.nodeName.toLowerCase(),he==="select"||he==="input"&&ue.type==="file")var mt=Kg;else if(Yg(ue))if(Qg)mt=xE;else{mt=fE;var Oe=mE}else he=ue.nodeName,!he||he.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?de&&qh(de.elementType)&&(mt=Kg):mt=pE;if(mt&&(mt=mt(r,de))){Xg(_e,mt,c,ve);break e}Oe&&Oe(r,ue,de),r==="focusout"&&de&&ue.type==="number"&&de.memoizedProps.value!=null&&Vh(ue,"number",ue.value)}switch(Oe=de?Ja(de):window,r){case"focusin":(Yg(Oe)||Oe.contentEditable==="true")&&($i=Oe,im=de,vl=null);break;case"focusout":vl=im=$i=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,a0(_e,c,ve);break;case"selectionchange":if(vE)break;case"keydown":case"keyup":a0(_e,c,ve)}var et;if(sm)e:{switch(r){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Ii?qg(r,c)&&(lt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(lt="onCompositionStart");lt&&(Ug&&c.locale!=="ko"&&(Ii||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Ii&&(et=Ig()):(ua=ve,Qh="value"in ua?ua.value:ua.textContent,Ii=!0)),Oe=Fd(de,lt),0<Oe.length&&(lt=new zg(lt,r,null,c,ve),_e.push({event:lt,listeners:Oe}),et?lt.data=et:(et=Gg(c),et!==null&&(lt.data=et)))),(et=lE?cE(r,c):dE(r,c))&&(lt=Fd(de,"onBeforeInput"),0<lt.length&&(Oe=new zg("onBeforeInput","beforeinput",null,c,ve),_e.push({event:Oe,listeners:lt}),Oe.data=et)),tk(_e,r,de,c,ve)}Ry(_e,a)})}function Ul(r,a,c){return{instance:r,listener:a,currentTarget:c}}function Fd(r,a){for(var c=a+"Capture",x=[];r!==null;){var N=r,T=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||T===null||(N=dl(r,c),N!=null&&x.unshift(Ul(r,N,T)),N=dl(r,a),N!=null&&x.push(Ul(r,N,T))),r.tag===3)return x;r=r.return}return[]}function ak(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function My(r,a,c,x,N){for(var T=a._reactName,z=[];c!==null&&c!==x;){var X=c,se=X.alternate,de=X.stateNode;if(X=X.tag,se!==null&&se===x)break;X!==5&&X!==26&&X!==27||de===null||(se=de,N?(de=dl(c,T),de!=null&&z.unshift(Ul(c,de,se))):N||(de=dl(c,T),de!=null&&z.push(Ul(c,de,se)))),c=c.return}z.length!==0&&r.push({event:a,listeners:z})}var ik=/\r\n?/g,ok=/\u0000|\uFFFD/g;function Oy(r){return(typeof r=="string"?r:""+r).replace(ik,`
`).replace(ok,"")}function Py(r,a){return a=Oy(a),Oy(r)===a}function Nt(r,a,c,x,N,T){switch(c){case"children":typeof x=="string"?a==="body"||a==="textarea"&&x===""||Pi(r,x):(typeof x=="number"||typeof x=="bigint")&&a!=="body"&&Pi(r,""+x);break;case"className":qc(r,"class",x);break;case"tabIndex":qc(r,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":qc(r,c,x);break;case"style":Pg(r,x,T);break;case"data":if(a!=="object"){qc(r,"data",x);break}case"src":case"href":if(x===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){r.removeAttribute(c);break}x=Yc(""+x),r.setAttribute(c,x);break;case"action":case"formAction":if(typeof x=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(c==="formAction"?(a!=="input"&&Nt(r,a,"name",N.name,N,null),Nt(r,a,"formEncType",N.formEncType,N,null),Nt(r,a,"formMethod",N.formMethod,N,null),Nt(r,a,"formTarget",N.formTarget,N,null)):(Nt(r,a,"encType",N.encType,N,null),Nt(r,a,"method",N.method,N,null),Nt(r,a,"target",N.target,N,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){r.removeAttribute(c);break}x=Yc(""+x),r.setAttribute(c,x);break;case"onClick":x!=null&&(r.onclick=En);break;case"onScroll":x!=null&&it("scroll",r);break;case"onScrollEnd":x!=null&&it("scrollend",r);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(c=x.__html,c!=null){if(N.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":r.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){r.removeAttribute("xlink:href");break}c=Yc(""+x),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(c,""+x):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":x===!0?r.setAttribute(c,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(c,x):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?r.setAttribute(c,x):r.removeAttribute(c);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?r.removeAttribute(c):r.setAttribute(c,x);break;case"popover":it("beforetoggle",r),it("toggle",r),Vc(r,"popover",x);break;case"xlinkActuate":Cn(r,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Cn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Cn(r,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Cn(r,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Cn(r,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Cn(r,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Cn(r,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Cn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Cn(r,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Vc(r,"is",x);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=P2.get(c)||c,Vc(r,c,x))}}function Mf(r,a,c,x,N,T){switch(c){case"style":Pg(r,x,T);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(c=x.__html,c!=null){if(N.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof x=="string"?Pi(r,x):(typeof x=="number"||typeof x=="bigint")&&Pi(r,""+x);break;case"onScroll":x!=null&&it("scroll",r);break;case"onScrollEnd":x!=null&&it("scrollend",r);break;case"onClick":x!=null&&(r.onclick=En);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(N=c.endsWith("Capture"),a=c.slice(2,N?c.length-7:void 0),T=r[Es]||null,T=T!=null?T[c]:null,typeof T=="function"&&r.removeEventListener(a,T,N),typeof x=="function")){typeof T!="function"&&T!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,x,N);break e}c in r?r[c]=x:x===!0?r.setAttribute(c,""):Vc(r,c,x)}}}function Rs(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",r),it("load",r);var x=!1,N=!1,T;for(T in c)if(c.hasOwnProperty(T)){var z=c[T];if(z!=null)switch(T){case"src":x=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Nt(r,a,T,z,c,null)}}N&&Nt(r,a,"srcSet",c.srcSet,c,null),x&&Nt(r,a,"src",c.src,c,null);return;case"input":it("invalid",r);var X=T=z=N=null,se=null,de=null;for(x in c)if(c.hasOwnProperty(x)){var ve=c[x];if(ve!=null)switch(x){case"name":N=ve;break;case"type":z=ve;break;case"checked":se=ve;break;case"defaultChecked":de=ve;break;case"value":T=ve;break;case"defaultValue":X=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,a));break;default:Nt(r,a,x,ve,c,null)}}Rg(r,T,X,se,de,z,N,!1);return;case"select":it("invalid",r),x=z=T=null;for(N in c)if(c.hasOwnProperty(N)&&(X=c[N],X!=null))switch(N){case"value":T=X;break;case"defaultValue":z=X;break;case"multiple":x=X;default:Nt(r,a,N,X,c,null)}a=T,c=z,r.multiple=!!x,a!=null?Oi(r,!!x,a,!1):c!=null&&Oi(r,!!x,c,!0);return;case"textarea":it("invalid",r),T=N=x=null;for(z in c)if(c.hasOwnProperty(z)&&(X=c[z],X!=null))switch(z){case"value":x=X;break;case"defaultValue":N=X;break;case"children":T=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(91));break;default:Nt(r,a,z,X,c,null)}Mg(r,x,N,T);return;case"option":for(se in c)if(c.hasOwnProperty(se)&&(x=c[se],x!=null))switch(se){case"selected":r.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Nt(r,a,se,x,c,null)}return;case"dialog":it("beforetoggle",r),it("toggle",r),it("cancel",r),it("close",r);break;case"iframe":case"object":it("load",r);break;case"video":case"audio":for(x=0;x<Fl.length;x++)it(Fl[x],r);break;case"image":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"embed":case"source":case"link":it("error",r),it("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in c)if(c.hasOwnProperty(de)&&(x=c[de],x!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Nt(r,a,de,x,c,null)}return;default:if(qh(a)){for(ve in c)c.hasOwnProperty(ve)&&(x=c[ve],x!==void 0&&Mf(r,a,ve,x,c,void 0));return}}for(X in c)c.hasOwnProperty(X)&&(x=c[X],x!=null&&Nt(r,a,X,x,c,null))}function lk(r,a,c,x){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,T=null,z=null,X=null,se=null,de=null,ve=null;for(he in c){var _e=c[he];if(c.hasOwnProperty(he)&&_e!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":se=_e;default:x.hasOwnProperty(he)||Nt(r,a,he,null,x,_e)}}for(var ue in x){var he=x[ue];if(_e=c[ue],x.hasOwnProperty(ue)&&(he!=null||_e!=null))switch(ue){case"type":T=he;break;case"name":N=he;break;case"checked":de=he;break;case"defaultChecked":ve=he;break;case"value":z=he;break;case"defaultValue":X=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,a));break;default:he!==_e&&Nt(r,a,ue,he,x,_e)}}Wh(r,z,X,se,de,ve,T,N);return;case"select":he=z=X=ue=null;for(T in c)if(se=c[T],c.hasOwnProperty(T)&&se!=null)switch(T){case"value":break;case"multiple":he=se;default:x.hasOwnProperty(T)||Nt(r,a,T,null,x,se)}for(N in x)if(T=x[N],se=c[N],x.hasOwnProperty(N)&&(T!=null||se!=null))switch(N){case"value":ue=T;break;case"defaultValue":X=T;break;case"multiple":z=T;default:T!==se&&Nt(r,a,N,T,x,se)}a=X,c=z,x=he,ue!=null?Oi(r,!!c,ue,!1):!!x!=!!c&&(a!=null?Oi(r,!!c,a,!0):Oi(r,!!c,c?[]:"",!1));return;case"textarea":he=ue=null;for(X in c)if(N=c[X],c.hasOwnProperty(X)&&N!=null&&!x.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Nt(r,a,X,null,x,N)}for(z in x)if(N=x[z],T=c[z],x.hasOwnProperty(z)&&(N!=null||T!=null))switch(z){case"value":ue=N;break;case"defaultValue":he=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:N!==T&&Nt(r,a,z,N,x,T)}Dg(r,ue,he);return;case"option":for(var Ae in c)if(ue=c[Ae],c.hasOwnProperty(Ae)&&ue!=null&&!x.hasOwnProperty(Ae))switch(Ae){case"selected":r.selected=!1;break;default:Nt(r,a,Ae,null,x,ue)}for(se in x)if(ue=x[se],he=c[se],x.hasOwnProperty(se)&&ue!==he&&(ue!=null||he!=null))switch(se){case"selected":r.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:Nt(r,a,se,ue,x,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in c)ue=c[Ve],c.hasOwnProperty(Ve)&&ue!=null&&!x.hasOwnProperty(Ve)&&Nt(r,a,Ve,null,x,ue);for(de in x)if(ue=x[de],he=c[de],x.hasOwnProperty(de)&&ue!==he&&(ue!=null||he!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,a));break;default:Nt(r,a,de,ue,x,he)}return;default:if(qh(a)){for(var Ct in c)ue=c[Ct],c.hasOwnProperty(Ct)&&ue!==void 0&&!x.hasOwnProperty(Ct)&&Mf(r,a,Ct,void 0,x,ue);for(ve in x)ue=x[ve],he=c[ve],!x.hasOwnProperty(ve)||ue===he||ue===void 0&&he===void 0||Mf(r,a,ve,ue,x,he);return}}for(var le in c)ue=c[le],c.hasOwnProperty(le)&&ue!=null&&!x.hasOwnProperty(le)&&Nt(r,a,le,null,x,ue);for(_e in x)ue=x[_e],he=c[_e],!x.hasOwnProperty(_e)||ue===he||ue==null&&he==null||Nt(r,a,_e,ue,x,he)}function Ly(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ck(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,c=performance.getEntriesByType("resource"),x=0;x<c.length;x++){var N=c[x],T=N.transferSize,z=N.initiatorType,X=N.duration;if(T&&X&&Ly(z)){for(z=0,X=N.responseEnd,x+=1;x<c.length;x++){var se=c[x],de=se.startTime;if(de>X)break;var ve=se.transferSize,_e=se.initiatorType;ve&&Ly(_e)&&(se=se.responseEnd,z+=ve*(se<X?1:(X-de)/(se-de)))}if(--x,a+=8*(T+z)/(N.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Of=null,Pf=null;function Ud(r){return r.nodeType===9?r:r.ownerDocument}function By(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iy(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Lf(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bf=null;function dk(){var r=window.event;return r&&r.type==="popstate"?r===Bf?!1:(Bf=r,!0):(Bf=null,!1)}var $y=typeof setTimeout=="function"?setTimeout:void 0,uk=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,hk=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(r){return Hy.resolve(null).then(r).catch(mk)}:$y;function mk(r){setTimeout(function(){throw r})}function ka(r){return r==="head"}function zy(r,a){var c=a,x=0;do{var N=c.nextSibling;if(r.removeChild(c),N&&N.nodeType===8)if(c=N.data,c==="/$"||c==="/&"){if(x===0){r.removeChild(N),mo(a);return}x--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")x++;else if(c==="html")Wl(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Wl(c);for(var T=c.firstChild;T;){var z=T.nextSibling,X=T.nodeName;T[Za]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&T.rel.toLowerCase()==="stylesheet"||c.removeChild(T),T=z}}else c==="body"&&Wl(r.ownerDocument.body);c=N}while(c);mo(a)}function Fy(r,a){var c=r;r=0;do{var x=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=x}while(c)}function If(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":If(c),ll(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function fk(r,a,c,x){for(;r.nodeType===1;){var N=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!x&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(x){if(!r[Za])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(T=r.getAttribute("rel"),T==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(T!==N.rel||r.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||r.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||r.getAttribute("title")!==(N.title==null?null:N.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(T=r.getAttribute("src"),(T!==(N.src==null?null:N.src)||r.getAttribute("type")!==(N.type==null?null:N.type)||r.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&T&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var T=N.name==null?null:""+N.name;if(N.type==="hidden"&&r.getAttribute("name")===T)return r}else return r;if(r=Tr(r.nextSibling),r===null)break}return null}function pk(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Tr(r.nextSibling),r===null))return null;return r}function Uy(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Tr(r.nextSibling),r===null))return null;return r}function $f(r){return r.data==="$?"||r.data==="$~"}function Hf(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function xk(r,a){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||c.readyState!=="loading")a();else{var x=function(){a(),c.removeEventListener("DOMContentLoaded",x)};c.addEventListener("DOMContentLoaded",x),r._reactRetry=x}}function Tr(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var zf=null;function Wy(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(a===0)return Tr(r.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}r=r.nextSibling}return null}function Vy(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return r;a--}else c!=="/$"&&c!=="/&"||a++}r=r.previousSibling}return null}function qy(r,a,c){switch(a=Ud(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Wl(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);ll(r)}var Rr=new Map,Gy=new Set;function Wd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Un=V.d;V.d={f:gk,r:vk,D:yk,C:bk,L:_k,m:jk,X:Sk,S:wk,M:Nk};function gk(){var r=Un.f(),a=Pd();return r||a}function vk(r){var a=wn(r);a!==null&&a.tag===5&&a.type==="form"?dv(a):Un.r(r)}var co=typeof document>"u"?null:document;function Yy(r,a,c){var x=co;if(x&&typeof a=="string"&&a){var N=wr(a);N='link[rel="'+r+'"][href="'+N+'"]',typeof c=="string"&&(N+='[crossorigin="'+c+'"]'),Gy.has(N)||(Gy.add(N),r={rel:r,crossOrigin:c,href:a},x.querySelector(N)===null&&(a=x.createElement("link"),Rs(a,"link",r),rs(a),x.head.appendChild(a)))}}function yk(r){Un.D(r),Yy("dns-prefetch",r,null)}function bk(r,a){Un.C(r,a),Yy("preconnect",r,a)}function _k(r,a,c){Un.L(r,a,c);var x=co;if(x&&r&&a){var N='link[rel="preload"][as="'+wr(a)+'"]';a==="image"&&c&&c.imageSrcSet?(N+='[imagesrcset="'+wr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(N+='[imagesizes="'+wr(c.imageSizes)+'"]')):N+='[href="'+wr(r)+'"]';var T=N;switch(a){case"style":T=uo(r);break;case"script":T=ho(r)}Rr.has(T)||(r=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),Rr.set(T,r),x.querySelector(N)!==null||a==="style"&&x.querySelector(Vl(T))||a==="script"&&x.querySelector(ql(T))||(a=x.createElement("link"),Rs(a,"link",r),rs(a),x.head.appendChild(a)))}}function jk(r,a){Un.m(r,a);var c=co;if(c&&r){var x=a&&typeof a.as=="string"?a.as:"script",N='link[rel="modulepreload"][as="'+wr(x)+'"][href="'+wr(r)+'"]',T=N;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=ho(r)}if(!Rr.has(T)&&(r=m({rel:"modulepreload",href:r},a),Rr.set(T,r),c.querySelector(N)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ql(T)))return}x=c.createElement("link"),Rs(x,"link",r),rs(x),c.head.appendChild(x)}}}function wk(r,a,c){Un.S(r,a,c);var x=co;if(x&&r){var N=da(x).hoistableStyles,T=uo(r);a=a||"default";var z=N.get(T);if(!z){var X={loading:0,preload:null};if(z=x.querySelector(Vl(T)))X.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":a},c),(c=Rr.get(T))&&Ff(r,c);var se=z=x.createElement("link");rs(se),Rs(se,"link",r),se._p=new Promise(function(de,ve){se.onload=de,se.onerror=ve}),se.addEventListener("load",function(){X.loading|=1}),se.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Vd(z,a,x)}z={type:"stylesheet",instance:z,count:1,state:X},N.set(T,z)}}}function Sk(r,a){Un.X(r,a);var c=co;if(c&&r){var x=da(c).hoistableScripts,N=ho(r),T=x.get(N);T||(T=c.querySelector(ql(N)),T||(r=m({src:r,async:!0},a),(a=Rr.get(N))&&Uf(r,a),T=c.createElement("script"),rs(T),Rs(T,"link",r),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(N,T))}}function Nk(r,a){Un.M(r,a);var c=co;if(c&&r){var x=da(c).hoistableScripts,N=ho(r),T=x.get(N);T||(T=c.querySelector(ql(N)),T||(r=m({src:r,async:!0,type:"module"},a),(a=Rr.get(N))&&Uf(r,a),T=c.createElement("script"),rs(T),Rs(T,"link",r),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(N,T))}}function Xy(r,a,c,x){var N=(N=oe.current)?Wd(N):null;if(!N)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=uo(c.href),c=da(N).hoistableStyles,x=c.get(a),x||(x={type:"style",instance:null,count:0,state:null},c.set(a,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=uo(c.href);var T=da(N).hoistableStyles,z=T.get(r);if(z||(N=N.ownerDocument||N,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(r,z),(T=N.querySelector(Vl(r)))&&!T._p&&(z.instance=T,z.state.loading=5),Rr.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Rr.set(r,c),T||Ck(N,r,c,z.state))),a&&x===null)throw Error(i(528,""));return z}if(a&&x!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ho(c),c=da(N).hoistableScripts,x=c.get(a),x||(x={type:"script",instance:null,count:0,state:null},c.set(a,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function uo(r){return'href="'+wr(r)+'"'}function Vl(r){return'link[rel="stylesheet"]['+r+"]"}function Ky(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function Ck(r,a,c,x){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?x.loading=1:(a=r.createElement("link"),x.preload=a,a.addEventListener("load",function(){return x.loading|=1}),a.addEventListener("error",function(){return x.loading|=2}),Rs(a,"link",c),rs(a),r.head.appendChild(a))}function ho(r){return'[src="'+wr(r)+'"]'}function ql(r){return"script[async]"+r}function Qy(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var x=r.querySelector('style[data-href~="'+wr(c.href)+'"]');if(x)return a.instance=x,rs(x),x;var N=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return x=(r.ownerDocument||r).createElement("style"),rs(x),Rs(x,"style",N),Vd(x,c.precedence,r),a.instance=x;case"stylesheet":N=uo(c.href);var T=r.querySelector(Vl(N));if(T)return a.state.loading|=4,a.instance=T,rs(T),T;x=Ky(c),(N=Rr.get(N))&&Ff(x,N),T=(r.ownerDocument||r).createElement("link"),rs(T);var z=T;return z._p=new Promise(function(X,se){z.onload=X,z.onerror=se}),Rs(T,"link",x),a.state.loading|=4,Vd(T,c.precedence,r),a.instance=T;case"script":return T=ho(c.src),(N=r.querySelector(ql(T)))?(a.instance=N,rs(N),N):(x=c,(N=Rr.get(T))&&(x=m({},c),Uf(x,N)),r=r.ownerDocument||r,N=r.createElement("script"),rs(N),Rs(N,"link",x),r.head.appendChild(N),a.instance=N);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(x=a.instance,a.state.loading|=4,Vd(x,c.precedence,r));return a.instance}function Vd(r,a,c){for(var x=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=x.length?x[x.length-1]:null,T=N,z=0;z<x.length;z++){var X=x[z];if(X.dataset.precedence===a)T=X;else if(T!==N)break}T?T.parentNode.insertBefore(r,T.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function Ff(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Uf(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var qd=null;function Zy(r,a,c){if(qd===null){var x=new Map,N=qd=new Map;N.set(c,x)}else N=qd,x=N.get(c),x||(x=new Map,N.set(c,x));if(x.has(r))return x;for(x.set(r,null),c=c.getElementsByTagName(r),N=0;N<c.length;N++){var T=c[N];if(!(T[Za]||T[hs]||r==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var z=T.getAttribute(a)||"";z=r+z;var X=x.get(z);X?X.push(T):x.set(z,[T])}}return x}function Jy(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function Ek(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function eb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function kk(r,a,c,x){if(c.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var N=uo(x.href),T=a.querySelector(Vl(N));if(T){a=T._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Gd.bind(r),a.then(r,r)),c.state.loading|=4,c.instance=T,rs(T);return}T=a.ownerDocument||a,x=Ky(x),(N=Rr.get(N))&&Ff(x,N),T=T.createElement("link"),rs(T);var z=T;z._p=new Promise(function(X,se){z.onload=X,z.onerror=se}),Rs(T,"link",x),c.instance=T}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Gd.bind(r),a.addEventListener("load",c),a.addEventListener("error",c))}}var Wf=0;function Ak(r,a){return r.stylesheets&&r.count===0&&Xd(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var x=setTimeout(function(){if(r.stylesheets&&Xd(r,r.stylesheets),r.unsuspend){var T=r.unsuspend;r.unsuspend=null,T()}},6e4+a);0<r.imgBytes&&Wf===0&&(Wf=62500*ck());var N=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Xd(r,r.stylesheets),r.unsuspend)){var T=r.unsuspend;r.unsuspend=null,T()}},(r.imgBytes>Wf?50:800)+a);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(x),clearTimeout(N)}}:null}function Gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Yd=null;function Xd(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Yd=new Map,a.forEach(Tk,r),Yd=null,Gd.call(r))}function Tk(r,a){if(!(a.state.loading&4)){var c=Yd.get(r);if(c)var x=c.get(null);else{c=new Map,Yd.set(r,c);for(var N=r.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<N.length;T++){var z=N[T];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(c.set(z.dataset.precedence,z),x=z)}x&&c.set(null,x)}N=a.instance,z=N.getAttribute("data-precedence"),T=c.get(z)||x,T===x&&c.set(null,N),c.set(z,N),this.count++,x=Gd.bind(this),N.addEventListener("load",x),N.addEventListener("error",x),T?T.parentNode.insertBefore(N,T.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(N,r.firstChild)),a.state.loading|=4}}var Gl={$$typeof:_,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Rk(r,a,c,x,N,T,z,X,se){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=x,this.onUncaughtError=N,this.onCaughtError=T,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function tb(r,a,c,x,N,T,z,X,se,de,ve,_e){return r=new Rk(r,a,c,z,se,de,ve,_e,X),a=1,T===!0&&(a|=24),T=or(3,null,null,a),r.current=T,T.stateNode=r,a=jm(),a.refCount++,r.pooledCache=a,a.refCount++,T.memoizedState={element:x,isDehydrated:c,cache:a},Cm(T),r}function sb(r){return r?(r=Fi,r):Fi}function rb(r,a,c,x,N,T){N=sb(N),x.context===null?x.context=N:x.pendingContext=N,x=ga(a),x.payload={element:c},T=T===void 0?null:T,T!==null&&(x.callback=T),c=va(r,x,a),c!==null&&(er(c,r,a),Nl(c,r,a))}function nb(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function Vf(r,a){nb(r,a),(r=r.alternate)&&nb(r,a)}function ab(r){if(r.tag===13||r.tag===31){var a=ri(r,67108864);a!==null&&er(a,r,67108864),Vf(r,67108864)}}function ib(r){if(r.tag===13||r.tag===31){var a=hr();a=oa(a);var c=ri(r,a);c!==null&&er(c,r,a),Vf(r,a)}}var Kd=!0;function Dk(r,a,c,x){var N=B.T;B.T=null;var T=V.p;try{V.p=2,qf(r,a,c,x)}finally{V.p=T,B.T=N}}function Mk(r,a,c,x){var N=B.T;B.T=null;var T=V.p;try{V.p=8,qf(r,a,c,x)}finally{V.p=T,B.T=N}}function qf(r,a,c,x){if(Kd){var N=Gf(x);if(N===null)Df(r,a,x,Qd,c),lb(r,x);else if(Pk(N,r,a,c,x))x.stopPropagation();else if(lb(r,x),a&4&&-1<Ok.indexOf(r)){for(;N!==null;){var T=wn(N);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var z=vs(T.pendingLanes);if(z!==0){var X=T;for(X.pendingLanes|=2,X.entangledLanes|=2;z;){var se=1<<31-Tt(z);X.entanglements[1]|=se,z&=~se}cn(T),(gt&6)===0&&(Md=xt()+500,zl(0))}}break;case 31:case 13:X=ri(T,2),X!==null&&er(X,T,2),Pd(),Vf(T,2)}if(T=Gf(x),T===null&&Df(r,a,x,Qd,c),T===N)break;N=T}N!==null&&x.stopPropagation()}else Df(r,a,x,null,c)}}function Gf(r){return r=Yh(r),Yf(r)}var Qd=null;function Yf(r){if(Qd=null,r=ca(r),r!==null){var a=u(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=h(a),r!==null)return r;r=null}else if(c===31){if(r=l(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Qd=r,null}function ob(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qt()){case Gt:return 2;case Ps:return 8;case $t:case Ls:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var Xf=!1,Aa=null,Ta=null,Ra=null,Yl=new Map,Xl=new Map,Da=[],Ok="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lb(r,a){switch(r){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Yl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(a.pointerId)}}function Kl(r,a,c,x,N,T){return r===null||r.nativeEvent!==T?(r={blockedOn:a,domEventName:c,eventSystemFlags:x,nativeEvent:T,targetContainers:[N]},a!==null&&(a=wn(a),a!==null&&ab(a)),r):(r.eventSystemFlags|=x,a=r.targetContainers,N!==null&&a.indexOf(N)===-1&&a.push(N),r)}function Pk(r,a,c,x,N){switch(a){case"focusin":return Aa=Kl(Aa,r,a,c,x,N),!0;case"dragenter":return Ta=Kl(Ta,r,a,c,x,N),!0;case"mouseover":return Ra=Kl(Ra,r,a,c,x,N),!0;case"pointerover":var T=N.pointerId;return Yl.set(T,Kl(Yl.get(T)||null,r,a,c,x,N)),!0;case"gotpointercapture":return T=N.pointerId,Xl.set(T,Kl(Xl.get(T)||null,r,a,c,x,N)),!0}return!1}function cb(r){var a=ca(r.target);if(a!==null){var c=u(a);if(c!==null){if(a=c.tag,a===13){if(a=h(c),a!==null){r.blockedOn=a,$c(r.priority,function(){ib(c)});return}}else if(a===31){if(a=l(c),a!==null){r.blockedOn=a,$c(r.priority,function(){ib(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Zd(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=Gf(r.nativeEvent);if(c===null){c=r.nativeEvent;var x=new c.constructor(c.type,c);Gh=x,c.target.dispatchEvent(x),Gh=null}else return a=wn(c),a!==null&&ab(a),r.blockedOn=c,!1;a.shift()}return!0}function db(r,a,c){Zd(r)&&c.delete(a)}function Lk(){Xf=!1,Aa!==null&&Zd(Aa)&&(Aa=null),Ta!==null&&Zd(Ta)&&(Ta=null),Ra!==null&&Zd(Ra)&&(Ra=null),Yl.forEach(db),Xl.forEach(db)}function Jd(r,a){r.blockedOn===a&&(r.blockedOn=null,Xf||(Xf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Lk)))}var eu=null;function ub(r){eu!==r&&(eu=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){eu===r&&(eu=null);for(var a=0;a<r.length;a+=3){var c=r[a],x=r[a+1],N=r[a+2];if(typeof x!="function"){if(Yf(x||c)===null)continue;break}var T=wn(c);T!==null&&(r.splice(a,3),a-=3,qm(T,{pending:!0,data:N,method:c.method,action:x},x,N))}}))}function mo(r){function a(se){return Jd(se,r)}Aa!==null&&Jd(Aa,r),Ta!==null&&Jd(Ta,r),Ra!==null&&Jd(Ra,r),Yl.forEach(a),Xl.forEach(a);for(var c=0;c<Da.length;c++){var x=Da[c];x.blockedOn===r&&(x.blockedOn=null)}for(;0<Da.length&&(c=Da[0],c.blockedOn===null);)cb(c),c.blockedOn===null&&Da.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(x=0;x<c.length;x+=3){var N=c[x],T=c[x+1],z=N[Es]||null;if(typeof T=="function")z||ub(c);else if(z){var X=null;if(T&&T.hasAttribute("formAction")){if(N=T,z=T[Es]||null)X=z.formAction;else if(Yf(N)!==null)continue}else X=z.action;typeof X=="function"?c[x+1]=X:(c.splice(x,3),x-=3),ub(c)}}}function hb(){function r(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(z){return N=z})},focusReset:"manual",scroll:"manual"})}function a(){N!==null&&(N(),N=null),x||setTimeout(c,20)}function c(){if(!x&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,N=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){x=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),N!==null&&(N(),N=null)}}}function Kf(r){this._internalRoot=r}tu.prototype.render=Kf.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,x=hr();rb(c,x,r,a,null,null)},tu.prototype.unmount=Kf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;rb(r.current,2,null,r,null,null),Pd(),a[la]=null}};function tu(r){this._internalRoot=r}tu.prototype.unstable_scheduleHydration=function(r){if(r){var a=il();r={blockedOn:null,target:r,priority:a};for(var c=0;c<Da.length&&a!==0&&a<Da[c].priority;c++);Da.splice(c,0,r),c===0&&cb(r)}};var mb=s.version;if(mb!=="19.2.0")throw Error(i(527,mb,"19.2.0"));V.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var Bk={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{Cs=su.inject(Bk),Ht=su}catch{}}return Zl.createRoot=function(r,a){if(!o(r))throw Error(i(299));var c=!1,x="",N=bv,T=_v,z=jv;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onUncaughtError!==void 0&&(N=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(z=a.onRecoverableError)),a=tb(r,1,!1,null,null,c,x,null,N,T,z,hb),r[la]=a.current,Rf(r),new Kf(a)},Zl.hydrateRoot=function(r,a,c){if(!o(r))throw Error(i(299));var x=!1,N="",T=bv,z=_v,X=jv,se=null;return c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(z=c.onCaughtError),c.onRecoverableError!==void 0&&(X=c.onRecoverableError),c.formState!==void 0&&(se=c.formState)),a=tb(r,1,!0,a,c??null,x,N,se,T,z,X,hb),a.context=sb(null),c=a.current,x=hr(),x=oa(x),N=ga(x),N.callback=null,va(c,N,x),c=x,a.current.lanes=c,Mt(a,c),cn(a),r[la]=a.current,Rf(r),new tu(a)},Zl.version="19.2.0",Zl}var wb;function Gk(){if(wb)return Jf.exports;wb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Jf.exports=qk(),Jf.exports}var Yk=Gk();const Xk=ih(Yk);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Yj(t){return typeof t>"u"||t===null}function Kk(t){return typeof t=="object"&&t!==null}function Qk(t){return Array.isArray(t)?t:Yj(t)?[]:[t]}function Zk(t,s){var n,i,o,u;if(s)for(u=Object.keys(s),n=0,i=u.length;n<i;n+=1)o=u[n],t[o]=s[o];return t}function Jk(t,s){var n="",i;for(i=0;i<s;i+=1)n+=t;return n}function e4(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var t4=Yj,s4=Kk,r4=Qk,n4=Jk,a4=e4,i4=Zk,ps={isNothing:t4,isObject:s4,toArray:r4,repeat:n4,isNegativeZero:a4,extend:i4};function Xj(t,s){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!s&&t.mark.snippet&&(n+=`

`+t.mark.snippet),i+" "+n):i}function mc(t,s){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=s,this.message=Xj(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}mc.prototype=Object.create(Error.prototype);mc.prototype.constructor=mc;mc.prototype.toString=function(s){return this.name+": "+Xj(this,s)};var sr=mc;function rp(t,s,n,i,o){var u="",h="",l=Math.floor(o/2)-1;return i-s>l&&(u=" ... ",s=i-l+u.length),n-i>l&&(h=" ...",n=i+l-h.length),{str:u+t.slice(s,n).replace(/\t/g,"")+h,pos:i-s+u.length}}function np(t,s){return ps.repeat(" ",s-t.length)+t}function o4(t,s){if(s=Object.create(s||null),!t.buffer)return null;s.maxLength||(s.maxLength=79),typeof s.indent!="number"&&(s.indent=1),typeof s.linesBefore!="number"&&(s.linesBefore=3),typeof s.linesAfter!="number"&&(s.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],o=[],u,h=-1;u=n.exec(t.buffer);)o.push(u.index),i.push(u.index+u[0].length),t.position<=u.index&&h<0&&(h=i.length-2);h<0&&(h=i.length-1);var l="",d,f,p=Math.min(t.line+s.linesAfter,o.length).toString().length,m=s.maxLength-(s.indent+p+3);for(d=1;d<=s.linesBefore&&!(h-d<0);d++)f=rp(t.buffer,i[h-d],o[h-d],t.position-(i[h]-i[h-d]),m),l=ps.repeat(" ",s.indent)+np((t.line-d+1).toString(),p)+" | "+f.str+`
`+l;for(f=rp(t.buffer,i[h],o[h],t.position,m),l+=ps.repeat(" ",s.indent)+np((t.line+1).toString(),p)+" | "+f.str+`
`,l+=ps.repeat("-",s.indent+p+3+f.pos)+`^
`,d=1;d<=s.linesAfter&&!(h+d>=o.length);d++)f=rp(t.buffer,i[h+d],o[h+d],t.position-(i[h]-i[h+d]),m),l+=ps.repeat(" ",s.indent)+np((t.line+d+1).toString(),p)+" | "+f.str+`
`;return l.replace(/\n$/,"")}var l4=o4,c4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],d4=["scalar","sequence","mapping"];function u4(t){var s={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){s[String(i)]=n})}),s}function h4(t,s){if(s=s||{},Object.keys(s).forEach(function(n){if(c4.indexOf(n)===-1)throw new sr('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=s,this.tag=t,this.kind=s.kind||null,this.resolve=s.resolve||function(){return!0},this.construct=s.construct||function(n){return n},this.instanceOf=s.instanceOf||null,this.predicate=s.predicate||null,this.represent=s.represent||null,this.representName=s.representName||null,this.defaultStyle=s.defaultStyle||null,this.multi=s.multi||!1,this.styleAliases=u4(s.styleAliases||null),d4.indexOf(this.kind)===-1)throw new sr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var zs=h4;function Sb(t,s){var n=[];return t[s].forEach(function(i){var o=n.length;n.forEach(function(u,h){u.tag===i.tag&&u.kind===i.kind&&u.multi===i.multi&&(o=h)}),n[o]=i}),n}function m4(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},s,n;function i(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(s=0,n=arguments.length;s<n;s+=1)arguments[s].forEach(i);return t}function $p(t){return this.extend(t)}$p.prototype.extend=function(s){var n=[],i=[];if(s instanceof zs)i.push(s);else if(Array.isArray(s))i=i.concat(s);else if(s&&(Array.isArray(s.implicit)||Array.isArray(s.explicit)))s.implicit&&(n=n.concat(s.implicit)),s.explicit&&(i=i.concat(s.explicit));else throw new sr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(u){if(!(u instanceof zs))throw new sr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new sr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new sr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(u){if(!(u instanceof zs))throw new sr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create($p.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(i),o.compiledImplicit=Sb(o,"implicit"),o.compiledExplicit=Sb(o,"explicit"),o.compiledTypeMap=m4(o.compiledImplicit,o.compiledExplicit),o};var f4=$p,p4=new zs("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),x4=new zs("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),g4=new zs("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),v4=new f4({explicit:[p4,x4,g4]});function y4(t){if(t===null)return!0;var s=t.length;return s===1&&t==="~"||s===4&&(t==="null"||t==="Null"||t==="NULL")}function b4(){return null}function _4(t){return t===null}var j4=new zs("tag:yaml.org,2002:null",{kind:"scalar",resolve:y4,construct:b4,predicate:_4,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function w4(t){if(t===null)return!1;var s=t.length;return s===4&&(t==="true"||t==="True"||t==="TRUE")||s===5&&(t==="false"||t==="False"||t==="FALSE")}function S4(t){return t==="true"||t==="True"||t==="TRUE"}function N4(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var C4=new zs("tag:yaml.org,2002:bool",{kind:"scalar",resolve:w4,construct:S4,predicate:N4,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function E4(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function k4(t){return 48<=t&&t<=55}function A4(t){return 48<=t&&t<=57}function T4(t){if(t===null)return!1;var s=t.length,n=0,i=!1,o;if(!s)return!1;if(o=t[n],(o==="-"||o==="+")&&(o=t[++n]),o==="0"){if(n+1===s)return!0;if(o=t[++n],o==="b"){for(n++;n<s;n++)if(o=t[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;i=!0}return i&&o!=="_"}if(o==="x"){for(n++;n<s;n++)if(o=t[n],o!=="_"){if(!E4(t.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}if(o==="o"){for(n++;n<s;n++)if(o=t[n],o!=="_"){if(!k4(t.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}}if(o==="_")return!1;for(;n<s;n++)if(o=t[n],o!=="_"){if(!A4(t.charCodeAt(n)))return!1;i=!0}return!(!i||o==="_")}function R4(t){var s=t,n=1,i;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),i=s[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),s=s.slice(1),i=s[0]),s==="0")return 0;if(i==="0"){if(s[1]==="b")return n*parseInt(s.slice(2),2);if(s[1]==="x")return n*parseInt(s.slice(2),16);if(s[1]==="o")return n*parseInt(s.slice(2),8)}return n*parseInt(s,10)}function D4(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ps.isNegativeZero(t)}var M4=new zs("tag:yaml.org,2002:int",{kind:"scalar",resolve:T4,construct:R4,predicate:D4,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),O4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function P4(t){return!(t===null||!O4.test(t)||t[t.length-1]==="_")}function L4(t){var s,n;return s=t.replace(/_/g,"").toLowerCase(),n=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:n*parseFloat(s,10)}var B4=/^[-+]?[0-9]+e/;function I4(t,s){var n;if(isNaN(t))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ps.isNegativeZero(t))return"-0.0";return n=t.toString(10),B4.test(n)?n.replace("e",".e"):n}function $4(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ps.isNegativeZero(t))}var H4=new zs("tag:yaml.org,2002:float",{kind:"scalar",resolve:P4,construct:L4,predicate:$4,represent:I4,defaultStyle:"lowercase"}),z4=v4.extend({implicit:[j4,C4,M4,H4]}),F4=z4,Kj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Qj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function U4(t){return t===null?!1:Kj.exec(t)!==null||Qj.exec(t)!==null}function W4(t){var s,n,i,o,u,h,l,d=0,f=null,p,m,y;if(s=Kj.exec(t),s===null&&(s=Qj.exec(t)),s===null)throw new Error("Date resolve error");if(n=+s[1],i=+s[2]-1,o=+s[3],!s[4])return new Date(Date.UTC(n,i,o));if(u=+s[4],h=+s[5],l=+s[6],s[7]){for(d=s[7].slice(0,3);d.length<3;)d+="0";d=+d}return s[9]&&(p=+s[10],m=+(s[11]||0),f=(p*60+m)*6e4,s[9]==="-"&&(f=-f)),y=new Date(Date.UTC(n,i,o,u,h,l,d)),f&&y.setTime(y.getTime()-f),y}function V4(t){return t.toISOString()}var q4=new zs("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:U4,construct:W4,instanceOf:Date,represent:V4});function G4(t){return t==="<<"||t===null}var Y4=new zs("tag:yaml.org,2002:merge",{kind:"scalar",resolve:G4}),Ax=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function X4(t){if(t===null)return!1;var s,n,i=0,o=t.length,u=Ax;for(n=0;n<o;n++)if(s=u.indexOf(t.charAt(n)),!(s>64)){if(s<0)return!1;i+=6}return i%8===0}function K4(t){var s,n,i=t.replace(/[\r\n=]/g,""),o=i.length,u=Ax,h=0,l=[];for(s=0;s<o;s++)s%4===0&&s&&(l.push(h>>16&255),l.push(h>>8&255),l.push(h&255)),h=h<<6|u.indexOf(i.charAt(s));return n=o%4*6,n===0?(l.push(h>>16&255),l.push(h>>8&255),l.push(h&255)):n===18?(l.push(h>>10&255),l.push(h>>2&255)):n===12&&l.push(h>>4&255),new Uint8Array(l)}function Q4(t){var s="",n=0,i,o,u=t.length,h=Ax;for(i=0;i<u;i++)i%3===0&&i&&(s+=h[n>>18&63],s+=h[n>>12&63],s+=h[n>>6&63],s+=h[n&63]),n=(n<<8)+t[i];return o=u%3,o===0?(s+=h[n>>18&63],s+=h[n>>12&63],s+=h[n>>6&63],s+=h[n&63]):o===2?(s+=h[n>>10&63],s+=h[n>>4&63],s+=h[n<<2&63],s+=h[64]):o===1&&(s+=h[n>>2&63],s+=h[n<<4&63],s+=h[64],s+=h[64]),s}function Z4(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var J4=new zs("tag:yaml.org,2002:binary",{kind:"scalar",resolve:X4,construct:K4,predicate:Z4,represent:Q4}),e3=Object.prototype.hasOwnProperty,t3=Object.prototype.toString;function s3(t){if(t===null)return!0;var s=[],n,i,o,u,h,l=t;for(n=0,i=l.length;n<i;n+=1){if(o=l[n],h=!1,t3.call(o)!=="[object Object]")return!1;for(u in o)if(e3.call(o,u))if(!h)h=!0;else return!1;if(!h)return!1;if(s.indexOf(u)===-1)s.push(u);else return!1}return!0}function r3(t){return t!==null?t:[]}var n3=new zs("tag:yaml.org,2002:omap",{kind:"sequence",resolve:s3,construct:r3}),a3=Object.prototype.toString;function i3(t){if(t===null)return!0;var s,n,i,o,u,h=t;for(u=new Array(h.length),s=0,n=h.length;s<n;s+=1){if(i=h[s],a3.call(i)!=="[object Object]"||(o=Object.keys(i),o.length!==1))return!1;u[s]=[o[0],i[o[0]]]}return!0}function o3(t){if(t===null)return[];var s,n,i,o,u,h=t;for(u=new Array(h.length),s=0,n=h.length;s<n;s+=1)i=h[s],o=Object.keys(i),u[s]=[o[0],i[o[0]]];return u}var l3=new zs("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:i3,construct:o3}),c3=Object.prototype.hasOwnProperty;function d3(t){if(t===null)return!0;var s,n=t;for(s in n)if(c3.call(n,s)&&n[s]!==null)return!1;return!0}function u3(t){return t!==null?t:{}}var h3=new zs("tag:yaml.org,2002:set",{kind:"mapping",resolve:d3,construct:u3}),Zj=F4.extend({implicit:[q4,Y4],explicit:[J4,n3,l3,h3]}),Ga=Object.prototype.hasOwnProperty,Pu=1,Jj=2,ew=3,Lu=4,ap=1,m3=2,Nb=3,f3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p3=/[\x85\u2028\u2029]/,x3=/[,\[\]\{\}]/,tw=/^(?:!|!!|![a-z\-]+!)$/i,sw=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Cb(t){return Object.prototype.toString.call(t)}function mn(t){return t===10||t===13}function ji(t){return t===9||t===32}function rr(t){return t===9||t===32||t===10||t===13}function Eo(t){return t===44||t===91||t===93||t===123||t===125}function g3(t){var s;return 48<=t&&t<=57?t-48:(s=t|32,97<=s&&s<=102?s-97+10:-1)}function v3(t){return t===120?2:t===117?4:t===85?8:0}function y3(t){return 48<=t&&t<=57?t-48:-1}function Eb(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function b3(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var rw=new Array(256),nw=new Array(256);for(var fo=0;fo<256;fo++)rw[fo]=Eb(fo)?1:0,nw[fo]=Eb(fo);function _3(t,s){this.input=t,this.filename=s.filename||null,this.schema=s.schema||Zj,this.onWarning=s.onWarning||null,this.legacy=s.legacy||!1,this.json=s.json||!1,this.listener=s.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function aw(t,s){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=l4(n),new sr(s,n)}function $e(t,s){throw aw(t,s)}function Bu(t,s){t.onWarning&&t.onWarning.call(null,aw(t,s))}var kb={YAML:function(s,n,i){var o,u,h;s.version!==null&&$e(s,"duplication of %YAML directive"),i.length!==1&&$e(s,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),o===null&&$e(s,"ill-formed argument of the YAML directive"),u=parseInt(o[1],10),h=parseInt(o[2],10),u!==1&&$e(s,"unacceptable YAML version of the document"),s.version=i[0],s.checkLineBreaks=h<2,h!==1&&h!==2&&Bu(s,"unsupported YAML version of the document")},TAG:function(s,n,i){var o,u;i.length!==2&&$e(s,"TAG directive accepts exactly two arguments"),o=i[0],u=i[1],tw.test(o)||$e(s,"ill-formed tag handle (first argument) of the TAG directive"),Ga.call(s.tagMap,o)&&$e(s,'there is a previously declared suffix for "'+o+'" tag handle'),sw.test(u)||$e(s,"ill-formed tag prefix (second argument) of the TAG directive");try{u=decodeURIComponent(u)}catch{$e(s,"tag prefix is malformed: "+u)}s.tagMap[o]=u}};function Ua(t,s,n,i){var o,u,h,l;if(s<n){if(l=t.input.slice(s,n),i)for(o=0,u=l.length;o<u;o+=1)h=l.charCodeAt(o),h===9||32<=h&&h<=1114111||$e(t,"expected valid JSON character");else f3.test(l)&&$e(t,"the stream contains non-printable characters");t.result+=l}}function Ab(t,s,n,i){var o,u,h,l;for(ps.isObject(n)||$e(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),h=0,l=o.length;h<l;h+=1)u=o[h],Ga.call(s,u)||(s[u]=n[u],i[u]=!0)}function ko(t,s,n,i,o,u,h,l,d){var f,p;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),f=0,p=o.length;f<p;f+=1)Array.isArray(o[f])&&$e(t,"nested arrays are not supported inside keys"),typeof o=="object"&&Cb(o[f])==="[object Object]"&&(o[f]="[object Object]");if(typeof o=="object"&&Cb(o)==="[object Object]"&&(o="[object Object]"),o=String(o),s===null&&(s={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(f=0,p=u.length;f<p;f+=1)Ab(t,s,u[f],n);else Ab(t,s,u,n);else!t.json&&!Ga.call(n,o)&&Ga.call(s,o)&&(t.line=h||t.line,t.lineStart=l||t.lineStart,t.position=d||t.position,$e(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(s,o,{configurable:!0,enumerable:!0,writable:!0,value:u}):s[o]=u,delete n[o];return s}function Tx(t){var s;s=t.input.charCodeAt(t.position),s===10?t.position++:s===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):$e(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function cs(t,s,n){for(var i=0,o=t.input.charCodeAt(t.position);o!==0;){for(;ji(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(s&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(mn(o))for(Tx(t),o=t.input.charCodeAt(t.position),i++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return n!==-1&&i!==0&&t.lineIndent<n&&Bu(t,"deficient indentation"),i}function oh(t){var s=t.position,n;return n=t.input.charCodeAt(s),!!((n===45||n===46)&&n===t.input.charCodeAt(s+1)&&n===t.input.charCodeAt(s+2)&&(s+=3,n=t.input.charCodeAt(s),n===0||rr(n)))}function Rx(t,s){s===1?t.result+=" ":s>1&&(t.result+=ps.repeat(`
`,s-1))}function j3(t,s,n){var i,o,u,h,l,d,f,p,m=t.kind,y=t.result,j;if(j=t.input.charCodeAt(t.position),rr(j)||Eo(j)||j===35||j===38||j===42||j===33||j===124||j===62||j===39||j===34||j===37||j===64||j===96||(j===63||j===45)&&(o=t.input.charCodeAt(t.position+1),rr(o)||n&&Eo(o)))return!1;for(t.kind="scalar",t.result="",u=h=t.position,l=!1;j!==0;){if(j===58){if(o=t.input.charCodeAt(t.position+1),rr(o)||n&&Eo(o))break}else if(j===35){if(i=t.input.charCodeAt(t.position-1),rr(i))break}else{if(t.position===t.lineStart&&oh(t)||n&&Eo(j))break;if(mn(j))if(d=t.line,f=t.lineStart,p=t.lineIndent,cs(t,!1,-1),t.lineIndent>=s){l=!0,j=t.input.charCodeAt(t.position);continue}else{t.position=h,t.line=d,t.lineStart=f,t.lineIndent=p;break}}l&&(Ua(t,u,h,!1),Rx(t,t.line-d),u=h=t.position,l=!1),ji(j)||(h=t.position+1),j=t.input.charCodeAt(++t.position)}return Ua(t,u,h,!1),t.result?!0:(t.kind=m,t.result=y,!1)}function w3(t,s){var n,i,o;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=o=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Ua(t,i,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)i=t.position,t.position++,o=t.position;else return!0;else mn(n)?(Ua(t,i,o,!0),Rx(t,cs(t,!1,s)),i=o=t.position):t.position===t.lineStart&&oh(t)?$e(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);$e(t,"unexpected end of the stream within a single quoted scalar")}function S3(t,s){var n,i,o,u,h,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Ua(t,n,t.position,!0),t.position++,!0;if(l===92){if(Ua(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),mn(l))cs(t,!1,s);else if(l<256&&rw[l])t.result+=nw[l],t.position++;else if((h=v3(l))>0){for(o=h,u=0;o>0;o--)l=t.input.charCodeAt(++t.position),(h=g3(l))>=0?u=(u<<4)+h:$e(t,"expected hexadecimal character");t.result+=b3(u),t.position++}else $e(t,"unknown escape sequence");n=i=t.position}else mn(l)?(Ua(t,n,i,!0),Rx(t,cs(t,!1,s)),n=i=t.position):t.position===t.lineStart&&oh(t)?$e(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}$e(t,"unexpected end of the stream within a double quoted scalar")}function N3(t,s){var n=!0,i,o,u,h=t.tag,l,d=t.anchor,f,p,m,y,j,S=Object.create(null),w,g,v,b;if(b=t.input.charCodeAt(t.position),b===91)p=93,j=!1,l=[];else if(b===123)p=125,j=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),b=t.input.charCodeAt(++t.position);b!==0;){if(cs(t,!0,s),b=t.input.charCodeAt(t.position),b===p)return t.position++,t.tag=h,t.anchor=d,t.kind=j?"mapping":"sequence",t.result=l,!0;n?b===44&&$e(t,"expected the node content, but found ','"):$e(t,"missed comma between flow collection entries"),g=w=v=null,m=y=!1,b===63&&(f=t.input.charCodeAt(t.position+1),rr(f)&&(m=y=!0,t.position++,cs(t,!0,s))),i=t.line,o=t.lineStart,u=t.position,$o(t,s,Pu,!1,!0),g=t.tag,w=t.result,cs(t,!0,s),b=t.input.charCodeAt(t.position),(y||t.line===i)&&b===58&&(m=!0,b=t.input.charCodeAt(++t.position),cs(t,!0,s),$o(t,s,Pu,!1,!0),v=t.result),j?ko(t,l,S,g,w,v,i,o,u):m?l.push(ko(t,null,S,g,w,v,i,o,u)):l.push(w),cs(t,!0,s),b=t.input.charCodeAt(t.position),b===44?(n=!0,b=t.input.charCodeAt(++t.position)):n=!1}$e(t,"unexpected end of the stream within a flow collection")}function C3(t,s){var n,i,o=ap,u=!1,h=!1,l=s,d=0,f=!1,p,m;if(m=t.input.charCodeAt(t.position),m===124)i=!1;else if(m===62)i=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)ap===o?o=m===43?Nb:m3:$e(t,"repeat of a chomping mode identifier");else if((p=y3(m))>=0)p===0?$e(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):h?$e(t,"repeat of an indentation width identifier"):(l=s+p-1,h=!0);else break;if(ji(m)){do m=t.input.charCodeAt(++t.position);while(ji(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!mn(m)&&m!==0)}for(;m!==0;){for(Tx(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!h||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!h&&t.lineIndent>l&&(l=t.lineIndent),mn(m)){d++;continue}if(t.lineIndent<l){o===Nb?t.result+=ps.repeat(`
`,u?1+d:d):o===ap&&u&&(t.result+=`
`);break}for(i?ji(m)?(f=!0,t.result+=ps.repeat(`
`,u?1+d:d)):f?(f=!1,t.result+=ps.repeat(`
`,d+1)):d===0?u&&(t.result+=" "):t.result+=ps.repeat(`
`,d):t.result+=ps.repeat(`
`,u?1+d:d),u=!0,h=!0,d=0,n=t.position;!mn(m)&&m!==0;)m=t.input.charCodeAt(++t.position);Ua(t,n,t.position,!1)}return!0}function Tb(t,s){var n,i=t.tag,o=t.anchor,u=[],h,l=!1,d;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=u),d=t.input.charCodeAt(t.position);d!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$e(t,"tab characters must not be used in indentation")),!(d!==45||(h=t.input.charCodeAt(t.position+1),!rr(h))));){if(l=!0,t.position++,cs(t,!0,-1)&&t.lineIndent<=s){u.push(null),d=t.input.charCodeAt(t.position);continue}if(n=t.line,$o(t,s,ew,!1,!0),u.push(t.result),cs(t,!0,-1),d=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>s)&&d!==0)$e(t,"bad indentation of a sequence entry");else if(t.lineIndent<s)break}return l?(t.tag=i,t.anchor=o,t.kind="sequence",t.result=u,!0):!1}function E3(t,s,n){var i,o,u,h,l,d,f=t.tag,p=t.anchor,m={},y=Object.create(null),j=null,S=null,w=null,g=!1,v=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),b=t.input.charCodeAt(t.position);b!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$e(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),u=t.line,(b===63||b===58)&&rr(i))b===63?(g&&(ko(t,m,y,j,S,null,h,l,d),j=S=w=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):$e(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=i;else{if(h=t.line,l=t.lineStart,d=t.position,!$o(t,n,Jj,!1,!0))break;if(t.line===u){for(b=t.input.charCodeAt(t.position);ji(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),rr(b)||$e(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(ko(t,m,y,j,S,null,h,l,d),j=S=w=null),v=!0,g=!1,o=!1,j=t.tag,S=t.result;else if(v)$e(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=f,t.anchor=p,!0}else if(v)$e(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=f,t.anchor=p,!0}if((t.line===u||t.lineIndent>s)&&(g&&(h=t.line,l=t.lineStart,d=t.position),$o(t,s,Lu,!0,o)&&(g?S=t.result:w=t.result),g||(ko(t,m,y,j,S,w,h,l,d),j=S=w=null),cs(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===u||t.lineIndent>s)&&b!==0)$e(t,"bad indentation of a mapping entry");else if(t.lineIndent<s)break}return g&&ko(t,m,y,j,S,null,h,l,d),v&&(t.tag=f,t.anchor=p,t.kind="mapping",t.result=m),v}function k3(t){var s,n=!1,i=!1,o,u,h;if(h=t.input.charCodeAt(t.position),h!==33)return!1;if(t.tag!==null&&$e(t,"duplication of a tag property"),h=t.input.charCodeAt(++t.position),h===60?(n=!0,h=t.input.charCodeAt(++t.position)):h===33?(i=!0,o="!!",h=t.input.charCodeAt(++t.position)):o="!",s=t.position,n){do h=t.input.charCodeAt(++t.position);while(h!==0&&h!==62);t.position<t.length?(u=t.input.slice(s,t.position),h=t.input.charCodeAt(++t.position)):$e(t,"unexpected end of the stream within a verbatim tag")}else{for(;h!==0&&!rr(h);)h===33&&(i?$e(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(s-1,t.position+1),tw.test(o)||$e(t,"named tag handle cannot contain such characters"),i=!0,s=t.position+1)),h=t.input.charCodeAt(++t.position);u=t.input.slice(s,t.position),x3.test(u)&&$e(t,"tag suffix cannot contain flow indicator characters")}u&&!sw.test(u)&&$e(t,"tag name cannot contain such characters: "+u);try{u=decodeURIComponent(u)}catch{$e(t,"tag name is malformed: "+u)}return n?t.tag=u:Ga.call(t.tagMap,o)?t.tag=t.tagMap[o]+u:o==="!"?t.tag="!"+u:o==="!!"?t.tag="tag:yaml.org,2002:"+u:$e(t,'undeclared tag handle "'+o+'"'),!0}function A3(t){var s,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&$e(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),s=t.position;n!==0&&!rr(n)&&!Eo(n);)n=t.input.charCodeAt(++t.position);return t.position===s&&$e(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(s,t.position),!0}function T3(t){var s,n,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),s=t.position;i!==0&&!rr(i)&&!Eo(i);)i=t.input.charCodeAt(++t.position);return t.position===s&&$e(t,"name of an alias node must contain at least one character"),n=t.input.slice(s,t.position),Ga.call(t.anchorMap,n)||$e(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],cs(t,!0,-1),!0}function $o(t,s,n,i,o){var u,h,l,d=1,f=!1,p=!1,m,y,j,S,w,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,u=h=l=Lu===n||ew===n,i&&cs(t,!0,-1)&&(f=!0,t.lineIndent>s?d=1:t.lineIndent===s?d=0:t.lineIndent<s&&(d=-1)),d===1)for(;k3(t)||A3(t);)cs(t,!0,-1)?(f=!0,l=u,t.lineIndent>s?d=1:t.lineIndent===s?d=0:t.lineIndent<s&&(d=-1)):l=!1;if(l&&(l=f||o),(d===1||Lu===n)&&(Pu===n||Jj===n?w=s:w=s+1,g=t.position-t.lineStart,d===1?l&&(Tb(t,g)||E3(t,g,w))||N3(t,w)?p=!0:(h&&C3(t,w)||w3(t,w)||S3(t,w)?p=!0:T3(t)?(p=!0,(t.tag!==null||t.anchor!==null)&&$e(t,"alias node should not have any properties")):j3(t,w,Pu===n)&&(p=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):d===0&&(p=l&&Tb(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&$e(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,y=t.implicitTypes.length;m<y;m+=1)if(S=t.implicitTypes[m],S.resolve(t.result)){t.result=S.construct(t.result),t.tag=S.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ga.call(t.typeMap[t.kind||"fallback"],t.tag))S=t.typeMap[t.kind||"fallback"][t.tag];else for(S=null,j=t.typeMap.multi[t.kind||"fallback"],m=0,y=j.length;m<y;m+=1)if(t.tag.slice(0,j[m].tag.length)===j[m].tag){S=j[m];break}S||$e(t,"unknown tag !<"+t.tag+">"),t.result!==null&&S.kind!==t.kind&&$e(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+S.kind+'", not "'+t.kind+'"'),S.resolve(t.result,t.tag)?(t.result=S.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):$e(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||p}function R3(t){var s=t.position,n,i,o,u=!1,h;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(h=t.input.charCodeAt(t.position))!==0&&(cs(t,!0,-1),h=t.input.charCodeAt(t.position),!(t.lineIndent>0||h!==37));){for(u=!0,h=t.input.charCodeAt(++t.position),n=t.position;h!==0&&!rr(h);)h=t.input.charCodeAt(++t.position);for(i=t.input.slice(n,t.position),o=[],i.length<1&&$e(t,"directive name must not be less than one character in length");h!==0;){for(;ji(h);)h=t.input.charCodeAt(++t.position);if(h===35){do h=t.input.charCodeAt(++t.position);while(h!==0&&!mn(h));break}if(mn(h))break;for(n=t.position;h!==0&&!rr(h);)h=t.input.charCodeAt(++t.position);o.push(t.input.slice(n,t.position))}h!==0&&Tx(t),Ga.call(kb,i)?kb[i](t,i,o):Bu(t,'unknown document directive "'+i+'"')}if(cs(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,cs(t,!0,-1)):u&&$e(t,"directives end mark is expected"),$o(t,t.lineIndent-1,Lu,!1,!0),cs(t,!0,-1),t.checkLineBreaks&&p3.test(t.input.slice(s,t.position))&&Bu(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&oh(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,cs(t,!0,-1));return}if(t.position<t.length-1)$e(t,"end of the stream or a document separator is expected");else return}function D3(t,s){t=String(t),s=s||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new _3(t,s),i=t.indexOf("\0");for(i!==-1&&(n.position=i,$e(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)R3(n);return n.documents}function M3(t,s){var n=D3(t,s);if(n.length!==0){if(n.length===1)return n[0];throw new sr("expected a single document in the stream, but found more")}}var O3=M3,P3={load:O3},iw=Object.prototype.toString,ow=Object.prototype.hasOwnProperty,Dx=65279,L3=9,fc=10,B3=13,I3=32,$3=33,H3=34,Hp=35,z3=37,F3=38,U3=39,W3=42,lw=44,V3=45,Iu=58,q3=61,G3=62,Y3=63,X3=64,cw=91,dw=93,K3=96,uw=123,Q3=124,hw=125,Fs={};Fs[0]="\\0";Fs[7]="\\a";Fs[8]="\\b";Fs[9]="\\t";Fs[10]="\\n";Fs[11]="\\v";Fs[12]="\\f";Fs[13]="\\r";Fs[27]="\\e";Fs[34]='\\"';Fs[92]="\\\\";Fs[133]="\\N";Fs[160]="\\_";Fs[8232]="\\L";Fs[8233]="\\P";var Z3=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],J3=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function eA(t,s){var n,i,o,u,h,l,d;if(s===null)return{};for(n={},i=Object.keys(s),o=0,u=i.length;o<u;o+=1)h=i[o],l=String(s[h]),h.slice(0,2)==="!!"&&(h="tag:yaml.org,2002:"+h.slice(2)),d=t.compiledTypeMap.fallback[h],d&&ow.call(d.styleAliases,l)&&(l=d.styleAliases[l]),n[h]=l;return n}function tA(t){var s,n,i;if(s=t.toString(16).toUpperCase(),t<=255)n="x",i=2;else if(t<=65535)n="u",i=4;else if(t<=4294967295)n="U",i=8;else throw new sr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+ps.repeat("0",i-s.length)+s}var sA=1,pc=2;function rA(t){this.schema=t.schema||Zj,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ps.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=eA(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?pc:sA,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Rb(t,s){for(var n=ps.repeat(" ",s),i=0,o=-1,u="",h,l=t.length;i<l;)o=t.indexOf(`
`,i),o===-1?(h=t.slice(i),i=l):(h=t.slice(i,o+1),i=o+1),h.length&&h!==`
`&&(u+=n),u+=h;return u}function zp(t,s){return`
`+ps.repeat(" ",t.indent*s)}function nA(t,s){var n,i,o;for(n=0,i=t.implicitTypes.length;n<i;n+=1)if(o=t.implicitTypes[n],o.resolve(s))return!0;return!1}function $u(t){return t===I3||t===L3}function xc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Dx||65536<=t&&t<=1114111}function Db(t){return xc(t)&&t!==Dx&&t!==B3&&t!==fc}function Mb(t,s,n){var i=Db(t),o=i&&!$u(t);return(n?i:i&&t!==lw&&t!==cw&&t!==dw&&t!==uw&&t!==hw)&&t!==Hp&&!(s===Iu&&!o)||Db(s)&&!$u(s)&&t===Hp||s===Iu&&o}function aA(t){return xc(t)&&t!==Dx&&!$u(t)&&t!==V3&&t!==Y3&&t!==Iu&&t!==lw&&t!==cw&&t!==dw&&t!==uw&&t!==hw&&t!==Hp&&t!==F3&&t!==W3&&t!==$3&&t!==Q3&&t!==q3&&t!==G3&&t!==U3&&t!==H3&&t!==z3&&t!==X3&&t!==K3}function iA(t){return!$u(t)&&t!==Iu}function cc(t,s){var n=t.charCodeAt(s),i;return n>=55296&&n<=56319&&s+1<t.length&&(i=t.charCodeAt(s+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function mw(t){var s=/^\n* /;return s.test(t)}var fw=1,Fp=2,pw=3,xw=4,No=5;function oA(t,s,n,i,o,u,h,l){var d,f=0,p=null,m=!1,y=!1,j=i!==-1,S=-1,w=aA(cc(t,0))&&iA(cc(t,t.length-1));if(s||h)for(d=0;d<t.length;f>=65536?d+=2:d++){if(f=cc(t,d),!xc(f))return No;w=w&&Mb(f,p,l),p=f}else{for(d=0;d<t.length;f>=65536?d+=2:d++){if(f=cc(t,d),f===fc)m=!0,j&&(y=y||d-S-1>i&&t[S+1]!==" ",S=d);else if(!xc(f))return No;w=w&&Mb(f,p,l),p=f}y=y||j&&d-S-1>i&&t[S+1]!==" "}return!m&&!y?w&&!h&&!o(t)?fw:u===pc?No:Fp:n>9&&mw(t)?No:h?u===pc?No:Fp:y?xw:pw}function lA(t,s,n,i,o){t.dump=(function(){if(s.length===0)return t.quotingType===pc?'""':"''";if(!t.noCompatMode&&(Z3.indexOf(s)!==-1||J3.test(s)))return t.quotingType===pc?'"'+s+'"':"'"+s+"'";var u=t.indent*Math.max(1,n),h=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-u),l=i||t.flowLevel>-1&&n>=t.flowLevel;function d(f){return nA(t,f)}switch(oA(s,l,t.indent,h,d,t.quotingType,t.forceQuotes&&!i,o)){case fw:return s;case Fp:return"'"+s.replace(/'/g,"''")+"'";case pw:return"|"+Ob(s,t.indent)+Pb(Rb(s,u));case xw:return">"+Ob(s,t.indent)+Pb(Rb(cA(s,h),u));case No:return'"'+dA(s)+'"';default:throw new sr("impossible error: invalid scalar style")}})()}function Ob(t,s){var n=mw(t)?String(s):"",i=t[t.length-1]===`
`,o=i&&(t[t.length-2]===`
`||t===`
`),u=o?"+":i?"":"-";return n+u+`
`}function Pb(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function cA(t,s){for(var n=/(\n+)([^\n]*)/g,i=(function(){var f=t.indexOf(`
`);return f=f!==-1?f:t.length,n.lastIndex=f,Lb(t.slice(0,f),s)})(),o=t[0]===`
`||t[0]===" ",u,h;h=n.exec(t);){var l=h[1],d=h[2];u=d[0]===" ",i+=l+(!o&&!u&&d!==""?`
`:"")+Lb(d,s),o=u}return i}function Lb(t,s){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,i,o=0,u,h=0,l=0,d="";i=n.exec(t);)l=i.index,l-o>s&&(u=h>o?h:l,d+=`
`+t.slice(o,u),o=u+1),h=l;return d+=`
`,t.length-o>s&&h>o?d+=t.slice(o,h)+`
`+t.slice(h+1):d+=t.slice(o),d.slice(1)}function dA(t){for(var s="",n=0,i,o=0;o<t.length;n>=65536?o+=2:o++)n=cc(t,o),i=Fs[n],!i&&xc(n)?(s+=t[o],n>=65536&&(s+=t[o+1])):s+=i||tA(n);return s}function uA(t,s,n){var i="",o=t.tag,u,h,l;for(u=0,h=n.length;u<h;u+=1)l=n[u],t.replacer&&(l=t.replacer.call(n,String(u),l)),(Kn(t,s,l,!1,!1)||typeof l>"u"&&Kn(t,s,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=o,t.dump="["+i+"]"}function Bb(t,s,n,i){var o="",u=t.tag,h,l,d;for(h=0,l=n.length;h<l;h+=1)d=n[h],t.replacer&&(d=t.replacer.call(n,String(h),d)),(Kn(t,s+1,d,!0,!0,!1,!0)||typeof d>"u"&&Kn(t,s+1,null,!0,!0,!1,!0))&&((!i||o!=="")&&(o+=zp(t,s)),t.dump&&fc===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=u,t.dump=o||"[]"}function hA(t,s,n){var i="",o=t.tag,u=Object.keys(n),h,l,d,f,p;for(h=0,l=u.length;h<l;h+=1)p="",i!==""&&(p+=", "),t.condenseFlow&&(p+='"'),d=u[h],f=n[d],t.replacer&&(f=t.replacer.call(n,d,f)),Kn(t,s,d,!1,!1)&&(t.dump.length>1024&&(p+="? "),p+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Kn(t,s,f,!1,!1)&&(p+=t.dump,i+=p));t.tag=o,t.dump="{"+i+"}"}function mA(t,s,n,i){var o="",u=t.tag,h=Object.keys(n),l,d,f,p,m,y;if(t.sortKeys===!0)h.sort();else if(typeof t.sortKeys=="function")h.sort(t.sortKeys);else if(t.sortKeys)throw new sr("sortKeys must be a boolean or a function");for(l=0,d=h.length;l<d;l+=1)y="",(!i||o!=="")&&(y+=zp(t,s)),f=h[l],p=n[f],t.replacer&&(p=t.replacer.call(n,f,p)),Kn(t,s+1,f,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&fc===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,m&&(y+=zp(t,s)),Kn(t,s+1,p,!0,m)&&(t.dump&&fc===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,o+=y));t.tag=u,t.dump=o||"{}"}function Ib(t,s,n){var i,o,u,h,l,d;for(o=n?t.explicitTypes:t.implicitTypes,u=0,h=o.length;u<h;u+=1)if(l=o[u],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof s=="object"&&s instanceof l.instanceOf)&&(!l.predicate||l.predicate(s))){if(n?l.multi&&l.representName?t.tag=l.representName(s):t.tag=l.tag:t.tag="?",l.represent){if(d=t.styleMap[l.tag]||l.defaultStyle,iw.call(l.represent)==="[object Function]")i=l.represent(s,d);else if(ow.call(l.represent,d))i=l.represent[d](s,d);else throw new sr("!<"+l.tag+'> tag resolver accepts not "'+d+'" style');t.dump=i}return!0}return!1}function Kn(t,s,n,i,o,u,h){t.tag=null,t.dump=n,Ib(t,n,!1)||Ib(t,n,!0);var l=iw.call(t.dump),d=i,f;i&&(i=t.flowLevel<0||t.flowLevel>s);var p=l==="[object Object]"||l==="[object Array]",m,y;if(p&&(m=t.duplicates.indexOf(n),y=m!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&s>0)&&(o=!1),y&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(p&&y&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")i&&Object.keys(t.dump).length!==0?(mA(t,s,t.dump,o),y&&(t.dump="&ref_"+m+t.dump)):(hA(t,s,t.dump),y&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!h&&s>0?Bb(t,s-1,t.dump,o):Bb(t,s,t.dump,o),y&&(t.dump="&ref_"+m+t.dump)):(uA(t,s,t.dump),y&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&lA(t,t.dump,s,u,d);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new sr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(f=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",t.dump=f+" "+t.dump)}return!0}function fA(t,s){var n=[],i=[],o,u;for(Up(t,n,i),o=0,u=i.length;o<u;o+=1)s.duplicates.push(n[i[o]]);s.usedDuplicates=new Array(u)}function Up(t,s,n){var i,o,u;if(t!==null&&typeof t=="object")if(o=s.indexOf(t),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(s.push(t),Array.isArray(t))for(o=0,u=t.length;o<u;o+=1)Up(t[o],s,n);else for(i=Object.keys(t),o=0,u=i.length;o<u;o+=1)Up(t[i[o]],s,n)}function pA(t,s){s=s||{};var n=new rA(s);n.noRefs||fA(t,n);var i=t;return n.replacer&&(i=n.replacer.call({"":i},"",i)),Kn(n,0,i,!0,!0)?n.dump+`
`:""}var xA=pA,gA={dump:xA},vA=P3.load,yA=gA.dump;/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_A=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,i)=>i?i.toUpperCase():n.toLowerCase()),$b=t=>{const s=_A(t);return s.charAt(0).toUpperCase()+s.slice(1)},gw=(...t)=>t.filter((s,n,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===n).join(" ").trim(),jA=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=E.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h,...l},d)=>E.createElement("svg",{ref:d,...wA,width:s,height:s,stroke:t,strokeWidth:i?Number(n)*24/Number(s):n,className:gw("lucide",o),...!u&&!jA(l)&&{"aria-hidden":"true"},...l},[...h.map(([f,p])=>E.createElement(f,p)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,s)=>{const n=E.forwardRef(({className:i,...o},u)=>E.createElement(SA,{ref:u,iconNode:s,className:gw(`lucide-${bA($b(t))}`,`lucide-${t}`,i),...o}));return n.displayName=$b(t),n};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ds=Se("activity",NA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],EA=Se("arrow-down",CA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],AA=Se("arrow-left",kA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Mx=Se("arrow-right",TA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],DA=Se("arrow-up",RA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Pr=Se("bell",MA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],PA=Se("book-open",OA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],BA=Se("bug",LA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rc=Se("calendar",IA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],HA=Se("chart-column",$A);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],FA=Se("chart-no-axes-column-increasing",zA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],tt=Se("check",UA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ox=Se("chevron-down",WA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],qA=Se("chevron-left",VA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],YA=Se("chevron-right",GA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vw=Se("chevron-up",XA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ye=Se("circle-alert",KA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vt=Se("circle-check-big",QA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hb=Se("circle-check",ZA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ci=Se("circle-x",JA);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tT=Se("circle",eT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ms=Se("clock",sT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],qn=Se("cloud",rT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Wp=Se("code",nT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]],yw=Se("container",aT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ut=Se("copy",iT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],lT=Se("cpu",oT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fr=Se("database",cT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],uT=Se("dollar-sign",dT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zb=Se("download",hT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Xr=Se("external-link",mT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ho=Se("eye-off",fT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lr=Se("eye",pT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],gT=Se("file-code",xT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xs=Se("file-text",vT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Px=Se("folder-open",yT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],_T=Se("folder",bT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Fb=Se("funnel",jT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Hu=Se("gauge",wT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Kr=Se("git-branch",ST);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],lh=Se("github",NT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],js=Se("globe",CT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],kT=Se("grid-3x3",ET);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Wr=Se("hard-drive",AT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],RT=Se("history",TT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Le=Se("info",DT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],yt=Se("key",MT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],PT=Se("lightbulb",OT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],zu=Se("link",LT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],st=Se("loader-circle",BT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ei=Se("lock",IT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],HT=Se("log-in",$T);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],FT=Se("log-out",zT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],zo=Se("mail",UT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],VT=Se("maximize-2",WT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],bw=Se("maximize",qT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],YT=Se("message-square",GT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]],Ub=Se("microscope",XT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],QT=Se("minimize-2",KT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M5 12h14",key:"1ays0h"}]],JT=Se("minus",ZT);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],tR=Se("monitor",eR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],rR=Se("mouse-pointer",sR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],aR=Se("move",nR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],qr=Se("network",iR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Eu=Se("package",oR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Wb=Se("pause",lR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fo=Se("pen",cR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Vb=Se("play",dR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ws=Se("plus",uR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Wt=Se("refresh-cw",hR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],fR=Se("route",mR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qb=Se("search",pR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Wa=Se("send",xR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],_s=Se("server",gR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zt=Se("settings",vR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_w=Se("share-2",yR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_R=Se("shield-check",bR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Kt=Se("shield",jR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]],SR=Se("siren",wR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],CR=Se("smartphone",NR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Vs=Se("terminal",ER);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],AR=Se("timer",kR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xr=Se("trash-2",TR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Vp=Se("trending-up",RR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qp=Se("triangle-alert",DR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],OR=Se("upload",MR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gp=Se("users",PR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Gb=Se("wifi",LR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Co=Se("workflow",BR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ds=Se("x",IR);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ls=Se("zap",$R);function Gs(t){if(typeof t=="string"||typeof t=="number")return""+t;let s="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Gs(t[n]))!==""&&(s+=(s&&" ")+i);else for(let n in t)t[n]&&(s+=(s&&" ")+n);return s}var ip={exports:{}},op={},lp={exports:{}},cp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function HR(){if(Yb)return cp;Yb=1;var t=Tc();function s(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:s,i=t.useState,o=t.useEffect,u=t.useLayoutEffect,h=t.useDebugValue;function l(m,y){var j=y(),S=i({inst:{value:j,getSnapshot:y}}),w=S[0].inst,g=S[1];return u(function(){w.value=j,w.getSnapshot=y,d(w)&&g({inst:w})},[m,j,y]),o(function(){return d(w)&&g({inst:w}),m(function(){d(w)&&g({inst:w})})},[m]),h(j),j}function d(m){var y=m.getSnapshot;m=m.value;try{var j=y();return!n(m,j)}catch{return!0}}function f(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return cp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,cp}var Xb;function zR(){return Xb||(Xb=1,lp.exports=HR()),lp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function FR(){if(Kb)return op;Kb=1;var t=Tc(),s=zR();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:n,o=s.useSyncExternalStore,u=t.useRef,h=t.useEffect,l=t.useMemo,d=t.useDebugValue;return op.useSyncExternalStoreWithSelector=function(f,p,m,y,j){var S=u(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=l(function(){function v(D){if(!b){if(b=!0,_=D,D=y(D),j!==void 0&&w.hasValue){var R=w.value;if(j(R,D))return C=R}return C=D}if(R=C,i(_,D))return R;var k=y(D);return j!==void 0&&j(R,k)?(_=D,R):(_=D,C=k)}var b=!1,_,C,A=m===void 0?null:m;return[function(){return v(p())},A===null?void 0:function(){return v(A())}]},[p,m,y,j]);var g=o(f,S[0],S[1]);return h(function(){w.hasValue=!0,w.value=g},[g]),d(g),g},op}var Qb;function UR(){return Qb||(Qb=1,ip.exports=FR()),ip.exports}var WR=UR();const VR=ih(WR),qR={},Zb=t=>{let s;const n=new Set,i=(p,m)=>{const y=typeof p=="function"?p(s):p;if(!Object.is(y,s)){const j=s;s=m??(typeof y!="object"||y===null)?y:Object.assign({},s,y),n.forEach(S=>S(s,j))}},o=()=>s,d={setState:i,getState:o,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(qR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=s=t(i,o,d);return d},GR=t=>t?Zb(t):Zb,{useDebugValue:YR}=ae,{useSyncExternalStoreWithSelector:XR}=VR,KR=t=>t;function jw(t,s=KR,n){const i=XR(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,n);return YR(i),i}const Jb=(t,s)=>{const n=GR(t),i=(o,u=s)=>jw(n,o,u);return Object.assign(i,n),i},QR=(t,s)=>t?Jb(t,s):Jb;function Ss(t,s){if(Object.is(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;if(t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(const[i,o]of t)if(!Object.is(o,s.get(i)))return!1;return!0}if(t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(const i of t)if(!s.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(s).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(s,i)||!Object.is(t[i],s[i]))return!1;return!0}var ZR={value:()=>{}};function ch(){for(var t=0,s=arguments.length,n={},i;t<s;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ku(n)}function ku(t){this._=t}function JR(t,s){return t.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!s.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ku.prototype=ch.prototype={constructor:ku,on:function(t,s){var n=this._,i=JR(t+"",n),o,u=-1,h=i.length;if(arguments.length<2){for(;++u<h;)if((o=(t=i[u]).type)&&(o=e5(n[o],t.name)))return o;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++u<h;)if(o=(t=i[u]).type)n[o]=e_(n[o],t.name,s);else if(s==null)for(o in n)n[o]=e_(n[o],t.name,null);return this},copy:function(){var t={},s=this._;for(var n in s)t[n]=s[n].slice();return new ku(t)},call:function(t,s){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,u;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,o=u.length;i<o;++i)u[i].value.apply(s,n)},apply:function(t,s,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,u=i.length;o<u;++o)i[o].value.apply(s,n)}};function e5(t,s){for(var n=0,i=t.length,o;n<i;++n)if((o=t[n]).name===s)return o.value}function e_(t,s,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===s){t[i]=ZR,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:s,value:n}),t}var Yp="http://www.w3.org/1999/xhtml";const t_={svg:"http://www.w3.org/2000/svg",xhtml:Yp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dh(t){var s=t+="",n=s.indexOf(":");return n>=0&&(s=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),t_.hasOwnProperty(s)?{space:t_[s],local:t}:t}function t5(t){return function(){var s=this.ownerDocument,n=this.namespaceURI;return n===Yp&&s.documentElement.namespaceURI===Yp?s.createElement(t):s.createElementNS(n,t)}}function s5(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ww(t){var s=dh(t);return(s.local?s5:t5)(s)}function r5(){}function Lx(t){return t==null?r5:function(){return this.querySelector(t)}}function n5(t){typeof t!="function"&&(t=Lx(t));for(var s=this._groups,n=s.length,i=new Array(n),o=0;o<n;++o)for(var u=s[o],h=u.length,l=i[o]=new Array(h),d,f,p=0;p<h;++p)(d=u[p])&&(f=t.call(d,d.__data__,p,u))&&("__data__"in d&&(f.__data__=d.__data__),l[p]=f);return new gr(i,this._parents)}function a5(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function i5(){return[]}function Sw(t){return t==null?i5:function(){return this.querySelectorAll(t)}}function o5(t){return function(){return a5(t.apply(this,arguments))}}function l5(t){typeof t=="function"?t=o5(t):t=Sw(t);for(var s=this._groups,n=s.length,i=[],o=[],u=0;u<n;++u)for(var h=s[u],l=h.length,d,f=0;f<l;++f)(d=h[f])&&(i.push(t.call(d,d.__data__,f,h)),o.push(d));return new gr(i,o)}function Nw(t){return function(){return this.matches(t)}}function Cw(t){return function(s){return s.matches(t)}}var c5=Array.prototype.find;function d5(t){return function(){return c5.call(this.children,t)}}function u5(){return this.firstElementChild}function h5(t){return this.select(t==null?u5:d5(typeof t=="function"?t:Cw(t)))}var m5=Array.prototype.filter;function f5(){return Array.from(this.children)}function p5(t){return function(){return m5.call(this.children,t)}}function x5(t){return this.selectAll(t==null?f5:p5(typeof t=="function"?t:Cw(t)))}function g5(t){typeof t!="function"&&(t=Nw(t));for(var s=this._groups,n=s.length,i=new Array(n),o=0;o<n;++o)for(var u=s[o],h=u.length,l=i[o]=[],d,f=0;f<h;++f)(d=u[f])&&t.call(d,d.__data__,f,u)&&l.push(d);return new gr(i,this._parents)}function Ew(t){return new Array(t.length)}function v5(){return new gr(this._enter||this._groups.map(Ew),this._parents)}function Fu(t,s){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=s}Fu.prototype={constructor:Fu,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,s){return this._parent.insertBefore(t,s)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function y5(t){return function(){return t}}function b5(t,s,n,i,o,u){for(var h=0,l,d=s.length,f=u.length;h<f;++h)(l=s[h])?(l.__data__=u[h],i[h]=l):n[h]=new Fu(t,u[h]);for(;h<d;++h)(l=s[h])&&(o[h]=l)}function _5(t,s,n,i,o,u,h){var l,d,f=new Map,p=s.length,m=u.length,y=new Array(p),j;for(l=0;l<p;++l)(d=s[l])&&(y[l]=j=h.call(d,d.__data__,l,s)+"",f.has(j)?o[l]=d:f.set(j,d));for(l=0;l<m;++l)j=h.call(t,u[l],l,u)+"",(d=f.get(j))?(i[l]=d,d.__data__=u[l],f.delete(j)):n[l]=new Fu(t,u[l]);for(l=0;l<p;++l)(d=s[l])&&f.get(y[l])===d&&(o[l]=d)}function j5(t){return t.__data__}function w5(t,s){if(!arguments.length)return Array.from(this,j5);var n=s?_5:b5,i=this._parents,o=this._groups;typeof t!="function"&&(t=y5(t));for(var u=o.length,h=new Array(u),l=new Array(u),d=new Array(u),f=0;f<u;++f){var p=i[f],m=o[f],y=m.length,j=S5(t.call(p,p&&p.__data__,f,i)),S=j.length,w=l[f]=new Array(S),g=h[f]=new Array(S),v=d[f]=new Array(y);n(p,m,w,g,v,j,s);for(var b=0,_=0,C,A;b<S;++b)if(C=w[b]){for(b>=_&&(_=b+1);!(A=g[_])&&++_<S;);C._next=A||null}}return h=new gr(h,i),h._enter=l,h._exit=d,h}function S5(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function N5(){return new gr(this._exit||this._groups.map(Ew),this._parents)}function C5(t,s,n){var i=this.enter(),o=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),s!=null&&(o=s(o),o&&(o=o.selection())),n==null?u.remove():n(u),i&&o?i.merge(o).order():o}function E5(t){for(var s=t.selection?t.selection():t,n=this._groups,i=s._groups,o=n.length,u=i.length,h=Math.min(o,u),l=new Array(o),d=0;d<h;++d)for(var f=n[d],p=i[d],m=f.length,y=l[d]=new Array(m),j,S=0;S<m;++S)(j=f[S]||p[S])&&(y[S]=j);for(;d<o;++d)l[d]=n[d];return new gr(l,this._parents)}function k5(){for(var t=this._groups,s=-1,n=t.length;++s<n;)for(var i=t[s],o=i.length-1,u=i[o],h;--o>=0;)(h=i[o])&&(u&&h.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(h,u),u=h);return this}function A5(t){t||(t=T5);function s(m,y){return m&&y?t(m.__data__,y.__data__):!m-!y}for(var n=this._groups,i=n.length,o=new Array(i),u=0;u<i;++u){for(var h=n[u],l=h.length,d=o[u]=new Array(l),f,p=0;p<l;++p)(f=h[p])&&(d[p]=f);d.sort(s)}return new gr(o,this._parents).order()}function T5(t,s){return t<s?-1:t>s?1:t>=s?0:NaN}function R5(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function D5(){return Array.from(this)}function M5(){for(var t=this._groups,s=0,n=t.length;s<n;++s)for(var i=t[s],o=0,u=i.length;o<u;++o){var h=i[o];if(h)return h}return null}function O5(){let t=0;for(const s of this)++t;return t}function P5(){return!this.node()}function L5(t){for(var s=this._groups,n=0,i=s.length;n<i;++n)for(var o=s[n],u=0,h=o.length,l;u<h;++u)(l=o[u])&&t.call(l,l.__data__,u,o);return this}function B5(t){return function(){this.removeAttribute(t)}}function I5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $5(t,s){return function(){this.setAttribute(t,s)}}function H5(t,s){return function(){this.setAttributeNS(t.space,t.local,s)}}function z5(t,s){return function(){var n=s.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function F5(t,s){return function(){var n=s.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function U5(t,s){var n=dh(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((s==null?n.local?I5:B5:typeof s=="function"?n.local?F5:z5:n.local?H5:$5)(n,s))}function kw(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function W5(t){return function(){this.style.removeProperty(t)}}function V5(t,s,n){return function(){this.style.setProperty(t,s,n)}}function q5(t,s,n){return function(){var i=s.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function G5(t,s,n){return arguments.length>1?this.each((s==null?W5:typeof s=="function"?q5:V5)(t,s,n??"")):Uo(this.node(),t)}function Uo(t,s){return t.style.getPropertyValue(s)||kw(t).getComputedStyle(t,null).getPropertyValue(s)}function Y5(t){return function(){delete this[t]}}function X5(t,s){return function(){this[t]=s}}function K5(t,s){return function(){var n=s.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Q5(t,s){return arguments.length>1?this.each((s==null?Y5:typeof s=="function"?K5:X5)(t,s)):this.node()[t]}function Aw(t){return t.trim().split(/^|\s+/)}function Bx(t){return t.classList||new Tw(t)}function Tw(t){this._node=t,this._names=Aw(t.getAttribute("class")||"")}Tw.prototype={add:function(t){var s=this._names.indexOf(t);s<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var s=this._names.indexOf(t);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Rw(t,s){for(var n=Bx(t),i=-1,o=s.length;++i<o;)n.add(s[i])}function Dw(t,s){for(var n=Bx(t),i=-1,o=s.length;++i<o;)n.remove(s[i])}function Z5(t){return function(){Rw(this,t)}}function J5(t){return function(){Dw(this,t)}}function eD(t,s){return function(){(s.apply(this,arguments)?Rw:Dw)(this,t)}}function tD(t,s){var n=Aw(t+"");if(arguments.length<2){for(var i=Bx(this.node()),o=-1,u=n.length;++o<u;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof s=="function"?eD:s?Z5:J5)(n,s))}function sD(){this.textContent=""}function rD(t){return function(){this.textContent=t}}function nD(t){return function(){var s=t.apply(this,arguments);this.textContent=s??""}}function aD(t){return arguments.length?this.each(t==null?sD:(typeof t=="function"?nD:rD)(t)):this.node().textContent}function iD(){this.innerHTML=""}function oD(t){return function(){this.innerHTML=t}}function lD(t){return function(){var s=t.apply(this,arguments);this.innerHTML=s??""}}function cD(t){return arguments.length?this.each(t==null?iD:(typeof t=="function"?lD:oD)(t)):this.node().innerHTML}function dD(){this.nextSibling&&this.parentNode.appendChild(this)}function uD(){return this.each(dD)}function hD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mD(){return this.each(hD)}function fD(t){var s=typeof t=="function"?t:ww(t);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function pD(){return null}function xD(t,s){var n=typeof t=="function"?t:ww(t),i=s==null?pD:typeof s=="function"?s:Lx(s);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function gD(){var t=this.parentNode;t&&t.removeChild(this)}function vD(){return this.each(gD)}function yD(){var t=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function bD(){var t=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function _D(t){return this.select(t?bD:yD)}function jD(t){return arguments.length?this.property("__data__",t):this.node().__data__}function wD(t){return function(s){t.call(this,s,this.__data__)}}function SD(t){return t.trim().split(/^|\s+/).map(function(s){var n="",i=s.indexOf(".");return i>=0&&(n=s.slice(i+1),s=s.slice(0,i)),{type:s,name:n}})}function ND(t){return function(){var s=this.__on;if(s){for(var n=0,i=-1,o=s.length,u;n<o;++n)u=s[n],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):s[++i]=u;++i?s.length=i:delete this.__on}}}function CD(t,s,n){return function(){var i=this.__on,o,u=wD(s);if(i){for(var h=0,l=i.length;h<l;++h)if((o=i[h]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=n),o.value=s;return}}this.addEventListener(t.type,u,n),o={type:t.type,name:t.name,value:s,listener:u,options:n},i?i.push(o):this.__on=[o]}}function ED(t,s,n){var i=SD(t+""),o,u=i.length,h;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,f=l.length,p;d<f;++d)for(o=0,p=l[d];o<u;++o)if((h=i[o]).type===p.type&&h.name===p.name)return p.value}return}for(l=s?CD:ND,o=0;o<u;++o)this.each(l(i[o],s,n));return this}function Mw(t,s,n){var i=kw(t),o=i.CustomEvent;typeof o=="function"?o=new o(s,n):(o=i.document.createEvent("Event"),n?(o.initEvent(s,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(s,!1,!1)),t.dispatchEvent(o)}function kD(t,s){return function(){return Mw(this,t,s)}}function AD(t,s){return function(){return Mw(this,t,s.apply(this,arguments))}}function TD(t,s){return this.each((typeof s=="function"?AD:kD)(t,s))}function*RD(){for(var t=this._groups,s=0,n=t.length;s<n;++s)for(var i=t[s],o=0,u=i.length,h;o<u;++o)(h=i[o])&&(yield h)}var Ow=[null];function gr(t,s){this._groups=t,this._parents=s}function Dc(){return new gr([[document.documentElement]],Ow)}function DD(){return this}gr.prototype=Dc.prototype={constructor:gr,select:n5,selectAll:l5,selectChild:h5,selectChildren:x5,filter:g5,data:w5,enter:v5,exit:N5,join:C5,merge:E5,selection:DD,order:k5,sort:A5,call:R5,nodes:D5,node:M5,size:O5,empty:P5,each:L5,attr:U5,style:G5,property:Q5,classed:tD,text:aD,html:cD,raise:uD,lower:mD,append:fD,insert:xD,remove:vD,clone:_D,datum:jD,on:ED,dispatch:TD,[Symbol.iterator]:RD};function Mr(t){return typeof t=="string"?new gr([[document.querySelector(t)]],[document.documentElement]):new gr([[t]],Ow)}function MD(t){let s;for(;s=t.sourceEvent;)t=s;return t}function Ur(t,s){if(t=MD(t),s===void 0&&(s=t.currentTarget),s){var n=s.ownerSVGElement||s;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(s.getScreenCTM().inverse()),[i.x,i.y]}if(s.getBoundingClientRect){var o=s.getBoundingClientRect();return[t.clientX-o.left-s.clientLeft,t.clientY-o.top-s.clientTop]}}return[t.pageX,t.pageY]}const OD={passive:!1},gc={capture:!0,passive:!1};function dp(t){t.stopImmediatePropagation()}function Oo(t){t.preventDefault(),t.stopImmediatePropagation()}function Pw(t){var s=t.document.documentElement,n=Mr(t).on("dragstart.drag",Oo,gc);"onselectstart"in s?n.on("selectstart.drag",Oo,gc):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function Lw(t,s){var n=t.document.documentElement,i=Mr(t).on("dragstart.drag",null);s&&(i.on("click.drag",Oo,gc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ru=t=>()=>t;function Xp(t,{sourceEvent:s,subject:n,target:i,identifier:o,active:u,x:h,y:l,dx:d,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:h,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}Xp.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function PD(t){return!t.ctrlKey&&!t.button}function LD(){return this.parentNode}function BD(t,s){return s??{x:t.x,y:t.y}}function ID(){return navigator.maxTouchPoints||"ontouchstart"in this}function $D(){var t=PD,s=LD,n=BD,i=ID,o={},u=ch("start","drag","end"),h=0,l,d,f,p,m=0;function y(C){C.on("mousedown.drag",j).filter(i).on("touchstart.drag",g).on("touchmove.drag",v,OD).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function j(C,A){if(!(p||!t.call(this,C,A))){var D=_(this,s.call(this,C,A),C,A,"mouse");D&&(Mr(C.view).on("mousemove.drag",S,gc).on("mouseup.drag",w,gc),Pw(C.view),dp(C),f=!1,l=C.clientX,d=C.clientY,D("start",C))}}function S(C){if(Oo(C),!f){var A=C.clientX-l,D=C.clientY-d;f=A*A+D*D>m}o.mouse("drag",C)}function w(C){Mr(C.view).on("mousemove.drag mouseup.drag",null),Lw(C.view,f),Oo(C),o.mouse("end",C)}function g(C,A){if(t.call(this,C,A)){var D=C.changedTouches,R=s.call(this,C,A),k=D.length,M,I;for(M=0;M<k;++M)(I=_(this,R,C,A,D[M].identifier,D[M]))&&(dp(C),I("start",C,D[M]))}}function v(C){var A=C.changedTouches,D=A.length,R,k;for(R=0;R<D;++R)(k=o[A[R].identifier])&&(Oo(C),k("drag",C,A[R]))}function b(C){var A=C.changedTouches,D=A.length,R,k;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),R=0;R<D;++R)(k=o[A[R].identifier])&&(dp(C),k("end",C,A[R]))}function _(C,A,D,R,k,M){var I=u.copy(),q=Ur(M||D,A),W,G,$;if(($=n.call(C,new Xp("beforestart",{sourceEvent:D,target:y,identifier:k,active:h,x:q[0],y:q[1],dx:0,dy:0,dispatch:I}),R))!=null)return W=$.x-q[0]||0,G=$.y-q[1]||0,function F(B,V,O){var H=q,U;switch(B){case"start":o[k]=F,U=h++;break;case"end":delete o[k],--h;case"drag":q=Ur(O||V,A),U=h;break}I.call(B,C,new Xp(B,{sourceEvent:V,subject:$,target:y,identifier:k,active:U,x:q[0]+W,y:q[1]+G,dx:q[0]-H[0],dy:q[1]-H[1],dispatch:I}),R)}}return y.filter=function(C){return arguments.length?(t=typeof C=="function"?C:ru(!!C),y):t},y.container=function(C){return arguments.length?(s=typeof C=="function"?C:ru(C),y):s},y.subject=function(C){return arguments.length?(n=typeof C=="function"?C:ru(C),y):n},y.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:ru(!!C),y):i},y.on=function(){var C=u.on.apply(u,arguments);return C===u?y:C},y.clickDistance=function(C){return arguments.length?(m=(C=+C)*C,y):Math.sqrt(m)},y}function Ix(t,s,n){t.prototype=s.prototype=n,n.constructor=t}function Bw(t,s){var n=Object.create(t.prototype);for(var i in s)n[i]=s[i];return n}function Mc(){}var vc=.7,Uu=1/vc,Po="\\s*([+-]?\\d+)\\s*",yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HD=/^#([0-9a-f]{3,8})$/,zD=new RegExp(`^rgb\\(${Po},${Po},${Po}\\)$`),FD=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),UD=new RegExp(`^rgba\\(${Po},${Po},${Po},${yc}\\)$`),WD=new RegExp(`^rgba\\(${fn},${fn},${fn},${yc}\\)$`),VD=new RegExp(`^hsl\\(${yc},${fn},${fn}\\)$`),qD=new RegExp(`^hsla\\(${yc},${fn},${fn},${yc}\\)$`),s_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ix(Mc,bc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:r_,formatHex:r_,formatHex8:GD,formatHsl:YD,formatRgb:n_,toString:n_});function r_(){return this.rgb().formatHex()}function GD(){return this.rgb().formatHex8()}function YD(){return Iw(this).formatHsl()}function n_(){return this.rgb().formatRgb()}function bc(t){var s,n;return t=(t+"").trim().toLowerCase(),(s=HD.exec(t))?(n=s[1].length,s=parseInt(s[1],16),n===6?a_(s):n===3?new nr(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):n===8?nu(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):n===4?nu(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=zD.exec(t))?new nr(s[1],s[2],s[3],1):(s=FD.exec(t))?new nr(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=UD.exec(t))?nu(s[1],s[2],s[3],s[4]):(s=WD.exec(t))?nu(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=VD.exec(t))?l_(s[1],s[2]/100,s[3]/100,1):(s=qD.exec(t))?l_(s[1],s[2]/100,s[3]/100,s[4]):s_.hasOwnProperty(t)?a_(s_[t]):t==="transparent"?new nr(NaN,NaN,NaN,0):null}function a_(t){return new nr(t>>16&255,t>>8&255,t&255,1)}function nu(t,s,n,i){return i<=0&&(t=s=n=NaN),new nr(t,s,n,i)}function XD(t){return t instanceof Mc||(t=bc(t)),t?(t=t.rgb(),new nr(t.r,t.g,t.b,t.opacity)):new nr}function Kp(t,s,n,i){return arguments.length===1?XD(t):new nr(t,s,n,i??1)}function nr(t,s,n,i){this.r=+t,this.g=+s,this.b=+n,this.opacity=+i}Ix(nr,Kp,Bw(Mc,{brighter(t){return t=t==null?Uu:Math.pow(Uu,t),new nr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vc:Math.pow(vc,t),new nr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new nr(wi(this.r),wi(this.g),wi(this.b),Wu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i_,formatHex:i_,formatHex8:KD,formatRgb:o_,toString:o_}));function i_(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}`}function KD(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}${yi((isNaN(this.opacity)?1:this.opacity)*255)}`}function o_(){const t=Wu(this.opacity);return`${t===1?"rgb(":"rgba("}${wi(this.r)}, ${wi(this.g)}, ${wi(this.b)}${t===1?")":`, ${t})`}`}function Wu(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yi(t){return t=wi(t),(t<16?"0":"")+t.toString(16)}function l_(t,s,n,i){return i<=0?t=s=n=NaN:n<=0||n>=1?t=s=NaN:s<=0&&(t=NaN),new Vr(t,s,n,i)}function Iw(t){if(t instanceof Vr)return new Vr(t.h,t.s,t.l,t.opacity);if(t instanceof Mc||(t=bc(t)),!t)return new Vr;if(t instanceof Vr)return t;t=t.rgb();var s=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(s,n,i),u=Math.max(s,n,i),h=NaN,l=u-o,d=(u+o)/2;return l?(s===u?h=(n-i)/l+(n<i)*6:n===u?h=(i-s)/l+2:h=(s-n)/l+4,l/=d<.5?u+o:2-u-o,h*=60):l=d>0&&d<1?0:h,new Vr(h,l,d,t.opacity)}function QD(t,s,n,i){return arguments.length===1?Iw(t):new Vr(t,s,n,i??1)}function Vr(t,s,n,i){this.h=+t,this.s=+s,this.l=+n,this.opacity=+i}Ix(Vr,QD,Bw(Mc,{brighter(t){return t=t==null?Uu:Math.pow(Uu,t),new Vr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vc:Math.pow(vc,t),new Vr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,s=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*s,o=2*n-i;return new nr(up(t>=240?t-240:t+120,o,i),up(t,o,i),up(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new Vr(c_(this.h),au(this.s),au(this.l),Wu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wu(this.opacity);return`${t===1?"hsl(":"hsla("}${c_(this.h)}, ${au(this.s)*100}%, ${au(this.l)*100}%${t===1?")":`, ${t})`}`}}));function c_(t){return t=(t||0)%360,t<0?t+360:t}function au(t){return Math.max(0,Math.min(1,t||0))}function up(t,s,n){return(t<60?s+(n-s)*t/60:t<180?n:t<240?s+(n-s)*(240-t)/60:s)*255}const $w=t=>()=>t;function ZD(t,s){return function(n){return t+n*s}}function JD(t,s,n){return t=Math.pow(t,n),s=Math.pow(s,n)-t,n=1/n,function(i){return Math.pow(t+i*s,n)}}function eM(t){return(t=+t)==1?Hw:function(s,n){return n-s?JD(s,n,t):$w(isNaN(s)?n:s)}}function Hw(t,s){var n=s-t;return n?ZD(t,n):$w(isNaN(t)?s:t)}const d_=(function t(s){var n=eM(s);function i(o,u){var h=n((o=Kp(o)).r,(u=Kp(u)).r),l=n(o.g,u.g),d=n(o.b,u.b),f=Hw(o.opacity,u.opacity);return function(p){return o.r=h(p),o.g=l(p),o.b=d(p),o.opacity=f(p),o+""}}return i.gamma=t,i})(1);function Ha(t,s){return t=+t,s=+s,function(n){return t*(1-n)+s*n}}var Qp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hp=new RegExp(Qp.source,"g");function tM(t){return function(){return t}}function sM(t){return function(s){return t(s)+""}}function rM(t,s){var n=Qp.lastIndex=hp.lastIndex=0,i,o,u,h=-1,l=[],d=[];for(t=t+"",s=s+"";(i=Qp.exec(t))&&(o=hp.exec(s));)(u=o.index)>n&&(u=s.slice(n,u),l[h]?l[h]+=u:l[++h]=u),(i=i[0])===(o=o[0])?l[h]?l[h]+=o:l[++h]=o:(l[++h]=null,d.push({i:h,x:Ha(i,o)})),n=hp.lastIndex;return n<s.length&&(u=s.slice(n),l[h]?l[h]+=u:l[++h]=u),l.length<2?d[0]?sM(d[0].x):tM(s):(s=d.length,function(f){for(var p=0,m;p<s;++p)l[(m=d[p]).i]=m.x(f);return l.join("")})}var u_=180/Math.PI,Zp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zw(t,s,n,i,o,u){var h,l,d;return(h=Math.sqrt(t*t+s*s))&&(t/=h,s/=h),(d=t*n+s*i)&&(n-=t*d,i-=s*d),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,d/=l),t*i<s*n&&(t=-t,s=-s,d=-d,h=-h),{translateX:o,translateY:u,rotate:Math.atan2(s,t)*u_,skewX:Math.atan(d)*u_,scaleX:h,scaleY:l}}var iu;function nM(t){const s=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return s.isIdentity?Zp:zw(s.a,s.b,s.c,s.d,s.e,s.f)}function aM(t){return t==null||(iu||(iu=document.createElementNS("http://www.w3.org/2000/svg","g")),iu.setAttribute("transform",t),!(t=iu.transform.baseVal.consolidate()))?Zp:(t=t.matrix,zw(t.a,t.b,t.c,t.d,t.e,t.f))}function Fw(t,s,n,i){function o(f){return f.length?f.pop()+" ":""}function u(f,p,m,y,j,S){if(f!==m||p!==y){var w=j.push("translate(",null,s,null,n);S.push({i:w-4,x:Ha(f,m)},{i:w-2,x:Ha(p,y)})}else(m||y)&&j.push("translate("+m+s+y+n)}function h(f,p,m,y){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),y.push({i:m.push(o(m)+"rotate(",null,i)-2,x:Ha(f,p)})):p&&m.push(o(m)+"rotate("+p+i)}function l(f,p,m,y){f!==p?y.push({i:m.push(o(m)+"skewX(",null,i)-2,x:Ha(f,p)}):p&&m.push(o(m)+"skewX("+p+i)}function d(f,p,m,y,j,S){if(f!==m||p!==y){var w=j.push(o(j)+"scale(",null,",",null,")");S.push({i:w-4,x:Ha(f,m)},{i:w-2,x:Ha(p,y)})}else(m!==1||y!==1)&&j.push(o(j)+"scale("+m+","+y+")")}return function(f,p){var m=[],y=[];return f=t(f),p=t(p),u(f.translateX,f.translateY,p.translateX,p.translateY,m,y),h(f.rotate,p.rotate,m,y),l(f.skewX,p.skewX,m,y),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,m,y),f=p=null,function(j){for(var S=-1,w=y.length,g;++S<w;)m[(g=y[S]).i]=g.x(j);return m.join("")}}}var iM=Fw(nM,"px, ","px)","deg)"),oM=Fw(aM,", ",")",")"),lM=1e-12;function h_(t){return((t=Math.exp(t))+1/t)/2}function cM(t){return((t=Math.exp(t))-1/t)/2}function dM(t){return((t=Math.exp(2*t))-1)/(t+1)}const uM=(function t(s,n,i){function o(u,h){var l=u[0],d=u[1],f=u[2],p=h[0],m=h[1],y=h[2],j=p-l,S=m-d,w=j*j+S*S,g,v;if(w<lM)v=Math.log(y/f)/s,g=function(R){return[l+R*j,d+R*S,f*Math.exp(s*R*v)]};else{var b=Math.sqrt(w),_=(y*y-f*f+i*w)/(2*f*n*b),C=(y*y-f*f-i*w)/(2*y*n*b),A=Math.log(Math.sqrt(_*_+1)-_),D=Math.log(Math.sqrt(C*C+1)-C);v=(D-A)/s,g=function(R){var k=R*v,M=h_(A),I=f/(n*b)*(M*dM(s*k+A)-cM(A));return[l+I*j,d+I*S,f*M/h_(s*k+A)]}}return g.duration=v*1e3*s/Math.SQRT2,g}return o.rho=function(u){var h=Math.max(.001,+u),l=h*h,d=l*l;return t(h,l,d)},o})(Math.SQRT2,2,4);var Wo=0,dc=0,Jl=0,Uw=1e3,Vu,uc,qu=0,ki=0,uh=0,_c=typeof performance=="object"&&performance.now?performance:Date,Ww=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $x(){return ki||(Ww(hM),ki=_c.now()+uh)}function hM(){ki=0}function Gu(){this._call=this._time=this._next=null}Gu.prototype=Vw.prototype={constructor:Gu,restart:function(t,s,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$x():+n)+(s==null?0:+s),!this._next&&uc!==this&&(uc?uc._next=this:Vu=this,uc=this),this._call=t,this._time=n,Jp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jp())}};function Vw(t,s,n){var i=new Gu;return i.restart(t,s,n),i}function mM(){$x(),++Wo;for(var t=Vu,s;t;)(s=ki-t._time)>=0&&t._call.call(void 0,s),t=t._next;--Wo}function m_(){ki=(qu=_c.now())+uh,Wo=dc=0;try{mM()}finally{Wo=0,pM(),ki=0}}function fM(){var t=_c.now(),s=t-qu;s>Uw&&(uh-=s,qu=t)}function pM(){for(var t,s=Vu,n,i=1/0;s;)s._call?(i>s._time&&(i=s._time),t=s,s=s._next):(n=s._next,s._next=null,s=t?t._next=n:Vu=n);uc=t,Jp(i)}function Jp(t){if(!Wo){dc&&(dc=clearTimeout(dc));var s=t-ki;s>24?(t<1/0&&(dc=setTimeout(m_,t-_c.now()-uh)),Jl&&(Jl=clearInterval(Jl))):(Jl||(qu=_c.now(),Jl=setInterval(fM,Uw)),Wo=1,Ww(m_))}}function f_(t,s,n){var i=new Gu;return s=s==null?0:+s,i.restart(o=>{i.stop(),t(o+s)},s,n),i}var xM=ch("start","end","cancel","interrupt"),gM=[],qw=0,p_=1,ex=2,Au=3,x_=4,tx=5,Tu=6;function hh(t,s,n,i,o,u){var h=t.__transition;if(!h)t.__transition={};else if(n in h)return;vM(t,n,{name:s,index:i,group:o,on:xM,tween:gM,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:qw})}function Hx(t,s){var n=Jr(t,s);if(n.state>qw)throw new Error("too late; already scheduled");return n}function vn(t,s){var n=Jr(t,s);if(n.state>Au)throw new Error("too late; already running");return n}function Jr(t,s){var n=t.__transition;if(!n||!(n=n[s]))throw new Error("transition not found");return n}function vM(t,s,n){var i=t.__transition,o;i[s]=n,n.timer=Vw(u,0,n.time);function u(f){n.state=p_,n.timer.restart(h,n.delay,n.time),n.delay<=f&&h(f-n.delay)}function h(f){var p,m,y,j;if(n.state!==p_)return d();for(p in i)if(j=i[p],j.name===n.name){if(j.state===Au)return f_(h);j.state===x_?(j.state=Tu,j.timer.stop(),j.on.call("interrupt",t,t.__data__,j.index,j.group),delete i[p]):+p<s&&(j.state=Tu,j.timer.stop(),j.on.call("cancel",t,t.__data__,j.index,j.group),delete i[p])}if(f_(function(){n.state===Au&&(n.state=x_,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=ex,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ex){for(n.state=Au,o=new Array(y=n.tween.length),p=0,m=-1;p<y;++p)(j=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(o[++m]=j);o.length=m+1}}function l(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=tx,1),m=-1,y=o.length;++m<y;)o[m].call(t,p);n.state===tx&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=Tu,n.timer.stop(),delete i[s];for(var f in i)return;delete t.__transition}}function Ru(t,s){var n=t.__transition,i,o,u=!0,h;if(n){s=s==null?null:s+"";for(h in n){if((i=n[h]).name!==s){u=!1;continue}o=i.state>ex&&i.state<tx,i.state=Tu,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[h]}u&&delete t.__transition}}function yM(t){return this.each(function(){Ru(this,t)})}function bM(t,s){var n,i;return function(){var o=vn(this,t),u=o.tween;if(u!==n){i=n=u;for(var h=0,l=i.length;h<l;++h)if(i[h].name===s){i=i.slice(),i.splice(h,1);break}}o.tween=i}}function _M(t,s,n){var i,o;if(typeof n!="function")throw new Error;return function(){var u=vn(this,t),h=u.tween;if(h!==i){o=(i=h).slice();for(var l={name:s,value:n},d=0,f=o.length;d<f;++d)if(o[d].name===s){o[d]=l;break}d===f&&o.push(l)}u.tween=o}}function jM(t,s){var n=this._id;if(t+="",arguments.length<2){for(var i=Jr(this.node(),n).tween,o=0,u=i.length,h;o<u;++o)if((h=i[o]).name===t)return h.value;return null}return this.each((s==null?bM:_M)(n,t,s))}function zx(t,s,n){var i=t._id;return t.each(function(){var o=vn(this,i);(o.value||(o.value={}))[s]=n.apply(this,arguments)}),function(o){return Jr(o,i).value[s]}}function Gw(t,s){var n;return(typeof s=="number"?Ha:s instanceof bc?d_:(n=bc(s))?(s=n,d_):rM)(t,s)}function wM(t){return function(){this.removeAttribute(t)}}function SM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function NM(t,s,n){var i,o=n+"",u;return function(){var h=this.getAttribute(t);return h===o?null:h===i?u:u=s(i=h,n)}}function CM(t,s,n){var i,o=n+"",u;return function(){var h=this.getAttributeNS(t.space,t.local);return h===o?null:h===i?u:u=s(i=h,n)}}function EM(t,s,n){var i,o,u;return function(){var h,l=n(this),d;return l==null?void this.removeAttribute(t):(h=this.getAttribute(t),d=l+"",h===d?null:h===i&&d===o?u:(o=d,u=s(i=h,l)))}}function kM(t,s,n){var i,o,u;return function(){var h,l=n(this),d;return l==null?void this.removeAttributeNS(t.space,t.local):(h=this.getAttributeNS(t.space,t.local),d=l+"",h===d?null:h===i&&d===o?u:(o=d,u=s(i=h,l)))}}function AM(t,s){var n=dh(t),i=n==="transform"?oM:Gw;return this.attrTween(t,typeof s=="function"?(n.local?kM:EM)(n,i,zx(this,"attr."+t,s)):s==null?(n.local?SM:wM)(n):(n.local?CM:NM)(n,i,s))}function TM(t,s){return function(n){this.setAttribute(t,s.call(this,n))}}function RM(t,s){return function(n){this.setAttributeNS(t.space,t.local,s.call(this,n))}}function DM(t,s){var n,i;function o(){var u=s.apply(this,arguments);return u!==i&&(n=(i=u)&&RM(t,u)),n}return o._value=s,o}function MM(t,s){var n,i;function o(){var u=s.apply(this,arguments);return u!==i&&(n=(i=u)&&TM(t,u)),n}return o._value=s,o}function OM(t,s){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(s==null)return this.tween(n,null);if(typeof s!="function")throw new Error;var i=dh(t);return this.tween(n,(i.local?DM:MM)(i,s))}function PM(t,s){return function(){Hx(this,t).delay=+s.apply(this,arguments)}}function LM(t,s){return s=+s,function(){Hx(this,t).delay=s}}function BM(t){var s=this._id;return arguments.length?this.each((typeof t=="function"?PM:LM)(s,t)):Jr(this.node(),s).delay}function IM(t,s){return function(){vn(this,t).duration=+s.apply(this,arguments)}}function $M(t,s){return s=+s,function(){vn(this,t).duration=s}}function HM(t){var s=this._id;return arguments.length?this.each((typeof t=="function"?IM:$M)(s,t)):Jr(this.node(),s).duration}function zM(t,s){if(typeof s!="function")throw new Error;return function(){vn(this,t).ease=s}}function FM(t){var s=this._id;return arguments.length?this.each(zM(s,t)):Jr(this.node(),s).ease}function UM(t,s){return function(){var n=s.apply(this,arguments);if(typeof n!="function")throw new Error;vn(this,t).ease=n}}function WM(t){if(typeof t!="function")throw new Error;return this.each(UM(this._id,t))}function VM(t){typeof t!="function"&&(t=Nw(t));for(var s=this._groups,n=s.length,i=new Array(n),o=0;o<n;++o)for(var u=s[o],h=u.length,l=i[o]=[],d,f=0;f<h;++f)(d=u[f])&&t.call(d,d.__data__,f,u)&&l.push(d);return new Qn(i,this._parents,this._name,this._id)}function qM(t){if(t._id!==this._id)throw new Error;for(var s=this._groups,n=t._groups,i=s.length,o=n.length,u=Math.min(i,o),h=new Array(i),l=0;l<u;++l)for(var d=s[l],f=n[l],p=d.length,m=h[l]=new Array(p),y,j=0;j<p;++j)(y=d[j]||f[j])&&(m[j]=y);for(;l<i;++l)h[l]=s[l];return new Qn(h,this._parents,this._name,this._id)}function GM(t){return(t+"").trim().split(/^|\s+/).every(function(s){var n=s.indexOf(".");return n>=0&&(s=s.slice(0,n)),!s||s==="start"})}function YM(t,s,n){var i,o,u=GM(s)?Hx:vn;return function(){var h=u(this,t),l=h.on;l!==i&&(o=(i=l).copy()).on(s,n),h.on=o}}function XM(t,s){var n=this._id;return arguments.length<2?Jr(this.node(),n).on.on(t):this.each(YM(n,t,s))}function KM(t){return function(){var s=this.parentNode;for(var n in this.__transition)if(+n!==t)return;s&&s.removeChild(this)}}function QM(){return this.on("end.remove",KM(this._id))}function ZM(t){var s=this._name,n=this._id;typeof t!="function"&&(t=Lx(t));for(var i=this._groups,o=i.length,u=new Array(o),h=0;h<o;++h)for(var l=i[h],d=l.length,f=u[h]=new Array(d),p,m,y=0;y<d;++y)(p=l[y])&&(m=t.call(p,p.__data__,y,l))&&("__data__"in p&&(m.__data__=p.__data__),f[y]=m,hh(f[y],s,n,y,f,Jr(p,n)));return new Qn(u,this._parents,s,n)}function JM(t){var s=this._name,n=this._id;typeof t!="function"&&(t=Sw(t));for(var i=this._groups,o=i.length,u=[],h=[],l=0;l<o;++l)for(var d=i[l],f=d.length,p,m=0;m<f;++m)if(p=d[m]){for(var y=t.call(p,p.__data__,m,d),j,S=Jr(p,n),w=0,g=y.length;w<g;++w)(j=y[w])&&hh(j,s,n,w,y,S);u.push(y),h.push(p)}return new Qn(u,h,s,n)}var eO=Dc.prototype.constructor;function tO(){return new eO(this._groups,this._parents)}function sO(t,s){var n,i,o;return function(){var u=Uo(this,t),h=(this.style.removeProperty(t),Uo(this,t));return u===h?null:u===n&&h===i?o:o=s(n=u,i=h)}}function Yw(t){return function(){this.style.removeProperty(t)}}function rO(t,s,n){var i,o=n+"",u;return function(){var h=Uo(this,t);return h===o?null:h===i?u:u=s(i=h,n)}}function nO(t,s,n){var i,o,u;return function(){var h=Uo(this,t),l=n(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(t),Uo(this,t))),h===d?null:h===i&&d===o?u:(o=d,u=s(i=h,l))}}function aO(t,s){var n,i,o,u="style."+s,h="end."+u,l;return function(){var d=vn(this,t),f=d.on,p=d.value[u]==null?l||(l=Yw(s)):void 0;(f!==n||o!==p)&&(i=(n=f).copy()).on(h,o=p),d.on=i}}function iO(t,s,n){var i=(t+="")=="transform"?iM:Gw;return s==null?this.styleTween(t,sO(t,i)).on("end.style."+t,Yw(t)):typeof s=="function"?this.styleTween(t,nO(t,i,zx(this,"style."+t,s))).each(aO(this._id,t)):this.styleTween(t,rO(t,i,s),n).on("end.style."+t,null)}function oO(t,s,n){return function(i){this.style.setProperty(t,s.call(this,i),n)}}function lO(t,s,n){var i,o;function u(){var h=s.apply(this,arguments);return h!==o&&(i=(o=h)&&oO(t,h,n)),i}return u._value=s,u}function cO(t,s,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(s==null)return this.tween(i,null);if(typeof s!="function")throw new Error;return this.tween(i,lO(t,s,n??""))}function dO(t){return function(){this.textContent=t}}function uO(t){return function(){var s=t(this);this.textContent=s??""}}function hO(t){return this.tween("text",typeof t=="function"?uO(zx(this,"text",t)):dO(t==null?"":t+""))}function mO(t){return function(s){this.textContent=t.call(this,s)}}function fO(t){var s,n;function i(){var o=t.apply(this,arguments);return o!==n&&(s=(n=o)&&mO(o)),s}return i._value=t,i}function pO(t){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,fO(t))}function xO(){for(var t=this._name,s=this._id,n=Xw(),i=this._groups,o=i.length,u=0;u<o;++u)for(var h=i[u],l=h.length,d,f=0;f<l;++f)if(d=h[f]){var p=Jr(d,s);hh(d,t,n,f,h,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Qn(i,this._parents,t,n)}function gO(){var t,s,n=this,i=n._id,o=n.size();return new Promise(function(u,h){var l={value:h},d={value:function(){--o===0&&u()}};n.each(function(){var f=vn(this,i),p=f.on;p!==t&&(s=(t=p).copy(),s._.cancel.push(l),s._.interrupt.push(l),s._.end.push(d)),f.on=s}),o===0&&u()})}var vO=0;function Qn(t,s,n,i){this._groups=t,this._parents=s,this._name=n,this._id=i}function Xw(){return++vO}var Wn=Dc.prototype;Qn.prototype={constructor:Qn,select:ZM,selectAll:JM,selectChild:Wn.selectChild,selectChildren:Wn.selectChildren,filter:VM,merge:qM,selection:tO,transition:xO,call:Wn.call,nodes:Wn.nodes,node:Wn.node,size:Wn.size,empty:Wn.empty,each:Wn.each,on:XM,attr:AM,attrTween:OM,style:iO,styleTween:cO,text:hO,textTween:pO,remove:QM,tween:jM,delay:BM,duration:HM,ease:FM,easeVarying:WM,end:gO,[Symbol.iterator]:Wn[Symbol.iterator]};function yO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var bO={time:null,delay:0,duration:250,ease:yO};function _O(t,s){for(var n;!(n=t.__transition)||!(n=n[s]);)if(!(t=t.parentNode))throw new Error(`transition ${s} not found`);return n}function jO(t){var s,n;t instanceof Qn?(s=t._id,t=t._name):(s=Xw(),(n=bO).time=$x(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,u=0;u<o;++u)for(var h=i[u],l=h.length,d,f=0;f<l;++f)(d=h[f])&&hh(d,t,s,f,h,n||_O(d,s));return new Qn(i,this._parents,t,s)}Dc.prototype.interrupt=yM;Dc.prototype.transition=jO;const ou=t=>()=>t;function wO(t,{sourceEvent:s,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Gn(t,s,n){this.k=t,this.x=s,this.y=n}Gn.prototype={constructor:Gn,scale:function(t){return t===1?this:new Gn(this.k*t,this.x,this.y)},translate:function(t,s){return t===0&s===0?this:new Gn(this.k,this.x+this.k*t,this.y+this.k*s)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Yn=new Gn(1,0,0);Gn.prototype;function mp(t){t.stopImmediatePropagation()}function ec(t){t.preventDefault(),t.stopImmediatePropagation()}function SO(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function NO(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function g_(){return this.__zoom||Yn}function CO(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function EO(){return navigator.maxTouchPoints||"ontouchstart"in this}function kO(t,s,n){var i=t.invertX(s[0][0])-n[0][0],o=t.invertX(s[1][0])-n[1][0],u=t.invertY(s[0][1])-n[0][1],h=t.invertY(s[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),h>u?(u+h)/2:Math.min(0,u)||Math.max(0,h))}function Kw(){var t=SO,s=NO,n=kO,i=CO,o=EO,u=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],l=250,d=uM,f=ch("start","zoom","end"),p,m,y,j=500,S=150,w=0,g=10;function v($){$.property("__zoom",g_).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",I).filter(o).on("touchstart.zoom",q).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function($,F,B,V){var O=$.selection?$.selection():$;O.property("__zoom",g_),$!==O?A($,F,B,V):O.interrupt().each(function(){D(this,arguments).event(V).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},v.scaleBy=function($,F,B,V){v.scaleTo($,function(){var O=this.__zoom.k,H=typeof F=="function"?F.apply(this,arguments):F;return O*H},B,V)},v.scaleTo=function($,F,B,V){v.transform($,function(){var O=s.apply(this,arguments),H=this.__zoom,U=B==null?C(O):typeof B=="function"?B.apply(this,arguments):B,L=H.invert(U),Y=typeof F=="function"?F.apply(this,arguments):F;return n(_(b(H,Y),U,L),O,h)},B,V)},v.translateBy=function($,F,B,V){v.transform($,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof B=="function"?B.apply(this,arguments):B),s.apply(this,arguments),h)},null,V)},v.translateTo=function($,F,B,V,O){v.transform($,function(){var H=s.apply(this,arguments),U=this.__zoom,L=V==null?C(H):typeof V=="function"?V.apply(this,arguments):V;return n(Yn.translate(L[0],L[1]).scale(U.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof B=="function"?-B.apply(this,arguments):-B),H,h)},V,O)};function b($,F){return F=Math.max(u[0],Math.min(u[1],F)),F===$.k?$:new Gn(F,$.x,$.y)}function _($,F,B){var V=F[0]-B[0]*$.k,O=F[1]-B[1]*$.k;return V===$.x&&O===$.y?$:new Gn($.k,V,O)}function C($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function A($,F,B,V){$.on("start.zoom",function(){D(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(V).end()}).tween("zoom",function(){var O=this,H=arguments,U=D(O,H).event(V),L=s.apply(O,H),Y=B==null?C(L):typeof B=="function"?B.apply(O,H):B,J=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),K=O.__zoom,Z=typeof F=="function"?F.apply(O,H):F,oe=d(K.invert(Y).concat(J/K.k),Z.invert(Y).concat(J/Z.k));return function(P){if(P===1)P=Z;else{var Q=oe(P),ee=J/Q[2];P=new Gn(ee,Y[0]-Q[0]*ee,Y[1]-Q[1]*ee)}U.zoom(null,P)}})}function D($,F,B){return!B&&$.__zooming||new R($,F)}function R($,F){this.that=$,this.args=F,this.active=0,this.sourceEvent=null,this.extent=s.apply($,F),this.taps=0}R.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,F){return this.mouse&&$!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var F=Mr(this.that).datum();f.call($,this.that,new wO($,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:f}),F)}};function k($,...F){if(!t.apply(this,arguments))return;var B=D(this,F).event($),V=this.__zoom,O=Math.max(u[0],Math.min(u[1],V.k*Math.pow(2,i.apply(this,arguments)))),H=Ur($);if(B.wheel)(B.mouse[0][0]!==H[0]||B.mouse[0][1]!==H[1])&&(B.mouse[1]=V.invert(B.mouse[0]=H)),clearTimeout(B.wheel);else{if(V.k===O)return;B.mouse=[H,V.invert(H)],Ru(this),B.start()}ec($),B.wheel=setTimeout(U,S),B.zoom("mouse",n(_(b(V,O),B.mouse[0],B.mouse[1]),B.extent,h));function U(){B.wheel=null,B.end()}}function M($,...F){if(y||!t.apply(this,arguments))return;var B=$.currentTarget,V=D(this,F,!0).event($),O=Mr($.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",J,!0),H=Ur($,B),U=$.clientX,L=$.clientY;Pw($.view),mp($),V.mouse=[H,this.__zoom.invert(H)],Ru(this),V.start();function Y(K){if(ec(K),!V.moved){var Z=K.clientX-U,oe=K.clientY-L;V.moved=Z*Z+oe*oe>w}V.event(K).zoom("mouse",n(_(V.that.__zoom,V.mouse[0]=Ur(K,B),V.mouse[1]),V.extent,h))}function J(K){O.on("mousemove.zoom mouseup.zoom",null),Lw(K.view,V.moved),ec(K),V.event(K).end()}}function I($,...F){if(t.apply(this,arguments)){var B=this.__zoom,V=Ur($.changedTouches?$.changedTouches[0]:$,this),O=B.invert(V),H=B.k*($.shiftKey?.5:2),U=n(_(b(B,H),V,O),s.apply(this,F),h);ec($),l>0?Mr(this).transition().duration(l).call(A,U,V,$):Mr(this).call(v.transform,U,V,$)}}function q($,...F){if(t.apply(this,arguments)){var B=$.touches,V=B.length,O=D(this,F,$.changedTouches.length===V).event($),H,U,L,Y;for(mp($),U=0;U<V;++U)L=B[U],Y=Ur(L,this),Y=[Y,this.__zoom.invert(Y),L.identifier],O.touch0?!O.touch1&&O.touch0[2]!==Y[2]&&(O.touch1=Y,O.taps=0):(O.touch0=Y,H=!0,O.taps=1+!!p);p&&(p=clearTimeout(p)),H&&(O.taps<2&&(m=Y[0],p=setTimeout(function(){p=null},j)),Ru(this),O.start())}}function W($,...F){if(this.__zooming){var B=D(this,F).event($),V=$.changedTouches,O=V.length,H,U,L,Y;for(ec($),H=0;H<O;++H)U=V[H],L=Ur(U,this),B.touch0&&B.touch0[2]===U.identifier?B.touch0[0]=L:B.touch1&&B.touch1[2]===U.identifier&&(B.touch1[0]=L);if(U=B.that.__zoom,B.touch1){var J=B.touch0[0],K=B.touch0[1],Z=B.touch1[0],oe=B.touch1[1],P=(P=Z[0]-J[0])*P+(P=Z[1]-J[1])*P,Q=(Q=oe[0]-K[0])*Q+(Q=oe[1]-K[1])*Q;U=b(U,Math.sqrt(P/Q)),L=[(J[0]+Z[0])/2,(J[1]+Z[1])/2],Y=[(K[0]+oe[0])/2,(K[1]+oe[1])/2]}else if(B.touch0)L=B.touch0[0],Y=B.touch0[1];else return;B.zoom("touch",n(_(U,L,Y),B.extent,h))}}function G($,...F){if(this.__zooming){var B=D(this,F).event($),V=$.changedTouches,O=V.length,H,U;for(mp($),y&&clearTimeout(y),y=setTimeout(function(){y=null},j),H=0;H<O;++H)U=V[H],B.touch0&&B.touch0[2]===U.identifier?delete B.touch0:B.touch1&&B.touch1[2]===U.identifier&&delete B.touch1;if(B.touch1&&!B.touch0&&(B.touch0=B.touch1,delete B.touch1),B.touch0)B.touch0[1]=this.__zoom.invert(B.touch0[0]);else if(B.end(),B.taps===2&&(U=Ur(U,this),Math.hypot(m[0]-U[0],m[1]-U[1])<g)){var L=Mr(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return v.wheelDelta=function($){return arguments.length?(i=typeof $=="function"?$:ou(+$),v):i},v.filter=function($){return arguments.length?(t=typeof $=="function"?$:ou(!!$),v):t},v.touchable=function($){return arguments.length?(o=typeof $=="function"?$:ou(!!$),v):o},v.extent=function($){return arguments.length?(s=typeof $=="function"?$:ou([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),v):s},v.scaleExtent=function($){return arguments.length?(u[0]=+$[0],u[1]=+$[1],v):[u[0],u[1]]},v.translateExtent=function($){return arguments.length?(h[0][0]=+$[0][0],h[1][0]=+$[1][0],h[0][1]=+$[0][1],h[1][1]=+$[1][1],v):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},v.constrain=function($){return arguments.length?(n=$,v):n},v.duration=function($){return arguments.length?(l=+$,v):l},v.interpolate=function($){return arguments.length?(d=$,v):d},v.on=function(){var $=f.on.apply(f,arguments);return $===f?v:$},v.clickDistance=function($){return arguments.length?(w=($=+$)*$,v):Math.sqrt(w)},v.tapDistance=function($){return arguments.length?(g=+$,v):g},v}var Ko=Gj();const Qw=ih(Ko),mh=E.createContext(null),AO=mh.Provider,Zn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,s)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?s.targetHandle:s.sourceHandle}", edge id: ${s.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Zw=Zn.error001();function Et(t,s){const n=E.useContext(mh);if(n===null)throw new Error(Zw);return jw(n,t,s)}const Ns=()=>{const t=E.useContext(mh);if(t===null)throw new Error(Zw);return E.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},TO=t=>t.userSelectionActive?"none":"all";function Jw({position:t,children:s,className:n,style:i,...o}){const u=Et(TO),h=`${t}`.split("-");return ae.createElement("div",{className:Gs(["react-flow__panel",n,...h]),style:{...i,pointerEvents:u},...o},s)}function RO({proOptions:t,position:s="bottom-right"}){return t?.hideAttribution?null:ae.createElement(Jw,{position:s,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ae.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const DO=({x:t,y:s,label:n,labelStyle:i={},labelShowBg:o=!0,labelBgStyle:u={},labelBgPadding:h=[2,4],labelBgBorderRadius:l=2,children:d,className:f,...p})=>{const m=E.useRef(null),[y,j]=E.useState({x:0,y:0,width:0,height:0}),S=Gs(["react-flow__edge-textwrapper",f]);return E.useEffect(()=>{if(m.current){const w=m.current.getBBox();j({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:ae.createElement("g",{transform:`translate(${t-y.width/2} ${s-y.height/2})`,className:S,visibility:y.width?"visible":"hidden",...p},o&&ae.createElement("rect",{width:y.width+2*h[0],x:-h[0],y:-h[1],height:y.height+2*h[1],className:"react-flow__edge-textbg",style:u,rx:l,ry:l}),ae.createElement("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:m,style:i},n),d)};var MO=E.memo(DO);const Fx=t=>({width:t.offsetWidth,height:t.offsetHeight}),Vo=(t,s=0,n=1)=>Math.min(Math.max(t,s),n),Ux=(t={x:0,y:0},s)=>({x:Vo(t.x,s[0][0],s[1][0]),y:Vo(t.y,s[0][1],s[1][1])}),v_=(t,s,n)=>t<s?Vo(Math.abs(t-s),1,50)/50:t>n?-Vo(Math.abs(t-n),1,50)/50:0,eS=(t,s)=>{const n=v_(t.x,35,s.width-35)*20,i=v_(t.y,35,s.height-35)*20;return[n,i]},tS=t=>t.getRootNode?.()||window?.document,sS=(t,s)=>({x:Math.min(t.x,s.x),y:Math.min(t.y,s.y),x2:Math.max(t.x2,s.x2),y2:Math.max(t.y2,s.y2)}),jc=({x:t,y:s,width:n,height:i})=>({x:t,y:s,x2:t+n,y2:s+i}),rS=({x:t,y:s,x2:n,y2:i})=>({x:t,y:s,width:n-t,height:i-s}),y_=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),OO=(t,s)=>rS(sS(jc(t),jc(s))),sx=(t,s)=>{const n=Math.max(0,Math.min(t.x+t.width,s.x+s.width)-Math.max(t.x,s.x)),i=Math.max(0,Math.min(t.y+t.height,s.y+s.height)-Math.max(t.y,s.y));return Math.ceil(n*i)},PO=t=>Or(t.width)&&Or(t.height)&&Or(t.x)&&Or(t.y),Or=t=>!isNaN(t)&&isFinite(t),Vt=Symbol.for("internals"),nS=["Enter"," ","Escape"],LO=(t,s)=>{},BO=t=>"nativeEvent"in t;function rx(t){const n=(BO(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const aS=t=>"clientX"in t,Va=(t,s)=>{const n=aS(t),i=n?t.clientX:t.touches?.[0].clientX,o=n?t.clientY:t.touches?.[0].clientY;return{x:i-(s?.left??0),y:o-(s?.top??0)}},Yu=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Qo=({id:t,path:s,labelX:n,labelY:i,label:o,labelStyle:u,labelShowBg:h,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:y,interactionWidth:j=20})=>ae.createElement(ae.Fragment,null,ae.createElement("path",{id:t,style:p,d:s,fill:"none",className:"react-flow__edge-path",markerEnd:m,markerStart:y}),j&&ae.createElement("path",{d:s,fill:"none",strokeOpacity:0,strokeWidth:j,className:"react-flow__edge-interaction"}),o&&Or(n)&&Or(i)?ae.createElement(MO,{x:n,y:i,label:o,labelStyle:u,labelShowBg:h,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f}):null);Qo.displayName="BaseEdge";function tc(t,s,n){return n===void 0?n:i=>{const o=s().edges.find(u=>u.id===t);o&&n(i,{...o})}}function iS({sourceX:t,sourceY:s,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,u=n<t?n+o:n-o,h=Math.abs(i-s)/2,l=i<s?i+h:i-h;return[u,l,o,h]}function oS({sourceX:t,sourceY:s,targetX:n,targetY:i,sourceControlX:o,sourceControlY:u,targetControlX:h,targetControlY:l}){const d=t*.125+o*.375+h*.375+n*.125,f=s*.125+u*.375+l*.375+i*.125,p=Math.abs(d-t),m=Math.abs(f-s);return[d,f,p,m]}var Ai;(function(t){t.Strict="strict",t.Loose="loose"})(Ai||(Ai={}));var bi;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(bi||(bi={}));var wc;(function(t){t.Partial="partial",t.Full="full"})(wc||(wc={}));var Fa;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Fa||(Fa={}));var Lt;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Lt||(Lt={}));var Me;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Me||(Me={}));function b_({pos:t,x1:s,y1:n,x2:i,y2:o}){return t===Me.Left||t===Me.Right?[.5*(s+i),n]:[s,.5*(n+o)]}function lS({sourceX:t,sourceY:s,sourcePosition:n=Me.Bottom,targetX:i,targetY:o,targetPosition:u=Me.Top}){const[h,l]=b_({pos:n,x1:t,y1:s,x2:i,y2:o}),[d,f]=b_({pos:u,x1:i,y1:o,x2:t,y2:s}),[p,m,y,j]=oS({sourceX:t,sourceY:s,targetX:i,targetY:o,sourceControlX:h,sourceControlY:l,targetControlX:d,targetControlY:f});return[`M${t},${s} C${h},${l} ${d},${f} ${i},${o}`,p,m,y,j]}const Wx=E.memo(({sourceX:t,sourceY:s,targetX:n,targetY:i,sourcePosition:o=Me.Bottom,targetPosition:u=Me.Top,label:h,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:j,markerStart:S,interactionWidth:w})=>{const[g,v,b]=lS({sourceX:t,sourceY:s,sourcePosition:o,targetX:n,targetY:i,targetPosition:u});return ae.createElement(Qo,{path:g,labelX:v,labelY:b,label:h,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:j,markerStart:S,interactionWidth:w})});Wx.displayName="SimpleBezierEdge";const __={[Me.Left]:{x:-1,y:0},[Me.Right]:{x:1,y:0},[Me.Top]:{x:0,y:-1},[Me.Bottom]:{x:0,y:1}},IO=({source:t,sourcePosition:s=Me.Bottom,target:n})=>s===Me.Left||s===Me.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},j_=(t,s)=>Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2));function $O({source:t,sourcePosition:s=Me.Bottom,target:n,targetPosition:i=Me.Top,center:o,offset:u}){const h=__[s],l=__[i],d={x:t.x+h.x*u,y:t.y+h.y*u},f={x:n.x+l.x*u,y:n.y+l.y*u},p=IO({source:d,sourcePosition:s,target:f}),m=p.x!==0?"x":"y",y=p[m];let j=[],S,w;const g={x:0,y:0},v={x:0,y:0},[b,_,C,A]=iS({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(h[m]*l[m]===-1){S=o.x??b,w=o.y??_;const R=[{x:S,y:d.y},{x:S,y:f.y}],k=[{x:d.x,y:w},{x:f.x,y:w}];h[m]===y?j=m==="x"?R:k:j=m==="x"?k:R}else{const R=[{x:d.x,y:f.y}],k=[{x:f.x,y:d.y}];if(m==="x"?j=h.x===y?k:R:j=h.y===y?R:k,s===i){const G=Math.abs(t[m]-n[m]);if(G<=u){const $=Math.min(u-1,u-G);h[m]===y?g[m]=(d[m]>t[m]?-1:1)*$:v[m]=(f[m]>n[m]?-1:1)*$}}if(s!==i){const G=m==="x"?"y":"x",$=h[m]===l[G],F=d[G]>f[G],B=d[G]<f[G];(h[m]===1&&(!$&&F||$&&B)||h[m]!==1&&(!$&&B||$&&F))&&(j=m==="x"?R:k)}const M={x:d.x+g.x,y:d.y+g.y},I={x:f.x+v.x,y:f.y+v.y},q=Math.max(Math.abs(M.x-j[0].x),Math.abs(I.x-j[0].x)),W=Math.max(Math.abs(M.y-j[0].y),Math.abs(I.y-j[0].y));q>=W?(S=(M.x+I.x)/2,w=j[0].y):(S=j[0].x,w=(M.y+I.y)/2)}return[[t,{x:d.x+g.x,y:d.y+g.y},...j,{x:f.x+v.x,y:f.y+v.y},n],S,w,C,A]}function HO(t,s,n,i){const o=Math.min(j_(t,s)/2,j_(s,n)/2,i),{x:u,y:h}=s;if(t.x===u&&u===n.x||t.y===h&&h===n.y)return`L${u} ${h}`;if(t.y===h){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${u+o*f},${h}Q ${u},${h} ${u},${h+o*p}`}const l=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${u},${h+o*d}Q ${u},${h} ${u+o*l},${h}`}function Xu({sourceX:t,sourceY:s,sourcePosition:n=Me.Bottom,targetX:i,targetY:o,targetPosition:u=Me.Top,borderRadius:h=5,centerX:l,centerY:d,offset:f=20}){const[p,m,y,j,S]=$O({source:{x:t,y:s},sourcePosition:n,target:{x:i,y:o},targetPosition:u,center:{x:l,y:d},offset:f});return[p.reduce((g,v,b)=>{let _="";return b>0&&b<p.length-1?_=HO(p[b-1],v,p[b+1],h):_=`${b===0?"M":"L"}${v.x} ${v.y}`,g+=_,g},""),m,y,j,S]}const fh=E.memo(({sourceX:t,sourceY:s,targetX:n,targetY:i,label:o,labelStyle:u,labelShowBg:h,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:m=Me.Bottom,targetPosition:y=Me.Top,markerEnd:j,markerStart:S,pathOptions:w,interactionWidth:g})=>{const[v,b,_]=Xu({sourceX:t,sourceY:s,sourcePosition:m,targetX:n,targetY:i,targetPosition:y,borderRadius:w?.borderRadius,offset:w?.offset});return ae.createElement(Qo,{path:v,labelX:b,labelY:_,label:o,labelStyle:u,labelShowBg:h,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:j,markerStart:S,interactionWidth:g})});fh.displayName="SmoothStepEdge";const Vx=E.memo(t=>ae.createElement(fh,{...t,pathOptions:E.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Vx.displayName="StepEdge";function zO({sourceX:t,sourceY:s,targetX:n,targetY:i}){const[o,u,h,l]=iS({sourceX:t,sourceY:s,targetX:n,targetY:i});return[`M ${t},${s}L ${n},${i}`,o,u,h,l]}const qx=E.memo(({sourceX:t,sourceY:s,targetX:n,targetY:i,label:o,labelStyle:u,labelShowBg:h,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:y,interactionWidth:j})=>{const[S,w,g]=zO({sourceX:t,sourceY:s,targetX:n,targetY:i});return ae.createElement(Qo,{path:S,labelX:w,labelY:g,label:o,labelStyle:u,labelShowBg:h,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:y,interactionWidth:j})});qx.displayName="StraightEdge";function lu(t,s){return t>=0?.5*t:s*25*Math.sqrt(-t)}function w_({pos:t,x1:s,y1:n,x2:i,y2:o,c:u}){switch(t){case Me.Left:return[s-lu(s-i,u),n];case Me.Right:return[s+lu(i-s,u),n];case Me.Top:return[s,n-lu(n-o,u)];case Me.Bottom:return[s,n+lu(o-n,u)]}}function cS({sourceX:t,sourceY:s,sourcePosition:n=Me.Bottom,targetX:i,targetY:o,targetPosition:u=Me.Top,curvature:h=.25}){const[l,d]=w_({pos:n,x1:t,y1:s,x2:i,y2:o,c:h}),[f,p]=w_({pos:u,x1:i,y1:o,x2:t,y2:s,c:h}),[m,y,j,S]=oS({sourceX:t,sourceY:s,targetX:i,targetY:o,sourceControlX:l,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${s} C${l},${d} ${f},${p} ${i},${o}`,m,y,j,S]}const Ku=E.memo(({sourceX:t,sourceY:s,targetX:n,targetY:i,sourcePosition:o=Me.Bottom,targetPosition:u=Me.Top,label:h,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:j,markerStart:S,pathOptions:w,interactionWidth:g})=>{const[v,b,_]=cS({sourceX:t,sourceY:s,sourcePosition:o,targetX:n,targetY:i,targetPosition:u,curvature:w?.curvature});return ae.createElement(Qo,{path:v,labelX:b,labelY:_,label:h,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:y,markerEnd:j,markerStart:S,interactionWidth:g})});Ku.displayName="BezierEdge";const Gx=E.createContext(null),FO=Gx.Provider;Gx.Consumer;const UO=()=>E.useContext(Gx),WO=t=>"id"in t&&"source"in t&&"target"in t,VO=({source:t,sourceHandle:s,target:n,targetHandle:i})=>`reactflow__edge-${t}${s||""}-${n}${i||""}`,nx=(t,s)=>typeof t>"u"?"":typeof t=="string"?t:`${s?`${s}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,qO=(t,s)=>s.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),dS=(t,s)=>{if(!t.source||!t.target)return s;let n;return WO(t)?n={...t}:n={...t,id:VO(t)},qO(n,s)?s:s.concat(n)},ax=({x:t,y:s},[n,i,o],u,[h,l])=>{const d={x:(t-n)/o,y:(s-i)/o};return u?{x:h*Math.round(d.x/h),y:l*Math.round(d.y/l)}:d},uS=({x:t,y:s},[n,i,o])=>({x:t*o+n,y:s*o+i}),Si=(t,s=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*s[0],i=(t.height??0)*s[1],o={x:t.position.x-n,y:t.position.y-i};return{...o,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:o}},ph=(t,s=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const{x:u,y:h}=Si(o,s).positionAbsolute;return sS(i,jc({x:u,y:h,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return rS(n)},hS=(t,s,[n,i,o]=[0,0,1],u=!1,h=!1,l=[0,0])=>{const d={x:(s.x-n)/o,y:(s.y-i)/o,width:s.width/o,height:s.height/o},f=[];return t.forEach(p=>{const{width:m,height:y,selectable:j=!0,hidden:S=!1}=p;if(h&&!j||S)return!1;const{positionAbsolute:w}=Si(p,l),g={x:w.x,y:w.y,width:m||0,height:y||0},v=sx(d,g),b=typeof m>"u"||typeof y>"u"||m===null||y===null,_=u&&v>0,C=(m||0)*(y||0);(b||_||v>=C||p.dragging)&&f.push(p)}),f},mS=(t,s)=>{const n=t.map(i=>i.id);return s.filter(i=>n.includes(i.source)||n.includes(i.target))},fS=(t,s,n,i,o,u=.1)=>{const h=s/(t.width*(1+u)),l=n/(t.height*(1+u)),d=Math.min(h,l),f=Vo(d,i,o),p=t.x+t.width/2,m=t.y+t.height/2,y=s/2-p*f,j=n/2-m*f;return{x:y,y:j,zoom:f}},gi=(t,s=0)=>t.transition().duration(s);function S_(t,s,n,i){return(s[n]||[]).reduce((o,u)=>(`${t.id}-${u.id}-${n}`!==i&&o.push({id:u.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+u.x+u.width/2,y:(t.positionAbsolute?.y??0)+u.y+u.height/2}),o),[])}function GO(t,s,n,i,o,u){const{x:h,y:l}=Va(t),f=s.elementsFromPoint(h,l).find(S=>S.classList.contains("react-flow__handle"));if(f){const S=f.getAttribute("data-nodeid");if(S){const w=Yx(void 0,f),g=f.getAttribute("data-handleid"),v=u({nodeId:S,id:g,type:w});if(v){const b=o.find(_=>_.nodeId===S&&_.type===w&&_.id===g);return{handle:{id:g,type:w,nodeId:S,x:b?.x||n.x,y:b?.y||n.y},validHandleResult:v}}}}let p=[],m=1/0;if(o.forEach(S=>{const w=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(w<=i){const g=u(S);w<=m&&(w<m?p=[{handle:S,validHandleResult:g}]:w===m&&p.push({handle:S,validHandleResult:g}),m=w)}}),!p.length)return{handle:null,validHandleResult:pS()};if(p.length===1)return p[0];const y=p.some(({validHandleResult:S})=>S.isValid),j=p.some(({handle:S})=>S.type==="target");return p.find(({handle:S,validHandleResult:w})=>j?S.type==="target":y?w.isValid:!0)||p[0]}const YO={source:null,target:null,sourceHandle:null,targetHandle:null},pS=()=>({handleDomNode:null,isValid:!1,connection:YO,endHandle:null});function xS(t,s,n,i,o,u,h){const l=o==="target",d=h.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...pS(),handleDomNode:d};if(d){const p=Yx(void 0,d),m=d.getAttribute("data-nodeid"),y=d.getAttribute("data-handleid"),j=d.classList.contains("connectable"),S=d.classList.contains("connectableend"),w={source:l?m:n,sourceHandle:l?y:i,target:l?n:m,targetHandle:l?i:y};f.connection=w,j&&S&&(s===Ai.Strict?l&&p==="source"||!l&&p==="target":m!==n||y!==i)&&(f.endHandle={nodeId:m,handleId:y,type:p},f.isValid=u(w))}return f}function XO({nodes:t,nodeId:s,handleId:n,handleType:i}){return t.reduce((o,u)=>{if(u[Vt]){const{handleBounds:h}=u[Vt];let l=[],d=[];h&&(l=S_(u,h,"source",`${s}-${n}-${i}`),d=S_(u,h,"target",`${s}-${n}-${i}`)),o.push(...l,...d)}return o},[])}function Yx(t,s){return t||(s?.classList.contains("target")?"target":s?.classList.contains("source")?"source":null)}function fp(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function KO(t,s){let n=null;return s?n="valid":t&&!s&&(n="invalid"),n}function gS({event:t,handleId:s,nodeId:n,onConnect:i,isTarget:o,getState:u,setState:h,isValidConnection:l,edgeUpdaterType:d,onReconnectEnd:f}){const p=tS(t.target),{connectionMode:m,domNode:y,autoPanOnConnect:j,connectionRadius:S,onConnectStart:w,panBy:g,getNodes:v,cancelConnection:b}=u();let _=0,C;const{x:A,y:D}=Va(t),R=p?.elementFromPoint(A,D),k=Yx(d,R),M=y?.getBoundingClientRect();if(!M||!k)return;let I,q=Va(t,M),W=!1,G=null,$=!1,F=null;const B=XO({nodes:v(),nodeId:n,handleId:s,handleType:k}),V=()=>{if(!j)return;const[U,L]=eS(q,M);g({x:U,y:L}),_=requestAnimationFrame(V)};h({connectionPosition:q,connectionStatus:null,connectionNodeId:n,connectionHandleId:s,connectionHandleType:k,connectionStartHandle:{nodeId:n,handleId:s,type:k},connectionEndHandle:null}),w?.(t,{nodeId:n,handleId:s,handleType:k});function O(U){const{transform:L}=u();q=Va(U,M);const{handle:Y,validHandleResult:J}=GO(U,p,ax(q,L,!1,[1,1]),S,B,K=>xS(K,m,n,s,o?"target":"source",l,p));if(C=Y,W||(V(),W=!0),F=J.handleDomNode,G=J.connection,$=J.isValid,h({connectionPosition:C&&$?uS({x:C.x,y:C.y},L):q,connectionStatus:KO(!!C,$),connectionEndHandle:J.endHandle}),!C&&!$&&!F)return fp(I);G.source!==G.target&&F&&(fp(I),I=F,F.classList.add("connecting","react-flow__handle-connecting"),F.classList.toggle("valid",$),F.classList.toggle("react-flow__handle-valid",$))}function H(U){(C||F)&&G&&$&&i?.(G),u().onConnectEnd?.(U),d&&f?.(U),fp(I),b(),cancelAnimationFrame(_),W=!1,$=!1,G=null,F=null,p.removeEventListener("mousemove",O),p.removeEventListener("mouseup",H),p.removeEventListener("touchmove",O),p.removeEventListener("touchend",H)}p.addEventListener("mousemove",O),p.addEventListener("mouseup",H),p.addEventListener("touchmove",O),p.addEventListener("touchend",H)}const N_=()=>!0,QO=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),ZO=(t,s,n)=>i=>{const{connectionStartHandle:o,connectionEndHandle:u,connectionClickStartHandle:h}=i;return{connecting:o?.nodeId===t&&o?.handleId===s&&o?.type===n||u?.nodeId===t&&u?.handleId===s&&u?.type===n,clickConnecting:h?.nodeId===t&&h?.handleId===s&&h?.type===n}},vS=E.forwardRef(({type:t="source",position:s=Me.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:u=!0,id:h,onConnect:l,children:d,className:f,onMouseDown:p,onTouchStart:m,...y},j)=>{const S=h||null,w=t==="target",g=Ns(),v=UO(),{connectOnClick:b,noPanClassName:_}=Et(QO,Ss),{connecting:C,clickConnecting:A}=Et(ZO(v,S,t),Ss);v||g.getState().onError?.("010",Zn.error010());const D=M=>{const{defaultEdgeOptions:I,onConnect:q,hasDefaultEdges:W}=g.getState(),G={...I,...M};if(W){const{edges:$,setEdges:F}=g.getState();F(dS(G,$))}q?.(G),l?.(G)},R=M=>{if(!v)return;const I=aS(M);o&&(I&&M.button===0||!I)&&gS({event:M,handleId:S,nodeId:v,onConnect:D,isTarget:w,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||N_}),I?p?.(M):m?.(M)},k=M=>{const{onClickConnectStart:I,onClickConnectEnd:q,connectionClickStartHandle:W,connectionMode:G,isValidConnection:$}=g.getState();if(!v||!W&&!o)return;if(!W){I?.(M,{nodeId:v,handleId:S,handleType:t}),g.setState({connectionClickStartHandle:{nodeId:v,type:t,handleId:S}});return}const F=tS(M.target),B=n||$||N_,{connection:V,isValid:O}=xS({nodeId:v,id:S,type:t},G,W.nodeId,W.handleId||null,W.type,B,F);O&&D(V),q?.(M),g.setState({connectionClickStartHandle:null})};return ae.createElement("div",{"data-handleid":S,"data-nodeid":v,"data-handlepos":s,"data-id":`${v}-${S}-${t}`,className:Gs(["react-flow__handle",`react-flow__handle-${s}`,"nodrag",_,f,{source:!w,target:w,connectable:i,connectablestart:o,connectableend:u,connecting:A,connectionindicator:i&&(o&&!C||u&&C)}]),onMouseDown:R,onTouchStart:R,onClick:b?k:void 0,ref:j,...y},d)});vS.displayName="Handle";var Dr=E.memo(vS);const yS=({data:t,isConnectable:s,targetPosition:n=Me.Top,sourcePosition:i=Me.Bottom})=>ae.createElement(ae.Fragment,null,ae.createElement(Dr,{type:"target",position:n,isConnectable:s}),t?.label,ae.createElement(Dr,{type:"source",position:i,isConnectable:s}));yS.displayName="DefaultNode";var ix=E.memo(yS);const bS=({data:t,isConnectable:s,sourcePosition:n=Me.Bottom})=>ae.createElement(ae.Fragment,null,t?.label,ae.createElement(Dr,{type:"source",position:n,isConnectable:s}));bS.displayName="InputNode";var _S=E.memo(bS);const jS=({data:t,isConnectable:s,targetPosition:n=Me.Top})=>ae.createElement(ae.Fragment,null,ae.createElement(Dr,{type:"target",position:n,isConnectable:s}),t?.label);jS.displayName="OutputNode";var wS=E.memo(jS);const Xx=()=>null;Xx.displayName="GroupNode";const JO=t=>({selectedNodes:t.getNodes().filter(s=>s.selected),selectedEdges:t.edges.filter(s=>s.selected).map(s=>({...s}))}),cu=t=>t.id;function e6(t,s){return Ss(t.selectedNodes.map(cu),s.selectedNodes.map(cu))&&Ss(t.selectedEdges.map(cu),s.selectedEdges.map(cu))}const SS=E.memo(({onSelectionChange:t})=>{const s=Ns(),{selectedNodes:n,selectedEdges:i}=Et(JO,e6);return E.useEffect(()=>{const o={nodes:n,edges:i};t?.(o),s.getState().onSelectionChange.forEach(u=>u(o))},[n,i,t]),null});SS.displayName="SelectionListener";const t6=t=>!!t.onSelectionChange;function s6({onSelectionChange:t}){const s=Et(t6);return t||s?ae.createElement(SS,{onSelectionChange:t}):null}const r6=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function po(t,s){E.useEffect(()=>{typeof t<"u"&&s(t)},[t])}function nt(t,s,n){E.useEffect(()=>{typeof s<"u"&&n({[t]:s})},[s])}const n6=({nodes:t,edges:s,defaultNodes:n,defaultEdges:i,onConnect:o,onConnectStart:u,onConnectEnd:h,onClickConnectStart:l,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:p,nodesFocusable:m,edgesFocusable:y,edgesUpdatable:j,elevateNodesOnSelect:S,minZoom:w,maxZoom:g,nodeExtent:v,onNodesChange:b,onEdgesChange:_,elementsSelectable:C,connectionMode:A,snapGrid:D,snapToGrid:R,translateExtent:k,connectOnClick:M,defaultEdgeOptions:I,fitView:q,fitViewOptions:W,onNodesDelete:G,onEdgesDelete:$,onNodeDrag:F,onNodeDragStart:B,onNodeDragStop:V,onSelectionDrag:O,onSelectionDragStart:H,onSelectionDragStop:U,noPanClassName:L,nodeOrigin:Y,rfId:J,autoPanOnConnect:K,autoPanOnNodeDrag:Z,onError:oe,connectionRadius:P,isValidConnection:Q,nodeDragThreshold:ee})=>{const{setNodes:te,setEdges:ye,setDefaultNodesAndEdges:me,setMinZoom:Ce,setMaxZoom:Ue,setTranslateExtent:Ge,setNodeExtent:pt,reset:Ne}=Et(r6,Ss),ke=Ns();return E.useEffect(()=>{const ht=i?.map(us=>({...us,...I}));return me(n,ht),()=>{Ne()}},[]),nt("defaultEdgeOptions",I,ke.setState),nt("connectionMode",A,ke.setState),nt("onConnect",o,ke.setState),nt("onConnectStart",u,ke.setState),nt("onConnectEnd",h,ke.setState),nt("onClickConnectStart",l,ke.setState),nt("onClickConnectEnd",d,ke.setState),nt("nodesDraggable",f,ke.setState),nt("nodesConnectable",p,ke.setState),nt("nodesFocusable",m,ke.setState),nt("edgesFocusable",y,ke.setState),nt("edgesUpdatable",j,ke.setState),nt("elementsSelectable",C,ke.setState),nt("elevateNodesOnSelect",S,ke.setState),nt("snapToGrid",R,ke.setState),nt("snapGrid",D,ke.setState),nt("onNodesChange",b,ke.setState),nt("onEdgesChange",_,ke.setState),nt("connectOnClick",M,ke.setState),nt("fitViewOnInit",q,ke.setState),nt("fitViewOnInitOptions",W,ke.setState),nt("onNodesDelete",G,ke.setState),nt("onEdgesDelete",$,ke.setState),nt("onNodeDrag",F,ke.setState),nt("onNodeDragStart",B,ke.setState),nt("onNodeDragStop",V,ke.setState),nt("onSelectionDrag",O,ke.setState),nt("onSelectionDragStart",H,ke.setState),nt("onSelectionDragStop",U,ke.setState),nt("noPanClassName",L,ke.setState),nt("nodeOrigin",Y,ke.setState),nt("rfId",J,ke.setState),nt("autoPanOnConnect",K,ke.setState),nt("autoPanOnNodeDrag",Z,ke.setState),nt("onError",oe,ke.setState),nt("connectionRadius",P,ke.setState),nt("isValidConnection",Q,ke.setState),nt("nodeDragThreshold",ee,ke.setState),po(t,te),po(s,ye),po(w,Ce),po(g,Ue),po(k,Ge),po(v,pt),null},C_={display:"none"},a6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},NS="react-flow__node-desc",CS="react-flow__edge-desc",i6="react-flow__aria-live",o6=t=>t.ariaLiveMessage;function l6({rfId:t}){const s=Et(o6);return ae.createElement("div",{id:`${i6}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:a6},s)}function c6({rfId:t,disableKeyboardA11y:s}){return ae.createElement(ae.Fragment,null,ae.createElement("div",{id:`${NS}-${t}`,style:C_},"Press enter or space to select a node.",!s&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ae.createElement("div",{id:`${CS}-${t}`,style:C_},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!s&&ae.createElement(l6,{rfId:t}))}var Sc=(t=null,s={actInsideInputWithModifier:!0})=>{const[n,i]=E.useState(!1),o=E.useRef(!1),u=E.useRef(new Set([])),[h,l]=E.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.split("+")),p=f.reduce((m,y)=>m.concat(...y),[]);return[f,p]}return[[],[]]},[t]);return E.useEffect(()=>{const d=typeof document<"u"?document:null,f=s?.target||d;if(t!==null){const p=j=>{if(o.current=j.ctrlKey||j.metaKey||j.shiftKey,(!o.current||o.current&&!s.actInsideInputWithModifier)&&rx(j))return!1;const w=k_(j.code,l);u.current.add(j[w]),E_(h,u.current,!1)&&(j.preventDefault(),i(!0))},m=j=>{if((!o.current||o.current&&!s.actInsideInputWithModifier)&&rx(j))return!1;const w=k_(j.code,l);E_(h,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(j[w]),j.key==="Meta"&&u.current.clear(),o.current=!1},y=()=>{u.current.clear(),i(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",m),window.addEventListener("blur",y),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",m),window.removeEventListener("blur",y)}}},[t,i]),n};function E_(t,s,n){return t.filter(i=>n||i.length===s.size).some(i=>i.every(o=>s.has(o)))}function k_(t,s){return s.includes(t)?"code":"key"}function ES(t,s,n,i){const o=t.parentNode||t.parentId;if(!o)return n;const u=s.get(o),h=Si(u,i);return ES(u,s,{x:(n.x??0)+h.x,y:(n.y??0)+h.y,z:(u[Vt]?.z??0)>(n.z??0)?u[Vt]?.z??0:n.z??0},i)}function kS(t,s,n){t.forEach(i=>{const o=i.parentNode||i.parentId;if(o&&!t.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[i.id]){const{x:u,y:h,z:l}=ES(i,t,{...i.position,z:i[Vt]?.z??0},s);i.positionAbsolute={x:u,y:h},i[Vt].z=l,n?.[i.id]&&(i[Vt].isParent=!0)}})}function pp(t,s,n,i){const o=new Map,u={},h=i?1e3:0;return t.forEach(l=>{const d=(Or(l.zIndex)?l.zIndex:0)+(l.selected?h:0),f=s.get(l.id),p={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},m=l.parentNode||l.parentId;m&&(u[m]=!0);const y=f?.type&&f?.type!==l.type;Object.defineProperty(p,Vt,{enumerable:!1,value:{handleBounds:y?void 0:f?.[Vt]?.handleBounds,z:d}}),o.set(l.id,p)}),kS(o,n,u),o}function AS(t,s={}){const{getNodes:n,width:i,height:o,minZoom:u,maxZoom:h,d3Zoom:l,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:p,nodeOrigin:m}=t(),y=s.initial&&!f&&p;if(l&&d&&(y||!s.initial)){const S=n().filter(g=>{const v=s.includeHiddenNodes?g.width&&g.height:!g.hidden;return s.nodes?.length?v&&s.nodes.some(b=>b.id===g.id):v}),w=S.every(g=>g.width&&g.height);if(S.length>0&&w){const g=ph(S,m),{x:v,y:b,zoom:_}=fS(g,i,o,s.minZoom??u,s.maxZoom??h,s.padding??.1),C=Yn.translate(v,b).scale(_);return typeof s.duration=="number"&&s.duration>0?l.transform(gi(d,s.duration),C):l.transform(d,C),!0}}return!1}function d6(t,s){return t.forEach(n=>{const i=s.get(n.id);i&&s.set(i.id,{...i,[Vt]:i[Vt],selected:n.selected})}),new Map(s)}function u6(t,s){return s.map(n=>{const i=t.find(o=>o.id===n.id);return i&&(n.selected=i.selected),n})}function du({changedNodes:t,changedEdges:s,get:n,set:i}){const{nodeInternals:o,edges:u,onNodesChange:h,onEdgesChange:l,hasDefaultNodes:d,hasDefaultEdges:f}=n();t?.length&&(d&&i({nodeInternals:d6(t,o)}),h?.(t)),s?.length&&(f&&i({edges:u6(s,u)}),l?.(s))}const xo=()=>{},h6={zoomIn:xo,zoomOut:xo,zoomTo:xo,getZoom:()=>1,setViewport:xo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:xo,fitBounds:xo,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},m6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),f6=()=>{const t=Ns(),{d3Zoom:s,d3Selection:n}=Et(m6,Ss);return E.useMemo(()=>n&&s?{zoomIn:o=>s.scaleBy(gi(n,o?.duration),1.2),zoomOut:o=>s.scaleBy(gi(n,o?.duration),1/1.2),zoomTo:(o,u)=>s.scaleTo(gi(n,u?.duration),o),getZoom:()=>t.getState().transform[2],setViewport:(o,u)=>{const[h,l,d]=t.getState().transform,f=Yn.translate(o.x??h,o.y??l).scale(o.zoom??d);s.transform(gi(n,u?.duration),f)},getViewport:()=>{const[o,u,h]=t.getState().transform;return{x:o,y:u,zoom:h}},fitView:o=>AS(t.getState,o),setCenter:(o,u,h)=>{const{width:l,height:d,maxZoom:f}=t.getState(),p=typeof h?.zoom<"u"?h.zoom:f,m=l/2-o*p,y=d/2-u*p,j=Yn.translate(m,y).scale(p);s.transform(gi(n,h?.duration),j)},fitBounds:(o,u)=>{const{width:h,height:l,minZoom:d,maxZoom:f}=t.getState(),{x:p,y:m,zoom:y}=fS(o,h,l,d,f,u?.padding??.1),j=Yn.translate(p,m).scale(y);s.transform(gi(n,u?.duration),j)},project:o=>{const{transform:u,snapToGrid:h,snapGrid:l}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ax(o,u,h,l)},screenToFlowPosition:o=>{const{transform:u,snapToGrid:h,snapGrid:l,domNode:d}=t.getState();if(!d)return o;const{x:f,y:p}=d.getBoundingClientRect(),m={x:o.x-f,y:o.y-p};return ax(m,u,h,l)},flowToScreenPosition:o=>{const{transform:u,domNode:h}=t.getState();if(!h)return o;const{x:l,y:d}=h.getBoundingClientRect(),f=uS(o,u);return{x:f.x+l,y:f.y+d}},viewportInitialized:!0}:h6,[s,n])};function Kx(){const t=f6(),s=Ns(),n=E.useCallback(()=>s.getState().getNodes().map(w=>({...w})),[]),i=E.useCallback(w=>s.getState().nodeInternals.get(w),[]),o=E.useCallback(()=>{const{edges:w=[]}=s.getState();return w.map(g=>({...g}))},[]),u=E.useCallback(w=>{const{edges:g=[]}=s.getState();return g.find(v=>v.id===w)},[]),h=E.useCallback(w=>{const{getNodes:g,setNodes:v,hasDefaultNodes:b,onNodesChange:_}=s.getState(),C=g(),A=typeof w=="function"?w(C):w;if(b)v(A);else if(_){const D=A.length===0?C.map(R=>({type:"remove",id:R.id})):A.map(R=>({item:R,type:"reset"}));_(D)}},[]),l=E.useCallback(w=>{const{edges:g=[],setEdges:v,hasDefaultEdges:b,onEdgesChange:_}=s.getState(),C=typeof w=="function"?w(g):w;if(b)v(C);else if(_){const A=C.length===0?g.map(D=>({type:"remove",id:D.id})):C.map(D=>({item:D,type:"reset"}));_(A)}},[]),d=E.useCallback(w=>{const g=Array.isArray(w)?w:[w],{getNodes:v,setNodes:b,hasDefaultNodes:_,onNodesChange:C}=s.getState();if(_){const D=[...v(),...g];b(D)}else if(C){const A=g.map(D=>({item:D,type:"add"}));C(A)}},[]),f=E.useCallback(w=>{const g=Array.isArray(w)?w:[w],{edges:v=[],setEdges:b,hasDefaultEdges:_,onEdgesChange:C}=s.getState();if(_)b([...v,...g]);else if(C){const A=g.map(D=>({item:D,type:"add"}));C(A)}},[]),p=E.useCallback(()=>{const{getNodes:w,edges:g=[],transform:v}=s.getState(),[b,_,C]=v;return{nodes:w().map(A=>({...A})),edges:g.map(A=>({...A})),viewport:{x:b,y:_,zoom:C}}},[]),m=E.useCallback(({nodes:w,edges:g})=>{const{nodeInternals:v,getNodes:b,edges:_,hasDefaultNodes:C,hasDefaultEdges:A,onNodesDelete:D,onEdgesDelete:R,onNodesChange:k,onEdgesChange:M}=s.getState(),I=(w||[]).map(F=>F.id),q=(g||[]).map(F=>F.id),W=b().reduce((F,B)=>{const V=B.parentNode||B.parentId,O=!I.includes(B.id)&&V&&F.find(U=>U.id===V);return(typeof B.deletable=="boolean"?B.deletable:!0)&&(I.includes(B.id)||O)&&F.push(B),F},[]),G=_.filter(F=>typeof F.deletable=="boolean"?F.deletable:!0),$=G.filter(F=>q.includes(F.id));if(W||$){const F=mS(W,G),B=[...$,...F],V=B.reduce((O,H)=>(O.includes(H.id)||O.push(H.id),O),[]);if((A||C)&&(A&&s.setState({edges:_.filter(O=>!V.includes(O.id))}),C&&(W.forEach(O=>{v.delete(O.id)}),s.setState({nodeInternals:new Map(v)}))),V.length>0&&(R?.(B),M&&M(V.map(O=>({id:O,type:"remove"})))),W.length>0&&(D?.(W),k)){const O=W.map(H=>({id:H.id,type:"remove"}));k(O)}}},[]),y=E.useCallback(w=>{const g=PO(w),v=g?null:s.getState().nodeInternals.get(w.id);return!g&&!v?[null,null,g]:[g?w:y_(v),v,g]},[]),j=E.useCallback((w,g=!0,v)=>{const[b,_,C]=y(w);return b?(v||s.getState().getNodes()).filter(A=>{if(!C&&(A.id===_.id||!A.positionAbsolute))return!1;const D=y_(A),R=sx(D,b);return g&&R>0||R>=b.width*b.height}):[]},[]),S=E.useCallback((w,g,v=!0)=>{const[b]=y(w);if(!b)return!1;const _=sx(b,g);return v&&_>0||_>=b.width*b.height},[]);return E.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:o,getEdge:u,setNodes:h,setEdges:l,addNodes:d,addEdges:f,toObject:p,deleteElements:m,getIntersectingNodes:j,isNodeIntersecting:S}),[t,n,i,o,u,h,l,d,f,p,m,j,S])}const p6={actInsideInputWithModifier:!1};var x6=({deleteKeyCode:t,multiSelectionKeyCode:s})=>{const n=Ns(),{deleteElements:i}=Kx(),o=Sc(t,p6),u=Sc(s);E.useEffect(()=>{if(o){const{edges:h,getNodes:l}=n.getState(),d=l().filter(p=>p.selected),f=h.filter(p=>p.selected);i({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[o]),E.useEffect(()=>{n.setState({multiSelectionActive:u})},[u])};function g6(t){const s=Ns();E.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const o=Fx(t.current);(o.height===0||o.width===0)&&s.getState().onError?.("004",Zn.error004()),s.setState({width:o.width||500,height:o.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const Qx={position:"absolute",width:"100%",height:"100%",top:0,left:0},v6=(t,s)=>t.x!==s.x||t.y!==s.y||t.zoom!==s.k,uu=t=>({x:t.x,y:t.y,zoom:t.k}),go=(t,s)=>t.target.closest(`.${s}`),A_=(t,s)=>s===2&&Array.isArray(t)&&t.includes(2),T_=t=>{const s=t.ctrlKey&&Yu()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*s},y6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),b6=({onMove:t,onMoveStart:s,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:o=!0,zoomOnPinch:u=!0,panOnScroll:h=!1,panOnScrollSpeed:l=.5,panOnScrollMode:d=bi.Free,zoomOnDoubleClick:f=!0,elementsSelectable:p,panOnDrag:m=!0,defaultViewport:y,translateExtent:j,minZoom:S,maxZoom:w,zoomActivationKeyCode:g,preventScrolling:v=!0,children:b,noWheelClassName:_,noPanClassName:C})=>{const A=E.useRef(),D=Ns(),R=E.useRef(!1),k=E.useRef(!1),M=E.useRef(null),I=E.useRef({x:0,y:0,zoom:0}),{d3Zoom:q,d3Selection:W,d3ZoomHandler:G,userSelectionActive:$}=Et(y6,Ss),F=Sc(g),B=E.useRef(0),V=E.useRef(!1),O=E.useRef();return g6(M),E.useEffect(()=>{if(M.current){const H=M.current.getBoundingClientRect(),U=Kw().scaleExtent([S,w]).translateExtent(j),L=Mr(M.current).call(U),Y=Yn.translate(y.x,y.y).scale(Vo(y.zoom,S,w)),J=[[0,0],[H.width,H.height]],K=U.constrain()(Y,J,j);U.transform(L,K),U.wheelDelta(T_),D.setState({d3Zoom:U,d3Selection:L,d3ZoomHandler:L.on("wheel.zoom"),transform:[K.x,K.y,K.k],domNode:M.current.closest(".react-flow")})}},[]),E.useEffect(()=>{W&&q&&(h&&!F&&!$?W.on("wheel.zoom",H=>{if(go(H,_))return!1;H.preventDefault(),H.stopImmediatePropagation();const U=W.property("__zoom").k||1;if(H.ctrlKey&&u){const Q=Ur(H),ee=T_(H),te=U*Math.pow(2,ee);q.scaleTo(W,te,Q,H);return}const L=H.deltaMode===1?20:1;let Y=d===bi.Vertical?0:H.deltaX*L,J=d===bi.Horizontal?0:H.deltaY*L;!Yu()&&H.shiftKey&&d!==bi.Vertical&&(Y=H.deltaY*L,J=0),q.translateBy(W,-(Y/U)*l,-(J/U)*l,{internal:!0});const K=uu(W.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:oe,onViewportChangeEnd:P}=D.getState();clearTimeout(O.current),V.current||(V.current=!0,s?.(H,K),Z?.(K)),V.current&&(t?.(H,K),oe?.(K),O.current=setTimeout(()=>{n?.(H,K),P?.(K),V.current=!1},150))},{passive:!1}):typeof G<"u"&&W.on("wheel.zoom",function(H,U){if(!v&&H.type==="wheel"&&!H.ctrlKey||go(H,_))return null;H.preventDefault(),G.call(this,H,U)},{passive:!1}))},[$,h,d,W,q,G,F,u,v,_,s,t,n]),E.useEffect(()=>{q&&q.on("start",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;B.current=H.sourceEvent?.button;const{onViewportChangeStart:U}=D.getState(),L=uu(H.transform);R.current=!0,I.current=L,H.sourceEvent?.type==="mousedown"&&D.setState({paneDragging:!0}),U?.(L),s?.(H.sourceEvent,L)})},[q,s]),E.useEffect(()=>{q&&($&&!R.current?q.on("zoom",null):$||q.on("zoom",H=>{const{onViewportChange:U}=D.getState();if(D.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),k.current=!!(i&&A_(m,B.current??0)),(t||U)&&!H.sourceEvent?.internal){const L=uu(H.transform);U?.(L),t?.(H.sourceEvent,L)}}))},[$,q,t,m,i]),E.useEffect(()=>{q&&q.on("end",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=D.getState();if(R.current=!1,D.setState({paneDragging:!1}),i&&A_(m,B.current??0)&&!k.current&&i(H.sourceEvent),k.current=!1,(n||U)&&v6(I.current,H.transform)){const L=uu(H.transform);I.current=L,clearTimeout(A.current),A.current=setTimeout(()=>{U?.(L),n?.(H.sourceEvent,L)},h?150:0)}})},[q,h,m,n,i]),E.useEffect(()=>{q&&q.filter(H=>{const U=F||o,L=u&&H.ctrlKey;if((m===!0||Array.isArray(m)&&m.includes(1))&&H.button===1&&H.type==="mousedown"&&(go(H,"react-flow__node")||go(H,"react-flow__edge")))return!0;if(!m&&!U&&!h&&!f&&!u||$||!f&&H.type==="dblclick"||go(H,_)&&H.type==="wheel"||go(H,C)&&(H.type!=="wheel"||h&&H.type==="wheel"&&!F)||!u&&H.ctrlKey&&H.type==="wheel"||!U&&!h&&!L&&H.type==="wheel"||!m&&(H.type==="mousedown"||H.type==="touchstart")||Array.isArray(m)&&!m.includes(H.button)&&H.type==="mousedown")return!1;const Y=Array.isArray(m)&&m.includes(H.button)||!H.button||H.button<=1;return(!H.ctrlKey||H.type==="wheel")&&Y})},[$,q,o,u,h,f,m,p,F]),ae.createElement("div",{className:"react-flow__renderer",ref:M,style:Qx},b)},_6=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function j6(){const{userSelectionActive:t,userSelectionRect:s}=Et(_6,Ss);return t&&s?ae.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}}):null}function R_(t,s){const n=s.parentNode||s.parentId,i=t.find(o=>o.id===n);if(i){const o=s.position.x+s.width-i.width,u=s.position.y+s.height-i.height;if(o>0||u>0||s.position.x<0||s.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,o>0&&(i.style.width+=o),u>0&&(i.style.height+=u),s.position.x<0){const h=Math.abs(s.position.x);i.position.x=i.position.x-h,i.style.width+=h,s.position.x=0}if(s.position.y<0){const h=Math.abs(s.position.y);i.position.y=i.position.y-h,i.style.height+=h,s.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function TS(t,s){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return s.reduce((i,o)=>{const u=t.filter(l=>l.id===o.id);if(u.length===0)return i.push(o),i;const h={...o};for(const l of u)if(l)switch(l.type){case"select":{h.selected=l.selected;break}case"position":{typeof l.position<"u"&&(h.position=l.position),typeof l.positionAbsolute<"u"&&(h.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(h.dragging=l.dragging),h.expandParent&&R_(i,h);break}case"dimensions":{typeof l.dimensions<"u"&&(h.width=l.dimensions.width,h.height=l.dimensions.height),typeof l.updateStyle<"u"&&(h.style={...h.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(h.resizing=l.resizing),h.expandParent&&R_(i,h);break}case"remove":return i}return i.push(h),i},n)}function RS(t,s){return TS(t,s)}function w6(t,s){return TS(t,s)}const za=(t,s)=>({id:t,type:"select",selected:s});function Ao(t,s){return t.reduce((n,i)=>{const o=s.includes(i.id);return!i.selected&&o?(i.selected=!0,n.push(za(i.id,!0))):i.selected&&!o&&(i.selected=!1,n.push(za(i.id,!1))),n},[])}const xp=(t,s)=>n=>{n.target===s.current&&t?.(n)},S6=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),DS=E.memo(({isSelecting:t,selectionMode:s=wc.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:o,onPaneClick:u,onPaneContextMenu:h,onPaneScroll:l,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:p,children:m})=>{const y=E.useRef(null),j=Ns(),S=E.useRef(0),w=E.useRef(0),g=E.useRef(),{userSelectionActive:v,elementsSelectable:b,dragging:_}=Et(S6,Ss),C=()=>{j.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,w.current=0},A=G=>{u?.(G),j.getState().resetSelectedElements(),j.setState({nodesSelectionActive:!1})},D=G=>{if(Array.isArray(n)&&n?.includes(2)){G.preventDefault();return}h?.(G)},R=l?G=>l(G):void 0,k=G=>{const{resetSelectedElements:$,domNode:F}=j.getState();if(g.current=F?.getBoundingClientRect(),!b||!t||G.button!==0||G.target!==y.current||!g.current)return;const{x:B,y:V}=Va(G,g.current);$(),j.setState({userSelectionRect:{width:0,height:0,startX:B,startY:V,x:B,y:V}}),i?.(G)},M=G=>{const{userSelectionRect:$,nodeInternals:F,edges:B,transform:V,onNodesChange:O,onEdgesChange:H,nodeOrigin:U,getNodes:L}=j.getState();if(!t||!g.current||!$)return;j.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Y=Va(G,g.current),J=$.startX??0,K=$.startY??0,Z={...$,x:Y.x<J?Y.x:J,y:Y.y<K?Y.y:K,width:Math.abs(Y.x-J),height:Math.abs(Y.y-K)},oe=L(),P=hS(F,Z,V,s===wc.Partial,!0,U),Q=mS(P,B).map(te=>te.id),ee=P.map(te=>te.id);if(S.current!==ee.length){S.current=ee.length;const te=Ao(oe,ee);te.length&&O?.(te)}if(w.current!==Q.length){w.current=Q.length;const te=Ao(B,Q);te.length&&H?.(te)}j.setState({userSelectionRect:Z})},I=G=>{if(G.button!==0)return;const{userSelectionRect:$}=j.getState();!v&&$&&G.target===y.current&&A?.(G),j.setState({nodesSelectionActive:S.current>0}),C(),o?.(G)},q=G=>{v&&(j.setState({nodesSelectionActive:S.current>0}),o?.(G)),C()},W=b&&(t||v);return ae.createElement("div",{className:Gs(["react-flow__pane",{dragging:_,selection:t}]),onClick:W?void 0:xp(A,y),onContextMenu:xp(D,y),onWheel:xp(R,y),onMouseEnter:W?void 0:d,onMouseDown:W?k:void 0,onMouseMove:W?M:f,onMouseUp:W?I:void 0,onMouseLeave:W?q:p,ref:y,style:Qx},m,ae.createElement(j6,null))});DS.displayName="Pane";function MS(t,s){const n=t.parentNode||t.parentId;if(!n)return!1;const i=s.get(n);return i?i.selected?!0:MS(i,s):!1}function D_(t,s,n){let i=t;do{if(i?.matches(s))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function N6(t,s,n,i){return Array.from(t.values()).filter(o=>(o.selected||o.id===i)&&(!o.parentNode||o.parentId||!MS(o,t))&&(o.draggable||s&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(o.positionAbsolute?.x??0),y:n.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function C6(t,s){return!s||s==="parent"?s:[s[0],[s[1][0]-(t.width||0),s[1][1]-(t.height||0)]]}function OS(t,s,n,i,o=[0,0],u){const h=C6(t,t.extent||i);let l=h;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const m=n.get(d),{x:y,y:j}=Si(m,o).positionAbsolute;l=m&&Or(y)&&Or(j)&&Or(m.width)&&Or(m.height)?[[y+t.width*o[0],j+t.height*o[1]],[y+m.width-t.width+t.width*o[0],j+m.height-t.height+t.height*o[1]]]:l}else u?.("005",Zn.error005()),l=h;else if(t.extent&&d&&t.extent!=="parent"){const m=n.get(d),{x:y,y:j}=Si(m,o).positionAbsolute;l=[[t.extent[0][0]+y,t.extent[0][1]+j],[t.extent[1][0]+y,t.extent[1][1]+j]]}let f={x:0,y:0};if(d){const m=n.get(d);f=Si(m,o).positionAbsolute}const p=l&&l!=="parent"?Ux(s,l):s;return{position:{x:p.x-f.x,y:p.y-f.y},positionAbsolute:p}}function gp({nodeId:t,dragItems:s,nodeInternals:n}){const i=s.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[t?i.find(o=>o.id===t):i[0],i]}const M_=(t,s,n,i)=>{const o=s.querySelectorAll(t);if(!o||!o.length)return null;const u=Array.from(o),h=s.getBoundingClientRect(),l={x:h.width*i[0],y:h.height*i[1]};return u.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-h.left-l.x)/n,y:(f.top-h.top-l.y)/n,...Fx(d)}})};function sc(t,s,n){return n===void 0?n:i=>{const o=s().nodeInternals.get(t);o&&n(i,{...o})}}function ox({id:t,store:s,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:u,multiSelectionActive:h,nodeInternals:l,onError:d}=s.getState(),f=l.get(t);if(!f){d?.("012",Zn.error012(t));return}s.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&h)&&(u({nodes:[f],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([t])}function E6(){const t=Ns();return E.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:o,snapToGrid:u}=t.getState(),h=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,d={x:(h-i[0])/i[2],y:(l-i[1])/i[2]};return{xSnapped:u?o[0]*Math.round(d.x/o[0]):d.x,ySnapped:u?o[1]*Math.round(d.y/o[1]):d.y,...d}},[])}function vp(t){return(s,n,i)=>t?.(s,i)}function PS({nodeRef:t,disabled:s=!1,noDragClassName:n,handleSelector:i,nodeId:o,isSelectable:u,selectNodesOnDrag:h}){const l=Ns(),[d,f]=E.useState(!1),p=E.useRef([]),m=E.useRef({x:null,y:null}),y=E.useRef(0),j=E.useRef(null),S=E.useRef({x:0,y:0}),w=E.useRef(null),g=E.useRef(!1),v=E.useRef(!1),b=E.useRef(!1),_=E6();return E.useEffect(()=>{if(t?.current){const C=Mr(t.current),A=({x:k,y:M})=>{const{nodeInternals:I,onNodeDrag:q,onSelectionDrag:W,updateNodePositions:G,nodeExtent:$,snapGrid:F,snapToGrid:B,nodeOrigin:V,onError:O}=l.getState();m.current={x:k,y:M};let H=!1,U={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&$){const Y=ph(p.current,V);U=jc(Y)}if(p.current=p.current.map(Y=>{const J={x:k-Y.distance.x,y:M-Y.distance.y};B&&(J.x=F[0]*Math.round(J.x/F[0]),J.y=F[1]*Math.round(J.y/F[1]));const K=[[$[0][0],$[0][1]],[$[1][0],$[1][1]]];p.current.length>1&&$&&!Y.extent&&(K[0][0]=Y.positionAbsolute.x-U.x+$[0][0],K[1][0]=Y.positionAbsolute.x+(Y.width??0)-U.x2+$[1][0],K[0][1]=Y.positionAbsolute.y-U.y+$[0][1],K[1][1]=Y.positionAbsolute.y+(Y.height??0)-U.y2+$[1][1]);const Z=OS(Y,J,I,K,V,O);return H=H||Y.position.x!==Z.position.x||Y.position.y!==Z.position.y,Y.position=Z.position,Y.positionAbsolute=Z.positionAbsolute,Y}),!H)return;G(p.current,!0,!0),f(!0);const L=o?q:vp(W);if(L&&w.current){const[Y,J]=gp({nodeId:o,dragItems:p.current,nodeInternals:I});L(w.current,Y,J)}},D=()=>{if(!j.current)return;const[k,M]=eS(S.current,j.current);if(k!==0||M!==0){const{transform:I,panBy:q}=l.getState();m.current.x=(m.current.x??0)-k/I[2],m.current.y=(m.current.y??0)-M/I[2],q({x:k,y:M})&&A(m.current)}y.current=requestAnimationFrame(D)},R=k=>{const{nodeInternals:M,multiSelectionActive:I,nodesDraggable:q,unselectNodesAndEdges:W,onNodeDragStart:G,onSelectionDragStart:$}=l.getState();v.current=!0;const F=o?G:vp($);(!h||!u)&&!I&&o&&(M.get(o)?.selected||W()),o&&u&&h&&ox({id:o,store:l,nodeRef:t});const B=_(k);if(m.current=B,p.current=N6(M,q,B,o),F&&p.current){const[V,O]=gp({nodeId:o,dragItems:p.current,nodeInternals:M});F(k.sourceEvent,V,O)}};if(s)C.on(".drag",null);else{const k=$D().on("start",M=>{const{domNode:I,nodeDragThreshold:q}=l.getState();q===0&&R(M),b.current=!1;const W=_(M);m.current=W,j.current=I?.getBoundingClientRect()||null,S.current=Va(M.sourceEvent,j.current)}).on("drag",M=>{const I=_(M),{autoPanOnNodeDrag:q,nodeDragThreshold:W}=l.getState();if(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1&&(b.current=!0),!b.current){if(!g.current&&v.current&&q&&(g.current=!0,D()),!v.current){const G=I.xSnapped-(m?.current?.x??0),$=I.ySnapped-(m?.current?.y??0);Math.sqrt(G*G+$*$)>W&&R(M)}(m.current.x!==I.xSnapped||m.current.y!==I.ySnapped)&&p.current&&v.current&&(w.current=M.sourceEvent,S.current=Va(M.sourceEvent,j.current),A(I))}}).on("end",M=>{if(!(!v.current||b.current)&&(f(!1),g.current=!1,v.current=!1,cancelAnimationFrame(y.current),p.current)){const{updateNodePositions:I,nodeInternals:q,onNodeDragStop:W,onSelectionDragStop:G}=l.getState(),$=o?W:vp(G);if(I(p.current,!1,!1),$){const[F,B]=gp({nodeId:o,dragItems:p.current,nodeInternals:q});$(M.sourceEvent,F,B)}}}).filter(M=>{const I=M.target;return!M.button&&(!n||!D_(I,`.${n}`,t))&&(!i||D_(I,i,t))});return C.call(k),()=>{C.on(".drag",null)}}}},[t,s,n,i,u,l,o,h,_]),d}function LS(){const t=Ns();return E.useCallback(n=>{const{nodeInternals:i,nodeExtent:o,updateNodePositions:u,getNodes:h,snapToGrid:l,snapGrid:d,onError:f,nodesDraggable:p}=t.getState(),m=h().filter(b=>b.selected&&(b.draggable||p&&typeof b.draggable>"u")),y=l?d[0]:5,j=l?d[1]:5,S=n.isShiftPressed?4:1,w=n.x*y*S,g=n.y*j*S,v=m.map(b=>{if(b.positionAbsolute){const _={x:b.positionAbsolute.x+w,y:b.positionAbsolute.y+g};l&&(_.x=d[0]*Math.round(_.x/d[0]),_.y=d[1]*Math.round(_.y/d[1]));const{positionAbsolute:C,position:A}=OS(b,_,i,o,void 0,f);b.position=A,b.positionAbsolute=C}return b});u(v,!0,!1)},[])}const Lo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var rc=t=>{const s=({id:n,type:i,data:o,xPos:u,yPos:h,xPosOrigin:l,yPosOrigin:d,selected:f,onClick:p,onMouseEnter:m,onMouseMove:y,onMouseLeave:j,onContextMenu:S,onDoubleClick:w,style:g,className:v,isDraggable:b,isSelectable:_,isConnectable:C,isFocusable:A,selectNodesOnDrag:D,sourcePosition:R,targetPosition:k,hidden:M,resizeObserver:I,dragHandle:q,zIndex:W,isParent:G,noDragClassName:$,noPanClassName:F,initialized:B,disableKeyboardA11y:V,ariaLabel:O,rfId:H,hasHandleBounds:U})=>{const L=Ns(),Y=E.useRef(null),J=E.useRef(null),K=E.useRef(R),Z=E.useRef(k),oe=E.useRef(i),P=_||b||p||m||y||j,Q=LS(),ee=sc(n,L.getState,m),te=sc(n,L.getState,y),ye=sc(n,L.getState,j),me=sc(n,L.getState,S),Ce=sc(n,L.getState,w),Ue=Ne=>{const{nodeDragThreshold:ke}=L.getState();if(_&&(!D||!b||ke>0)&&ox({id:n,store:L,nodeRef:Y}),p){const ht=L.getState().nodeInternals.get(n);ht&&p(Ne,{...ht})}},Ge=Ne=>{if(!rx(Ne)&&!V)if(nS.includes(Ne.key)&&_){const ke=Ne.key==="Escape";ox({id:n,store:L,unselect:ke,nodeRef:Y})}else b&&f&&Object.prototype.hasOwnProperty.call(Lo,Ne.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${Ne.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~h}`}),Q({x:Lo[Ne.key].x,y:Lo[Ne.key].y,isShiftPressed:Ne.shiftKey}))};E.useEffect(()=>()=>{J.current&&(I?.unobserve(J.current),J.current=null)},[]),E.useEffect(()=>{if(Y.current&&!M){const Ne=Y.current;(!B||!U||J.current!==Ne)&&(J.current&&I?.unobserve(J.current),I?.observe(Ne),J.current=Ne)}},[M,B,U]),E.useEffect(()=>{const Ne=oe.current!==i,ke=K.current!==R,ht=Z.current!==k;Y.current&&(Ne||ke||ht)&&(Ne&&(oe.current=i),ke&&(K.current=R),ht&&(Z.current=k),L.getState().updateNodeDimensions([{id:n,nodeElement:Y.current,forceUpdate:!0}]))},[n,i,R,k]);const pt=PS({nodeRef:Y,disabled:M||!b,noDragClassName:$,handleSelector:q,nodeId:n,isSelectable:_,selectNodesOnDrag:D});return M?null:ae.createElement("div",{className:Gs(["react-flow__node",`react-flow__node-${i}`,{[F]:b},v,{selected:f,selectable:_,parent:G,dragging:pt}]),ref:Y,style:{zIndex:W,transform:`translate(${l}px,${d}px)`,pointerEvents:P?"all":"none",visibility:B?"visible":"hidden",...g},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:te,onMouseLeave:ye,onContextMenu:me,onClick:Ue,onDoubleClick:Ce,onKeyDown:A?Ge:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":V?void 0:`${NS}-${H}`,"aria-label":O},ae.createElement(FO,{value:n},ae.createElement(t,{id:n,data:o,type:i,xPos:u,yPos:h,selected:f,isConnectable:C,sourcePosition:R,targetPosition:k,dragging:pt,dragHandle:q,zIndex:W})))};return s.displayName="NodeWrapper",E.memo(s)};const k6=t=>{const s=t.getNodes().filter(n=>n.selected);return{...ph(s,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function A6({onSelectionContextMenu:t,noPanClassName:s,disableKeyboardA11y:n}){const i=Ns(),{width:o,height:u,x:h,y:l,transformString:d,userSelectionActive:f}=Et(k6,Ss),p=LS(),m=E.useRef(null);if(E.useEffect(()=>{n||m.current?.focus({preventScroll:!0})},[n]),PS({nodeRef:m}),f||!o||!u)return null;const y=t?S=>{const w=i.getState().getNodes().filter(g=>g.selected);t(S,w)}:void 0,j=S=>{Object.prototype.hasOwnProperty.call(Lo,S.key)&&p({x:Lo[S.key].x,y:Lo[S.key].y,isShiftPressed:S.shiftKey})};return ae.createElement("div",{className:Gs(["react-flow__nodesselection","react-flow__container",s]),style:{transform:d}},ae.createElement("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:n?void 0:-1,onKeyDown:n?void 0:j,style:{width:o,height:u,top:l,left:h}}))}var T6=E.memo(A6);const R6=t=>t.nodesSelectionActive,BS=({children:t,onPaneClick:s,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:u,onPaneScroll:h,deleteKeyCode:l,onMove:d,onMoveStart:f,onMoveEnd:p,selectionKeyCode:m,selectionOnDrag:y,selectionMode:j,onSelectionStart:S,onSelectionEnd:w,multiSelectionKeyCode:g,panActivationKeyCode:v,zoomActivationKeyCode:b,elementsSelectable:_,zoomOnScroll:C,zoomOnPinch:A,panOnScroll:D,panOnScrollSpeed:R,panOnScrollMode:k,zoomOnDoubleClick:M,panOnDrag:I,defaultViewport:q,translateExtent:W,minZoom:G,maxZoom:$,preventScrolling:F,onSelectionContextMenu:B,noWheelClassName:V,noPanClassName:O,disableKeyboardA11y:H})=>{const U=Et(R6),L=Sc(m),Y=Sc(v),J=Y||I,K=Y||D,Z=L||y&&J!==!0;return x6({deleteKeyCode:l,multiSelectionKeyCode:g}),ae.createElement(b6,{onMove:d,onMoveStart:f,onMoveEnd:p,onPaneContextMenu:u,elementsSelectable:_,zoomOnScroll:C,zoomOnPinch:A,panOnScroll:K,panOnScrollSpeed:R,panOnScrollMode:k,zoomOnDoubleClick:M,panOnDrag:!L&&J,defaultViewport:q,translateExtent:W,minZoom:G,maxZoom:$,zoomActivationKeyCode:b,preventScrolling:F,noWheelClassName:V,noPanClassName:O},ae.createElement(DS,{onSelectionStart:S,onSelectionEnd:w,onPaneClick:s,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:u,onPaneScroll:h,panOnDrag:J,isSelecting:!!Z,selectionMode:j},t,U&&ae.createElement(T6,{onSelectionContextMenu:B,noPanClassName:O,disableKeyboardA11y:H})))};BS.displayName="FlowRenderer";var D6=E.memo(BS);function M6(t){return Et(E.useCallback(n=>t?hS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function O6(t){const s={input:rc(t.input||_S),default:rc(t.default||ix),output:rc(t.output||wS),group:rc(t.group||Xx)},n={},i=Object.keys(t).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,u)=>(o[u]=rc(t[u]||ix),o),n);return{...s,...i}}const P6=({x:t,y:s,width:n,height:i,origin:o})=>!n||!i?{x:t,y:s}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:s}:{x:t-n*o[0],y:s-i*o[1]},L6=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),IS=t=>{const{nodesDraggable:s,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,updateNodeDimensions:u,onError:h}=Et(L6,Ss),l=M6(t.onlyRenderVisibleElements),d=E.useRef(),f=E.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(m=>{const y=m.map(j=>({id:j.target.getAttribute("data-id"),nodeElement:j.target,forceUpdate:!0}));u(y)});return d.current=p,p},[]);return E.useEffect(()=>()=>{d?.current?.disconnect()},[]),ae.createElement("div",{className:"react-flow__nodes",style:Qx},l.map(p=>{let m=p.type||"default";t.nodeTypes[m]||(h?.("003",Zn.error003(m)),m="default");const y=t.nodeTypes[m]||t.nodeTypes.default,j=!!(p.draggable||s&&typeof p.draggable>"u"),S=!!(p.selectable||o&&typeof p.selectable>"u"),w=!!(p.connectable||n&&typeof p.connectable>"u"),g=!!(p.focusable||i&&typeof p.focusable>"u"),v=t.nodeExtent?Ux(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,b=v?.x??0,_=v?.y??0,C=P6({x:b,y:_,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return ae.createElement(y,{key:p.id,id:p.id,className:p.className,style:p.style,type:m,data:p.data,sourcePosition:p.sourcePosition||Me.Bottom,targetPosition:p.targetPosition||Me.Top,hidden:p.hidden,xPos:b,yPos:_,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:j,isSelectable:S,isConnectable:w,isFocusable:g,resizeObserver:f,dragHandle:p.dragHandle,zIndex:p[Vt]?.z??0,isParent:!!p[Vt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[Vt]?.handleBounds})}))};IS.displayName="NodeRenderer";var B6=E.memo(IS);const I6=(t,s,n)=>n===Me.Left?t-s:n===Me.Right?t+s:t,$6=(t,s,n)=>n===Me.Top?t-s:n===Me.Bottom?t+s:t,O_="react-flow__edgeupdater",P_=({position:t,centerX:s,centerY:n,radius:i=10,onMouseDown:o,onMouseEnter:u,onMouseOut:h,type:l})=>ae.createElement("circle",{onMouseDown:o,onMouseEnter:u,onMouseOut:h,className:Gs([O_,`${O_}-${l}`]),cx:I6(s,i,t),cy:$6(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),H6=()=>!0;var vo=t=>{const s=({id:n,className:i,type:o,data:u,onClick:h,onEdgeDoubleClick:l,selected:d,animated:f,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:j,labelBgPadding:S,labelBgBorderRadius:w,style:g,source:v,target:b,sourceX:_,sourceY:C,targetX:A,targetY:D,sourcePosition:R,targetPosition:k,elementsSelectable:M,hidden:I,sourceHandleId:q,targetHandleId:W,onContextMenu:G,onMouseEnter:$,onMouseMove:F,onMouseLeave:B,reconnectRadius:V,onReconnect:O,onReconnectStart:H,onReconnectEnd:U,markerEnd:L,markerStart:Y,rfId:J,ariaLabel:K,isFocusable:Z,isReconnectable:oe,pathOptions:P,interactionWidth:Q,disableKeyboardA11y:ee})=>{const te=E.useRef(null),[ye,me]=E.useState(!1),[Ce,Ue]=E.useState(!1),Ge=Ns(),pt=E.useMemo(()=>`url('#${nx(Y,J)}')`,[Y,J]),Ne=E.useMemo(()=>`url('#${nx(L,J)}')`,[L,J]);if(I)return null;const ke=At=>{const{edges:Ke,addSelectedEdges:Cs,unselectNodesAndEdges:Ht,multiSelectionActive:gs}=Ge.getState(),Tt=Ke.find(Ir=>Ir.id===n);Tt&&(M&&(Ge.setState({nodesSelectionActive:!1}),Tt.selected&&gs?(Ht({nodes:[],edges:[Tt]}),te.current?.blur()):Cs([n])),h&&h(At,Tt))},ht=tc(n,Ge.getState,l),us=tc(n,Ge.getState,G),Us=tc(n,Ge.getState,$),kt=tc(n,Ge.getState,F),wt=tc(n,Ge.getState,B),xt=(At,Ke)=>{if(At.button!==0)return;const{edges:Cs,isValidConnection:Ht}=Ge.getState(),gs=Ke?b:v,Tt=(Ke?W:q)||null,Ir=Ke?"target":"source",_n=Ht||H6,Ys=Ke,_r=Cs.find(vs=>vs.id===n);Ue(!0),H?.(At,_r,Ir);const tn=vs=>{Ue(!1),U?.(vs,_r,Ir)};gS({event:At,handleId:Tt,nodeId:gs,onConnect:vs=>O?.(_r,vs),isTarget:Ys,getState:Ge.getState,setState:Ge.setState,isValidConnection:_n,edgeUpdaterType:Ir,onReconnectEnd:tn})},qt=At=>xt(At,!0),Gt=At=>xt(At,!1),Ps=()=>me(!0),$t=()=>me(!1),Ls=!M&&!h,Bt=At=>{if(!ee&&nS.includes(At.key)&&M){const{unselectNodesAndEdges:Ke,addSelectedEdges:Cs,edges:Ht}=Ge.getState();At.key==="Escape"?(te.current?.blur(),Ke({edges:[Ht.find(Tt=>Tt.id===n)]})):Cs([n])}};return ae.createElement("g",{className:Gs(["react-flow__edge",`react-flow__edge-${o}`,i,{selected:d,animated:f,inactive:Ls,updating:ye}]),onClick:ke,onDoubleClick:ht,onContextMenu:us,onMouseEnter:Us,onMouseMove:kt,onMouseLeave:wt,onKeyDown:Z?Bt:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":K===null?void 0:K||`Edge from ${v} to ${b}`,"aria-describedby":Z?`${CS}-${J}`:void 0,ref:te},!Ce&&ae.createElement(t,{id:n,source:v,target:b,selected:d,animated:f,label:p,labelStyle:m,labelShowBg:y,labelBgStyle:j,labelBgPadding:S,labelBgBorderRadius:w,data:u,style:g,sourceX:_,sourceY:C,targetX:A,targetY:D,sourcePosition:R,targetPosition:k,sourceHandleId:q,targetHandleId:W,markerStart:pt,markerEnd:Ne,pathOptions:P,interactionWidth:Q}),oe&&ae.createElement(ae.Fragment,null,(oe==="source"||oe===!0)&&ae.createElement(P_,{position:R,centerX:_,centerY:C,radius:V,onMouseDown:qt,onMouseEnter:Ps,onMouseOut:$t,type:"source"}),(oe==="target"||oe===!0)&&ae.createElement(P_,{position:k,centerX:A,centerY:D,radius:V,onMouseDown:Gt,onMouseEnter:Ps,onMouseOut:$t,type:"target"})))};return s.displayName="EdgeWrapper",E.memo(s)};function z6(t){const s={default:vo(t.default||Ku),straight:vo(t.bezier||qx),step:vo(t.step||Vx),smoothstep:vo(t.step||fh),simplebezier:vo(t.simplebezier||Wx)},n={},i=Object.keys(t).filter(o=>!["default","bezier"].includes(o)).reduce((o,u)=>(o[u]=vo(t[u]||Ku),o),n);return{...s,...i}}function L_(t,s,n=null){const i=(n?.x||0)+s.x,o=(n?.y||0)+s.y,u=n?.width||s.width,h=n?.height||s.height;switch(t){case Me.Top:return{x:i+u/2,y:o};case Me.Right:return{x:i+u,y:o+h/2};case Me.Bottom:return{x:i+u/2,y:o+h};case Me.Left:return{x:i,y:o+h/2}}}function B_(t,s){return t?t.length===1||!s?t[0]:s&&t.find(n=>n.id===s)||null:null}const F6=(t,s,n,i,o,u)=>{const h=L_(n,t,s),l=L_(u,i,o);return{sourceX:h.x,sourceY:h.y,targetX:l.x,targetY:l.y}};function U6({sourcePos:t,targetPos:s,sourceWidth:n,sourceHeight:i,targetWidth:o,targetHeight:u,width:h,height:l,transform:d}){const f={x:Math.min(t.x,s.x),y:Math.min(t.y,s.y),x2:Math.max(t.x+n,s.x+o),y2:Math.max(t.y+i,s.y+u)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const p=jc({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:h/d[2],height:l/d[2]}),m=Math.max(0,Math.min(p.x2,f.x2)-Math.max(p.x,f.x)),y=Math.max(0,Math.min(p.y2,f.y2)-Math.max(p.y,f.y));return Math.ceil(m*y)>0}function I_(t){const s=t?.[Vt]?.handleBounds||null,n=s&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},s,!!n]}const W6=[{level:0,isMaxLevel:!0,edges:[]}];function V6(t,s,n=!1){let i=-1;const o=t.reduce((h,l)=>{const d=Or(l.zIndex);let f=d?l.zIndex:0;if(n){const p=s.get(l.target),m=s.get(l.source),y=l.selected||p?.selected||m?.selected,j=Math.max(m?.[Vt]?.z||0,p?.[Vt]?.z||0,1e3);f=(d?l.zIndex:0)+(y?j:0)}return h[f]?h[f].push(l):h[f]=[l],i=f>i?f:i,h},{}),u=Object.entries(o).map(([h,l])=>{const d=+h;return{edges:l,level:d,isMaxLevel:d===i}});return u.length===0?W6:u}function q6(t,s,n){const i=Et(E.useCallback(o=>t?o.edges.filter(u=>{const h=s.get(u.source),l=s.get(u.target);return h?.width&&h?.height&&l?.width&&l?.height&&U6({sourcePos:h.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:h.width,sourceHeight:h.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[t,s]));return V6(i,s,n)}const G6=({color:t="none",strokeWidth:s=1})=>ae.createElement("polyline",{style:{stroke:t,strokeWidth:s},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Y6=({color:t="none",strokeWidth:s=1})=>ae.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:s},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),$_={[Lt.Arrow]:G6,[Lt.ArrowClosed]:Y6};function X6(t){const s=Ns();return E.useMemo(()=>Object.prototype.hasOwnProperty.call($_,t)?$_[t]:(s.getState().onError?.("009",Zn.error009(t)),null),[t])}const K6=({id:t,type:s,color:n,width:i=12.5,height:o=12.5,markerUnits:u="strokeWidth",strokeWidth:h,orient:l="auto-start-reverse"})=>{const d=X6(s);return d?ae.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:l,refX:"0",refY:"0"},ae.createElement(d,{color:n,strokeWidth:h})):null},Q6=({defaultColor:t,rfId:s})=>n=>{const i=[];return n.edges.reduce((o,u)=>([u.markerStart,u.markerEnd].forEach(h=>{if(h&&typeof h=="object"){const l=nx(h,s);i.includes(l)||(o.push({id:l,color:h.color||t,...h}),i.push(l))}}),o),[]).sort((o,u)=>o.id.localeCompare(u.id))},$S=({defaultColor:t,rfId:s})=>{const n=Et(E.useCallback(Q6({defaultColor:t,rfId:s}),[t,s]),(i,o)=>!(i.length!==o.length||i.some((u,h)=>u.id!==o[h].id)));return ae.createElement("defs",null,n.map(i=>ae.createElement(K6,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};$S.displayName="MarkerDefinitions";var Z6=E.memo($S);const J6=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),HS=({defaultMarkerColor:t,onlyRenderVisibleElements:s,elevateEdgesOnSelect:n,rfId:i,edgeTypes:o,noPanClassName:u,onEdgeContextMenu:h,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:p,onEdgeDoubleClick:m,onReconnect:y,onReconnectStart:j,onReconnectEnd:S,reconnectRadius:w,children:g,disableKeyboardA11y:v})=>{const{edgesFocusable:b,edgesUpdatable:_,elementsSelectable:C,width:A,height:D,connectionMode:R,nodeInternals:k,onError:M}=Et(J6,Ss),I=q6(s,k,n);return A?ae.createElement(ae.Fragment,null,I.map(({level:q,edges:W,isMaxLevel:G})=>ae.createElement("svg",{key:q,style:{zIndex:q},width:A,height:D,className:"react-flow__edges react-flow__container"},G&&ae.createElement(Z6,{defaultColor:t,rfId:i}),ae.createElement("g",null,W.map($=>{const[F,B,V]=I_(k.get($.source)),[O,H,U]=I_(k.get($.target));if(!V||!U)return null;let L=$.type||"default";o[L]||(M?.("011",Zn.error011(L)),L="default");const Y=o[L]||o.default,J=R===Ai.Strict?H.target:(H.target??[]).concat(H.source??[]),K=B_(B.source,$.sourceHandle),Z=B_(J,$.targetHandle),oe=K?.position||Me.Bottom,P=Z?.position||Me.Top,Q=!!($.focusable||b&&typeof $.focusable>"u"),ee=$.reconnectable||$.updatable,te=typeof y<"u"&&(ee||_&&typeof ee>"u");if(!K||!Z)return M?.("008",Zn.error008(K,$)),null;const{sourceX:ye,sourceY:me,targetX:Ce,targetY:Ue}=F6(F,K,oe,O,Z,P);return ae.createElement(Y,{key:$.id,id:$.id,className:Gs([$.className,u]),type:L,data:$.data,selected:!!$.selected,animated:!!$.animated,hidden:!!$.hidden,label:$.label,labelStyle:$.labelStyle,labelShowBg:$.labelShowBg,labelBgStyle:$.labelBgStyle,labelBgPadding:$.labelBgPadding,labelBgBorderRadius:$.labelBgBorderRadius,style:$.style,source:$.source,target:$.target,sourceHandleId:$.sourceHandle,targetHandleId:$.targetHandle,markerEnd:$.markerEnd,markerStart:$.markerStart,sourceX:ye,sourceY:me,targetX:Ce,targetY:Ue,sourcePosition:oe,targetPosition:P,elementsSelectable:C,onContextMenu:h,onMouseEnter:l,onMouseMove:d,onMouseLeave:f,onClick:p,onEdgeDoubleClick:m,onReconnect:y,onReconnectStart:j,onReconnectEnd:S,reconnectRadius:w,rfId:i,ariaLabel:$.ariaLabel,isFocusable:Q,isReconnectable:te,pathOptions:"pathOptions"in $?$.pathOptions:void 0,interactionWidth:$.interactionWidth,disableKeyboardA11y:v})})))),g):null};HS.displayName="EdgeRenderer";var eP=E.memo(HS);const tP=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function sP({children:t}){const s=Et(tP);return ae.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:s}},t)}function rP(t){const s=Kx(),n=E.useRef(!1);E.useEffect(()=>{!n.current&&s.viewportInitialized&&t&&(setTimeout(()=>t(s),1),n.current=!0)},[t,s.viewportInitialized])}const nP={[Me.Left]:Me.Right,[Me.Right]:Me.Left,[Me.Top]:Me.Bottom,[Me.Bottom]:Me.Top},zS=({nodeId:t,handleType:s,style:n,type:i=Fa.Bezier,CustomComponent:o,connectionStatus:u})=>{const{fromNode:h,handleId:l,toX:d,toY:f,connectionMode:p}=Et(E.useCallback(D=>({fromNode:D.nodeInternals.get(t),handleId:D.connectionHandleId,toX:(D.connectionPosition.x-D.transform[0])/D.transform[2],toY:(D.connectionPosition.y-D.transform[1])/D.transform[2],connectionMode:D.connectionMode}),[t]),Ss),m=h?.[Vt]?.handleBounds;let y=m?.[s];if(p===Ai.Loose&&(y=y||m?.[s==="source"?"target":"source"]),!h||!y)return null;const j=l?y.find(D=>D.id===l):y[0],S=j?j.x+j.width/2:(h.width??0)/2,w=j?j.y+j.height/2:h.height??0,g=(h.positionAbsolute?.x??0)+S,v=(h.positionAbsolute?.y??0)+w,b=j?.position,_=b?nP[b]:null;if(!b||!_)return null;if(o)return ae.createElement(o,{connectionLineType:i,connectionLineStyle:n,fromNode:h,fromHandle:j,fromX:g,fromY:v,toX:d,toY:f,fromPosition:b,toPosition:_,connectionStatus:u});let C="";const A={sourceX:g,sourceY:v,sourcePosition:b,targetX:d,targetY:f,targetPosition:_};return i===Fa.Bezier?[C]=cS(A):i===Fa.Step?[C]=Xu({...A,borderRadius:0}):i===Fa.SmoothStep?[C]=Xu(A):i===Fa.SimpleBezier?[C]=lS(A):C=`M${g},${v} ${d},${f}`,ae.createElement("path",{d:C,fill:"none",className:"react-flow__connection-path",style:n})};zS.displayName="ConnectionLine";const aP=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function iP({containerStyle:t,style:s,type:n,component:i}){const{nodeId:o,handleType:u,nodesConnectable:h,width:l,height:d,connectionStatus:f}=Et(aP,Ss);return!(o&&u&&l&&h)?null:ae.createElement("svg",{style:t,width:l,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},ae.createElement("g",{className:Gs(["react-flow__connection",f])},ae.createElement(zS,{nodeId:o,handleType:u,style:s,type:n,CustomComponent:i,connectionStatus:f})))}function H_(t,s){return E.useRef(null),Ns(),E.useMemo(()=>s(t),[t])}const FS=({nodeTypes:t,edgeTypes:s,onMove:n,onMoveStart:i,onMoveEnd:o,onInit:u,onNodeClick:h,onEdgeClick:l,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:m,onNodeMouseLeave:y,onNodeContextMenu:j,onSelectionContextMenu:S,onSelectionStart:w,onSelectionEnd:g,connectionLineType:v,connectionLineStyle:b,connectionLineComponent:_,connectionLineContainerStyle:C,selectionKeyCode:A,selectionOnDrag:D,selectionMode:R,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:I,deleteKeyCode:q,onlyRenderVisibleElements:W,elementsSelectable:G,selectNodesOnDrag:$,defaultViewport:F,translateExtent:B,minZoom:V,maxZoom:O,preventScrolling:H,defaultMarkerColor:U,zoomOnScroll:L,zoomOnPinch:Y,panOnScroll:J,panOnScrollSpeed:K,panOnScrollMode:Z,zoomOnDoubleClick:oe,panOnDrag:P,onPaneClick:Q,onPaneMouseEnter:ee,onPaneMouseMove:te,onPaneMouseLeave:ye,onPaneScroll:me,onPaneContextMenu:Ce,onEdgeContextMenu:Ue,onEdgeMouseEnter:Ge,onEdgeMouseMove:pt,onEdgeMouseLeave:Ne,onReconnect:ke,onReconnectStart:ht,onReconnectEnd:us,reconnectRadius:Us,noDragClassName:kt,noWheelClassName:wt,noPanClassName:xt,elevateEdgesOnSelect:qt,disableKeyboardA11y:Gt,nodeOrigin:Ps,nodeExtent:$t,rfId:Ls})=>{const Bt=H_(t,O6),At=H_(s,z6);return rP(u),ae.createElement(D6,{onPaneClick:Q,onPaneMouseEnter:ee,onPaneMouseMove:te,onPaneMouseLeave:ye,onPaneContextMenu:Ce,onPaneScroll:me,deleteKeyCode:q,selectionKeyCode:A,selectionOnDrag:D,selectionMode:R,onSelectionStart:w,onSelectionEnd:g,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:I,elementsSelectable:G,onMove:n,onMoveStart:i,onMoveEnd:o,zoomOnScroll:L,zoomOnPinch:Y,zoomOnDoubleClick:oe,panOnScroll:J,panOnScrollSpeed:K,panOnScrollMode:Z,panOnDrag:P,defaultViewport:F,translateExtent:B,minZoom:V,maxZoom:O,onSelectionContextMenu:S,preventScrolling:H,noDragClassName:kt,noWheelClassName:wt,noPanClassName:xt,disableKeyboardA11y:Gt},ae.createElement(sP,null,ae.createElement(eP,{edgeTypes:At,onEdgeClick:l,onEdgeDoubleClick:f,onlyRenderVisibleElements:W,onEdgeContextMenu:Ue,onEdgeMouseEnter:Ge,onEdgeMouseMove:pt,onEdgeMouseLeave:Ne,onReconnect:ke,onReconnectStart:ht,onReconnectEnd:us,reconnectRadius:Us,defaultMarkerColor:U,noPanClassName:xt,elevateEdgesOnSelect:!!qt,disableKeyboardA11y:Gt,rfId:Ls},ae.createElement(iP,{style:b,type:v,component:_,containerStyle:C})),ae.createElement("div",{className:"react-flow__edgelabel-renderer"}),ae.createElement(B6,{nodeTypes:Bt,onNodeClick:h,onNodeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:m,onNodeMouseLeave:y,onNodeContextMenu:j,selectNodesOnDrag:$,onlyRenderVisibleElements:W,noPanClassName:xt,noDragClassName:kt,disableKeyboardA11y:Gt,nodeOrigin:Ps,nodeExtent:$t,rfId:Ls})))};FS.displayName="GraphView";var oP=E.memo(FS);const lx=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Oa={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:lx,nodeExtent:lx,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ai.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:LO,isValidConnection:void 0},lP=()=>QR((t,s)=>({...Oa,setNodes:n=>{const{nodeInternals:i,nodeOrigin:o,elevateNodesOnSelect:u}=s();t({nodeInternals:pp(n,i,o,u)})},getNodes:()=>Array.from(s().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=s();t({edges:n.map(o=>({...i,...o}))})},setDefaultNodesAndEdges:(n,i)=>{const o=typeof n<"u",u=typeof i<"u",h=o?pp(n,new Map,s().nodeOrigin,s().elevateNodesOnSelect):new Map;t({nodeInternals:h,edges:u?i:[],hasDefaultNodes:o,hasDefaultEdges:u})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:o,fitViewOnInit:u,fitViewOnInitDone:h,fitViewOnInitOptions:l,domNode:d,nodeOrigin:f}=s(),p=d?.querySelector(".react-flow__viewport");if(!p)return;const m=window.getComputedStyle(p),{m22:y}=new window.DOMMatrixReadOnly(m.transform),j=n.reduce((w,g)=>{const v=o.get(g.id);if(v?.hidden)o.set(v.id,{...v,[Vt]:{...v[Vt],handleBounds:void 0}});else if(v){const b=Fx(g.nodeElement);!!(b.width&&b.height&&(v.width!==b.width||v.height!==b.height||g.forceUpdate))&&(o.set(v.id,{...v,[Vt]:{...v[Vt],handleBounds:{source:M_(".source",g.nodeElement,y,f),target:M_(".target",g.nodeElement,y,f)}},...b}),w.push({id:v.id,type:"dimensions",dimensions:b}))}return w},[]);kS(o,f);const S=h||u&&!h&&AS(s,{initial:!0,...l});t({nodeInternals:new Map(o),fitViewOnInitDone:S}),j?.length>0&&i?.(j)},updateNodePositions:(n,i=!0,o=!1)=>{const{triggerNodeChanges:u}=s(),h=n.map(l=>{const d={id:l.id,type:"position",dragging:o};return i&&(d.positionAbsolute=l.positionAbsolute,d.position=l.position),d});u(h)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:o,hasDefaultNodes:u,nodeOrigin:h,getNodes:l,elevateNodesOnSelect:d}=s();if(n?.length){if(u){const f=RS(n,l()),p=pp(f,o,h,d);t({nodeInternals:p})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:o,getNodes:u}=s();let h,l=null;i?h=n.map(d=>za(d,!0)):(h=Ao(u(),n),l=Ao(o,[])),du({changedNodes:h,changedEdges:l,get:s,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:o,getNodes:u}=s();let h,l=null;i?h=n.map(d=>za(d,!0)):(h=Ao(o,n),l=Ao(u(),[])),du({changedNodes:l,changedEdges:h,get:s,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:o,getNodes:u}=s(),h=n||u(),l=i||o,d=h.map(p=>(p.selected=!1,za(p.id,!1))),f=l.map(p=>za(p.id,!1));du({changedNodes:d,changedEdges:f,get:s,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:o}=s();i?.scaleExtent([n,o]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:o}=s();i?.scaleExtent([o,n]),t({maxZoom:n})},setTranslateExtent:n=>{s().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=s(),u=i().filter(l=>l.selected).map(l=>za(l.id,!1)),h=n.filter(l=>l.selected).map(l=>za(l.id,!1));du({changedNodes:u,changedEdges:h,get:s,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=s();i.forEach(o=>{o.positionAbsolute=Ux(o.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:o,height:u,d3Zoom:h,d3Selection:l,translateExtent:d}=s();if(!h||!l||!n.x&&!n.y)return!1;const f=Yn.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),p=[[0,0],[o,u]],m=h?.constrain()(f,p,d);return h.transform(l,m),i[0]!==m.x||i[1]!==m.y||i[2]!==m.k},cancelConnection:()=>t({connectionNodeId:Oa.connectionNodeId,connectionHandleId:Oa.connectionHandleId,connectionHandleType:Oa.connectionHandleType,connectionStatus:Oa.connectionStatus,connectionStartHandle:Oa.connectionStartHandle,connectionEndHandle:Oa.connectionEndHandle}),reset:()=>t({...Oa})}),Object.is),Zx=({children:t})=>{const s=E.useRef(null);return s.current||(s.current=lP()),ae.createElement(AO,{value:s.current},t)};Zx.displayName="ReactFlowProvider";const US=({children:t})=>E.useContext(mh)?ae.createElement(ae.Fragment,null,t):ae.createElement(Zx,null,t);US.displayName="ReactFlowWrapper";const cP={input:_S,default:ix,output:wS,group:Xx},dP={default:Ku,straight:qx,step:Vx,smoothstep:fh,simplebezier:Wx},uP=[0,0],hP=[15,15],mP={x:0,y:0,zoom:1},fP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},WS=E.forwardRef(({nodes:t,edges:s,defaultNodes:n,defaultEdges:i,className:o,nodeTypes:u=cP,edgeTypes:h=dP,onNodeClick:l,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:m,onMoveEnd:y,onConnect:j,onConnectStart:S,onConnectEnd:w,onClickConnectStart:g,onClickConnectEnd:v,onNodeMouseEnter:b,onNodeMouseMove:_,onNodeMouseLeave:C,onNodeContextMenu:A,onNodeDoubleClick:D,onNodeDragStart:R,onNodeDrag:k,onNodeDragStop:M,onNodesDelete:I,onEdgesDelete:q,onSelectionChange:W,onSelectionDragStart:G,onSelectionDrag:$,onSelectionDragStop:F,onSelectionContextMenu:B,onSelectionStart:V,onSelectionEnd:O,connectionMode:H=Ai.Strict,connectionLineType:U=Fa.Bezier,connectionLineStyle:L,connectionLineComponent:Y,connectionLineContainerStyle:J,deleteKeyCode:K="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:oe=!1,selectionMode:P=wc.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:ee=Yu()?"Meta":"Control",zoomActivationKeyCode:te=Yu()?"Meta":"Control",snapToGrid:ye=!1,snapGrid:me=hP,onlyRenderVisibleElements:Ce=!1,selectNodesOnDrag:Ue=!0,nodesDraggable:Ge,nodesConnectable:pt,nodesFocusable:Ne,nodeOrigin:ke=uP,edgesFocusable:ht,edgesUpdatable:us,elementsSelectable:Us,defaultViewport:kt=mP,minZoom:wt=.5,maxZoom:xt=2,translateExtent:qt=lx,preventScrolling:Gt=!0,nodeExtent:Ps,defaultMarkerColor:$t="#b1b1b7",zoomOnScroll:Ls=!0,zoomOnPinch:Bt=!0,panOnScroll:At=!1,panOnScrollSpeed:Ke=.5,panOnScrollMode:Cs=bi.Free,zoomOnDoubleClick:Ht=!0,panOnDrag:gs=!0,onPaneClick:Tt,onPaneMouseEnter:Ir,onPaneMouseMove:_n,onPaneMouseLeave:Ys,onPaneScroll:_r,onPaneContextMenu:tn,children:sn,onEdgeContextMenu:vs,onEdgeDoubleClick:qe,onEdgeMouseEnter:Dt,onEdgeMouseMove:ss,onEdgeMouseLeave:ys,onEdgeUpdate:rn,onEdgeUpdateStart:Mt,onEdgeUpdateEnd:Bs,onReconnect:jn,onReconnectStart:Is,onReconnectEnd:$s,reconnectRadius:oa=10,edgeUpdaterRadius:ar=10,onNodesChange:il,onEdgesChange:$c,noDragClassName:nn="nodrag",noWheelClassName:hs="nowheel",noPanClassName:Es="nopan",fitView:la=!1,fitViewOptions:ol,connectOnClick:Hh=!0,attributionPosition:zh,proOptions:Hc,defaultEdgeOptions:Za,elevateNodesOnSelect:ll=!0,elevateEdgesOnSelect:ca=!1,disableKeyboardA11y:wn=!1,autoPanOnConnect:Ja=!0,autoPanOnNodeDrag:da=!0,connectionRadius:rs=20,isValidConnection:zc,onError:Fc,style:Sn,id:Nn,nodeDragThreshold:Fh,...Uc},Wc)=>{const cl=Nn||"1";return ae.createElement("div",{...Uc,style:{...Sn,...fP},ref:Wc,className:Gs(["react-flow",o]),"data-testid":"rf__wrapper",id:Nn},ae.createElement(US,null,ae.createElement(oP,{onInit:f,onMove:p,onMoveStart:m,onMoveEnd:y,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:b,onNodeMouseMove:_,onNodeMouseLeave:C,onNodeContextMenu:A,onNodeDoubleClick:D,nodeTypes:u,edgeTypes:h,connectionLineType:U,connectionLineStyle:L,connectionLineComponent:Y,connectionLineContainerStyle:J,selectionKeyCode:Z,selectionOnDrag:oe,selectionMode:P,deleteKeyCode:K,multiSelectionKeyCode:ee,panActivationKeyCode:Q,zoomActivationKeyCode:te,onlyRenderVisibleElements:Ce,selectNodesOnDrag:Ue,defaultViewport:kt,translateExtent:qt,minZoom:wt,maxZoom:xt,preventScrolling:Gt,zoomOnScroll:Ls,zoomOnPinch:Bt,zoomOnDoubleClick:Ht,panOnScroll:At,panOnScrollSpeed:Ke,panOnScrollMode:Cs,panOnDrag:gs,onPaneClick:Tt,onPaneMouseEnter:Ir,onPaneMouseMove:_n,onPaneMouseLeave:Ys,onPaneScroll:_r,onPaneContextMenu:tn,onSelectionContextMenu:B,onSelectionStart:V,onSelectionEnd:O,onEdgeContextMenu:vs,onEdgeDoubleClick:qe,onEdgeMouseEnter:Dt,onEdgeMouseMove:ss,onEdgeMouseLeave:ys,onReconnect:jn??rn,onReconnectStart:Is??Mt,onReconnectEnd:$s??Bs,reconnectRadius:oa??ar,defaultMarkerColor:$t,noDragClassName:nn,noWheelClassName:hs,noPanClassName:Es,elevateEdgesOnSelect:ca,rfId:cl,disableKeyboardA11y:wn,nodeOrigin:ke,nodeExtent:Ps}),ae.createElement(n6,{nodes:t,edges:s,defaultNodes:n,defaultEdges:i,onConnect:j,onConnectStart:S,onConnectEnd:w,onClickConnectStart:g,onClickConnectEnd:v,nodesDraggable:Ge,nodesConnectable:pt,nodesFocusable:Ne,edgesFocusable:ht,edgesUpdatable:us,elementsSelectable:Us,elevateNodesOnSelect:ll,minZoom:wt,maxZoom:xt,nodeExtent:Ps,onNodesChange:il,onEdgesChange:$c,snapToGrid:ye,snapGrid:me,connectionMode:H,translateExtent:qt,connectOnClick:Hh,defaultEdgeOptions:Za,fitView:la,fitViewOptions:ol,onNodesDelete:I,onEdgesDelete:q,onNodeDragStart:R,onNodeDrag:k,onNodeDragStop:M,onSelectionDrag:$,onSelectionDragStart:G,onSelectionDragStop:F,noPanClassName:Es,nodeOrigin:ke,rfId:cl,autoPanOnConnect:Ja,autoPanOnNodeDrag:da,onError:Fc,connectionRadius:rs,isValidConnection:zc,nodeDragThreshold:Fh}),ae.createElement(s6,{onSelectionChange:W}),sn,ae.createElement(RO,{proOptions:Hc,position:zh}),ae.createElement(c6,{rfId:cl,disableKeyboardA11y:wn})))});WS.displayName="ReactFlow";const pP=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function xP({children:t}){const s=Et(pP);return s?Ko.createPortal(t,s):null}const gP=t=>t.getNodes();function vP(){return Et(gP,Ss)}function VS(t){return s=>{const[n,i]=E.useState(s),o=E.useCallback(u=>i(h=>t(u,h)),[]);return[n,i,o]}}const yP=VS(RS),bP=VS(w6),qS=({id:t,x:s,y:n,width:i,height:o,style:u,color:h,strokeColor:l,strokeWidth:d,className:f,borderRadius:p,shapeRendering:m,onClick:y,selected:j})=>{const{background:S,backgroundColor:w}=u||{},g=h||S||w;return ae.createElement("rect",{className:Gs(["react-flow__minimap-node",{selected:j},f]),x:s,y:n,rx:p,ry:p,width:i,height:o,fill:g,stroke:l,strokeWidth:d,shapeRendering:m,onClick:y?v=>y(v,t):void 0})};qS.displayName="MiniMapNode";var _P=E.memo(qS);const jP=t=>t.nodeOrigin,wP=t=>t.getNodes().filter(s=>!s.hidden&&s.width&&s.height),yp=t=>t instanceof Function?t:()=>t;function SP({nodeStrokeColor:t="transparent",nodeColor:s="#e2e2e2",nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:u=_P,onClick:h}){const l=Et(wP,Ss),d=Et(jP),f=yp(s),p=yp(t),m=yp(n),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return ae.createElement(ae.Fragment,null,l.map(j=>{const{x:S,y:w}=Si(j,d).positionAbsolute;return ae.createElement(u,{key:j.id,x:S,y:w,width:j.width,height:j.height,style:j.style,selected:j.selected,className:m(j),color:f(j),borderRadius:i,strokeColor:p(j),strokeWidth:o,shapeRendering:y,onClick:h,id:j.id})}))}var NP=E.memo(SP);const CP=200,EP=150,kP=t=>{const s=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:s.length>0?OO(ph(s,t.nodeOrigin),n):n,rfId:t.rfId}},AP="react-flow__minimap-desc";function GS({style:t,className:s,nodeStrokeColor:n="transparent",nodeColor:i="#e2e2e2",nodeClassName:o="",nodeBorderRadius:u=5,nodeStrokeWidth:h=2,nodeComponent:l,maskColor:d="rgb(240, 240, 240, 0.6)",maskStrokeColor:f="none",maskStrokeWidth:p=1,position:m="bottom-right",onClick:y,onNodeClick:j,pannable:S=!1,zoomable:w=!1,ariaLabel:g="React Flow mini map",inversePan:v=!1,zoomStep:b=10,offsetScale:_=5}){const C=Ns(),A=E.useRef(null),{boundingRect:D,viewBB:R,rfId:k}=Et(kP,Ss),M=t?.width??CP,I=t?.height??EP,q=D.width/M,W=D.height/I,G=Math.max(q,W),$=G*M,F=G*I,B=_*G,V=D.x-($-D.width)/2-B,O=D.y-(F-D.height)/2-B,H=$+B*2,U=F+B*2,L=`${AP}-${k}`,Y=E.useRef(0);Y.current=G,E.useEffect(()=>{if(A.current){const Z=Mr(A.current),oe=ee=>{const{transform:te,d3Selection:ye,d3Zoom:me}=C.getState();if(ee.sourceEvent.type!=="wheel"||!ye||!me)return;const Ce=-ee.sourceEvent.deltaY*(ee.sourceEvent.deltaMode===1?.05:ee.sourceEvent.deltaMode?1:.002)*b,Ue=te[2]*Math.pow(2,Ce);me.scaleTo(ye,Ue)},P=ee=>{const{transform:te,d3Selection:ye,d3Zoom:me,translateExtent:Ce,width:Ue,height:Ge}=C.getState();if(ee.sourceEvent.type!=="mousemove"||!ye||!me)return;const pt=Y.current*Math.max(1,te[2])*(v?-1:1),Ne={x:te[0]-ee.sourceEvent.movementX*pt,y:te[1]-ee.sourceEvent.movementY*pt},ke=[[0,0],[Ue,Ge]],ht=Yn.translate(Ne.x,Ne.y).scale(te[2]),us=me.constrain()(ht,ke,Ce);me.transform(ye,us)},Q=Kw().on("zoom",S?P:null).on("zoom.wheel",w?oe:null);return Z.call(Q),()=>{Z.on("zoom",null)}}},[S,w,v,b]);const J=y?Z=>{const oe=Ur(Z);y(Z,{x:oe[0],y:oe[1]})}:void 0,K=j?(Z,oe)=>{const P=C.getState().nodeInternals.get(oe);j(Z,P)}:void 0;return ae.createElement(Jw,{position:m,style:t,className:Gs(["react-flow__minimap",s]),"data-testid":"rf__minimap"},ae.createElement("svg",{width:M,height:I,viewBox:`${V} ${O} ${H} ${U}`,role:"img","aria-labelledby":L,ref:A,onClick:J},g&&ae.createElement("title",{id:L},g),ae.createElement(NP,{onClick:K,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:u,nodeClassName:o,nodeStrokeWidth:h,nodeComponent:l}),ae.createElement("path",{className:"react-flow__minimap-mask",d:`M${V-B},${O-B}h${H+B*2}v${U+B*2}h${-H-B*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fill:d,fillRule:"evenodd",stroke:f,strokeWidth:p,pointerEvents:"none"})))}GS.displayName="MiniMap";var TP=E.memo(GS),Gr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Gr||(Gr={}));function RP({color:t,dimensions:s,lineWidth:n}){return ae.createElement("path",{stroke:t,strokeWidth:n,d:`M${s[0]/2} 0 V${s[1]} M0 ${s[1]/2} H${s[0]}`})}function DP({color:t,radius:s}){return ae.createElement("circle",{cx:s,cy:s,r:s,fill:t})}const MP={[Gr.Dots]:"#91919a",[Gr.Lines]:"#eee",[Gr.Cross]:"#e2e2e2"},OP={[Gr.Dots]:1,[Gr.Lines]:1,[Gr.Cross]:6},PP=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function YS({id:t,variant:s=Gr.Dots,gap:n=20,size:i,lineWidth:o=1,offset:u=2,color:h,style:l,className:d}){const f=E.useRef(null),{transform:p,patternId:m}=Et(PP,Ss),y=h||MP[s],j=i||OP[s],S=s===Gr.Dots,w=s===Gr.Cross,g=Array.isArray(n)?n:[n,n],v=[g[0]*p[2]||1,g[1]*p[2]||1],b=j*p[2],_=w?[b,b]:v,C=S?[b/u,b/u]:[_[0]/u,_[1]/u];return ae.createElement("svg",{className:Gs(["react-flow__background",d]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},ae.createElement("pattern",{id:m+t,x:p[0]%v[0],y:p[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`},S?ae.createElement(DP,{color:y,radius:b/u}):ae.createElement(RP,{dimensions:_,color:y,lineWidth:o})),ae.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${m+t})`}))}YS.displayName="Background";var LP=E.memo(YS);const BP={maxRetries:3,retryDelay:1e3,retryCondition:t=>t.status>=500||t.status===401||t.status===403};async function IP(t,s,n={}){const{maxRetries:i,retryDelay:o,retryCondition:u}={...BP,...n};let h=null;for(let l=0;l<=i;l++)try{const d=await fetch(t,s);if(d.ok||!u(d)||l===i)return d;await z_(o*2**l)}catch(d){if(h=d instanceof Error?d:new Error(String(d)),l===i)throw h;await z_(o*2**l)}throw h||new Error("Max retries exceeded")}function z_(t){return new Promise(s=>setTimeout(s,t))}async function hu(t,s){return IP(t,s,{maxRetries:3,retryDelay:1e3,retryCondition:n=>n.status>=500})}const Je="http://localhost:8080",Be={async getEnvironments(){const t=await hu(`${Je}/api/environments`);if(!t.ok)throw new Error("Failed to fetch environments");return t.json()},async getEnvironmentConfig(t){const s=await hu(`${Je}/api/environment?name=${encodeURIComponent(t)}`);if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to fetch environment config")}return(await s.json()).content},async updateEnvironmentConfig(t,s){const n=await hu(`${Je}/api/environment/update?name=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:s})});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to update environment config")}},async getAccountInfo(){const t=await hu(`${Je}/api/account`);if(!t.ok)throw new Error("Failed to fetch account info");return t.json()},async getECSClusterInfo(t){const s=await fetch(`${Je}/api/ecs/cluster?env=${encodeURIComponent(t)}`);if(!s.ok)throw new Error("Failed to fetch ECS cluster info");return s.json()},async getECSNetworkInfo(t){const s=await fetch(`${Je}/api/ecs/network?env=${encodeURIComponent(t)}`);if(!s.ok)throw new Error("Failed to fetch ECS network info");return s.json()},async getECSServicesInfo(t){const s=await fetch(`${Je}/api/ecs/services?env=${encodeURIComponent(t)}`);if(!s.ok)throw new Error("Failed to fetch ECS services info");return s.json()},async getServiceAutoscaling(t,s){const n=await fetch(`${Je}/api/ecs/autoscaling?env=${encodeURIComponent(t)}&service=${encodeURIComponent(s)}`);if(!n.ok)throw new Error("Failed to fetch autoscaling info");return n.json()},async getServiceScalingHistory(t,s,n=24){const i=await fetch(`${Je}/api/ecs/scaling-history?env=${encodeURIComponent(t)}&service=${encodeURIComponent(s)}&hours=${n}`);if(!i.ok)throw new Error("Failed to fetch scaling history");return i.json()},async getServiceMetrics(t,s){const n=await fetch(`${Je}/api/ecs/metrics?env=${encodeURIComponent(t)}&service=${encodeURIComponent(s)}`);if(!n.ok)throw new Error("Failed to fetch service metrics");return n.json()},async getECSTasks(t,s){const n=await fetch(`${Je}/api/ecs/tasks?cluster=${encodeURIComponent(t)}&service=${encodeURIComponent(s)}`);if(!n.ok)throw new Error("Failed to fetch ECS tasks");return n.json()},async getServiceLogs(t,s,n=100,i){const o=new URLSearchParams({env:t,service:s,limit:n.toString()});i&&o.append("nextToken",i);const u=await fetch(`${Je}/api/logs?${o}`);if(!u.ok)throw new Error("Failed to fetch logs");return u.json()},connectToLogStream(t,s,n,i,o){let u;u=`${Je.replace(/^http/,"ws")}/ws/logs?env=${encodeURIComponent(t)}&service=${encodeURIComponent(s)}`;const h=new WebSocket(u);return h.onopen=()=>{console.log("Connected to log stream"),o?.()},h.onmessage=l=>{try{const d=JSON.parse(l.data);d.type==="logs"&&d.data?n(d.data):d.error&&i?.(new Error(d.error))}catch(d){console.error("Failed to parse log message:",d)}},h.onerror=l=>{console.error("WebSocket error:",l),i?.(new Error("WebSocket connection error"))},h.onclose=()=>{console.log("Disconnected from log stream")},h},async getServiceTasks(t,s){const n=new URLSearchParams({env:t,service:s}),i=await fetch(`${Je}/api/ecs/tasks?${n}`);if(!i.ok)throw new Error("Failed to fetch service tasks");return i.json()},async checkSSHCapability(t,s,n){const i=new URLSearchParams({env:t,service:s,taskArn:n}),o=await fetch(`${Je}/api/ssh/capability?${i}`);if(!o.ok)throw new Error("Failed to check SSH capability");return o.json()},connectToSSH(t,s,n,i,o,u,h){const l=new URLSearchParams({env:t,service:s,taskArn:n});i&&l.append("container",i);let d;d=`${Je.replace(/^http/,"ws")}/ws/ssh?${l}`,console.log("Connecting to SSH WebSocket:",d);try{const f=new WebSocket(d),p=setTimeout(()=>{f.readyState!==WebSocket.OPEN&&(f.close(),u?.(new Error("SSH connection timeout. Please check if the backend server is running.")))},5e3);return f.onopen=()=>{clearTimeout(p),console.log("SSH WebSocket connected")},f.onmessage=m=>{try{const y=JSON.parse(m.data);o(y)}catch(y){console.error("Failed to parse SSH message:",y)}},f.onerror=m=>{console.error("SSH WebSocket error:",m);let y="SSH WebSocket connection error";f.readyState===WebSocket.CLOSED&&(y="Unable to connect to SSH WebSocket. The backend server may not be running or the /ws/ssh endpoint is not available."),u?.(new Error(y))},f.onclose=()=>{console.log("SSH WebSocket disconnected"),h?.()},f.sendInput=m=>{f.readyState===WebSocket.OPEN&&f.send(JSON.stringify({type:"input",data:m}))},f}catch(f){throw console.error("Failed to create WebSocket:",f),u?.(new Error("Failed to create SSH WebSocket connection")),f}},async getSSMParameter(t){const s=await fetch(`${Je}/api/ssm/parameter?name=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to fetch SSM parameter")}return s.json()},async getDatabaseInfo(t,s){const n=await fetch(`${Je}/api/rds/info?project=${encodeURIComponent(t)}&env=${encodeURIComponent(s)}`);if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to fetch database info")}return n.json()},async getDatabaseEndpoint(t,s,n){const i=await fetch(`${Je}/api/rds/endpoint?project=${encodeURIComponent(t)}&env=${encodeURIComponent(s)}&aurora=${n}`);if(!i.ok){const o=await i.json();throw new Error(o.error||"Failed to fetch database endpoint")}return i.json()},async createOrUpdateSSMParameter(t){const s=await fetch(`${Je}/api/ssm/parameter`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to create/update SSM parameter")}},async deleteSSMParameter(t){const s=await fetch(`${Je}/api/ssm/parameter?name=${encodeURIComponent(t)}`,{method:"DELETE"});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to delete SSM parameter")}},async listSSMParameters(t){const s=new URLSearchParams;t&&s.append("prefix",t);const n=await fetch(`${Je}/api/ssm/parameters?${s}`);if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to list SSM parameters")}return n.json()},async getS3File(t,s){const n=new URLSearchParams({bucket:t,key:s}),i=await fetch(`${Je}/api/s3/file?${n}`);if(!i.ok){const o=await i.json();throw new Error(o.error||"Failed to fetch S3 file")}return i.json()},async putS3File(t){const s=await fetch(`${Je}/api/s3/file`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to update S3 file")}},async getNodePositions(t){const s=await fetch(`${Je}/api/positions?environment=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to fetch node positions")}return s.json()},async saveNodePositions(t){const s=await fetch(`${Je}/api/positions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to save node positions")}},async sendTestEvent(t){const s=await fetch(`${Je}/api/eventbridge/send-test-event`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to send test event")}return s.json()},async getEventTasks(t){const s=await fetch(`${Je}/api/eventbridge/event-tasks?env=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to fetch event tasks")}return s.json()},async getSESStatus(){const t=await fetch(`${Je}/api/ses/status`);if(!t.ok){const s=await t.json();throw new Error(s.error||"Failed to fetch SES status")}return t.json()},async getSESSandboxInfo(){const t=await fetch(`${Je}/api/ses/sandbox-info`);if(!t.ok){const s=await t.json();throw new Error(s.error||"Failed to fetch SES sandbox info")}return t.json()},async sendTestEmail(t,s,n,i){const o=await fetch(`${Je}/api/ses/send-test-email?env=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:s,subject:n,body:i})});if(!o.ok){const u=await o.json();throw new Error(u.error||"Failed to send test email")}return o.json()},async getProductionAccessPrefill(t){const s=await fetch(`${Je}/api/ses/production-access-prefill?env=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to fetch production access prefill")}return s.json()},async requestSESProductionAccess(t,s){const n=await fetch(`${Je}/api/ses/request-production?env=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to request SES production access")}return n.json()},async getS3Buckets(t){const s=await fetch(`${Je}/api/s3/buckets?env=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to fetch S3 buckets")}return s.json()},async initiateGitHubDeviceFlow(t){const s=await fetch(`${Je}/api/github/oauth/device`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to initiate GitHub device flow")}return s.json()},async checkGitHubAuthStatus(t){const s=await fetch(`${Je}/api/github/oauth/status?user_code=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to check GitHub auth status")}return s.json()},async deleteGitHubOAuthSession(t){const s=await fetch(`${Je}/api/github/oauth/session?user_code=${encodeURIComponent(t)}`,{method:"DELETE"});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to delete GitHub OAuth session")}},async getPricing(t){const s=await fetch(`${Je}/api/pricing?env=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to fetch pricing data")}return s.json()},async getECRSources(){const t=await fetch(`${Je}/api/environments/ecr-sources`);if(!t.ok){const s=await t.json();throw new Error(s.error||"Failed to fetch ECR sources")}return t.json()},async configureCrossAccountECR(t){const s=await fetch(`${Je}/api/environments/configure-cross-account-ecr`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to configure cross-account ECR")}return s.json()},async checkECRTrustPolicy(t,s){const n=await fetch(`${Je}/api/environments/check-ecr-trust-policy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_env:t,target_account:s})});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to check ECR trust policy")}return n.json()},async getAPIGatewayInfo(t){const s=await fetch(`${Je}/api/apigateway/info?env=${encodeURIComponent(t)}`);if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to fetch API Gateway info")}return s.json()}};function F_(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function XS(...t){return s=>{let n=!1;const i=t.map(o=>{const u=F_(o,s);return!n&&typeof u=="function"&&(n=!0),u});if(n)return()=>{for(let o=0;o<i.length;o++){const u=i[o];typeof u=="function"?u():F_(t[o],null)}}}}function Qe(...t){return E.useCallback(XS(...t),t)}function qo(t){const s=$P(t),n=E.forwardRef((i,o)=>{const{children:u,...h}=i,l=E.Children.toArray(u),d=l.find(zP);if(d){const f=d.props.children,p=l.map(m=>m===d?E.Children.count(f)>1?E.Children.only(null):E.isValidElement(f)?f.props.children:null:m);return e.jsx(s,{...h,ref:o,children:E.isValidElement(f)?E.cloneElement(f,void 0,p):null})}return e.jsx(s,{...h,ref:o,children:u})});return n.displayName=`${t}.Slot`,n}var KS=qo("Slot");function $P(t){const s=E.forwardRef((n,i)=>{const{children:o,...u}=n;if(E.isValidElement(o)){const h=UP(o),l=FP(u,o.props);return o.type!==E.Fragment&&(l.ref=i?XS(i,h):h),E.cloneElement(o,l)}return E.Children.count(o)>1?E.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var QS=Symbol("radix.slottable");function HP(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=QS,s}function zP(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===QS}function FP(t,s){const n={...s};for(const i in s){const o=t[i],u=s[i];/^on[A-Z]/.test(i)?o&&u?n[i]=(...l)=>{const d=u(...l);return o(...l),d}:o&&(n[i]=o):i==="style"?n[i]={...o,...u}:i==="className"&&(n[i]=[o,u].filter(Boolean).join(" "))}return{...t,...n}}function UP(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ZS(t){var s,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(n=ZS(t[s]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function JS(){for(var t,s,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(s=ZS(t))&&(i&&(i+=" "),i+=s);return i}const U_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,W_=JS,Jx=(t,s)=>n=>{var i;if(s?.variants==null)return W_(t,n?.class,n?.className);const{variants:o,defaultVariants:u}=s,h=Object.keys(o).map(f=>{const p=n?.[f],m=u?.[f];if(p===null)return null;const y=U_(p)||U_(m);return o[f][y]}),l=n&&Object.entries(n).reduce((f,p)=>{let[m,y]=p;return y===void 0||(f[m]=y),f},{}),d=s==null||(i=s.compoundVariants)===null||i===void 0?void 0:i.reduce((f,p)=>{let{class:m,className:y,...j}=p;return Object.entries(j).every(S=>{let[w,g]=S;return Array.isArray(g)?g.includes({...u,...l}[w]):{...u,...l}[w]===g})?[...f,m,y]:f},[]);return W_(t,h,d,n?.class,n?.className)},eg="-",WP=t=>{const s=qP(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:h=>{const l=h.split(eg);return l[0]===""&&l.length!==1&&l.shift(),e1(l,s)||VP(h)},getConflictingClassGroupIds:(h,l)=>{const d=n[h]||[];return l&&i[h]?[...d,...i[h]]:d}}},e1=(t,s)=>{if(t.length===0)return s.classGroupId;const n=t[0],i=s.nextPart.get(n),o=i?e1(t.slice(1),i):void 0;if(o)return o;if(s.validators.length===0)return;const u=t.join(eg);return s.validators.find(({validator:h})=>h(u))?.classGroupId},V_=/^\[(.+)\]$/,VP=t=>{if(V_.test(t)){const s=V_.exec(t)[1],n=s?.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},qP=t=>{const{theme:s,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const o in n)cx(n[o],i,o,s);return i},cx=(t,s,n,i)=>{t.forEach(o=>{if(typeof o=="string"){const u=o===""?s:q_(s,o);u.classGroupId=n;return}if(typeof o=="function"){if(GP(o)){cx(o(i),s,n,i);return}s.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([u,h])=>{cx(h,q_(s,u),n,i)})})},q_=(t,s)=>{let n=t;return s.split(eg).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},GP=t=>t.isThemeGetter,YP=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,i=new Map;const o=(u,h)=>{n.set(u,h),s++,s>t&&(s=0,i=n,n=new Map)};return{get(u){let h=n.get(u);if(h!==void 0)return h;if((h=i.get(u))!==void 0)return o(u,h),h},set(u,h){n.has(u)?n.set(u,h):o(u,h)}}},dx="!",ux=":",XP=ux.length,KP=t=>{const{prefix:s,experimentalParseClassName:n}=t;let i=o=>{const u=[];let h=0,l=0,d=0,f;for(let S=0;S<o.length;S++){let w=o[S];if(h===0&&l===0){if(w===ux){u.push(o.slice(d,S)),d=S+XP;continue}if(w==="/"){f=S;continue}}w==="["?h++:w==="]"?h--:w==="("?l++:w===")"&&l--}const p=u.length===0?o:o.substring(d),m=QP(p),y=m!==p,j=f&&f>d?f-d:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:m,maybePostfixModifierPosition:j}};if(s){const o=s+ux,u=i;i=h=>h.startsWith(o)?u(h.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:h,maybePostfixModifierPosition:void 0}}if(n){const o=i;i=u=>n({className:u,parseClassName:o})}return i},QP=t=>t.endsWith(dx)?t.substring(0,t.length-1):t.startsWith(dx)?t.substring(1):t,ZP=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const o=[];let u=[];return i.forEach(h=>{h[0]==="["||s[h]?(o.push(...u.sort(),h),u=[]):u.push(h)}),o.push(...u.sort()),o}},JP=t=>({cache:YP(t.cacheSize),parseClassName:KP(t),sortModifiers:ZP(t),...WP(t)}),eL=/\s+/,tL=(t,s)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:u}=s,h=[],l=t.trim().split(eL);let d="";for(let f=l.length-1;f>=0;f-=1){const p=l[f],{isExternal:m,modifiers:y,hasImportantModifier:j,baseClassName:S,maybePostfixModifierPosition:w}=n(p);if(m){d=p+(d.length>0?" "+d:d);continue}let g=!!w,v=i(g?S.substring(0,w):S);if(!v){if(!g){d=p+(d.length>0?" "+d:d);continue}if(v=i(S),!v){d=p+(d.length>0?" "+d:d);continue}g=!1}const b=u(y).join(":"),_=j?b+dx:b,C=_+v;if(h.includes(C))continue;h.push(C);const A=o(v,g);for(let D=0;D<A.length;++D){const R=A[D];h.push(_+R)}d=p+(d.length>0?" "+d:d)}return d};function sL(){let t=0,s,n,i="";for(;t<arguments.length;)(s=arguments[t++])&&(n=t1(s))&&(i&&(i+=" "),i+=n);return i}const t1=t=>{if(typeof t=="string")return t;let s,n="";for(let i=0;i<t.length;i++)t[i]&&(s=t1(t[i]))&&(n&&(n+=" "),n+=s);return n};function rL(t,...s){let n,i,o,u=h;function h(d){const f=s.reduce((p,m)=>m(p),t());return n=JP(f),i=n.cache.get,o=n.cache.set,u=l,l(d)}function l(d){const f=i(d);if(f)return f;const p=tL(d,n);return o(d,p),p}return function(){return u(sL.apply(null,arguments))}}const fs=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},s1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,r1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nL=/^\d+\/\d+$/,aL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yo=t=>nL.test(t),rt=t=>!!t&&!Number.isNaN(Number(t)),Pa=t=>!!t&&Number.isInteger(Number(t)),bp=t=>t.endsWith("%")&&rt(t.slice(0,-1)),Vn=t=>aL.test(t),dL=()=>!0,uL=t=>iL.test(t)&&!oL.test(t),n1=()=>!1,hL=t=>lL.test(t),mL=t=>cL.test(t),fL=t=>!Re(t)&&!De(t),pL=t=>Zo(t,o1,n1),Re=t=>s1.test(t),xi=t=>Zo(t,l1,uL),_p=t=>Zo(t,bL,rt),G_=t=>Zo(t,a1,n1),xL=t=>Zo(t,i1,mL),mu=t=>Zo(t,c1,hL),De=t=>r1.test(t),nc=t=>Jo(t,l1),gL=t=>Jo(t,_L),Y_=t=>Jo(t,a1),vL=t=>Jo(t,o1),yL=t=>Jo(t,i1),fu=t=>Jo(t,c1,!0),Zo=(t,s,n)=>{const i=s1.exec(t);return i?i[1]?s(i[1]):n(i[2]):!1},Jo=(t,s,n=!1)=>{const i=r1.exec(t);return i?i[1]?s(i[1]):n:!1},a1=t=>t==="position"||t==="percentage",i1=t=>t==="image"||t==="url",o1=t=>t==="length"||t==="size"||t==="bg-size",l1=t=>t==="length",bL=t=>t==="number",_L=t=>t==="family-name",c1=t=>t==="shadow",jL=()=>{const t=fs("color"),s=fs("font"),n=fs("text"),i=fs("font-weight"),o=fs("tracking"),u=fs("leading"),h=fs("breakpoint"),l=fs("container"),d=fs("spacing"),f=fs("radius"),p=fs("shadow"),m=fs("inset-shadow"),y=fs("text-shadow"),j=fs("drop-shadow"),S=fs("blur"),w=fs("perspective"),g=fs("aspect"),v=fs("ease"),b=fs("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...C(),De,Re],D=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],k=()=>[De,Re,d],M=()=>[yo,"full","auto",...k()],I=()=>[Pa,"none","subgrid",De,Re],q=()=>["auto",{span:["full",Pa,De,Re]},Pa,De,Re],W=()=>[Pa,"auto",De,Re],G=()=>["auto","min","max","fr",De,Re],$=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",...k()],V=()=>[yo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],O=()=>[t,De,Re],H=()=>[...C(),Y_,G_,{position:[De,Re]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",vL,pL,{size:[De,Re]}],Y=()=>[bp,nc,xi],J=()=>["","none","full",f,De,Re],K=()=>["",rt,nc,xi],Z=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>[rt,bp,Y_,G_],Q=()=>["","none",S,De,Re],ee=()=>["none",rt,De,Re],te=()=>["none",rt,De,Re],ye=()=>[rt,De,Re],me=()=>[yo,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vn],breakpoint:[Vn],color:[dL],container:[Vn],"drop-shadow":[Vn],ease:["in","out","in-out"],font:[fL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vn],shadow:[Vn],spacing:["px",rt],text:[Vn],"text-shadow":[Vn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",yo,Re,De,g]}],container:["container"],columns:[{columns:[rt,Re,De,l]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Pa,"auto",De,Re]}],basis:[{basis:[yo,"full","auto",l,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[rt,yo,"auto","initial","none",Re]}],grow:[{grow:["",rt,De,Re]}],shrink:[{shrink:["",rt,De,Re]}],order:[{order:[Pa,"first","last","none",De,Re]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...$(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...$()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":$()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[l,"screen",...V()]}],"min-w":[{"min-w":[l,"screen","none",...V()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[h]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",n,nc,xi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,De,_p]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bp,Re]}],"font-family":[{font:[gL,Re,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,De,Re]}],"line-clamp":[{"line-clamp":[rt,"none",De,_p]}],leading:[{leading:[u,...k()]}],"list-image":[{"list-image":["none",De,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",De,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:[rt,"from-font","auto",De,xi]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[rt,"auto",De,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pa,De,Re],radial:["",De,Re],conic:[Pa,De,Re]},yL,xL]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:J()}],"rounded-s":[{"rounded-s":J()}],"rounded-e":[{"rounded-e":J()}],"rounded-t":[{"rounded-t":J()}],"rounded-r":[{"rounded-r":J()}],"rounded-b":[{"rounded-b":J()}],"rounded-l":[{"rounded-l":J()}],"rounded-ss":[{"rounded-ss":J()}],"rounded-se":[{"rounded-se":J()}],"rounded-ee":[{"rounded-ee":J()}],"rounded-es":[{"rounded-es":J()}],"rounded-tl":[{"rounded-tl":J()}],"rounded-tr":[{"rounded-tr":J()}],"rounded-br":[{"rounded-br":J()}],"rounded-bl":[{"rounded-bl":J()}],"border-w":[{border:K()}],"border-w-x":[{"border-x":K()}],"border-w-y":[{"border-y":K()}],"border-w-s":[{"border-s":K()}],"border-w-e":[{"border-e":K()}],"border-w-t":[{"border-t":K()}],"border-w-r":[{"border-r":K()}],"border-w-b":[{"border-b":K()}],"border-w-l":[{"border-l":K()}],"divide-x":[{"divide-x":K()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":K()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Z(),"hidden","none"]}],"divide-style":[{divide:[...Z(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...Z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[rt,De,Re]}],"outline-w":[{outline:["",rt,nc,xi]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",p,fu,mu]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",m,fu,mu]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[rt,xi]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":K()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",y,fu,mu]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[rt,De,Re]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[rt]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[De,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[rt]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",De,Re]}],filter:[{filter:["","none",De,Re]}],blur:[{blur:Q()}],brightness:[{brightness:[rt,De,Re]}],contrast:[{contrast:[rt,De,Re]}],"drop-shadow":[{"drop-shadow":["","none",j,fu,mu]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",rt,De,Re]}],"hue-rotate":[{"hue-rotate":[rt,De,Re]}],invert:[{invert:["",rt,De,Re]}],saturate:[{saturate:[rt,De,Re]}],sepia:[{sepia:["",rt,De,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",De,Re]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[rt,De,Re]}],"backdrop-contrast":[{"backdrop-contrast":[rt,De,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",rt,De,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[rt,De,Re]}],"backdrop-invert":[{"backdrop-invert":["",rt,De,Re]}],"backdrop-opacity":[{"backdrop-opacity":[rt,De,Re]}],"backdrop-saturate":[{"backdrop-saturate":[rt,De,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",rt,De,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",De,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[rt,"initial",De,Re]}],ease:[{ease:["linear","initial",v,De,Re]}],delay:[{delay:[rt,De,Re]}],animate:[{animate:["none",b,De,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,De,Re]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ee()}],"rotate-x":[{"rotate-x":ee()}],"rotate-y":[{"rotate-y":ee()}],"rotate-z":[{"rotate-z":ee()}],scale:[{scale:te()}],"scale-x":[{"scale-x":te()}],"scale-y":[{"scale-y":te()}],"scale-z":[{"scale-z":te()}],"scale-3d":["scale-3d"],skew:[{skew:ye()}],"skew-x":[{"skew-x":ye()}],"skew-y":[{"skew-y":ye()}],transform:[{transform:[De,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De,Re]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[rt,nc,xi,_p]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wL=rL(jL);function Ie(...t){return wL(JS(t))}const SL=Jx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function ie({className:t,variant:s,size:n,asChild:i=!1,...o}){const u=i?KS:"button";return e.jsx(u,{"data-slot":"button",className:Ie(SL({variant:s,size:n,className:t})),...o})}function NL(t,s){const n=E.createContext(s),i=u=>{const{children:h,...l}=u,d=E.useMemo(()=>l,Object.values(l));return e.jsx(n.Provider,{value:d,children:h})};i.displayName=t+"Provider";function o(u){const h=E.useContext(n);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${t}\``)}return[i,o]}function yr(t,s=[]){let n=[];function i(u,h){const l=E.createContext(h),d=n.length;n=[...n,h];const f=m=>{const{scope:y,children:j,...S}=m,w=y?.[t]?.[d]||l,g=E.useMemo(()=>S,Object.values(S));return e.jsx(w.Provider,{value:g,children:j})};f.displayName=u+"Provider";function p(m,y){const j=y?.[t]?.[d]||l,S=E.useContext(j);if(S)return S;if(h!==void 0)return h;throw new Error(`\`${m}\` must be used within \`${u}\``)}return[f,p]}const o=()=>{const u=n.map(h=>E.createContext(h));return function(l){const d=l?.[t]||u;return E.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return o.scopeName=t,[i,CL(o,...s)]}function CL(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(u){const h=i.reduce((l,{useScope:d,scopeName:f})=>{const m=d(u)[`__scope${f}`];return{...l,...m}},{});return E.useMemo(()=>({[`__scope${s.scopeName}`]:h}),[h])}};return n.scopeName=s.scopeName,n}function Pe(t,s,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return s?.(o)}}var Os=globalThis?.document?E.useLayoutEffect:()=>{},EL=qj[" useInsertionEffect ".trim().toString()]||Os;function xn({prop:t,defaultProp:s,onChange:n=()=>{},caller:i}){const[o,u,h]=kL({defaultProp:s,onChange:n}),l=t!==void 0,d=l?t:o;{const p=E.useRef(t!==void 0);E.useEffect(()=>{const m=p.current;m!==l&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=l},[l,i])}const f=E.useCallback(p=>{if(l){const m=AL(p)?p(t):p;m!==t&&h.current?.(m)}else u(p)},[l,t,u,h]);return[d,f]}function kL({defaultProp:t,onChange:s}){const[n,i]=E.useState(t),o=E.useRef(n),u=E.useRef(s);return EL(()=>{u.current=s},[s]),E.useEffect(()=>{o.current!==n&&(u.current?.(n),o.current=n)},[n,o]),[n,i,u]}function AL(t){return typeof t=="function"}function Oc(t){const s=E.useRef({value:t,previous:t});return E.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}function Pc(t){const[s,n]=E.useState(void 0);return Os(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const u=o[0];let h,l;if("borderBoxSize"in u){const d=u.borderBoxSize,f=Array.isArray(d)?d[0]:d;h=f.inlineSize,l=f.blockSize}else h=t.offsetWidth,l=t.offsetHeight;n({width:h,height:l})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),s}function TL(t,s){return E.useReducer((n,i)=>s[n][i]??n,t)}var br=t=>{const{present:s,children:n}=t,i=RL(s),o=typeof n=="function"?n({present:i.isPresent}):E.Children.only(n),u=Qe(i.ref,DL(o));return typeof n=="function"||i.isPresent?E.cloneElement(o,{ref:u}):null};br.displayName="Presence";function RL(t){const[s,n]=E.useState(),i=E.useRef(null),o=E.useRef(t),u=E.useRef("none"),h=t?"mounted":"unmounted",[l,d]=TL(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=pu(i.current);u.current=l==="mounted"?f:"none"},[l]),Os(()=>{const f=i.current,p=o.current;if(p!==t){const y=u.current,j=pu(f);t?d("MOUNT"):j==="none"||f?.display==="none"?d("UNMOUNT"):d(p&&y!==j?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,d]),Os(()=>{if(s){let f;const p=s.ownerDocument.defaultView??window,m=j=>{const w=pu(i.current).includes(CSS.escape(j.animationName));if(j.target===s&&w&&(d("ANIMATION_END"),!o.current)){const g=s.style.animationFillMode;s.style.animationFillMode="forwards",f=p.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=g)})}},y=j=>{j.target===s&&(u.current=pu(i.current))};return s.addEventListener("animationstart",y),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{p.clearTimeout(f),s.removeEventListener("animationstart",y),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:E.useCallback(f=>{i.current=f?getComputedStyle(f):null,n(f)},[])}}function pu(t){return t?.animationName||"none"}function DL(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ML=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],We=ML.reduce((t,s)=>{const n=qo(`Primitive.${s}`),i=E.forwardRef((o,u)=>{const{asChild:h,...l}=o,d=h?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...l,ref:u})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{});function OL(t,s){t&&Ko.flushSync(()=>t.dispatchEvent(s))}var xh="Checkbox",[PL]=yr(xh),[LL,tg]=PL(xh);function BL(t){const{__scopeCheckbox:s,checked:n,children:i,defaultChecked:o,disabled:u,form:h,name:l,onCheckedChange:d,required:f,value:p="on",internal_do_not_use_render:m}=t,[y,j]=xn({prop:n,defaultProp:o??!1,onChange:d,caller:xh}),[S,w]=E.useState(null),[g,v]=E.useState(null),b=E.useRef(!1),_=S?!!h||!!S.closest("form"):!0,C={checked:y,disabled:u,setChecked:j,control:S,setControl:w,name:l,form:h,value:p,hasConsumerStoppedPropagationRef:b,required:f,defaultChecked:qa(o)?!1:o,isFormControl:_,bubbleInput:g,setBubbleInput:v};return e.jsx(LL,{scope:s,...C,children:IL(m)?m(C):i})}var d1="CheckboxTrigger",u1=E.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...i},o)=>{const{control:u,value:h,disabled:l,checked:d,required:f,setControl:p,setChecked:m,hasConsumerStoppedPropagationRef:y,isFormControl:j,bubbleInput:S}=tg(d1,t),w=Qe(o,p),g=E.useRef(d);return E.useEffect(()=>{const v=u?.form;if(v){const b=()=>m(g.current);return v.addEventListener("reset",b),()=>v.removeEventListener("reset",b)}},[u,m]),e.jsx(We.button,{type:"button",role:"checkbox","aria-checked":qa(d)?"mixed":d,"aria-required":f,"data-state":g1(d),"data-disabled":l?"":void 0,disabled:l,value:h,...i,ref:w,onKeyDown:Pe(s,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Pe(n,v=>{m(b=>qa(b)?!0:!b),S&&j&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})})});u1.displayName=d1;var h1=E.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:i,checked:o,defaultChecked:u,required:h,disabled:l,value:d,onCheckedChange:f,form:p,...m}=t;return e.jsx(BL,{__scopeCheckbox:n,checked:o,defaultChecked:u,disabled:l,required:h,onCheckedChange:f,name:i,form:p,value:d,internal_do_not_use_render:({isFormControl:y})=>e.jsxs(e.Fragment,{children:[e.jsx(u1,{...m,ref:s,__scopeCheckbox:n}),y&&e.jsx(x1,{__scopeCheckbox:n})]})})});h1.displayName=xh;var m1="CheckboxIndicator",f1=E.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:i,...o}=t,u=tg(m1,n);return e.jsx(br,{present:i||qa(u.checked)||u.checked===!0,children:e.jsx(We.span,{"data-state":g1(u.checked),"data-disabled":u.disabled?"":void 0,...o,ref:s,style:{pointerEvents:"none",...t.style}})})});f1.displayName=m1;var p1="CheckboxBubbleInput",x1=E.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:i,hasConsumerStoppedPropagationRef:o,checked:u,defaultChecked:h,required:l,disabled:d,name:f,value:p,form:m,bubbleInput:y,setBubbleInput:j}=tg(p1,t),S=Qe(n,j),w=Oc(u),g=Pc(i);E.useEffect(()=>{const b=y;if(!b)return;const _=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(_,"checked").set,D=!o.current;if(w!==u&&A){const R=new Event("click",{bubbles:D});b.indeterminate=qa(u),A.call(b,qa(u)?!1:u),b.dispatchEvent(R)}},[y,w,u,o]);const v=E.useRef(qa(u)?!1:u);return e.jsx(We.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??v.current,required:l,disabled:d,name:f,value:p,form:m,...s,tabIndex:-1,ref:S,style:{...s.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});x1.displayName=p1;function IL(t){return typeof t=="function"}function qa(t){return t==="indeterminate"}function g1(t){return qa(t)?"indeterminate":t?"checked":"unchecked"}function _i({className:t,...s}){return e.jsx(h1,{"data-slot":"checkbox",className:Ie("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(f1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(tt,{className:"size-3.5"})})})}var $L=qj[" useId ".trim().toString()]||(()=>{}),HL=0;function Xn(t){const[s,n]=E.useState($L());return Os(()=>{n(i=>i??String(HL++))},[t]),t||(s?`radix-${s}`:"")}function qs(t){const s=E.useRef(t);return E.useEffect(()=>{s.current=t}),E.useMemo(()=>(...n)=>s.current?.(...n),[])}function zL(t,s=globalThis?.document){const n=qs(t);E.useEffect(()=>{const i=o=>{o.key==="Escape"&&n(o)};return s.addEventListener("keydown",i,{capture:!0}),()=>s.removeEventListener("keydown",i,{capture:!0})},[n,s])}var FL="DismissableLayer",hx="dismissableLayer.update",UL="dismissableLayer.pointerDownOutside",WL="dismissableLayer.focusOutside",X_,v1=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gh=E.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:u,onInteractOutside:h,onDismiss:l,...d}=t,f=E.useContext(v1),[p,m]=E.useState(null),y=p?.ownerDocument??globalThis?.document,[,j]=E.useState({}),S=Qe(s,R=>m(R)),w=Array.from(f.layers),[g]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),v=w.indexOf(g),b=p?w.indexOf(p):-1,_=f.layersWithOutsidePointerEventsDisabled.size>0,C=b>=v,A=GL(R=>{const k=R.target,M=[...f.branches].some(I=>I.contains(k));!C||M||(o?.(R),h?.(R),R.defaultPrevented||l?.())},y),D=YL(R=>{const k=R.target;[...f.branches].some(I=>I.contains(k))||(u?.(R),h?.(R),R.defaultPrevented||l?.())},y);return zL(R=>{b===f.layers.size-1&&(i?.(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},y),E.useEffect(()=>{if(p)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(X_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),K_(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=X_)}},[p,y,n,f]),E.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),K_())},[p,f]),E.useEffect(()=>{const R=()=>j({});return document.addEventListener(hx,R),()=>document.removeEventListener(hx,R)},[]),e.jsx(We.div,{...d,ref:S,style:{pointerEvents:_?C?"auto":"none":void 0,...t.style},onFocusCapture:Pe(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Pe(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Pe(t.onPointerDownCapture,A.onPointerDownCapture)})});gh.displayName=FL;var VL="DismissableLayerBranch",qL=E.forwardRef((t,s)=>{const n=E.useContext(v1),i=E.useRef(null),o=Qe(s,i);return E.useEffect(()=>{const u=i.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),e.jsx(We.div,{...t,ref:o})});qL.displayName=VL;function GL(t,s=globalThis?.document){const n=qs(t),i=E.useRef(!1),o=E.useRef(()=>{});return E.useEffect(()=>{const u=l=>{if(l.target&&!i.current){let d=function(){y1(UL,n,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",o.current),o.current=d,s.addEventListener("click",o.current,{once:!0})):d()}else s.removeEventListener("click",o.current);i.current=!1},h=window.setTimeout(()=>{s.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(h),s.removeEventListener("pointerdown",u),s.removeEventListener("click",o.current)}},[s,n]),{onPointerDownCapture:()=>i.current=!0}}function YL(t,s=globalThis?.document){const n=qs(t),i=E.useRef(!1);return E.useEffect(()=>{const o=u=>{u.target&&!i.current&&y1(WL,n,{originalEvent:u},{discrete:!1})};return s.addEventListener("focusin",o),()=>s.removeEventListener("focusin",o)},[s,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function K_(){const t=new CustomEvent(hx);document.dispatchEvent(t)}function y1(t,s,n,{discrete:i}){const o=n.originalEvent.target,u=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&o.addEventListener(t,s,{once:!0}),i?OL(o,u):o.dispatchEvent(u)}var jp="focusScope.autoFocusOnMount",wp="focusScope.autoFocusOnUnmount",Q_={bubbles:!1,cancelable:!0},XL="FocusScope",sg=E.forwardRef((t,s)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:u,...h}=t,[l,d]=E.useState(null),f=qs(o),p=qs(u),m=E.useRef(null),y=Qe(s,w=>d(w)),j=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(i){let w=function(_){if(j.paused||!l)return;const C=_.target;l.contains(C)?m.current=C:$a(m.current,{select:!0})},g=function(_){if(j.paused||!l)return;const C=_.relatedTarget;C!==null&&(l.contains(C)||$a(m.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const A of _)A.removedNodes.length>0&&$a(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",g);const b=new MutationObserver(v);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",g),b.disconnect()}}},[i,l,j.paused]),E.useEffect(()=>{if(l){J_.add(j);const w=document.activeElement;if(!l.contains(w)){const v=new CustomEvent(jp,Q_);l.addEventListener(jp,f),l.dispatchEvent(v),v.defaultPrevented||(KL(t8(b1(l)),{select:!0}),document.activeElement===w&&$a(l))}return()=>{l.removeEventListener(jp,f),setTimeout(()=>{const v=new CustomEvent(wp,Q_);l.addEventListener(wp,p),l.dispatchEvent(v),v.defaultPrevented||$a(w??document.body,{select:!0}),l.removeEventListener(wp,p),J_.remove(j)},0)}}},[l,f,p,j]);const S=E.useCallback(w=>{if(!n&&!i||j.paused)return;const g=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,v=document.activeElement;if(g&&v){const b=w.currentTarget,[_,C]=QL(b);_&&C?!w.shiftKey&&v===C?(w.preventDefault(),n&&$a(_,{select:!0})):w.shiftKey&&v===_&&(w.preventDefault(),n&&$a(C,{select:!0})):v===b&&w.preventDefault()}},[n,i,j.paused]);return e.jsx(We.div,{tabIndex:-1,...h,ref:y,onKeyDown:S})});sg.displayName=XL;function KL(t,{select:s=!1}={}){const n=document.activeElement;for(const i of t)if($a(i,{select:s}),document.activeElement!==n)return}function QL(t){const s=b1(t),n=Z_(s,t),i=Z_(s.reverse(),t);return[n,i]}function b1(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function Z_(t,s){for(const n of t)if(!ZL(n,{upTo:s}))return n}function ZL(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function JL(t){return t instanceof HTMLInputElement&&"select"in t}function $a(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&JL(t)&&s&&t.select()}}var J_=e8();function e8(){let t=[];return{add(s){const n=t[0];s!==n&&n?.pause(),t=ej(t,s),t.unshift(s)},remove(s){t=ej(t,s),t[0]?.resume()}}}function ej(t,s){const n=[...t],i=n.indexOf(s);return i!==-1&&n.splice(i,1),n}function t8(t){return t.filter(s=>s.tagName!=="A")}var s8="Portal",vh=E.forwardRef((t,s)=>{const{container:n,...i}=t,[o,u]=E.useState(!1);Os(()=>u(!0),[]);const h=n||o&&globalThis?.document?.body;return h?Qw.createPortal(e.jsx(We.div,{...i,ref:s}),h):null});vh.displayName=s8;var Sp=0;function _1(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??tj()),document.body.insertAdjacentElement("beforeend",t[1]??tj()),Sp++,()=>{Sp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Sp--}},[])}function tj(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var un=function(){return un=Object.assign||function(s){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(s[u]=n[u])}return s},un.apply(this,arguments)};function j1(t,s){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)s.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function r8(t,s,n){if(n||arguments.length===2)for(var i=0,o=s.length,u;i<o;i++)(u||!(i in s))&&(u||(u=Array.prototype.slice.call(s,0,i)),u[i]=s[i]);return t.concat(u||Array.prototype.slice.call(s))}var Du="right-scroll-bar-position",Mu="width-before-scroll-bar",n8="with-scroll-bars-hidden",a8="--removed-body-scroll-bar-size";function Np(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function i8(t,s){var n=E.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(i){var o=n.value;o!==i&&(n.value=i,n.callback(i,o))}}}})[0];return n.callback=s,n.facade}var o8=typeof window<"u"?E.useLayoutEffect:E.useEffect,sj=new WeakMap;function l8(t,s){var n=i8(null,function(i){return t.forEach(function(o){return Np(o,i)})});return o8(function(){var i=sj.get(n);if(i){var o=new Set(i),u=new Set(t),h=n.current;o.forEach(function(l){u.has(l)||Np(l,null)}),u.forEach(function(l){o.has(l)||Np(l,h)})}sj.set(n,t)},[t]),n}function c8(t){return t}function d8(t,s){s===void 0&&(s=c8);var n=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(u){var h=s(u,i);return n.push(h),function(){n=n.filter(function(l){return l!==h})}},assignSyncMedium:function(u){for(i=!0;n.length;){var h=n;n=[],h.forEach(u)}n={push:function(l){return u(l)},filter:function(){return n}}},assignMedium:function(u){i=!0;var h=[];if(n.length){var l=n;n=[],l.forEach(u),h=n}var d=function(){var p=h;h=[],p.forEach(u)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(p){h.push(p),f()},filter:function(p){return h=h.filter(p),n}}}};return o}function u8(t){t===void 0&&(t={});var s=d8(null);return s.options=un({async:!0,ssr:!1},t),s}var w1=function(t){var s=t.sideCar,n=j1(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=s.read();if(!i)throw new Error("Sidecar medium not found");return E.createElement(i,un({},n))};w1.isSideCarExport=!0;function h8(t,s){return t.useMedium(s),w1}var S1=u8(),Cp=function(){},yh=E.forwardRef(function(t,s){var n=E.useRef(null),i=E.useState({onScrollCapture:Cp,onWheelCapture:Cp,onTouchMoveCapture:Cp}),o=i[0],u=i[1],h=t.forwardProps,l=t.children,d=t.className,f=t.removeScrollBar,p=t.enabled,m=t.shards,y=t.sideCar,j=t.noRelative,S=t.noIsolation,w=t.inert,g=t.allowPinchZoom,v=t.as,b=v===void 0?"div":v,_=t.gapMode,C=j1(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=y,D=l8([n,s]),R=un(un({},C),o);return E.createElement(E.Fragment,null,p&&E.createElement(A,{sideCar:S1,removeScrollBar:f,shards:m,noRelative:j,noIsolation:S,inert:w,setCallbacks:u,allowPinchZoom:!!g,lockRef:n,gapMode:_}),h?E.cloneElement(E.Children.only(l),un(un({},R),{ref:D})):E.createElement(b,un({},R,{className:d,ref:D}),l))});yh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yh.classNames={fullWidth:Mu,zeroRight:Du};var m8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function f8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=m8();return s&&t.setAttribute("nonce",s),t}function p8(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function x8(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var g8=function(){var t=0,s=null;return{add:function(n){t==0&&(s=f8())&&(p8(s,n),x8(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},v8=function(){var t=g8();return function(s,n){E.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},N1=function(){var t=v8(),s=function(n){var i=n.styles,o=n.dynamic;return t(i,o),null};return s},y8={left:0,top:0,right:0,gap:0},Ep=function(t){return parseInt(t||"",10)||0},b8=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],i=s[t==="padding"?"paddingTop":"marginTop"],o=s[t==="padding"?"paddingRight":"marginRight"];return[Ep(n),Ep(i),Ep(o)]},_8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return y8;var s=b8(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,i-n+s[2]-s[0])}},j8=N1(),Bo="data-scroll-locked",w8=function(t,s,n,i){var o=t.left,u=t.top,h=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(n8,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(Bo,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Du,` {
    right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(Mu,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(Du," .").concat(Du,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Mu," .").concat(Mu,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Bo,`] {
    `).concat(a8,": ").concat(l,`px;
  }
`)},rj=function(){var t=parseInt(document.body.getAttribute(Bo)||"0",10);return isFinite(t)?t:0},S8=function(){E.useEffect(function(){return document.body.setAttribute(Bo,(rj()+1).toString()),function(){var t=rj()-1;t<=0?document.body.removeAttribute(Bo):document.body.setAttribute(Bo,t.toString())}},[])},N8=function(t){var s=t.noRelative,n=t.noImportant,i=t.gapMode,o=i===void 0?"margin":i;S8();var u=E.useMemo(function(){return _8(o)},[o]);return E.createElement(j8,{styles:w8(u,!s,o,n?"":"!important")})},mx=!1;if(typeof window<"u")try{var xu=Object.defineProperty({},"passive",{get:function(){return mx=!0,!0}});window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{mx=!1}var bo=mx?{passive:!1}:!1,C8=function(t){return t.tagName==="TEXTAREA"},C1=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!C8(t)&&n[s]==="visible")},E8=function(t){return C1(t,"overflowY")},k8=function(t){return C1(t,"overflowX")},nj=function(t,s){var n=s.ownerDocument,i=s;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var o=E1(t,i);if(o){var u=k1(t,i),h=u[1],l=u[2];if(h>l)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},A8=function(t){var s=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[s,n,i]},T8=function(t){var s=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[s,n,i]},E1=function(t,s){return t==="v"?E8(s):k8(s)},k1=function(t,s){return t==="v"?A8(s):T8(s)},R8=function(t,s){return t==="h"&&s==="rtl"?-1:1},D8=function(t,s,n,i,o){var u=R8(t,window.getComputedStyle(s).direction),h=u*i,l=n.target,d=s.contains(l),f=!1,p=h>0,m=0,y=0;do{if(!l)break;var j=k1(t,l),S=j[0],w=j[1],g=j[2],v=w-g-u*S;(S||v)&&E1(t,l)&&(m+=v,y+=S);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!d&&l!==document.body||d&&(s.contains(l)||s===l));return(p&&Math.abs(m)<1||!p&&Math.abs(y)<1)&&(f=!0),f},gu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},aj=function(t){return[t.deltaX,t.deltaY]},ij=function(t){return t&&"current"in t?t.current:t},M8=function(t,s){return t[0]===s[0]&&t[1]===s[1]},O8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},P8=0,_o=[];function L8(t){var s=E.useRef([]),n=E.useRef([0,0]),i=E.useRef(),o=E.useState(P8++)[0],u=E.useState(N1)[0],h=E.useRef(t);E.useEffect(function(){h.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var w=r8([t.lockRef.current],(t.shards||[]).map(ij),!0).filter(Boolean);return w.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),w.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var l=E.useCallback(function(w,g){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!h.current.allowPinchZoom;var v=gu(w),b=n.current,_="deltaX"in w?w.deltaX:b[0]-v[0],C="deltaY"in w?w.deltaY:b[1]-v[1],A,D=w.target,R=Math.abs(_)>Math.abs(C)?"h":"v";if("touches"in w&&R==="h"&&D.type==="range")return!1;var k=nj(R,D);if(!k)return!0;if(k?A=R:(A=R==="v"?"h":"v",k=nj(R,D)),!k)return!1;if(!i.current&&"changedTouches"in w&&(_||C)&&(i.current=A),!A)return!0;var M=i.current||A;return D8(M,g,w,M==="h"?_:C)},[]),d=E.useCallback(function(w){var g=w;if(!(!_o.length||_o[_o.length-1]!==u)){var v="deltaY"in g?aj(g):gu(g),b=s.current.filter(function(A){return A.name===g.type&&(A.target===g.target||g.target===A.shadowParent)&&M8(A.delta,v)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var _=(h.current.shards||[]).map(ij).filter(Boolean).filter(function(A){return A.contains(g.target)}),C=_.length>0?l(g,_[0]):!h.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),f=E.useCallback(function(w,g,v,b){var _={name:w,delta:g,target:v,should:b,shadowParent:B8(v)};s.current.push(_),setTimeout(function(){s.current=s.current.filter(function(C){return C!==_})},1)},[]),p=E.useCallback(function(w){n.current=gu(w),i.current=void 0},[]),m=E.useCallback(function(w){f(w.type,aj(w),w.target,l(w,t.lockRef.current))},[]),y=E.useCallback(function(w){f(w.type,gu(w),w.target,l(w,t.lockRef.current))},[]);E.useEffect(function(){return _o.push(u),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,bo),document.addEventListener("touchmove",d,bo),document.addEventListener("touchstart",p,bo),function(){_o=_o.filter(function(w){return w!==u}),document.removeEventListener("wheel",d,bo),document.removeEventListener("touchmove",d,bo),document.removeEventListener("touchstart",p,bo)}},[]);var j=t.removeScrollBar,S=t.inert;return E.createElement(E.Fragment,null,S?E.createElement(u,{styles:O8(o)}):null,j?E.createElement(N8,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function B8(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const I8=h8(S1,L8);var rg=E.forwardRef(function(t,s){return E.createElement(yh,un({},t,{ref:s,sideCar:I8}))});rg.classNames=yh.classNames;var $8=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},jo=new WeakMap,vu=new WeakMap,yu={},kp=0,A1=function(t){return t&&(t.host||A1(t.parentNode))},H8=function(t,s){return s.map(function(n){if(t.contains(n))return n;var i=A1(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},z8=function(t,s,n,i){var o=H8(s,Array.isArray(t)?t:[t]);yu[n]||(yu[n]=new WeakMap);var u=yu[n],h=[],l=new Set,d=new Set(o),f=function(m){!m||l.has(m)||(l.add(m),f(m.parentNode))};o.forEach(f);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(l.has(y))p(y);else try{var j=y.getAttribute(i),S=j!==null&&j!=="false",w=(jo.get(y)||0)+1,g=(u.get(y)||0)+1;jo.set(y,w),u.set(y,g),h.push(y),w===1&&S&&vu.set(y,!0),g===1&&y.setAttribute(n,"true"),S||y.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",y,v)}})};return p(s),l.clear(),kp++,function(){h.forEach(function(m){var y=jo.get(m)-1,j=u.get(m)-1;jo.set(m,y),u.set(m,j),y||(vu.has(m)||m.removeAttribute(i),vu.delete(m)),j||m.removeAttribute(n)}),kp--,kp||(jo=new WeakMap,jo=new WeakMap,vu=new WeakMap,yu={})}},T1=function(t,s,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),o=$8(t);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),z8(i,o,n,"aria-hidden")):function(){return null}},bh="Dialog",[R1]=yr(bh),[F8,en]=R1(bh),D1=t=>{const{__scopeDialog:s,children:n,open:i,defaultOpen:o,onOpenChange:u,modal:h=!0}=t,l=E.useRef(null),d=E.useRef(null),[f,p]=xn({prop:i,defaultProp:o??!1,onChange:u,caller:bh});return e.jsx(F8,{scope:s,triggerRef:l,contentRef:d,contentId:Xn(),titleId:Xn(),descriptionId:Xn(),open:f,onOpenChange:p,onOpenToggle:E.useCallback(()=>p(m=>!m),[p]),modal:h,children:n})};D1.displayName=bh;var M1="DialogTrigger",U8=E.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=en(M1,n),u=Qe(s,o.triggerRef);return e.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ig(o.open),...i,ref:u,onClick:Pe(t.onClick,o.onOpenToggle)})});U8.displayName=M1;var ng="DialogPortal",[W8,O1]=R1(ng,{forceMount:void 0}),P1=t=>{const{__scopeDialog:s,forceMount:n,children:i,container:o}=t,u=en(ng,s);return e.jsx(W8,{scope:s,forceMount:n,children:E.Children.map(i,h=>e.jsx(br,{present:n||u.open,children:e.jsx(vh,{asChild:!0,container:o,children:h})}))})};P1.displayName=ng;var Qu="DialogOverlay",L1=E.forwardRef((t,s)=>{const n=O1(Qu,t.__scopeDialog),{forceMount:i=n.forceMount,...o}=t,u=en(Qu,t.__scopeDialog);return u.modal?e.jsx(br,{present:i||u.open,children:e.jsx(q8,{...o,ref:s})}):null});L1.displayName=Qu;var V8=qo("DialogOverlay.RemoveScroll"),q8=E.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=en(Qu,n);return e.jsx(rg,{as:V8,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(We.div,{"data-state":ig(o.open),...i,ref:s,style:{pointerEvents:"auto",...i.style}})})}),Ti="DialogContent",B1=E.forwardRef((t,s)=>{const n=O1(Ti,t.__scopeDialog),{forceMount:i=n.forceMount,...o}=t,u=en(Ti,t.__scopeDialog);return e.jsx(br,{present:i||u.open,children:u.modal?e.jsx(G8,{...o,ref:s}):e.jsx(Y8,{...o,ref:s})})});B1.displayName=Ti;var G8=E.forwardRef((t,s)=>{const n=en(Ti,t.__scopeDialog),i=E.useRef(null),o=Qe(s,n.contentRef,i);return E.useEffect(()=>{const u=i.current;if(u)return T1(u)},[]),e.jsx(I1,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(t.onCloseAutoFocus,u=>{u.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Pe(t.onPointerDownOutside,u=>{const h=u.detail.originalEvent,l=h.button===0&&h.ctrlKey===!0;(h.button===2||l)&&u.preventDefault()}),onFocusOutside:Pe(t.onFocusOutside,u=>u.preventDefault())})}),Y8=E.forwardRef((t,s)=>{const n=en(Ti,t.__scopeDialog),i=E.useRef(!1),o=E.useRef(!1);return e.jsx(I1,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{t.onCloseAutoFocus?.(u),u.defaultPrevented||(i.current||n.triggerRef.current?.focus(),u.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:u=>{t.onInteractOutside?.(u),u.defaultPrevented||(i.current=!0,u.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const h=u.target;n.triggerRef.current?.contains(h)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&o.current&&u.preventDefault()}})}),I1=E.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:u,...h}=t,l=en(Ti,n),d=E.useRef(null),f=Qe(s,d);return _1(),e.jsxs(e.Fragment,{children:[e.jsx(sg,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:u,children:e.jsx(gh,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ig(l.open),...h,ref:f,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(X8,{titleId:l.titleId}),e.jsx(Q8,{contentRef:d,descriptionId:l.descriptionId})]})]})}),ag="DialogTitle",$1=E.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=en(ag,n);return e.jsx(We.h2,{id:o.titleId,...i,ref:s})});$1.displayName=ag;var H1="DialogDescription",z1=E.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=en(H1,n);return e.jsx(We.p,{id:o.descriptionId,...i,ref:s})});z1.displayName=H1;var F1="DialogClose",U1=E.forwardRef((t,s)=>{const{__scopeDialog:n,...i}=t,o=en(F1,n);return e.jsx(We.button,{type:"button",...i,ref:s,onClick:Pe(t.onClick,()=>o.onOpenChange(!1))})});U1.displayName=F1;function ig(t){return t?"open":"closed"}var W1="DialogTitleWarning",[YF,V1]=NL(W1,{contentName:Ti,titleName:ag,docsSlug:"dialog"}),X8=({titleId:t})=>{const s=V1(W1),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},K8="DialogDescriptionWarning",Q8=({contentRef:t,descriptionId:s})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${V1(K8).contentName}}.`;return E.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");s&&o&&(document.getElementById(s)||console.warn(i))},[i,t,s]),null},Z8=D1,J8=P1,eB=L1,tB=B1,sB=$1,rB=z1,nB=U1;function sa({...t}){return e.jsx(Z8,{"data-slot":"dialog",...t})}function aB({...t}){return e.jsx(J8,{"data-slot":"dialog-portal",...t})}function iB({className:t,...s}){return e.jsx(eB,{"data-slot":"dialog-overlay",className:Ie("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function ra({className:t,children:s,...n}){return e.jsxs(aB,{"data-slot":"dialog-portal",children:[e.jsx(iB,{}),e.jsxs(tB,{"data-slot":"dialog-content",className:Ie("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,e.jsxs(nB,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ds,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function na({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:Ie("flex flex-col gap-2 text-center sm:text-left",t),...s})}function aa({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-footer",className:Ie("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function ia({className:t,...s}){return e.jsx(sB,{"data-slot":"dialog-title",className:Ie("text-lg leading-none font-semibold",t),...s})}function el({className:t,...s}){return e.jsx(rB,{"data-slot":"dialog-description",className:Ie("text-muted-foreground text-sm",t),...s})}function je({className:t,type:s,...n}){return e.jsx("input",{type:s,"data-slot":"input",className:Ie("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var oB="Label",q1=E.forwardRef((t,s)=>e.jsx(We.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));q1.displayName=oB;var lB=q1;function re({className:t,...s}){return e.jsx(lB,{"data-slot":"label",className:Ie("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function Nc(t,[s,n]){return Math.min(n,Math.max(s,t))}function og(t){const s=t+"CollectionProvider",[n,i]=yr(s),[o,u]=n(s,{collectionRef:{current:null},itemMap:new Map}),h=w=>{const{scope:g,children:v}=w,b=ae.useRef(null),_=ae.useRef(new Map).current;return e.jsx(o,{scope:g,itemMap:_,collectionRef:b,children:v})};h.displayName=s;const l=t+"CollectionSlot",d=qo(l),f=ae.forwardRef((w,g)=>{const{scope:v,children:b}=w,_=u(l,v),C=Qe(g,_.collectionRef);return e.jsx(d,{ref:C,children:b})});f.displayName=l;const p=t+"CollectionItemSlot",m="data-radix-collection-item",y=qo(p),j=ae.forwardRef((w,g)=>{const{scope:v,children:b,..._}=w,C=ae.useRef(null),A=Qe(g,C),D=u(p,v);return ae.useEffect(()=>(D.itemMap.set(C,{ref:C,..._}),()=>void D.itemMap.delete(C))),e.jsx(y,{[m]:"",ref:A,children:b})});j.displayName=p;function S(w){const g=u(t+"CollectionConsumer",w);return ae.useCallback(()=>{const b=g.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(g.itemMap.values()).sort((D,R)=>_.indexOf(D.ref.current)-_.indexOf(R.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:h,Slot:f,ItemSlot:j},S,i]}var cB=E.createContext(void 0);function tl(t){const s=E.useContext(cB);return t||s||"ltr"}const dB=["top","right","bottom","left"],Ya=Math.min,mr=Math.max,Zu=Math.round,bu=Math.floor,pn=t=>({x:t,y:t}),uB={left:"right",right:"left",bottom:"top",top:"bottom"},hB={start:"end",end:"start"};function fx(t,s,n){return mr(t,Ya(s,n))}function Jn(t,s){return typeof t=="function"?t(s):t}function ea(t){return t.split("-")[0]}function sl(t){return t.split("-")[1]}function lg(t){return t==="x"?"y":"x"}function cg(t){return t==="y"?"height":"width"}const mB=new Set(["top","bottom"]);function hn(t){return mB.has(ea(t))?"y":"x"}function dg(t){return lg(hn(t))}function fB(t,s,n){n===void 0&&(n=!1);const i=sl(t),o=dg(t),u=cg(o);let h=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return s.reference[u]>s.floating[u]&&(h=Ju(h)),[h,Ju(h)]}function pB(t){const s=Ju(t);return[px(t),s,px(s)]}function px(t){return t.replace(/start|end/g,s=>hB[s])}const oj=["left","right"],lj=["right","left"],xB=["top","bottom"],gB=["bottom","top"];function vB(t,s,n){switch(t){case"top":case"bottom":return n?s?lj:oj:s?oj:lj;case"left":case"right":return s?xB:gB;default:return[]}}function yB(t,s,n,i){const o=sl(t);let u=vB(ea(t),n==="start",i);return o&&(u=u.map(h=>h+"-"+o),s&&(u=u.concat(u.map(px)))),u}function Ju(t){return t.replace(/left|right|bottom|top/g,s=>uB[s])}function bB(t){return{top:0,right:0,bottom:0,left:0,...t}}function G1(t){return typeof t!="number"?bB(t):{top:t,right:t,bottom:t,left:t}}function eh(t){const{x:s,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:s,right:s+i,bottom:n+o,x:s,y:n}}function cj(t,s,n){let{reference:i,floating:o}=t;const u=hn(s),h=dg(s),l=cg(h),d=ea(s),f=u==="y",p=i.x+i.width/2-o.width/2,m=i.y+i.height/2-o.height/2,y=i[l]/2-o[l]/2;let j;switch(d){case"top":j={x:p,y:i.y-o.height};break;case"bottom":j={x:p,y:i.y+i.height};break;case"right":j={x:i.x+i.width,y:m};break;case"left":j={x:i.x-o.width,y:m};break;default:j={x:i.x,y:i.y}}switch(sl(s)){case"start":j[h]-=y*(n&&f?-1:1);break;case"end":j[h]+=y*(n&&f?-1:1);break}return j}const _B=async(t,s,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:u=[],platform:h}=n,l=u.filter(Boolean),d=await(h.isRTL==null?void 0:h.isRTL(s));let f=await h.getElementRects({reference:t,floating:s,strategy:o}),{x:p,y:m}=cj(f,i,d),y=i,j={},S=0;for(let w=0;w<l.length;w++){const{name:g,fn:v}=l[w],{x:b,y:_,data:C,reset:A}=await v({x:p,y:m,initialPlacement:i,placement:y,strategy:o,middlewareData:j,rects:f,platform:h,elements:{reference:t,floating:s}});p=b??p,m=_??m,j={...j,[g]:{...j[g],...C}},A&&S<=50&&(S++,typeof A=="object"&&(A.placement&&(y=A.placement),A.rects&&(f=A.rects===!0?await h.getElementRects({reference:t,floating:s,strategy:o}):A.rects),{x:p,y:m}=cj(f,y,d)),w=-1)}return{x:p,y:m,placement:y,strategy:o,middlewareData:j}};async function Cc(t,s){var n;s===void 0&&(s={});const{x:i,y:o,platform:u,rects:h,elements:l,strategy:d}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:j=0}=Jn(s,t),S=G1(j),g=l[y?m==="floating"?"reference":"floating":m],v=eh(await u.getClippingRect({element:(n=await(u.isElement==null?void 0:u.isElement(g)))==null||n?g:g.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(l.floating)),boundary:f,rootBoundary:p,strategy:d})),b=m==="floating"?{x:i,y:o,width:h.floating.width,height:h.floating.height}:h.reference,_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(l.floating)),C=await(u.isElement==null?void 0:u.isElement(_))?await(u.getScale==null?void 0:u.getScale(_))||{x:1,y:1}:{x:1,y:1},A=eh(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:_,strategy:d}):b);return{top:(v.top-A.top+S.top)/C.y,bottom:(A.bottom-v.bottom+S.bottom)/C.y,left:(v.left-A.left+S.left)/C.x,right:(A.right-v.right+S.right)/C.x}}const jB=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:i,placement:o,rects:u,platform:h,elements:l,middlewareData:d}=s,{element:f,padding:p=0}=Jn(t,s)||{};if(f==null)return{};const m=G1(p),y={x:n,y:i},j=dg(o),S=cg(j),w=await h.getDimensions(f),g=j==="y",v=g?"top":"left",b=g?"bottom":"right",_=g?"clientHeight":"clientWidth",C=u.reference[S]+u.reference[j]-y[j]-u.floating[S],A=y[j]-u.reference[j],D=await(h.getOffsetParent==null?void 0:h.getOffsetParent(f));let R=D?D[_]:0;(!R||!await(h.isElement==null?void 0:h.isElement(D)))&&(R=l.floating[_]||u.floating[S]);const k=C/2-A/2,M=R/2-w[S]/2-1,I=Ya(m[v],M),q=Ya(m[b],M),W=I,G=R-w[S]-q,$=R/2-w[S]/2+k,F=fx(W,$,G),B=!d.arrow&&sl(o)!=null&&$!==F&&u.reference[S]/2-($<W?I:q)-w[S]/2<0,V=B?$<W?$-W:$-G:0;return{[j]:y[j]+V,data:{[j]:F,centerOffset:$-F-V,...B&&{alignmentOffset:V}},reset:B}}}),wB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,i;const{placement:o,middlewareData:u,rects:h,initialPlacement:l,platform:d,elements:f}=s,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:w=!0,...g}=Jn(t,s);if((n=u.arrow)!=null&&n.alignmentOffset)return{};const v=ea(o),b=hn(l),_=ea(l)===l,C=await(d.isRTL==null?void 0:d.isRTL(f.floating)),A=y||(_||!w?[Ju(l)]:pB(l)),D=S!=="none";!y&&D&&A.push(...yB(l,w,S,C));const R=[l,...A],k=await Cc(s,g),M=[];let I=((i=u.flip)==null?void 0:i.overflows)||[];if(p&&M.push(k[v]),m){const $=fB(o,h,C);M.push(k[$[0]],k[$[1]])}if(I=[...I,{placement:o,overflows:M}],!M.every($=>$<=0)){var q,W;const $=(((q=u.flip)==null?void 0:q.index)||0)+1,F=R[$];if(F&&(!(m==="alignment"?b!==hn(F):!1)||I.every(O=>hn(O.placement)===b?O.overflows[0]>0:!0)))return{data:{index:$,overflows:I},reset:{placement:F}};let B=(W=I.filter(V=>V.overflows[0]<=0).sort((V,O)=>V.overflows[1]-O.overflows[1])[0])==null?void 0:W.placement;if(!B)switch(j){case"bestFit":{var G;const V=(G=I.filter(O=>{if(D){const H=hn(O.placement);return H===b||H==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(H=>H>0).reduce((H,U)=>H+U,0)]).sort((O,H)=>O[1]-H[1])[0])==null?void 0:G[0];V&&(B=V);break}case"initialPlacement":B=l;break}if(o!==B)return{reset:{placement:B}}}return{}}}};function dj(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function uj(t){return dB.some(s=>t[s]>=0)}const SB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:i="referenceHidden",...o}=Jn(t,s);switch(i){case"referenceHidden":{const u=await Cc(s,{...o,elementContext:"reference"}),h=dj(u,n.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:uj(h)}}}case"escaped":{const u=await Cc(s,{...o,altBoundary:!0}),h=dj(u,n.floating);return{data:{escapedOffsets:h,escaped:uj(h)}}}default:return{}}}}},Y1=new Set(["left","top"]);async function NB(t,s){const{placement:n,platform:i,elements:o}=t,u=await(i.isRTL==null?void 0:i.isRTL(o.floating)),h=ea(n),l=sl(n),d=hn(n)==="y",f=Y1.has(h)?-1:1,p=u&&d?-1:1,m=Jn(s,t);let{mainAxis:y,crossAxis:j,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof S=="number"&&(j=l==="end"?S*-1:S),d?{x:j*p,y:y*f}:{x:y*f,y:j*p}}const CB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,i;const{x:o,y:u,placement:h,middlewareData:l}=s,d=await NB(s,t);return h===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:o+d.x,y:u+d.y,data:{...d,placement:h}}}}},EB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:i,placement:o}=s,{mainAxis:u=!0,crossAxis:h=!1,limiter:l={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...d}=Jn(t,s),f={x:n,y:i},p=await Cc(s,d),m=hn(ea(o)),y=lg(m);let j=f[y],S=f[m];if(u){const g=y==="y"?"top":"left",v=y==="y"?"bottom":"right",b=j+p[g],_=j-p[v];j=fx(b,j,_)}if(h){const g=m==="y"?"top":"left",v=m==="y"?"bottom":"right",b=S+p[g],_=S-p[v];S=fx(b,S,_)}const w=l.fn({...s,[y]:j,[m]:S});return{...w,data:{x:w.x-n,y:w.y-i,enabled:{[y]:u,[m]:h}}}}}},kB=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:i,placement:o,rects:u,middlewareData:h}=s,{offset:l=0,mainAxis:d=!0,crossAxis:f=!0}=Jn(t,s),p={x:n,y:i},m=hn(o),y=lg(m);let j=p[y],S=p[m];const w=Jn(l,s),g=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const _=y==="y"?"height":"width",C=u.reference[y]-u.floating[_]+g.mainAxis,A=u.reference[y]+u.reference[_]-g.mainAxis;j<C?j=C:j>A&&(j=A)}if(f){var v,b;const _=y==="y"?"width":"height",C=Y1.has(ea(o)),A=u.reference[m]-u.floating[_]+(C&&((v=h.offset)==null?void 0:v[m])||0)+(C?0:g.crossAxis),D=u.reference[m]+u.reference[_]+(C?0:((b=h.offset)==null?void 0:b[m])||0)-(C?g.crossAxis:0);S<A?S=A:S>D&&(S=D)}return{[y]:j,[m]:S}}}},AB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,i;const{placement:o,rects:u,platform:h,elements:l}=s,{apply:d=()=>{},...f}=Jn(t,s),p=await Cc(s,f),m=ea(o),y=sl(o),j=hn(o)==="y",{width:S,height:w}=u.floating;let g,v;m==="top"||m==="bottom"?(g=m,v=y===(await(h.isRTL==null?void 0:h.isRTL(l.floating))?"start":"end")?"left":"right"):(v=m,g=y==="end"?"top":"bottom");const b=w-p.top-p.bottom,_=S-p.left-p.right,C=Ya(w-p[g],b),A=Ya(S-p[v],_),D=!s.middlewareData.shift;let R=C,k=A;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(k=_),(i=s.middlewareData.shift)!=null&&i.enabled.y&&(R=b),D&&!y){const I=mr(p.left,0),q=mr(p.right,0),W=mr(p.top,0),G=mr(p.bottom,0);j?k=S-2*(I!==0||q!==0?I+q:mr(p.left,p.right)):R=w-2*(W!==0||G!==0?W+G:mr(p.top,p.bottom))}await d({...s,availableWidth:k,availableHeight:R});const M=await h.getDimensions(l.floating);return S!==M.width||w!==M.height?{reset:{rects:!0}}:{}}}};function _h(){return typeof window<"u"}function rl(t){return X1(t)?(t.nodeName||"").toLowerCase():"#document"}function pr(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function yn(t){var s;return(s=(X1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function X1(t){return _h()?t instanceof Node||t instanceof pr(t).Node:!1}function Qr(t){return _h()?t instanceof Element||t instanceof pr(t).Element:!1}function gn(t){return _h()?t instanceof HTMLElement||t instanceof pr(t).HTMLElement:!1}function hj(t){return!_h()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof pr(t).ShadowRoot}const TB=new Set(["inline","contents"]);function Lc(t){const{overflow:s,overflowX:n,overflowY:i,display:o}=Zr(t);return/auto|scroll|overlay|hidden|clip/.test(s+i+n)&&!TB.has(o)}const RB=new Set(["table","td","th"]);function DB(t){return RB.has(rl(t))}const MB=[":popover-open",":modal"];function jh(t){return MB.some(s=>{try{return t.matches(s)}catch{return!1}})}const OB=["transform","translate","scale","rotate","perspective"],PB=["transform","translate","scale","rotate","perspective","filter"],LB=["paint","layout","strict","content"];function ug(t){const s=hg(),n=Qr(t)?Zr(t):t;return OB.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||PB.some(i=>(n.willChange||"").includes(i))||LB.some(i=>(n.contain||"").includes(i))}function BB(t){let s=Xa(t);for(;gn(s)&&!Go(s);){if(ug(s))return s;if(jh(s))return null;s=Xa(s)}return null}function hg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const IB=new Set(["html","body","#document"]);function Go(t){return IB.has(rl(t))}function Zr(t){return pr(t).getComputedStyle(t)}function wh(t){return Qr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Xa(t){if(rl(t)==="html")return t;const s=t.assignedSlot||t.parentNode||hj(t)&&t.host||yn(t);return hj(s)?s.host:s}function K1(t){const s=Xa(t);return Go(s)?t.ownerDocument?t.ownerDocument.body:t.body:gn(s)&&Lc(s)?s:K1(s)}function Ec(t,s,n){var i;s===void 0&&(s=[]),n===void 0&&(n=!0);const o=K1(t),u=o===((i=t.ownerDocument)==null?void 0:i.body),h=pr(o);if(u){const l=xx(h);return s.concat(h,h.visualViewport||[],Lc(o)?o:[],l&&n?Ec(l):[])}return s.concat(o,Ec(o,[],n))}function xx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Q1(t){const s=Zr(t);let n=parseFloat(s.width)||0,i=parseFloat(s.height)||0;const o=gn(t),u=o?t.offsetWidth:n,h=o?t.offsetHeight:i,l=Zu(n)!==u||Zu(i)!==h;return l&&(n=u,i=h),{width:n,height:i,$:l}}function mg(t){return Qr(t)?t:t.contextElement}function Io(t){const s=mg(t);if(!gn(s))return pn(1);const n=s.getBoundingClientRect(),{width:i,height:o,$:u}=Q1(s);let h=(u?Zu(n.width):n.width)/i,l=(u?Zu(n.height):n.height)/o;return(!h||!Number.isFinite(h))&&(h=1),(!l||!Number.isFinite(l))&&(l=1),{x:h,y:l}}const $B=pn(0);function Z1(t){const s=pr(t);return!hg()||!s.visualViewport?$B:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function HB(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==pr(t)?!1:s}function Ri(t,s,n,i){s===void 0&&(s=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),u=mg(t);let h=pn(1);s&&(i?Qr(i)&&(h=Io(i)):h=Io(t));const l=HB(u,n,i)?Z1(u):pn(0);let d=(o.left+l.x)/h.x,f=(o.top+l.y)/h.y,p=o.width/h.x,m=o.height/h.y;if(u){const y=pr(u),j=i&&Qr(i)?pr(i):i;let S=y,w=xx(S);for(;w&&i&&j!==S;){const g=Io(w),v=w.getBoundingClientRect(),b=Zr(w),_=v.left+(w.clientLeft+parseFloat(b.paddingLeft))*g.x,C=v.top+(w.clientTop+parseFloat(b.paddingTop))*g.y;d*=g.x,f*=g.y,p*=g.x,m*=g.y,d+=_,f+=C,S=pr(w),w=xx(S)}}return eh({width:p,height:m,x:d,y:f})}function Sh(t,s){const n=wh(t).scrollLeft;return s?s.left+n:Ri(yn(t)).left+n}function J1(t,s){const n=t.getBoundingClientRect(),i=n.left+s.scrollLeft-Sh(t,n),o=n.top+s.scrollTop;return{x:i,y:o}}function zB(t){let{elements:s,rect:n,offsetParent:i,strategy:o}=t;const u=o==="fixed",h=yn(i),l=s?jh(s.floating):!1;if(i===h||l&&u)return n;let d={scrollLeft:0,scrollTop:0},f=pn(1);const p=pn(0),m=gn(i);if((m||!m&&!u)&&((rl(i)!=="body"||Lc(h))&&(d=wh(i)),gn(i))){const j=Ri(i);f=Io(i),p.x=j.x+i.clientLeft,p.y=j.y+i.clientTop}const y=h&&!m&&!u?J1(h,d):pn(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+p.x+y.x,y:n.y*f.y-d.scrollTop*f.y+p.y+y.y}}function FB(t){return Array.from(t.getClientRects())}function UB(t){const s=yn(t),n=wh(t),i=t.ownerDocument.body,o=mr(s.scrollWidth,s.clientWidth,i.scrollWidth,i.clientWidth),u=mr(s.scrollHeight,s.clientHeight,i.scrollHeight,i.clientHeight);let h=-n.scrollLeft+Sh(t);const l=-n.scrollTop;return Zr(i).direction==="rtl"&&(h+=mr(s.clientWidth,i.clientWidth)-o),{width:o,height:u,x:h,y:l}}const mj=25;function WB(t,s){const n=pr(t),i=yn(t),o=n.visualViewport;let u=i.clientWidth,h=i.clientHeight,l=0,d=0;if(o){u=o.width,h=o.height;const p=hg();(!p||p&&s==="fixed")&&(l=o.offsetLeft,d=o.offsetTop)}const f=Sh(i);if(f<=0){const p=i.ownerDocument,m=p.body,y=getComputedStyle(m),j=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,S=Math.abs(i.clientWidth-m.clientWidth-j);S<=mj&&(u-=S)}else f<=mj&&(u+=f);return{width:u,height:h,x:l,y:d}}const VB=new Set(["absolute","fixed"]);function qB(t,s){const n=Ri(t,!0,s==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,u=gn(t)?Io(t):pn(1),h=t.clientWidth*u.x,l=t.clientHeight*u.y,d=o*u.x,f=i*u.y;return{width:h,height:l,x:d,y:f}}function fj(t,s,n){let i;if(s==="viewport")i=WB(t,n);else if(s==="document")i=UB(yn(t));else if(Qr(s))i=qB(s,n);else{const o=Z1(t);i={x:s.x-o.x,y:s.y-o.y,width:s.width,height:s.height}}return eh(i)}function eN(t,s){const n=Xa(t);return n===s||!Qr(n)||Go(n)?!1:Zr(n).position==="fixed"||eN(n,s)}function GB(t,s){const n=s.get(t);if(n)return n;let i=Ec(t,[],!1).filter(l=>Qr(l)&&rl(l)!=="body"),o=null;const u=Zr(t).position==="fixed";let h=u?Xa(t):t;for(;Qr(h)&&!Go(h);){const l=Zr(h),d=ug(h);!d&&l.position==="fixed"&&(o=null),(u?!d&&!o:!d&&l.position==="static"&&!!o&&VB.has(o.position)||Lc(h)&&!d&&eN(t,h))?i=i.filter(p=>p!==h):o=l,h=Xa(h)}return s.set(t,i),i}function YB(t){let{element:s,boundary:n,rootBoundary:i,strategy:o}=t;const h=[...n==="clippingAncestors"?jh(s)?[]:GB(s,this._c):[].concat(n),i],l=h[0],d=h.reduce((f,p)=>{const m=fj(s,p,o);return f.top=mr(m.top,f.top),f.right=Ya(m.right,f.right),f.bottom=Ya(m.bottom,f.bottom),f.left=mr(m.left,f.left),f},fj(s,l,o));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function XB(t){const{width:s,height:n}=Q1(t);return{width:s,height:n}}function KB(t,s,n){const i=gn(s),o=yn(s),u=n==="fixed",h=Ri(t,!0,u,s);let l={scrollLeft:0,scrollTop:0};const d=pn(0);function f(){d.x=Sh(o)}if(i||!i&&!u)if((rl(s)!=="body"||Lc(o))&&(l=wh(s)),i){const j=Ri(s,!0,u,s);d.x=j.x+s.clientLeft,d.y=j.y+s.clientTop}else o&&f();u&&!i&&o&&f();const p=o&&!i&&!u?J1(o,l):pn(0),m=h.left+l.scrollLeft-d.x-p.x,y=h.top+l.scrollTop-d.y-p.y;return{x:m,y,width:h.width,height:h.height}}function Ap(t){return Zr(t).position==="static"}function pj(t,s){if(!gn(t)||Zr(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return yn(t)===n&&(n=n.ownerDocument.body),n}function tN(t,s){const n=pr(t);if(jh(t))return n;if(!gn(t)){let o=Xa(t);for(;o&&!Go(o);){if(Qr(o)&&!Ap(o))return o;o=Xa(o)}return n}let i=pj(t,s);for(;i&&DB(i)&&Ap(i);)i=pj(i,s);return i&&Go(i)&&Ap(i)&&!ug(i)?n:i||BB(t)||n}const QB=async function(t){const s=this.getOffsetParent||tN,n=this.getDimensions,i=await n(t.floating);return{reference:KB(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function ZB(t){return Zr(t).direction==="rtl"}const JB={convertOffsetParentRelativeRectToViewportRelativeRect:zB,getDocumentElement:yn,getClippingRect:YB,getOffsetParent:tN,getElementRects:QB,getClientRects:FB,getDimensions:XB,getScale:Io,isElement:Qr,isRTL:ZB};function sN(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function eI(t,s){let n=null,i;const o=yn(t);function u(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function h(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),u();const f=t.getBoundingClientRect(),{left:p,top:m,width:y,height:j}=f;if(l||s(),!y||!j)return;const S=bu(m),w=bu(o.clientWidth-(p+y)),g=bu(o.clientHeight-(m+j)),v=bu(p),_={rootMargin:-S+"px "+-w+"px "+-g+"px "+-v+"px",threshold:mr(0,Ya(1,d))||1};let C=!0;function A(D){const R=D[0].intersectionRatio;if(R!==d){if(!C)return h();R?h(!1,R):i=setTimeout(()=>{h(!1,1e-7)},1e3)}R===1&&!sN(f,t.getBoundingClientRect())&&h(),C=!1}try{n=new IntersectionObserver(A,{..._,root:o.ownerDocument})}catch{n=new IntersectionObserver(A,_)}n.observe(t)}return h(!0),u}function tI(t,s,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,f=mg(t),p=o||u?[...f?Ec(f):[],...Ec(s)]:[];p.forEach(v=>{o&&v.addEventListener("scroll",n,{passive:!0}),u&&v.addEventListener("resize",n)});const m=f&&l?eI(f,n):null;let y=-1,j=null;h&&(j=new ResizeObserver(v=>{let[b]=v;b&&b.target===f&&j&&(j.unobserve(s),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var _;(_=j)==null||_.observe(s)})),n()}),f&&!d&&j.observe(f),j.observe(s));let S,w=d?Ri(t):null;d&&g();function g(){const v=Ri(t);w&&!sN(w,v)&&n(),w=v,S=requestAnimationFrame(g)}return n(),()=>{var v;p.forEach(b=>{o&&b.removeEventListener("scroll",n),u&&b.removeEventListener("resize",n)}),m?.(),(v=j)==null||v.disconnect(),j=null,d&&cancelAnimationFrame(S)}}const sI=CB,rI=EB,nI=wB,aI=AB,iI=SB,xj=jB,oI=kB,lI=(t,s,n)=>{const i=new Map,o={platform:JB,...n},u={...o.platform,_c:i};return _B(t,s,{...o,platform:u})};var cI=typeof document<"u",dI=function(){},Ou=cI?E.useLayoutEffect:dI;function th(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,i,o;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(i=n;i--!==0;)if(!th(t[i],s[i]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(s).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(s,o[i]))return!1;for(i=n;i--!==0;){const u=o[i];if(!(u==="_owner"&&t.$$typeof)&&!th(t[u],s[u]))return!1}return!0}return t!==t&&s!==s}function rN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function gj(t,s){const n=rN(t);return Math.round(s*n)/n}function Tp(t){const s=E.useRef(t);return Ou(()=>{s.current=t}),s}function uI(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:i=[],platform:o,elements:{reference:u,floating:h}={},transform:l=!0,whileElementsMounted:d,open:f}=t,[p,m]=E.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[y,j]=E.useState(i);th(y,i)||j(i);const[S,w]=E.useState(null),[g,v]=E.useState(null),b=E.useCallback(O=>{O!==D.current&&(D.current=O,w(O))},[]),_=E.useCallback(O=>{O!==R.current&&(R.current=O,v(O))},[]),C=u||S,A=h||g,D=E.useRef(null),R=E.useRef(null),k=E.useRef(p),M=d!=null,I=Tp(d),q=Tp(o),W=Tp(f),G=E.useCallback(()=>{if(!D.current||!R.current)return;const O={placement:s,strategy:n,middleware:y};q.current&&(O.platform=q.current),lI(D.current,R.current,O).then(H=>{const U={...H,isPositioned:W.current!==!1};$.current&&!th(k.current,U)&&(k.current=U,Ko.flushSync(()=>{m(U)}))})},[y,s,n,q,W]);Ou(()=>{f===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,m(O=>({...O,isPositioned:!1})))},[f]);const $=E.useRef(!1);Ou(()=>($.current=!0,()=>{$.current=!1}),[]),Ou(()=>{if(C&&(D.current=C),A&&(R.current=A),C&&A){if(I.current)return I.current(C,A,G);G()}},[C,A,G,I,M]);const F=E.useMemo(()=>({reference:D,floating:R,setReference:b,setFloating:_}),[b,_]),B=E.useMemo(()=>({reference:C,floating:A}),[C,A]),V=E.useMemo(()=>{const O={position:n,left:0,top:0};if(!B.floating)return O;const H=gj(B.floating,p.x),U=gj(B.floating,p.y);return l?{...O,transform:"translate("+H+"px, "+U+"px)",...rN(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:U}},[n,l,B.floating,p.x,p.y]);return E.useMemo(()=>({...p,update:G,refs:F,elements:B,floatingStyles:V}),[p,G,F,B,V])}const hI=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:o}=typeof t=="function"?t(n):t;return i&&s(i)?i.current!=null?xj({element:i.current,padding:o}).fn(n):{}:i?xj({element:i,padding:o}).fn(n):{}}}},mI=(t,s)=>({...sI(t),options:[t,s]}),fI=(t,s)=>({...rI(t),options:[t,s]}),pI=(t,s)=>({...oI(t),options:[t,s]}),xI=(t,s)=>({...nI(t),options:[t,s]}),gI=(t,s)=>({...aI(t),options:[t,s]}),vI=(t,s)=>({...iI(t),options:[t,s]}),yI=(t,s)=>({...hI(t),options:[t,s]});var bI="Arrow",nN=E.forwardRef((t,s)=>{const{children:n,width:i=10,height:o=5,...u}=t;return e.jsx(We.svg,{...u,ref:s,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});nN.displayName=bI;var _I=nN,fg="Popper",[aN,Nh]=yr(fg),[jI,iN]=aN(fg),oN=t=>{const{__scopePopper:s,children:n}=t,[i,o]=E.useState(null);return e.jsx(jI,{scope:s,anchor:i,onAnchorChange:o,children:n})};oN.displayName=fg;var lN="PopperAnchor",cN=E.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:i,...o}=t,u=iN(lN,n),h=E.useRef(null),l=Qe(s,h),d=E.useRef(null);return E.useEffect(()=>{const f=d.current;d.current=i?.current||h.current,f!==d.current&&u.onAnchorChange(d.current)}),i?null:e.jsx(We.div,{...o,ref:l})});cN.displayName=lN;var pg="PopperContent",[wI,SI]=aN(pg),dN=E.forwardRef((t,s)=>{const{__scopePopper:n,side:i="bottom",sideOffset:o=0,align:u="center",alignOffset:h=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:j="optimized",onPlaced:S,...w}=t,g=iN(pg,n),[v,b]=E.useState(null),_=Qe(s,P=>b(P)),[C,A]=E.useState(null),D=Pc(C),R=D?.width??0,k=D?.height??0,M=i+(u!=="center"?"-"+u:""),I=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},q=Array.isArray(f)?f:[f],W=q.length>0,G={padding:I,boundary:q.filter(CI),altBoundary:W},{refs:$,floatingStyles:F,placement:B,isPositioned:V,middlewareData:O}=uI({strategy:"fixed",placement:M,whileElementsMounted:(...P)=>tI(...P,{animationFrame:j==="always"}),elements:{reference:g.anchor},middleware:[mI({mainAxis:o+k,alignmentAxis:h}),d&&fI({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?pI():void 0,...G}),d&&xI({...G}),gI({...G,apply:({elements:P,rects:Q,availableWidth:ee,availableHeight:te})=>{const{width:ye,height:me}=Q.reference,Ce=P.floating.style;Ce.setProperty("--radix-popper-available-width",`${ee}px`),Ce.setProperty("--radix-popper-available-height",`${te}px`),Ce.setProperty("--radix-popper-anchor-width",`${ye}px`),Ce.setProperty("--radix-popper-anchor-height",`${me}px`)}}),C&&yI({element:C,padding:l}),EI({arrowWidth:R,arrowHeight:k}),y&&vI({strategy:"referenceHidden",...G})]}),[H,U]=mN(B),L=qs(S);Os(()=>{V&&L?.()},[V,L]);const Y=O.arrow?.x,J=O.arrow?.y,K=O.arrow?.centerOffset!==0,[Z,oe]=E.useState();return Os(()=>{v&&oe(window.getComputedStyle(v).zIndex)},[v]),e.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:V?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(wI,{scope:n,placedSide:H,onArrowChange:A,arrowX:Y,arrowY:J,shouldHideArrow:K,children:e.jsx(We.div,{"data-side":H,"data-align":U,...w,ref:_,style:{...w.style,animation:V?void 0:"none"}})})})});dN.displayName=pg;var uN="PopperArrow",NI={top:"bottom",right:"left",bottom:"top",left:"right"},hN=E.forwardRef(function(s,n){const{__scopePopper:i,...o}=s,u=SI(uN,i),h=NI[u.placedSide];return e.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:e.jsx(_I,{...o,ref:n,style:{...o.style,display:"block"}})})});hN.displayName=uN;function CI(t){return t!==null}var EI=t=>({name:"transformOrigin",options:t,fn(s){const{placement:n,rects:i,middlewareData:o}=s,h=o.arrow?.centerOffset!==0,l=h?0:t.arrowWidth,d=h?0:t.arrowHeight,[f,p]=mN(n),m={start:"0%",center:"50%",end:"100%"}[p],y=(o.arrow?.x??0)+l/2,j=(o.arrow?.y??0)+d/2;let S="",w="";return f==="bottom"?(S=h?m:`${y}px`,w=`${-d}px`):f==="top"?(S=h?m:`${y}px`,w=`${i.floating.height+d}px`):f==="right"?(S=`${-d}px`,w=h?m:`${j}px`):f==="left"&&(S=`${i.floating.width+d}px`,w=h?m:`${j}px`),{data:{x:S,y:w}}}});function mN(t){const[s,n="center"]=t.split("-");return[s,n]}var fN=oN,pN=cN,xN=dN,gN=hN,vN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kI="VisuallyHidden",yN=E.forwardRef((t,s)=>e.jsx(We.span,{...t,ref:s,style:{...vN,...t.style}}));yN.displayName=kI;var AI=yN,TI=[" ","Enter","ArrowUp","ArrowDown"],RI=[" ","Enter"],Di="Select",[Ch,Eh,DI]=og(Di),[nl]=yr(Di,[DI,Nh]),kh=Nh(),[MI,Ka]=nl(Di),[OI,PI]=nl(Di),bN=t=>{const{__scopeSelect:s,children:n,open:i,defaultOpen:o,onOpenChange:u,value:h,defaultValue:l,onValueChange:d,dir:f,name:p,autoComplete:m,disabled:y,required:j,form:S}=t,w=kh(s),[g,v]=E.useState(null),[b,_]=E.useState(null),[C,A]=E.useState(!1),D=tl(f),[R,k]=xn({prop:i,defaultProp:o??!1,onChange:u,caller:Di}),[M,I]=xn({prop:h,defaultProp:l,onChange:d,caller:Di}),q=E.useRef(null),W=g?S||!!g.closest("form"):!0,[G,$]=E.useState(new Set),F=Array.from(G).map(B=>B.props.value).join(";");return e.jsx(fN,{...w,children:e.jsxs(MI,{required:j,scope:s,trigger:g,onTriggerChange:v,valueNode:b,onValueNodeChange:_,valueNodeHasChildren:C,onValueNodeHasChildrenChange:A,contentId:Xn(),value:M,onValueChange:I,open:R,onOpenChange:k,dir:D,triggerPointerDownPosRef:q,disabled:y,children:[e.jsx(Ch.Provider,{scope:s,children:e.jsx(OI,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(B=>{$(V=>new Set(V).add(B))},[]),onNativeOptionRemove:E.useCallback(B=>{$(V=>{const O=new Set(V);return O.delete(B),O})},[]),children:n})}),W?e.jsxs(FN,{"aria-hidden":!0,required:j,tabIndex:-1,name:p,autoComplete:m,value:M,onChange:B=>I(B.target.value),disabled:y,form:S,children:[M===void 0?e.jsx("option",{value:""}):null,Array.from(G)]},F):null]})})};bN.displayName=Di;var _N="SelectTrigger",jN=E.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:i=!1,...o}=t,u=kh(n),h=Ka(_N,n),l=h.disabled||i,d=Qe(s,h.onTriggerChange),f=Eh(n),p=E.useRef("touch"),[m,y,j]=WN(w=>{const g=f().filter(_=>!_.disabled),v=g.find(_=>_.value===h.value),b=VN(g,w,v);b!==void 0&&h.onValueChange(b.value)}),S=w=>{l||(h.onOpenChange(!0),j()),w&&(h.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return e.jsx(pN,{asChild:!0,...u,children:e.jsx(We.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":UN(h.value)?"":void 0,...o,ref:d,onClick:Pe(o.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&S(w)}),onPointerDown:Pe(o.onPointerDown,w=>{p.current=w.pointerType;const g=w.target;g.hasPointerCapture(w.pointerId)&&g.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(S(w),w.preventDefault())}),onKeyDown:Pe(o.onKeyDown,w=>{const g=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&y(w.key),!(g&&w.key===" ")&&TI.includes(w.key)&&(S(),w.preventDefault())})})})});jN.displayName=_N;var wN="SelectValue",SN=E.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:o,children:u,placeholder:h="",...l}=t,d=Ka(wN,n),{onValueNodeHasChildrenChange:f}=d,p=u!==void 0,m=Qe(s,d.onValueNodeChange);return Os(()=>{f(p)},[f,p]),e.jsx(We.span,{...l,ref:m,style:{pointerEvents:"none"},children:UN(d.value)?e.jsx(e.Fragment,{children:h}):u})});SN.displayName=wN;var LI="SelectIcon",NN=E.forwardRef((t,s)=>{const{__scopeSelect:n,children:i,...o}=t;return e.jsx(We.span,{"aria-hidden":!0,...o,ref:s,children:i||""})});NN.displayName=LI;var BI="SelectPortal",CN=t=>e.jsx(vh,{asChild:!0,...t});CN.displayName=BI;var Mi="SelectContent",EN=E.forwardRef((t,s)=>{const n=Ka(Mi,t.__scopeSelect),[i,o]=E.useState();if(Os(()=>{o(new DocumentFragment)},[]),!n.open){const u=i;return u?Ko.createPortal(e.jsx(kN,{scope:t.__scopeSelect,children:e.jsx(Ch.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),u):null}return e.jsx(AN,{...t,ref:s})});EN.displayName=Mi;var Fr=10,[kN,Qa]=nl(Mi),II="SelectContentImpl",$I=qo("SelectContent.RemoveScroll"),AN=E.forwardRef((t,s)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:u,onPointerDownOutside:h,side:l,sideOffset:d,align:f,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:j,sticky:S,hideWhenDetached:w,avoidCollisions:g,...v}=t,b=Ka(Mi,n),[_,C]=E.useState(null),[A,D]=E.useState(null),R=Qe(s,P=>C(P)),[k,M]=E.useState(null),[I,q]=E.useState(null),W=Eh(n),[G,$]=E.useState(!1),F=E.useRef(!1);E.useEffect(()=>{if(_)return T1(_)},[_]),_1();const B=E.useCallback(P=>{const[Q,...ee]=W().map(me=>me.ref.current),[te]=ee.slice(-1),ye=document.activeElement;for(const me of P)if(me===ye||(me?.scrollIntoView({block:"nearest"}),me===Q&&A&&(A.scrollTop=0),me===te&&A&&(A.scrollTop=A.scrollHeight),me?.focus(),document.activeElement!==ye))return},[W,A]),V=E.useCallback(()=>B([k,_]),[B,k,_]);E.useEffect(()=>{G&&V()},[G,V]);const{onOpenChange:O,triggerPointerDownPosRef:H}=b;E.useEffect(()=>{if(_){let P={x:0,y:0};const Q=te=>{P={x:Math.abs(Math.round(te.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(te.pageY)-(H.current?.y??0))}},ee=te=>{P.x<=10&&P.y<=10?te.preventDefault():_.contains(te.target)||O(!1),document.removeEventListener("pointermove",Q),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",ee,{capture:!0})}}},[_,O,H]),E.useEffect(()=>{const P=()=>O(!1);return window.addEventListener("blur",P),window.addEventListener("resize",P),()=>{window.removeEventListener("blur",P),window.removeEventListener("resize",P)}},[O]);const[U,L]=WN(P=>{const Q=W().filter(ye=>!ye.disabled),ee=Q.find(ye=>ye.ref.current===document.activeElement),te=VN(Q,P,ee);te&&setTimeout(()=>te.ref.current.focus())}),Y=E.useCallback((P,Q,ee)=>{const te=!F.current&&!ee;(b.value!==void 0&&b.value===Q||te)&&(M(P),te&&(F.current=!0))},[b.value]),J=E.useCallback(()=>_?.focus(),[_]),K=E.useCallback((P,Q,ee)=>{const te=!F.current&&!ee;(b.value!==void 0&&b.value===Q||te)&&q(P)},[b.value]),Z=i==="popper"?gx:TN,oe=Z===gx?{side:l,sideOffset:d,align:f,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:j,sticky:S,hideWhenDetached:w,avoidCollisions:g}:{};return e.jsx(kN,{scope:n,content:_,viewport:A,onViewportChange:D,itemRefCallback:Y,selectedItem:k,onItemLeave:J,itemTextRefCallback:K,focusSelectedItem:V,selectedItemText:I,position:i,isPositioned:G,searchRef:U,children:e.jsx(rg,{as:$I,allowPinchZoom:!0,children:e.jsx(sg,{asChild:!0,trapped:b.open,onMountAutoFocus:P=>{P.preventDefault()},onUnmountAutoFocus:Pe(o,P=>{b.trigger?.focus({preventScroll:!0}),P.preventDefault()}),children:e.jsx(gh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:P=>P.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:e.jsx(Z,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:P=>P.preventDefault(),...v,...oe,onPlaced:()=>$(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Pe(v.onKeyDown,P=>{const Q=P.ctrlKey||P.altKey||P.metaKey;if(P.key==="Tab"&&P.preventDefault(),!Q&&P.key.length===1&&L(P.key),["ArrowUp","ArrowDown","Home","End"].includes(P.key)){let te=W().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(P.key)&&(te=te.slice().reverse()),["ArrowUp","ArrowDown"].includes(P.key)){const ye=P.target,me=te.indexOf(ye);te=te.slice(me+1)}setTimeout(()=>B(te)),P.preventDefault()}})})})})})})});AN.displayName=II;var HI="SelectItemAlignedPosition",TN=E.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:i,...o}=t,u=Ka(Mi,n),h=Qa(Mi,n),[l,d]=E.useState(null),[f,p]=E.useState(null),m=Qe(s,R=>p(R)),y=Eh(n),j=E.useRef(!1),S=E.useRef(!0),{viewport:w,selectedItem:g,selectedItemText:v,focusSelectedItem:b}=h,_=E.useCallback(()=>{if(u.trigger&&u.valueNode&&l&&f&&w&&g&&v){const R=u.trigger.getBoundingClientRect(),k=f.getBoundingClientRect(),M=u.valueNode.getBoundingClientRect(),I=v.getBoundingClientRect();if(u.dir!=="rtl"){const ye=I.left-k.left,me=M.left-ye,Ce=R.left-me,Ue=R.width+Ce,Ge=Math.max(Ue,k.width),pt=window.innerWidth-Fr,Ne=Nc(me,[Fr,Math.max(Fr,pt-Ge)]);l.style.minWidth=Ue+"px",l.style.left=Ne+"px"}else{const ye=k.right-I.right,me=window.innerWidth-M.right-ye,Ce=window.innerWidth-R.right-me,Ue=R.width+Ce,Ge=Math.max(Ue,k.width),pt=window.innerWidth-Fr,Ne=Nc(me,[Fr,Math.max(Fr,pt-Ge)]);l.style.minWidth=Ue+"px",l.style.right=Ne+"px"}const q=y(),W=window.innerHeight-Fr*2,G=w.scrollHeight,$=window.getComputedStyle(f),F=parseInt($.borderTopWidth,10),B=parseInt($.paddingTop,10),V=parseInt($.borderBottomWidth,10),O=parseInt($.paddingBottom,10),H=F+B+G+O+V,U=Math.min(g.offsetHeight*5,H),L=window.getComputedStyle(w),Y=parseInt(L.paddingTop,10),J=parseInt(L.paddingBottom,10),K=R.top+R.height/2-Fr,Z=W-K,oe=g.offsetHeight/2,P=g.offsetTop+oe,Q=F+B+P,ee=H-Q;if(Q<=K){const ye=q.length>0&&g===q[q.length-1].ref.current;l.style.bottom="0px";const me=f.clientHeight-w.offsetTop-w.offsetHeight,Ce=Math.max(Z,oe+(ye?J:0)+me+V),Ue=Q+Ce;l.style.height=Ue+"px"}else{const ye=q.length>0&&g===q[0].ref.current;l.style.top="0px";const Ce=Math.max(K,F+w.offsetTop+(ye?Y:0)+oe)+ee;l.style.height=Ce+"px",w.scrollTop=Q-K+w.offsetTop}l.style.margin=`${Fr}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=W+"px",i?.(),requestAnimationFrame(()=>j.current=!0)}},[y,u.trigger,u.valueNode,l,f,w,g,v,u.dir,i]);Os(()=>_(),[_]);const[C,A]=E.useState();Os(()=>{f&&A(window.getComputedStyle(f).zIndex)},[f]);const D=E.useCallback(R=>{R&&S.current===!0&&(_(),b?.(),S.current=!1)},[_,b]);return e.jsx(FI,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:j,onScrollButtonChange:D,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:e.jsx(We.div,{...o,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});TN.displayName=HI;var zI="SelectPopperPosition",gx=E.forwardRef((t,s)=>{const{__scopeSelect:n,align:i="start",collisionPadding:o=Fr,...u}=t,h=kh(n);return e.jsx(xN,{...h,...u,ref:s,align:i,collisionPadding:o,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gx.displayName=zI;var[FI,xg]=nl(Mi,{}),vx="SelectViewport",RN=E.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:i,...o}=t,u=Qa(vx,n),h=xg(vx,n),l=Qe(s,u.onViewportChange),d=E.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Ch.Slot,{scope:n,children:e.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Pe(o.onScroll,f=>{const p=f.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=h;if(y?.current&&m){const j=Math.abs(d.current-p.scrollTop);if(j>0){const S=window.innerHeight-Fr*2,w=parseFloat(m.style.minHeight),g=parseFloat(m.style.height),v=Math.max(w,g);if(v<S){const b=v+j,_=Math.min(S,b),C=b-_;m.style.height=_+"px",m.style.bottom==="0px"&&(p.scrollTop=C>0?C:0,m.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});RN.displayName=vx;var DN="SelectGroup",[UI,WI]=nl(DN),VI=E.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,o=Xn();return e.jsx(UI,{scope:n,id:o,children:e.jsx(We.div,{role:"group","aria-labelledby":o,...i,ref:s})})});VI.displayName=DN;var MN="SelectLabel",qI=E.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,o=WI(MN,n);return e.jsx(We.div,{id:o.id,...i,ref:s})});qI.displayName=MN;var sh="SelectItem",[GI,ON]=nl(sh),PN=E.forwardRef((t,s)=>{const{__scopeSelect:n,value:i,disabled:o=!1,textValue:u,...h}=t,l=Ka(sh,n),d=Qa(sh,n),f=l.value===i,[p,m]=E.useState(u??""),[y,j]=E.useState(!1),S=Qe(s,b=>d.itemRefCallback?.(b,i,o)),w=Xn(),g=E.useRef("touch"),v=()=>{o||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(GI,{scope:n,value:i,disabled:o,textId:w,isSelected:f,onItemTextChange:E.useCallback(b=>{m(_=>_||(b?.textContent??"").trim())},[]),children:e.jsx(Ch.ItemSlot,{scope:n,value:i,disabled:o,textValue:p,children:e.jsx(We.div,{role:"option","aria-labelledby":w,"data-highlighted":y?"":void 0,"aria-selected":f&&y,"data-state":f?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...h,ref:S,onFocus:Pe(h.onFocus,()=>j(!0)),onBlur:Pe(h.onBlur,()=>j(!1)),onClick:Pe(h.onClick,()=>{g.current!=="mouse"&&v()}),onPointerUp:Pe(h.onPointerUp,()=>{g.current==="mouse"&&v()}),onPointerDown:Pe(h.onPointerDown,b=>{g.current=b.pointerType}),onPointerMove:Pe(h.onPointerMove,b=>{g.current=b.pointerType,o?d.onItemLeave?.():g.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(h.onPointerLeave,b=>{b.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Pe(h.onKeyDown,b=>{d.searchRef?.current!==""&&b.key===" "||(RI.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})})})})});PN.displayName=sh;var hc="SelectItemText",LN=E.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:o,...u}=t,h=Ka(hc,n),l=Qa(hc,n),d=ON(hc,n),f=PI(hc,n),[p,m]=E.useState(null),y=Qe(s,v=>m(v),d.onItemTextChange,v=>l.itemTextRefCallback?.(v,d.value,d.disabled)),j=p?.textContent,S=E.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:j},d.value),[d.disabled,d.value,j]),{onNativeOptionAdd:w,onNativeOptionRemove:g}=f;return Os(()=>(w(S),()=>g(S)),[w,g,S]),e.jsxs(e.Fragment,{children:[e.jsx(We.span,{id:d.textId,...u,ref:y}),d.isSelected&&h.valueNode&&!h.valueNodeHasChildren?Ko.createPortal(u.children,h.valueNode):null]})});LN.displayName=hc;var BN="SelectItemIndicator",IN=E.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return ON(BN,n).isSelected?e.jsx(We.span,{"aria-hidden":!0,...i,ref:s}):null});IN.displayName=BN;var yx="SelectScrollUpButton",$N=E.forwardRef((t,s)=>{const n=Qa(yx,t.__scopeSelect),i=xg(yx,t.__scopeSelect),[o,u]=E.useState(!1),h=Qe(s,i.onScrollButtonChange);return Os(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollTop>0;u(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?e.jsx(zN,{...t,ref:h,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});$N.displayName=yx;var bx="SelectScrollDownButton",HN=E.forwardRef((t,s)=>{const n=Qa(bx,t.__scopeSelect),i=xg(bx,t.__scopeSelect),[o,u]=E.useState(!1),h=Qe(s,i.onScrollButtonChange);return Os(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<f;u(p)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?e.jsx(zN,{...t,ref:h,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});HN.displayName=bx;var zN=E.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:i,...o}=t,u=Qa("SelectScrollButton",n),h=E.useRef(null),l=Eh(n),d=E.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return E.useEffect(()=>()=>d(),[d]),Os(()=>{l().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(We.div,{"aria-hidden":!0,...o,ref:s,style:{flexShrink:0,...o.style},onPointerDown:Pe(o.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(i,50))}),onPointerMove:Pe(o.onPointerMove,()=>{u.onItemLeave?.(),h.current===null&&(h.current=window.setInterval(i,50))}),onPointerLeave:Pe(o.onPointerLeave,()=>{d()})})}),YI="SelectSeparator",XI=E.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return e.jsx(We.div,{"aria-hidden":!0,...i,ref:s})});XI.displayName=YI;var _x="SelectArrow",KI=E.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,o=kh(n),u=Ka(_x,n),h=Qa(_x,n);return u.open&&h.position==="popper"?e.jsx(gN,{...o,...i,ref:s}):null});KI.displayName=_x;var QI="SelectBubbleInput",FN=E.forwardRef(({__scopeSelect:t,value:s,...n},i)=>{const o=E.useRef(null),u=Qe(i,o),h=Oc(s);return E.useEffect(()=>{const l=o.current;if(!l)return;const d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(h!==s&&p){const m=new Event("change",{bubbles:!0});p.call(l,s),l.dispatchEvent(m)}},[h,s]),e.jsx(We.select,{...n,style:{...vN,...n.style},ref:u,defaultValue:s})});FN.displayName=QI;function UN(t){return t===""||t===void 0}function WN(t){const s=qs(t),n=E.useRef(""),i=E.useRef(0),o=E.useCallback(h=>{const l=n.current+h;s(l),(function d(f){n.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))})(l)},[s]),u=E.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,o,u]}function VN(t,s,n){const o=s.length>1&&Array.from(s).every(f=>f===s[0])?s[0]:s,u=n?t.indexOf(n):-1;let h=ZI(t,Math.max(u,0));o.length===1&&(h=h.filter(f=>f!==n));const d=h.find(f=>f.textValue.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function ZI(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var JI=bN,e$=jN,t$=SN,s$=NN,r$=CN,n$=EN,a$=RN,i$=PN,o$=LN,l$=IN,c$=$N,d$=HN;function Zt({...t}){return e.jsx(JI,{"data-slot":"select",...t})}function Jt({...t}){return e.jsx(t$,{"data-slot":"select-value",...t})}function es({className:t,size:s="default",children:n,...i}){return e.jsxs(e$,{"data-slot":"select-trigger","data-size":s,className:Ie("relative border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 pr-9 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,e.jsx(s$,{asChild:!0,children:e.jsx(Ox,{className:"size-4 opacity-50 absolute right-3"})})]})}function ts({className:t,children:s,position:n="popper",...i}){return e.jsx(r$,{children:e.jsxs(n$,{"data-slot":"select-content",className:Ie("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[e.jsx(u$,{}),e.jsx(a$,{className:Ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(h$,{})]})})}function Ee({className:t,children:s,...n}){return e.jsxs(i$,{"data-slot":"select-item",className:Ie("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(l$,{children:e.jsx(tt,{className:"size-4"})})}),e.jsx(o$,{children:s})]})}function u$({className:t,...s}){return e.jsx(c$,{"data-slot":"select-scroll-up-button",className:Ie("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(vw,{className:"size-4"})})}function h$({className:t,...s}){return e.jsx(d$,{"data-slot":"select-scroll-down-button",className:Ie("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ox,{className:"size-4"})})}function Qt({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:Ie("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function m$(t){const s=t?.project||"project",n=t?.env||"dev",i=`${s}-frontend`,o="app";let u="";if(t?.domain?.enabled&&t?.domain?.domain_name){const h=t.domain.domain_name;(t.domain.add_env_domain_prefix??!0)&&n!=="prod"?u=`${o}.${n}.${h}`:u=`${o}.${h}`}return{suggestedName:i,suggestedSubdomain:o,previewDomain:u}}function f$(t,s){if(!t||!s?.domain?.enabled||!s?.domain?.domain_name)return"";const n=s.domain.domain_name,i=s.domain.add_env_domain_prefix??!0,o=s.env||"dev";return i&&o!=="prod"?`${t}.${o}.${n}`:`${t}.${n}`}const p$=({open:t,onClose:s,onAdd:n,existingApps:i=[],environmentName:o="dev",projectName:u="project",config:h})=>{const l=E.useMemo(()=>m$(h),[h]),[d,f]=E.useState({name:l.suggestedName,github_repository:"",github_oauth_token:"",branches:[{name:"main",stage:"PRODUCTION",enable_auto_build:!0,enable_pull_request_preview:!1,environment_variables:{},environment_variables_text:"",custom_subdomains:[],custom_subdomains_text:""}],subdomain_prefix:l.suggestedSubdomain}),[p,m]=E.useState(!1),[y,j]=E.useState(""),[S,w]=E.useState(!1),[g,v]=E.useState(""),[b,_]=E.useState(""),[C,A]=E.useState(null),[D,R]=E.useState({}),[k,M]=E.useState(!1),I=E.useMemo(()=>`/${u}/${o}/github/amplify-token`,[u,o]),q=E.useCallback(async()=>{M(!0),j("");try{(await Be.getSSMParameter(I))?.value&&(m(!0),f(L=>({...L,github_oauth_token:I})))}catch{console.log("No existing GitHub token found")}finally{M(!1)}},[I]);E.useEffect(()=>{t&&q()},[t,q]);const W=async()=>{w(!0),j(""),v(""),_("");try{const U=await Be.initiateGitHubDeviceFlow({app_name:"shared",project:u,environment:o,scope:"repo"});v(U.user_code),_(U.verification_uri);try{await navigator.clipboard.writeText(U.user_code),console.log("Device code copied to clipboard")}catch(oe){console.error("Failed to copy code to clipboard:",oe)}const L=600,Y=700,J=window.screen.width/2-L/2,K=window.screen.height/2-Y/2;window.open(U.verification_uri,"github-device-auth",`width=${L},height=${Y},left=${J},top=${K},toolbar=no,menubar=no,scrollbars=yes,resizable=yes`);const Z=setInterval(async()=>{try{const oe=await Be.checkGitHubAuthStatus(U.user_code);if(oe.status==="authorized"){clearInterval(Z),A(null),w(!1),m(!0),v(""),_("");const P=I;f(Q=>({...Q,github_oauth_token:P})),oe.message&&console.log(oe.message)}else oe.status==="pending"||(oe.status==="expired"?(clearInterval(Z),A(null),j("Device code expired. Please try again."),w(!1),v(""),_("")):oe.status==="error"&&(clearInterval(Z),A(null),j(oe.error||"Authentication failed"),w(!1),v(""),_("")))}catch(oe){console.error("Polling error:",oe)}},(U.interval||5)*1e3);A(Z),setTimeout(()=>{Z&&(clearInterval(Z),A(null),S&&(w(!1),j("Device code expired. Please try again."),v(""),_("")))},U.expires_in*1e3)}catch(U){w(!1),j(U instanceof Error?U.message:"Failed to start authentication")}},G=U=>{navigator.clipboard.writeText(U)},$=()=>{b&&window.open(b,"_blank")},F=()=>{f(U=>({...U,branches:[...U.branches,{name:"",stage:"DEVELOPMENT",enable_auto_build:!0,enable_pull_request_preview:!1,environment_variables:{},environment_variables_text:"",custom_subdomains:[],custom_subdomains_text:""}]}))},B=(U,L,Y)=>{const J=[...d.branches];if(L==="environment_variables_text"&&typeof Y=="string"){const K={},Z=Y.split(`
`).filter(oe=>oe.trim());for(const oe of Z){const[P,...Q]=oe.split("=");P?.trim()&&(K[P.trim()]=Q.join("=").trim())}J[U]={...J[U],environment_variables:K,environment_variables_text:Y}}else if(L==="custom_subdomains_text"&&typeof Y=="string"){const K=Y.split(",").map(Z=>Z.trim()).filter(Z=>Z);J[U]={...J[U],custom_subdomains:K,custom_subdomains_text:Y}}else J[U]={...J[U],[L]:Y};f(K=>({...K,branches:J}))},V=U=>{f(L=>({...L,branches:L.branches.filter((Y,J)=>J!==U)}))},O=async()=>{const U={};if(d.name?/^[a-z0-9-]+$/.test(d.name)?i.includes(d.name)&&(U.name="An Amplify app with this name already exists"):U.name="App name must contain only lowercase letters, numbers, and hyphens":U.name="App name is required",d.github_repository?d.github_repository.startsWith("https://github.com/")||(U.github_repository="Repository URL must start with https://github.com/"):U.github_repository="GitHub repository URL is required",p||(U.github_oauth_token="Please authenticate with GitHub first"),!d.branches||d.branches.length===0)U.branches="At least one branch is required";else{const Y=d.branches.map(K=>K.name);new Set(Y).size!==Y.length&&(U.branches="Branch names must be unique"),d.branches.forEach((K,Z)=>{K.name?/^[a-zA-Z0-9-_/]+$/.test(K.name)||(U[`branch_${Z}_name`]=`Branch ${Z+1}: Invalid branch name`):U[`branch_${Z}_name`]=`Branch ${Z+1}: Name is required`})}if(Object.keys(U).length>0){R(U);return}const L={name:d.name,github_repository:d.github_repository,github_oauth_token:d.github_oauth_token,branches:d.branches.map(Y=>({name:Y.name,stage:Y.stage,enable_auto_build:Y.enable_auto_build,enable_pull_request_preview:Y.enable_pull_request_preview,environment_variables:Y.environment_variables,custom_subdomains:Y.custom_subdomains||[]})),...d.subdomain_prefix&&{subdomain_prefix:d.subdomain_prefix}};await n(L),H()},H=async()=>{if(C&&(clearInterval(C),A(null)),g&&S)try{await Be.deleteGitHubOAuthSession(g)}catch(U){console.error("Failed to cleanup OAuth session:",U)}f({name:l.suggestedName,github_repository:"",github_oauth_token:"",branches:[{name:"main",stage:"PRODUCTION",enable_auto_build:!0,enable_pull_request_preview:!1,environment_variables:{},environment_variables_text:"",custom_subdomains:[],custom_subdomains_text:""}],subdomain_prefix:l.suggestedSubdomain}),R({}),m(!1),j(""),w(!1),v(""),_(""),s()};return e.jsx(sa,{open:t,onOpenChange:H,children:e.jsxs(ra,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(na,{children:[e.jsx(ia,{children:"Add Amplify App"}),e.jsx(el,{children:"Configure AWS Amplify for hosting your frontend application with continuous deployment."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Basic Configuration"}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"App Name *"}),e.jsx(je,{id:"name",value:d.name,onChange:U=>f({...d,name:U.target.value}),placeholder:"main-web",className:`mt-1 ${D.name?"border-red-500":""}`}),D.name&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:D.name}),l.suggestedName&&e.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[" Pre-filled as ",l.suggestedName," based on project name"]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"github_repository",children:"GitHub Repository URL *"}),e.jsx(je,{id:"github_repository",value:d.github_repository,onChange:U=>f({...d,github_repository:U.target.value}),placeholder:"https://github.com/username/repo",className:`mt-1 ${D.github_repository?"border-red-500":""}`}),D.github_repository&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:D.github_repository})]}),e.jsxs("div",{children:[e.jsx(re,{children:"GitHub Authentication *"}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3 mt-1",children:[!p&&!g?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Authenticate with GitHub to grant Amplify access to your repository"}),e.jsx(ie,{type:"button",onClick:W,disabled:S||k,className:"w-full",children:k?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking existing token..."]}):S?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Starting authentication..."]}):e.jsxs(e.Fragment,{children:[e.jsx(lh,{className:"w-4 h-4 mr-2"}),"Authenticate with GitHub"]})})]}):!p&&g?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Enter this code on GitHub:"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("code",{className:"text-2xl font-mono bg-gray-800 text-white px-4 py-2 rounded select-all border border-gray-700",children:g}),e.jsx(ie,{type:"button",size:"icon",variant:"outline",onClick:()=>G(g),title:"Copy code",children:e.jsx(ut,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Code copied to clipboard! A popup window should have opened with GitHub. If not, click the button below."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(ie,{type:"button",onClick:$,variant:"secondary",className:"w-full",children:[e.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Re-open GitHub verification page"]}),e.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Or visit:"," ",e.jsx("code",{className:"bg-gray-800 text-gray-300 px-1 rounded",children:b})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[e.jsx(st,{className:"w-4 h-4 animate-spin"}),"Waiting for authorization..."]}),e.jsx(ie,{type:"button",variant:"outline",size:"sm",onClick:async()=>{if(C&&(clearInterval(C),A(null)),g)try{await Be.deleteGitHubOAuthSession(g)}catch(U){console.error("Failed to cleanup OAuth session:",U)}w(!1),v(""),_("")},className:"w-full",children:"Cancel"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"GitHub authenticated successfully"})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Token stored in SSM:"," ",e.jsx("code",{className:"bg-gray-800 text-gray-300 px-1 rounded",children:I})]}),e.jsx(ie,{type:"button",size:"sm",variant:"outline",onClick:()=>{m(!1),f({...d,github_oauth_token:""})},children:"Re-authenticate"})]}),y&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[e.jsx(Ye,{className:"w-4 h-4"}),y]}),e.jsxs("div",{className:"pt-2 border-t space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Required scope:"," ",e.jsx("code",{className:"bg-gray-800 text-gray-300 px-1 rounded",children:"repo"})," ","(for private repository access)"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Using GitHub Device Flow - no backend or client secret required"})]})]}),D.github_oauth_token&&e.jsx("p",{className:"text-xs text-red-500",children:D.github_oauth_token})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Branches *"}),e.jsxs(ie,{type:"button",size:"sm",onClick:F,variant:"outline",children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Branch"]})]}),D.branches&&e.jsx("p",{className:"text-xs text-red-500",children:D.branches}),e.jsx("div",{className:"space-y-3",children:d.branches.map((U,L)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium",children:["Branch ",L+1]}),d.branches.length>1&&e.jsx(ie,{type:"button",size:"icon",variant:"ghost",onClick:()=>V(L),children:e.jsx(xr,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:`branch-name-${L}`,children:"Branch Name"}),e.jsx(je,{id:`branch-name-${L}`,value:U.name,onChange:Y=>B(L,"name",Y.target.value),placeholder:"main",className:`mt-1 ${D[`branch_${L}_name`]?"border-red-500":""}`}),D[`branch_${L}_name`]&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:D[`branch_${L}_name`]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:`branch-stage-${L}`,children:"Stage"}),e.jsxs(Zt,{value:U.stage,onValueChange:Y=>B(L,"stage",Y),children:[e.jsx(es,{id:`branch-stage-${L}`,className:"mt-1",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"PRODUCTION",children:"Production"}),e.jsx(Ee,{value:"DEVELOPMENT",children:"Development"}),e.jsx(Ee,{value:"BETA",children:"Beta"}),e.jsx(Ee,{value:"EXPERIMENTAL",children:"Experimental"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_i,{id:`auto-build-${L}`,checked:U.enable_auto_build,onCheckedChange:Y=>B(L,"enable_auto_build",!!Y)}),e.jsx(re,{htmlFor:`auto-build-${L}`,className:"font-normal",children:"Enable automatic builds on push"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_i,{id:`pr-preview-${L}`,checked:U.enable_pull_request_preview,onCheckedChange:Y=>B(L,"enable_pull_request_preview",!!Y)}),e.jsx(re,{htmlFor:`pr-preview-${L}`,className:"font-normal",children:"Enable pull request previews"})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:`env-vars-${L}`,children:"Environment Variables"}),e.jsx(Qt,{id:`env-vars-${L}`,value:U.environment_variables_text||"",onChange:Y=>B(L,"environment_variables_text",Y.target.value),placeholder:`REACT_APP_API_URL=https://api.example.com
REACT_APP_ENV=production`,rows:3,className:"mt-1"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enter one per line in KEY=VALUE format. Use $","{","variable","}"," for interpolation."]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:`custom-subdomains-${L}`,children:"Custom Subdomains"}),e.jsx(je,{id:`custom-subdomains-${L}`,value:U.custom_subdomains_text||"",onChange:Y=>B(L,"custom_subdomains_text",Y.target.value),placeholder:"api, staging, beta",className:"mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter subdomain prefixes separated by commas. These will map specifically to this branch."})]})]},U.name||`branch-${L}`))})]}),e.jsxs("div",{className:"bg-blue-950/30 rounded-lg p-3 border border-blue-900/50",children:[e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:"Amplify Auto-Detection:"})," Amplify will automatically detect your framework and build settings."]}),e.jsxs("p",{className:"text-xs text-blue-100 mt-2",children:["For custom builds, create an"," ",e.jsx("code",{className:"bg-blue-900/50 px-1 rounded",children:"amplify.yml"})," ","file in your repository."]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Domain Configuration"}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"subdomain_prefix",children:"Subdomain Prefix"}),e.jsx(je,{id:"subdomain_prefix",value:d.subdomain_prefix,onChange:U=>f({...d,subdomain_prefix:U.target.value}),placeholder:"app",className:"mt-1"}),l.suggestedSubdomain&&d.subdomain_prefix===l.suggestedSubdomain&&e.jsx("p",{className:"text-xs text-blue-400 mt-1",children:" Pre-filled based on project name"}),d.subdomain_prefix&&h?.domain?.enabled&&h?.domain?.domain_name&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(js,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs font-medium text-gray-400",children:"Domain Preview"})]}),e.jsx("p",{className:"text-sm text-white font-mono",children:f$(d.subdomain_prefix,h)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically constructed from domain configuration"})]}),!h?.domain?.enabled&&e.jsx("p",{className:"text-xs text-amber-400 mt-1",children:" Enable domain configuration to use custom domains"})]})]})]}),e.jsxs(aa,{children:[e.jsx(ie,{variant:"outline",onClick:H,children:"Cancel"}),e.jsx(ie,{onClick:O,children:"Add Amplify App"})]})]})})};var x$="Separator",vj="horizontal",g$=["horizontal","vertical"],qN=E.forwardRef((t,s)=>{const{decorative:n,orientation:i=vj,...o}=t,u=v$(i)?i:vj,l=n?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return e.jsx(We.div,{"data-orientation":u,...l,...o,ref:s})});qN.displayName=x$;function v$(t){return g$.includes(t)}var y$=qN;function Yr({className:t,orientation:s="horizontal",decorative:n=!0,...i}){return e.jsx(y$,{"data-slot":"separator-root",decorative:n,orientation:s,className:Ie("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}var Rp="rovingFocusGroup.onEntryFocus",b$={bubbles:!1,cancelable:!0},Bc="RovingFocusGroup",[jx,GN,_$]=og(Bc),[j$,Ah]=yr(Bc,[_$]),[w$,S$]=j$(Bc),YN=E.forwardRef((t,s)=>e.jsx(jx.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(jx.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(N$,{...t,ref:s})})}));YN.displayName=Bc;var N$=E.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:o=!1,dir:u,currentTabStopId:h,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:p=!1,...m}=t,y=E.useRef(null),j=Qe(s,y),S=tl(u),[w,g]=xn({prop:h,defaultProp:l??null,onChange:d,caller:Bc}),[v,b]=E.useState(!1),_=qs(f),C=GN(n),A=E.useRef(!1),[D,R]=E.useState(0);return E.useEffect(()=>{const k=y.current;if(k)return k.addEventListener(Rp,_),()=>k.removeEventListener(Rp,_)},[_]),e.jsx(w$,{scope:n,orientation:i,dir:S,loop:o,currentTabStopId:w,onItemFocus:E.useCallback(k=>g(k),[g]),onItemShiftTab:E.useCallback(()=>b(!0),[]),onFocusableItemAdd:E.useCallback(()=>R(k=>k+1),[]),onFocusableItemRemove:E.useCallback(()=>R(k=>k-1),[]),children:e.jsx(We.div,{tabIndex:v||D===0?-1:0,"data-orientation":i,...m,ref:j,style:{outline:"none",...t.style},onMouseDown:Pe(t.onMouseDown,()=>{A.current=!0}),onFocus:Pe(t.onFocus,k=>{const M=!A.current;if(k.target===k.currentTarget&&M&&!v){const I=new CustomEvent(Rp,b$);if(k.currentTarget.dispatchEvent(I),!I.defaultPrevented){const q=C().filter(B=>B.focusable),W=q.find(B=>B.active),G=q.find(B=>B.id===w),F=[W,G,...q].filter(Boolean).map(B=>B.ref.current);QN(F,p)}}A.current=!1}),onBlur:Pe(t.onBlur,()=>b(!1))})})}),XN="RovingFocusGroupItem",KN=E.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:o=!1,tabStopId:u,children:h,...l}=t,d=Xn(),f=u||d,p=S$(XN,n),m=p.currentTabStopId===f,y=GN(n),{onFocusableItemAdd:j,onFocusableItemRemove:S,currentTabStopId:w}=p;return E.useEffect(()=>{if(i)return j(),()=>S()},[i,j,S]),e.jsx(jx.ItemSlot,{scope:n,id:f,focusable:i,active:o,children:e.jsx(We.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...l,ref:s,onMouseDown:Pe(t.onMouseDown,g=>{i?p.onItemFocus(f):g.preventDefault()}),onFocus:Pe(t.onFocus,()=>p.onItemFocus(f)),onKeyDown:Pe(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){p.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=k$(g,p.orientation,p.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let _=y().filter(C=>C.focusable).map(C=>C.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const C=_.indexOf(g.currentTarget);_=p.loop?A$(_,C+1):_.slice(C+1)}setTimeout(()=>QN(_))}}),children:typeof h=="function"?h({isCurrentTabStop:m,hasTabStop:w!=null}):h})})});KN.displayName=XN;var C$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function E$(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function k$(t,s,n){const i=E$(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return C$[i]}function QN(t,s=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:s}),document.activeElement!==n))return}function A$(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var ZN=YN,JN=KN,gg="Radio",[T$,eC]=yr(gg),[R$,D$]=T$(gg),tC=E.forwardRef((t,s)=>{const{__scopeRadio:n,name:i,checked:o=!1,required:u,disabled:h,value:l="on",onCheck:d,form:f,...p}=t,[m,y]=E.useState(null),j=Qe(s,g=>y(g)),S=E.useRef(!1),w=m?f||!!m.closest("form"):!0;return e.jsxs(R$,{scope:n,checked:o,disabled:h,children:[e.jsx(We.button,{type:"button",role:"radio","aria-checked":o,"data-state":aC(o),"data-disabled":h?"":void 0,disabled:h,value:l,...p,ref:j,onClick:Pe(t.onClick,g=>{o||d?.(),w&&(S.current=g.isPropagationStopped(),S.current||g.stopPropagation())})}),w&&e.jsx(nC,{control:m,bubbles:!S.current,name:i,value:l,checked:o,required:u,disabled:h,form:f,style:{transform:"translateX(-100%)"}})]})});tC.displayName=gg;var sC="RadioIndicator",rC=E.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:i,...o}=t,u=D$(sC,n);return e.jsx(br,{present:i||u.checked,children:e.jsx(We.span,{"data-state":aC(u.checked),"data-disabled":u.disabled?"":void 0,...o,ref:s})})});rC.displayName=sC;var M$="RadioBubbleInput",nC=E.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:i=!0,...o},u)=>{const h=E.useRef(null),l=Qe(h,u),d=Oc(n),f=Pc(s);return E.useEffect(()=>{const p=h.current;if(!p)return;const m=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==n&&j){const S=new Event("click",{bubbles:i});j.call(p,n),p.dispatchEvent(S)}},[d,n,i]),e.jsx(We.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:l,style:{...o.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nC.displayName=M$;function aC(t){return t?"checked":"unchecked"}var O$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Th="RadioGroup",[P$]=yr(Th,[Ah,eC]),iC=Ah(),oC=eC(),[L$,B$]=P$(Th),lC=E.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:i,defaultValue:o,value:u,required:h=!1,disabled:l=!1,orientation:d,dir:f,loop:p=!0,onValueChange:m,...y}=t,j=iC(n),S=tl(f),[w,g]=xn({prop:u,defaultProp:o??null,onChange:m,caller:Th});return e.jsx(L$,{scope:n,name:i,required:h,disabled:l,value:w,onValueChange:g,children:e.jsx(ZN,{asChild:!0,...j,orientation:d,dir:S,loop:p,children:e.jsx(We.div,{role:"radiogroup","aria-required":h,"aria-orientation":d,"data-disabled":l?"":void 0,dir:S,...y,ref:s})})})});lC.displayName=Th;var cC="RadioGroupItem",dC=E.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:i,...o}=t,u=B$(cC,n),h=u.disabled||i,l=iC(n),d=oC(n),f=E.useRef(null),p=Qe(s,f),m=u.value===o.value,y=E.useRef(!1);return E.useEffect(()=>{const j=w=>{O$.includes(w.key)&&(y.current=!0)},S=()=>y.current=!1;return document.addEventListener("keydown",j),document.addEventListener("keyup",S),()=>{document.removeEventListener("keydown",j),document.removeEventListener("keyup",S)}},[]),e.jsx(JN,{asChild:!0,...l,focusable:!h,active:m,children:e.jsx(tC,{disabled:h,required:u.required,checked:m,...d,...o,name:u.name,ref:p,onCheck:()=>u.onValueChange(o.value),onKeyDown:Pe(j=>{j.key==="Enter"&&j.preventDefault()}),onFocus:Pe(o.onFocus,()=>{y.current&&f.current?.click()})})})});dC.displayName=cC;var I$="RadioGroupIndicator",uC=E.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...i}=t,o=oC(n);return e.jsx(rC,{...o,...i,ref:s})});uC.displayName=I$;var $$=lC,H$=dC,z$=uC;function vg({className:t,...s}){return e.jsx($$,{"data-slot":"radio-group",className:Ie("grid gap-3",t),...s})}function Ni({className:t,...s}){return e.jsx(H$,{"data-slot":"radio-group-item",className:Ie("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(z$,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(tT,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const yg=E.memo(function({config:s,onChange:n,availableSources:i,currentServiceName:o,errors:u={},accountId:h,region:l}){const d=E.useRef(0);d.current++;const f=E.useRef({config:s,onChange:n,availableSources:i,errors:u,accountId:h,region:l});E.useEffect(()=>{const v=f.current,b=[];v.config!==s&&b.push("config"),v.onChange!==n&&b.push("onChange"),v.availableSources!==i&&b.push("availableSources"),v.errors!==u&&b.push("errors"),v.accountId!==h&&b.push("accountId"),v.region!==l&&b.push("region"),b.length>0&&console.log(` [ECRConfigSection] Props changed: ${b.join(", ")}`,{configRef:v.config===s?"same":"CHANGED",onChangeRef:v.onChange===n?"same":"CHANGED",availableSourcesRef:v.availableSources===i?"same":"CHANGED",availableSourcesLength:i.length}),f.current={config:s,onChange:n,availableSources:i,errors:u,accountId:h,region:l}},[s,n,i,u,h,l]),console.log(` [ECRConfigSection] Render #${d.current} for ${o}`),d.current>50&&(console.error(" [ECRConfigSection] INFINITE LOOP DETECTED - More than 50 renders!"),console.trace("Stack trace at 50th render")),console.log(" [ECRConfigSection] Props:",{config:s,availableSourcesCount:i.length,availableSources:i,currentServiceName:o});const p=s.mode||"create_ecr",m=o&&h&&l?`${h}.dkr.ecr.${l}.amazonaws.com/${o}`:null,y=E.useCallback(v=>{console.log(" [ECRConfigSection] handleModeChange called:",v),n({mode:v,repository_uri:"",source_service_name:"",source_service_type:void 0})},[n]),j=E.useCallback(v=>{console.log(" [ECRConfigSection] handleRepositoryURIChange called:",v.target.value),n({...s,repository_uri:v.target.value})},[s,n]),S=E.useCallback(v=>{console.log(" [ECRConfigSection] handleSourceChange called:",v);const[b,_]=v.split("-",2);n({...s,source_service_name:_,source_service_type:b})},[s,n]),w=i.filter(v=>v.name!==o),g=s.source_service_type&&s.source_service_name?`${s.source_service_type}-${s.source_service_name}`:"";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-sm font-medium",children:"Docker Registry Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Choose how to manage the container registry for this service"})]}),e.jsxs(vg,{value:p,onValueChange:y,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ni,{value:"create_ecr",id:"create_ecr"}),e.jsx(re,{htmlFor:"create_ecr",className:"font-normal cursor-pointer",children:"Create new ECR repository (recommended)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"A dedicated ECR repository will be created for this service"}),p==="create_ecr"&&m&&e.jsxs("div",{className:"mt-2 ml-6 p-3 bg-slate-800/30 border border-slate-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"ECR Repository URI"}),e.jsx("code",{className:"text-xs text-slate-300 font-mono break-all",children:m})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[e.jsx(Ni,{value:"manual_repo",id:"manual_repo"}),e.jsx(re,{htmlFor:"manual_repo",className:"font-normal cursor-pointer",children:"Use existing Docker image (Docker Hub, ECR, etc.)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Provide the Docker image URI from any registry"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-3",children:[e.jsx(Ni,{value:"use_existing",id:"use_existing"}),e.jsx(re,{htmlFor:"use_existing",className:"font-normal cursor-pointer",children:"Use ECR from another service"})]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Share an ECR repository from another service, event processor, or scheduled task"})]}),p==="manual_repo"&&e.jsxs("div",{className:"mt-6 ml-6 grid gap-2",children:[e.jsx(re,{htmlFor:"repository_uri",children:"Docker Image URI"}),e.jsx(je,{id:"repository_uri",placeholder:"nginx:latest or 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-repo",value:s.repository_uri||"",onChange:j,className:u.repository_uri?"border-red-500":""}),u.repository_uri&&e.jsx("p",{className:"text-sm text-red-500 -mt-1",children:u.repository_uri}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-1",children:"Examples: nginx:latest, ubuntu:22.04, or ECR URI"})]}),p==="use_existing"&&e.jsxs("div",{className:"mt-6 ml-6 grid gap-2",children:[e.jsx(re,{htmlFor:"source_service",children:"Source Service"}),e.jsxs(Zt,{value:g,onValueChange:S,children:[e.jsx(es,{id:"source_service",className:u.source_service_name?"border-red-500":"",children:e.jsx(Jt,{placeholder:"Select a service to share ECR from"})}),e.jsx(ts,{children:w.length===0?e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No services available"}):w.map(v=>e.jsxs(Ee,{value:`${v.type}-${v.name}`,children:[v.name," (",v.displayType,")"]},`${v.type}-${v.name}`))})]}),u.source_service_name&&e.jsx("p",{className:"text-sm text-red-500 -mt-1",children:u.source_service_name}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-1",children:"Only services with dedicated ECR repositories can be selected"})]})]})});function F$({open:t,onClose:s,onAdd:n,existingTasks:i,availableServices:o,config:u}){const[h,l]=E.useState({name:"",rule_name:"",detail_types:[""],sources:[""],docker_image:"",container_command:"",cpu:256,memory:512,environment_variables:""}),[d,f]=E.useState({mode:"create_ecr"}),[p,m]=E.useState({}),y=()=>{if(!h.name)return"";const D="<ACCOUNT_ID>",R=u.region||"us-east-1";if(d.mode==="create_ecr"){const k=`${u.project}_task_${h.name}`;return`${D}.dkr.ecr.${R}.amazonaws.com/${k}`}else{if(d.mode==="manual_repo"&&d.repository_uri)return d.repository_uri;if(d.mode==="use_existing"&&d.source_service_name){const k=`${u.project}_task_${d.source_service_name}`;return`${D}.dkr.ecr.${R}.amazonaws.com/${k}`}}return""},j=E.useMemo(()=>{const D=[];return u.services?.forEach(R=>{(!R.ecr_config||R.ecr_config.mode==="create_ecr")&&D.push({name:R.name,type:"services",displayType:"Service"})}),u.event_processor_tasks?.forEach(R=>{R.name!==h.name&&(!R.ecr_config||R.ecr_config.mode==="create_ecr")&&D.push({name:R.name,type:"event_processor_tasks",displayType:"Event Processor"})}),u.scheduled_tasks?.forEach(R=>{(!R.ecr_config||R.ecr_config.mode==="create_ecr")&&D.push({name:R.name,type:"scheduled_tasks",displayType:"Cron Job"})}),D},[u,h.name]),S=D=>{D.preventDefault();const R={};h.name?/^[a-z0-9-]+$/.test(h.name)?i.includes(h.name)&&(R.name="An event task with this name already exists"):R.name="Task name must contain only lowercase letters, numbers, and hyphens":R.name="Task name is required",h.rule_name||(R.rule_name="Rule name is required");const k=h.detail_types.filter(q=>q.trim());k.length===0&&(R.detail_types="At least one detail type is required");const M=h.sources.filter(q=>q.trim());if(M.length===0&&(R.sources="At least one source is required"),d.mode==="manual_repo"&&!d.repository_uri&&(R.repository_uri="Repository URI is required for manual mode"),d.mode==="use_existing"&&!d.source_service_name&&(R.source_service_name="Source service is required"),Object.keys(R).length>0){m(R);return}const I={name:h.name,rule_name:h.rule_name,detail_types:k,sources:M,cpu:h.cpu,memory:h.memory,ecr_config:d};if(h.docker_image&&(I.docker_image=h.docker_image),h.container_command&&(I.container_command=h.container_command.split(",").map(q=>q.trim()).filter(q=>q)),h.environment_variables)try{const q=h.environment_variables.split(`
`).map(W=>W.trim()).filter(W=>W?.includes("=")).reduce((W,G)=>{const[$,...F]=G.split("=");return W[$.trim()]=F.join("=").trim(),W},{});Object.keys(q).length>0&&(I.environment_variables=q)}catch{R.environment_variables="Invalid environment variables format",m(R);return}n(I),w()},w=()=>{l({name:"",rule_name:"",detail_types:[""],sources:[""],docker_image:"",container_command:"",cpu:256,memory:512,environment_variables:""}),f({mode:"create_ecr"}),m({}),s()},g=()=>{l({...h,detail_types:[...h.detail_types,""]})},v=D=>{l({...h,detail_types:h.detail_types.filter((R,k)=>k!==D)})},b=(D,R)=>{const k=[...h.detail_types];k[D]=R,l({...h,detail_types:k})},_=()=>{l({...h,sources:[...h.sources,""]})},C=D=>{l({...h,sources:h.sources.filter((R,k)=>k!==D)})},A=(D,R)=>{const k=[...h.sources];k[D]=R,l({...h,sources:k})};return e.jsx(sa,{open:t,onOpenChange:w,children:e.jsxs(ra,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(na,{children:e.jsx(ia,{children:"Add Event Task"})}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"name",children:"Task Name"}),e.jsx(je,{id:"name",value:h.name,onChange:D=>l({...h,name:D.target.value}),placeholder:"process-orders"}),p.name&&e.jsx("p",{className:"text-sm text-red-500",children:p.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"rule_name",children:"EventBridge Rule Name"}),e.jsx(je,{id:"rule_name",value:h.rule_name,onChange:D=>l({...h,rule_name:D.target.value}),placeholder:"order-processing-rule"}),p.rule_name&&e.jsx("p",{className:"text-sm text-red-500",children:p.rule_name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{children:"Event Detail Types"}),h.detail_types.map((D,R)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(je,{value:D,onChange:k=>b(R,k.target.value),placeholder:"order.created"}),h.detail_types.length>1&&e.jsx(ie,{type:"button",variant:"outline",size:"icon",onClick:()=>v(R),children:e.jsx(ds,{className:"h-4 w-4"})})]},`detail-type-${R}`)),e.jsxs(ie,{type:"button",variant:"outline",size:"sm",onClick:g,className:"w-fit",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Detail Type"]}),p.detail_types&&e.jsx("p",{className:"text-sm text-red-500",children:p.detail_types})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{children:"Event Sources"}),h.sources.map((D,R)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Zt,{value:D,onValueChange:k=>A(R,k),children:[e.jsx(es,{children:e.jsx(Jt,{placeholder:"Select a service"})}),e.jsxs(ts,{children:[o.map(k=>e.jsx(Ee,{value:k,children:k},k)),e.jsx(Ee,{value:"custom",children:"Custom Source"})]})]}),D==="custom"&&e.jsx(je,{placeholder:"Enter custom source",onChange:k=>A(R,k.target.value)}),h.sources.length>1&&e.jsx(ie,{type:"button",variant:"outline",size:"icon",onClick:()=>C(R),children:e.jsx(ds,{className:"h-4 w-4"})})]},`source-${R}`)),e.jsxs(ie,{type:"button",variant:"outline",size:"sm",onClick:_,className:"w-fit",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Source"]}),p.sources&&e.jsx("p",{className:"text-sm text-red-500",children:p.sources})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{htmlFor:"docker_image",className:"text-sm font-medium",children:"Image Tag (Optional)"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"e.g., latest, v1.2.3, nginx.1"})]}),e.jsx(je,{id:"docker_image",value:h.docker_image,onChange:D=>l({...h,docker_image:D.target.value}),placeholder:"latest",className:"font-mono text-sm"}),y()&&e.jsx("div",{className:"p-2 bg-blue-950/30 border border-blue-900/50 rounded",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-gray-500",children:"Full image:"})," ",e.jsxs("code",{className:"text-blue-400",children:[y(),":",h.docker_image||"latest"]})]})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"container_command",children:"Container Command (comma-separated)"}),e.jsx(je,{id:"container_command",value:h.container_command,onChange:D=>l({...h,container_command:D.target.value}),placeholder:"node, scripts/process-event.js"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"cpu",children:"CPU (units)"}),e.jsxs(Zt,{value:h.cpu.toString(),onValueChange:D=>l({...h,cpu:parseInt(D)}),children:[e.jsx(es,{id:"cpu",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"256",children:"256 (0.25 vCPU)"}),e.jsx(Ee,{value:"512",children:"512 (0.5 vCPU)"}),e.jsx(Ee,{value:"1024",children:"1024 (1 vCPU)"}),e.jsx(Ee,{value:"2048",children:"2048 (2 vCPU)"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"memory",children:"Memory (MB)"}),e.jsxs(Zt,{value:h.memory.toString(),onValueChange:D=>l({...h,memory:parseInt(D)}),children:[e.jsx(es,{id:"memory",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"512",children:"512 MB"}),e.jsx(Ee,{value:"1024",children:"1 GB"}),e.jsx(Ee,{value:"2048",children:"2 GB"}),e.jsx(Ee,{value:"4096",children:"4 GB"})]})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"environment_variables",children:"Environment Variables (KEY=VALUE, one per line)"}),e.jsx(Qt,{id:"environment_variables",value:h.environment_variables,onChange:D=>l({...h,environment_variables:D.target.value}),placeholder:`EVENT_PROCESSOR=true
LOG_LEVEL=info`,rows:4}),p.environment_variables&&e.jsx("p",{className:"text-sm text-red-500",children:p.environment_variables})]}),e.jsx(Yr,{}),e.jsx(yg,{config:d,onChange:f,availableSources:j,currentServiceName:h.name,errors:p})]}),e.jsxs(aa,{children:[e.jsx(ie,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),e.jsx(ie,{type:"submit",children:"Add Task"})]})]})]})})}function U$({open:t,onClose:s,onAdd:n,existingTasks:i}){const[o,u]=E.useState({name:"",schedule_type:"rate",rate_value:"1",rate_unit:"hours",cron_expression:"",docker_image:"",container_command:"",cpu:256,memory:512,environment_variables:""}),[h,l]=E.useState({}),d=()=>o.schedule_type==="rate"?`rate(${o.rate_value} ${o.rate_unit})`:`cron(${o.cron_expression})`,f=m=>{m.preventDefault();const y={};if(o.name?/^[a-z0-9-]+$/.test(o.name)?i.includes(o.name)&&(y.name="A scheduled task with this name already exists"):y.name="Task name must contain only lowercase letters, numbers, and hyphens":y.name="Task name is required",o.schedule_type==="cron"&&!o.cron_expression&&(y.cron_expression="Cron expression is required"),Object.keys(y).length>0){l(y);return}const j={name:o.name,schedule:d(),cpu:o.cpu,memory:o.memory};if(o.docker_image&&(j.docker_image=o.docker_image),o.container_command&&(j.container_command=o.container_command),o.environment_variables)try{const S=o.environment_variables.split(`
`).map(w=>w.trim()).filter(w=>w?.includes("=")).reduce((w,g)=>{const[v,...b]=g.split("=");return w[v.trim()]=b.join("=").trim(),w},{});Object.keys(S).length>0&&(j.environment_variables=S)}catch{y.environment_variables="Invalid environment variables format",l(y);return}n(j),p()},p=()=>{u({name:"",schedule_type:"rate",rate_value:"1",rate_unit:"hours",cron_expression:"",docker_image:"",container_command:"",cpu:256,memory:512,environment_variables:""}),l({}),s()};return e.jsx(sa,{open:t,onOpenChange:p,children:e.jsxs(ra,{className:"sm:max-w-[600px]",children:[e.jsx(na,{children:e.jsx(ia,{children:"Add Scheduled Task"})}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"name",children:"Task Name"}),e.jsx(je,{id:"name",value:o.name,onChange:m=>u({...o,name:m.target.value}),placeholder:"daily-cleanup"}),h.name&&e.jsx("p",{className:"text-sm text-red-500",children:h.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{children:"Schedule Type"}),e.jsxs(vg,{value:o.schedule_type,onValueChange:m=>u({...o,schedule_type:m}),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ni,{value:"rate",id:"rate"}),e.jsx(re,{htmlFor:"rate",children:"Rate-based (e.g., every X hours)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ni,{value:"cron",id:"cron"}),e.jsx(re,{htmlFor:"cron",children:"Cron expression"})]})]})]}),o.schedule_type==="rate"?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"rate_value",children:"Every"}),e.jsx(je,{id:"rate_value",type:"number",value:o.rate_value,onChange:m=>u({...o,rate_value:m.target.value}),min:"1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"rate_unit",children:"Unit"}),e.jsxs(Zt,{value:o.rate_unit,onValueChange:m=>u({...o,rate_unit:m}),children:[e.jsx(es,{id:"rate_unit",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"minutes",children:"Minutes"}),e.jsx(Ee,{value:"hours",children:"Hours"}),e.jsx(Ee,{value:"days",children:"Days"})]})]})]})]}):e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"cron_expression",children:"Cron Expression"}),e.jsx(je,{id:"cron_expression",value:o.cron_expression,onChange:m=>u({...o,cron_expression:m.target.value}),placeholder:"0 0 * * *"}),h.cron_expression&&e.jsx("p",{className:"text-sm text-red-500",children:h.cron_expression}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Format: minute hour day-of-month month day-of-week"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"docker_image",children:"Docker Image (optional)"}),e.jsx(je,{id:"docker_image",value:o.docker_image,onChange:m=>u({...o,docker_image:m.target.value}),placeholder:"Leave empty to use backend image"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"container_command",children:"Container Command (comma-separated)"}),e.jsx(je,{id:"container_command",value:o.container_command,onChange:m=>u({...o,container_command:m.target.value}),placeholder:"node, scripts/cleanup.js"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"cpu",children:"CPU (units)"}),e.jsxs(Zt,{value:o.cpu.toString(),onValueChange:m=>u({...o,cpu:Number.parseInt(m)}),children:[e.jsx(es,{id:"cpu",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"256",children:"256 (0.25 vCPU)"}),e.jsx(Ee,{value:"512",children:"512 (0.5 vCPU)"}),e.jsx(Ee,{value:"1024",children:"1024 (1 vCPU)"}),e.jsx(Ee,{value:"2048",children:"2048 (2 vCPU)"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"memory",children:"Memory (MB)"}),e.jsxs(Zt,{value:o.memory.toString(),onValueChange:m=>u({...o,memory:Number.parseInt(m)}),children:[e.jsx(es,{id:"memory",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"512",children:"512 MB"}),e.jsx(Ee,{value:"1024",children:"1 GB"}),e.jsx(Ee,{value:"2048",children:"2 GB"}),e.jsx(Ee,{value:"4096",children:"4 GB"})]})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"environment_variables",children:"Environment Variables (KEY=VALUE, one per line)"}),e.jsx(Qt,{id:"environment_variables",value:o.environment_variables,onChange:m=>u({...o,environment_variables:m.target.value}),placeholder:`TASK_TYPE=cleanup
LOG_LEVEL=info`,rows:4}),h.environment_variables&&e.jsx("p",{className:"text-sm text-red-500",children:h.environment_variables})]})]}),e.jsxs(aa,{children:[e.jsx(ie,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(ie,{type:"submit",children:"Add Task"})]})]})]})})}function W$({open:t,onClose:s,onAdd:n,existingServices:i,config:o}){const[u,h]=E.useState({name:"",docker_image:"",container_command:"",container_port:8080,cpu:256,memory:512,desired_count:1,health_check_path:"/health",environment_variables:""}),[l,d]=E.useState({mode:"create_ecr"}),[f,p]=E.useState({}),m=E.useMemo(()=>{const S=[];return o.services?.forEach(w=>{w.name!==u.name&&(!w.ecr_config||w.ecr_config.mode==="create_ecr")&&S.push({name:w.name,type:"services",displayType:"Service"})}),o.event_processor_tasks?.forEach(w=>{(!w.ecr_config||w.ecr_config.mode==="create_ecr")&&S.push({name:w.name,type:"event_processor_tasks",displayType:"Event Processor"})}),o.scheduled_tasks?.forEach(w=>{(!w.ecr_config||w.ecr_config.mode==="create_ecr")&&S.push({name:w.name,type:"scheduled_tasks",displayType:"Cron Job"})}),S},[o,u.name]),y=S=>{S.preventDefault();const w={};if(u.name?/^[a-z0-9-]+$/.test(u.name)?i.includes(u.name)&&(w.name="A service with this name already exists"):w.name="Service name must contain only lowercase letters, numbers, and hyphens":w.name="Service name is required",l.mode==="manual_repo"&&!u.docker_image&&(w.docker_image="Docker image is required for manual repository mode"),l.mode==="manual_repo"&&!l.repository_uri&&(w.repository_uri="Repository URI is required for manual mode"),l.mode==="use_existing"&&!l.source_service_name&&(w.source_service_name="Source service is required"),Object.keys(w).length>0){p(w);return}const g={name:u.name,docker_image:u.docker_image,container_port:u.container_port,host_port:u.container_port,cpu:u.cpu,memory:u.memory,desired_count:u.desired_count,health_check_path:u.health_check_path,ecr_config:l};if(u.container_command&&(g.container_command=u.container_command.split(",").map(v=>v.trim()).filter(v=>v)),u.environment_variables)try{const v=u.environment_variables.split(`
`).map(b=>b.trim()).filter(b=>b?.includes("=")).reduce((b,_)=>{const[C,...A]=_.split("=");return b[C.trim()]=A.join("=").trim(),b},{});Object.keys(v).length>0&&(g.environment_variables=v)}catch{w.environment_variables="Invalid environment variables format",p(w);return}n(g),j()},j=()=>{h({name:"",docker_image:"",container_command:"",container_port:8080,cpu:256,memory:512,desired_count:1,health_check_path:"/health",environment_variables:""}),d({mode:"create_ecr"}),p({}),s()};return e.jsx(sa,{open:t,onOpenChange:j,children:e.jsxs(ra,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(na,{children:e.jsx(ia,{children:"Add New Service"})}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"name",children:"Service Name"}),e.jsx(je,{id:"name",value:u.name,onChange:S=>h({...u,name:S.target.value}),placeholder:"my-service"}),f.name&&e.jsx("p",{className:"text-sm text-red-500",children:f.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"container_command",children:"Container Command (comma-separated)"}),e.jsx(je,{id:"container_command",value:u.container_command,onChange:S=>h({...u,container_command:S.target.value}),placeholder:"npm, start"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"container_port",children:"Container Port"}),e.jsx(je,{id:"container_port",type:"number",value:u.container_port,onChange:S=>h({...u,container_port:Number.parseInt(S.target.value)||8080})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"desired_count",children:"Desired Count"}),e.jsx(je,{id:"desired_count",type:"number",value:u.desired_count,onChange:S=>h({...u,desired_count:Number.parseInt(S.target.value)||1}),min:"0",max:"10"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"cpu",children:"CPU (units)"}),e.jsxs(Zt,{value:u.cpu.toString(),onValueChange:S=>h({...u,cpu:Number.parseInt(S)}),children:[e.jsx(es,{id:"cpu",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"256",children:"256 (0.25 vCPU)"}),e.jsx(Ee,{value:"512",children:"512 (0.5 vCPU)"}),e.jsx(Ee,{value:"1024",children:"1024 (1 vCPU)"}),e.jsx(Ee,{value:"2048",children:"2048 (2 vCPU)"}),e.jsx(Ee,{value:"4096",children:"4096 (4 vCPU)"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"memory",children:"Memory (MB)"}),e.jsxs(Zt,{value:u.memory.toString(),onValueChange:S=>h({...u,memory:Number.parseInt(S)}),children:[e.jsx(es,{id:"memory",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"512",children:"512 MB"}),e.jsx(Ee,{value:"1024",children:"1 GB"}),e.jsx(Ee,{value:"2048",children:"2 GB"}),e.jsx(Ee,{value:"4096",children:"4 GB"}),e.jsx(Ee,{value:"8192",children:"8 GB"})]})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"health_check_path",children:"Health Check Path"}),e.jsx(je,{id:"health_check_path",value:u.health_check_path,onChange:S=>h({...u,health_check_path:S.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"environment_variables",children:"Environment Variables (KEY=VALUE, one per line)"}),e.jsx(Qt,{id:"environment_variables",value:u.environment_variables,onChange:S=>h({...u,environment_variables:S.target.value}),placeholder:`NODE_ENV=production
PORT=8080`,rows:4}),f.environment_variables&&e.jsx("p",{className:"text-sm text-red-500",children:f.environment_variables})]}),e.jsx(Yr,{}),e.jsx(yg,{config:l,onChange:d,availableSources:m,currentServiceName:u.name,errors:f,accountId:o.account_id,region:o.region})]}),e.jsxs(aa,{children:[e.jsx(ie,{type:"button",variant:"outline",onClick:j,children:"Cancel"}),e.jsx(ie,{type:"submit",children:"Add Service"})]})]})]})})}const _u={nodes:[{id:"github",position:{x:280,y:-60},type:"service"},{id:"client-app",position:{x:-520,y:490},type:"service"},{id:"route53",position:{x:-140,y:370},type:"service"},{id:"api-gateway",position:{x:-130,y:500},type:"service"},{id:"ecs-cluster-group",position:{x:0,y:0},type:"dynamicGroup"},{id:"ecs-cluster",position:{x:284,y:283},type:"service"},{id:"ecr",position:{x:280,y:110},type:"service"},{id:"backend-service",position:{x:292,y:459},type:"service"},{id:"aurora",position:{x:700,y:120},type:"service"},{id:"eventbridge",position:{x:310,y:740},type:"service"},{id:"ses",position:{x:710,y:620},type:"service"},{id:"sns",position:{x:700,y:360},type:"service"},{id:"sqs",position:{x:700,y:240},type:"service"},{id:"s3",position:{x:710,y:500},type:"service"}],edges:[{id:"github-ecr",source:"github",target:"ecr",sourceHandle:"source-bottom",targetHandle:"target-top",label:"push"},{id:"ecr-ecs",source:"ecr",target:"ecs-cluster",sourceHandle:"source-bottom",targetHandle:"target-top",label:"deploy"},{id:"client-api",source:"client-app",target:"api-gateway",sourceHandle:"source-right",targetHandle:"target-left",label:"HTTPS"},{id:"api-backend",source:"api-gateway",target:"backend-service",sourceHandle:"source-right",targetHandle:"target-left",label:"route"},{id:"backend-s3",source:"backend-service",target:"s3",sourceHandle:"source-right",targetHandle:"target-left",label:"S3"},{id:"backend-eventbridge",source:"backend-service",target:"eventbridge",sourceHandle:"source-bottom",targetHandle:"target-top",label:"events"}]},bg=[{id:"client-app",name:"Client app",type:"client-app",enabled:()=>!0,description:"External client applications (web, mobile)"},{id:"github",name:"GitHub actions",type:"github",enabled:t=>t.workload?.enable_github_oidc===!0,properties:t=>({subjects:t.workload?.github_oidc_subjects||[]})},{id:"api-gateway",name:"Amazon API Gateway",type:"api-gateway",enabled:t=>!t.alb?.enabled,description:"HTTP API with VPC Links"},{id:"alb",name:"Application Load Balancer",type:"alb",enabled:t=>t.alb?.enabled===!0,properties:t=>({domainName:t.workload?.backend_alb_domain_name||""}),description:"Application Load Balancer for HTTP/HTTPS routing"},{id:"route53",name:"Amazon Route 53",type:"route53",enabled:t=>t.domain?.enabled===!0,properties:t=>({domainName:t.domain?.domain_name||"",createZone:t.domain?.create_domain_zone||!1,apiDomainPrefix:t.domain?.api_domain_prefix||"",addEnvPrefix:t.domain?.add_env_domain_prefix||!1})},{id:"ecs-cluster",name:"Amazon ECS Cluster",type:"ecs",enabled:()=>!0,properties:t=>({clusterName:`${t.project}_cluster_${t.env}`,launchType:"Fargate",containerInsights:!0})},{id:"backend-service",name:"Backend service",type:"backend",enabled:()=>!0,properties:t=>{let s="";if(t.domain?.enabled&&t.domain?.api_domain_prefix){const n=t.domain.domain_name||"",i=t.domain.api_domain_prefix||"api",o=t.domain.add_env_domain_prefix?`${t.env}.`:"";s=n?`${i}.${o}${n}`:""}return{serviceName:`${t.project}_backend_${t.env}`,port:t.workload?.backend_image_port||8080,healthEndpoint:t.workload?.backend_health_endpoint||"/health",cpu:t.workload?.backend_cpu||"256",memory:t.workload?.backend_memory||"512",envVariables:t.workload?.backend_env_variables||{},desiredCount:t.workload?.backend_desired_count||1,autoscalingEnabled:t.workload?.backend_autoscaling_enabled||!1,autoscalingMinCapacity:t.workload?.backend_autoscaling_min_capacity||1,autoscalingMaxCapacity:t.workload?.backend_autoscaling_max_capacity||10,domain:s}}},{id:"ecr",name:"Amazon ECR",type:"ecr",enabled:()=>!0,properties:t=>({repository:`${t.project}_backend`,crossAccount:t.ecr_account_id&&t.ecr_account_region?"true":"false",ecrAccountId:t.ecr_account_id||"",ecrRegion:t.ecr_account_region||""})},{id:"aurora",name:"PostgreSQL Database",type:"postgres",enabled:t=>t.postgres?.enabled===!0,properties:t=>({dbname:t.postgres?.dbname||t.project,username:t.postgres?.username||"postgres",publicAccess:t.postgres?.public_access||!1,engineVersion:t.postgres?.engine_version||"16",aurora:t.postgres?.aurora||!1,minCapacity:t.postgres?.min_capacity??0,maxCapacity:t.postgres?.max_capacity||1,instanceClass:t.postgres?.instance_class||"db.t4g.micro",allocatedStorage:t.postgres?.allocated_storage||20,storageType:t.postgres?.storage_type||"gp3",multiAz:t.postgres?.multi_az||!1,storageEncrypted:t.postgres?.storage_encrypted??!0,deletionProtection:t.postgres?.deletion_protection||!1,skipFinalSnapshot:t.postgres?.skip_final_snapshot??!0,pgAdminEnabled:t.workload?.install_pg_admin||!1,pgAdminEmail:t.workload?.pg_admin_email||"admin@madappgang.com"}),description:t=>t.postgres?.aurora?"AWS Aurora PostgreSQL Serverless v2":"AWS RDS PostgreSQL Instance"},{id:"s3",name:"Amazon S3",type:"s3",enabled:()=>!0,properties:t=>({backendBucket:`${t.project}-backend-${t.env}-${t.workload?.bucket_postfix}`,backendBucketPublic:t.workload?.bucket_public||!1,additionalBuckets:t.buckets||[]})},{id:"eventbridge",name:"Amazon EventBridge",type:"eventbridge",enabled:()=>!0,description:"ECR image push events and custom event bus"},{id:"sns",name:"Amazon SNS",type:"sns",enabled:t=>t.workload?.setup_fcnsns===!0,properties:t=>({platformApplicationName:`${t.project}-fcm-${t.env}`,platform:"GCM",gcmServerKeyPath:`/${t.env}/${t.project}/backend/gcm-server-key`}),description:"Firebase Cloud Messaging/SNS for push notifications"},{id:"sqs",name:"Amazon SQS",type:"sqs",enabled:t=>t.sqs?.enabled===!0,properties:t=>({queueName:t.sqs?.name||"default-queue",queueUrl:`https://sqs.${t.region}.amazonaws.com/${t.region}/${t.project}-${t.env}-${t.sqs?.name||"default-queue"}`}),description:"Simple Queue Service for async task processing"},{id:"ses",name:"Amazon SES",type:"ses",enabled:t=>t.ses?.enabled===!0,properties:t=>({domainName:t.ses?.domain_name||`mail.${t.domain?.domain_name}`,testEmails:t.ses?.test_emails||[]})},{id:"cloudwatch",name:"Amazon CloudWatch",type:"cloudwatch",enabled:()=>!0,description:"Logs, metrics, and monitoring"},{id:"xray",name:"AWS X-Ray",type:"xray",enabled:t=>t.workload?.xray_enabled===!0,description:"Distributed tracing and service map"},{id:"secrets-manager",name:"Parameter Store",type:"secrets-manager",enabled:()=>!0,description:"AWS Systems Manager Parameter Store"},{id:"alarms",name:"Alarm rules",type:"alarms",enabled:()=>!1,description:"CloudWatch alarms (not implemented)"}];function hC(t){const s=[];return t.services&&t.services.forEach(n=>{s.push({id:`service-${n.name}`,name:n.name,type:"service",enabled:()=>!0,properties:()=>({desiredCount:n.desired_count||1,cpu:n.cpu||256,memory:n.memory||512,containerPort:n.container_port||3e3,xrayEnabled:n.xray_enabled||!1,remoteAccess:n.remote_access||!1}),description:`Additional service: ${n.name}`})}),t.event_processor_tasks&&t.event_processor_tasks.forEach(n=>{s.push({id:`event-${n.name}`,name:`Event: ${n.name}`,type:"event-task",enabled:()=>!0,properties:()=>({ruleName:n.rule_name,detailTypes:n.detail_types,sources:n.sources,publicAccess:!0}),description:`Event processor: ${n.rule_name}`})}),t.scheduled_tasks&&t.scheduled_tasks.forEach(n=>{s.push({id:`scheduled-${n.name}`,name:`Scheduled: ${n.name}`,type:"scheduled-task",enabled:()=>!0,properties:()=>({taskCount:1,schedule:n.schedule,publicAccess:!0}),description:`Scheduled task: ${n.schedule}`})}),s}function yj(t,s){if(!s)return!0;const n=bg.find(u=>u.id===t);if(n)return n.enabled(s);const o=hC(s).find(u=>u.id===t);return o?o.enabled(s):!0}function V$(t,s){if(!s)return;const n=bg.find(i=>i.id===t);if(n?.description)return typeof n.description=="function"?n.description(s):n.description}function q$(t,s){if(!s)return{};const n=bg.find(u=>u.id===t);if(n?.properties)return n.properties(s);const o=hC(s).find(u=>u.id===t);return o?.properties?o.properties(s):{}}function G$(t){return t?{services:t.services||[],scheduledTasks:t.scheduled_tasks||[],eventTasks:t.event_processor_tasks||[]}:{services:[],scheduledTasks:[],eventTasks:[]}}function Y$(t,s=500,n=459){if(!t)return[];const{services:i,scheduledTasks:o,eventTasks:u}=G$(t),h=[],l=150;i.forEach((p,m)=>{h.push({id:`service-${p.name}`,type:"service",position:{x:s+(m+1)*l,y:n},data:{id:`service-${p.name}`,type:"service",name:p.name,status:"running",group:"ECS Cluster",subgroup:"Services",description:Q$(p.name),configProperties:{cpu:p.cpu,memory:p.memory,desiredCount:p.desired_count||1,port:p.container_port,xrayEnabled:p.xray_enabled,serviceType:K$(p.name),purpose:Z$(p.name),domain:void 0,healthStatus:{critical:!0,monitored:p.xray_enabled||!1}}}})});const d=n+120;o.forEach((p,m)=>{h.push({id:`scheduled-${p.name}`,type:"service",position:{x:s+m*l,y:d},data:{id:`scheduled-${p.name}`,type:"scheduled-task",name:p.name,description:J$(p.name),status:"running",group:"ECS Cluster",subgroup:"Scheduled Tasks",configProperties:{schedule:p.schedule,publicAccess:!0,taskCount:1,cpu:p.cpu?.toString()||"256",memory:p.memory?.toString()||"512",serviceType:"Scheduled Task",purpose:bj(p.name,"scheduled"),healthStatus:{critical:!1,monitored:!0}}}})});const f=d+120;return u.forEach((p,m)=>{h.push({id:`event-${p.name}`,type:"service",position:{x:s+m*l,y:f},data:{id:`event-${p.name}`,type:"event-task",name:p.name,description:e7(p.name),status:"running",group:"ECS Cluster",subgroup:"Event Tasks",configProperties:{ruleName:p.rule_name,detailTypes:p.detail_types,sources:p.sources,publicAccess:!0,taskCount:1,cpu:p.cpu?.toString()||"256",memory:p.memory?.toString()||"512",serviceType:"Event Processor",purpose:bj(p.name,"event"),healthStatus:{critical:!0,monitored:!0}}}})}),h}function X$(t,s){if(t.id!=="ecs-cluster-group")return t;const i=[...["ecs-cluster","backend-service","xray","cloudwatch","alarms"],...s];return{...t,data:{...t.data,nodeIds:i}}}function K$(t){const s=t.toLowerCase();return s.includes("monitor")||s.includes("metric")||s.includes("log")?"Monitoring":s.includes("cache")||s.includes("redis")?"Cache":s.includes("auth")||s.includes("notif")?"Auxiliary":s.includes("api")||s.includes("core")||s.includes("main")?"Core Service":"Service"}function Q$(t){const s=t.toLowerCase();return s.includes("api")?"REST/GraphQL API":s.includes("auth")?"User authentication":s.includes("notification")?"Push & email alerts":s.includes("cache")?"Redis cache layer":s.includes("monitor")?"System monitoring":s.includes("analytics")?"Data analytics":s.includes("worker")?"Async processing":s.includes("chat")||s.includes("ai")?"AI chat service":s.includes("payment")?"Payment processing":s.includes("search")?"Search engine":s.includes("media")?"Media processing":"Container service"}function Z$(t){const s=t.toLowerCase();return s.includes("api")?"Core API backend":s.includes("auth")?"Authentication & authorization":s.includes("notification")?"Email & push notifications":s.includes("cache")?"High-performance caching":s.includes("monitor")?"Metrics collection":s.includes("analytics")?"Analytics data processing":s.includes("worker")?"Asynchronous job processing":s.includes("chat")||s.includes("ai")?"AI/Chat functionality":"Application service"}function bj(t,s){const n=t.toLowerCase();return s==="scheduled"?n.includes("backup")?"Periodic data backup":n.includes("cleanup")?"Resource cleanup":n.includes("report")?"Report generation":n.includes("sync")?"Data synchronization":n.includes("reconcil")?"Data reconciliation":n.includes("fee")?"Fee calculation":"Scheduled job execution":n.includes("order")?"Order processing":n.includes("payment")?"Payment processing":n.includes("notification")?"Event notifications":n.includes("audit")?"Audit logging":"Event processing"}function J$(t){const s=t.toLowerCase();return s.includes("backup")?"Database backup":s.includes("cleanup")?"Cleanup old data":s.includes("report")?"Generate reports":s.includes("sync")?"Data synchronization":s.includes("reconcil")?"Reconcile records":s.includes("fee")?"Calculate fees":s.includes("export")?"Export data":s.includes("import")?"Import data":s.includes("notification")?"Send notifications":"Scheduled task"}function e7(t){const s=t.toLowerCase();return s.includes("order")?"Process orders":s.includes("payment")?"Handle payments":s.includes("notification")?"Send notifications":s.includes("audit")?"Audit events":s.includes("webhook")?"Process webhooks":s.includes("email")?"Email processor":s.includes("sms")?"SMS processor":s.includes("analytics")?"Analytics events":"Event processor"}function t7(t,s){if(!t)return[];const n=[],i=-400,o=1e3,u=200;return t.sqs?.enabled&&n.push({id:"sqs",type:"service",position:{x:i+u,y:o},data:{id:"sqs",type:"sqs",name:"Amazon SQS",description:"Message queue",status:"running",configProperties:{queueName:t.sqs.name}}}),t.efs&&t.efs.length>0&&n.push({id:"efs",type:"service",position:{x:i+u*2,y:o},data:{id:"efs",type:"efs",name:"Amazon EFS",description:"Shared file storage",status:"running",configProperties:{volumes:t.efs.map(h=>({name:h.name,path:h.path})),mounts:t.workload?.efs||[]}}}),t.pubsub_appsync?.enabled&&n.push({id:"appsync",type:"service",position:{x:i+u*4,y:o},data:{id:"appsync",type:"appsync",name:"AWS AppSync",description:"GraphQL API",status:"running",configProperties:{schema:t.pubsub_appsync.schema,authLambda:t.pubsub_appsync.auth_lambda,resolvers:t.pubsub_appsync.resolvers}}}),t.amplify_apps&&t.amplify_apps.length>0&&t.amplify_apps.forEach((h,l)=>{const d=h.branches||[],f=d.find(m=>m.stage==="PRODUCTION")?.name||d[0]?.name||"",p=d.length;n.push({id:`amplify-${h.name}`,type:"service",position:{x:-639,y:158+l*120},data:{id:`amplify-${h.name}`,type:"amplify",name:h.name,description:`Amplify app (${p} branch${p!==1?"es":""})`,status:"running",configProperties:{repository:h.github_repository,branch:f,branches:d,customDomain:h.custom_domain,environment:s||t.env||"dev"}}})}),n}const To={service:{width:280,height:120},group:{width:800,height:400}},mC=30;function _j(t,s=mC){const n=t.map(u=>{let h=To.service.width,l=To.service.height;return u.type==="group"&&u.style&&(h=u.style.width||To.group.width,l=u.style.height||To.group.height),{id:u.id,x:u.position.x,y:u.position.y,width:h,height:l}});n.sort((u,h)=>{const l=u.y-h.y;return Math.abs(l)>10?l:u.x-h.x});const i=[...t],o=[];for(let u=0;u<n.length;u++){const h={...n[u]};let l=!0,d=0;const f=100;for(;l&&d<f;){l=!1,d++;for(const m of o)if(s7(h,m,s)){l=!0;const j=r7(h,m,s);h.x+=j.x,h.y+=j.y;break}}const p=i.findIndex(m=>m.id===h.id);p!==-1&&(i[p]={...i[p],position:{x:h.x,y:h.y}}),o.push(h)}return i}function s7(t,s,n){const i=t.x,o=t.x+t.width,u=t.y,h=t.y+t.height,l=s.x,d=s.x+s.width,f=s.y,p=s.y+s.height,m=i<d+n&&o+n>l,y=u<p+n&&h+n>f;return m&&y}function r7(t,s,n){const i=t.x+t.width/2,o=t.y+t.height/2,u=s.x+s.width/2,h=s.y+s.height/2,l=s.x+s.width+n-t.x,d=t.x+t.width+n-s.x,f=s.y+s.height+n-t.y,p=t.y+t.height+n-s.y;return Math.abs(o-h)<t.height/2?i>u?{x:l,y:0}:{x:-d,y:0}:[{x:l,y:0,distance:l},{x:-d,y:0,distance:d},{x:0,y:f,distance:f},{x:0,y:-p,distance:p}].reduce((y,j)=>j.distance<y.distance?j:y)}function n7(t,s=mC){const n=t.filter(d=>d.type==="dynamicGroup"),i=t.filter(d=>d.type==="group"),o=t.filter(d=>d.type!=="group"&&d.type!=="dynamicGroup"),u=_j(i,s),h=o.map(d=>{const f=d.data?.group;if(f){const p=u.find(m=>m.data?.label?.includes(f));if(p?.style){const m=p.position.x,y=p.position.y,j=p.style.width||800,S=p.style.height||400,w=20,g=m+w,v=m+j-To.service.width-w,b=y+w+40,_=y+S-To.service.height-w;return{...d,position:{x:Math.max(g,Math.min(v,d.position.x)),y:Math.max(b,Math.min(_,d.position.y))}}}}return d});return[...n,...u,..._j(h,s)]}function a7({showInactive:t,onToggleInactive:s,onAddService:n,onAddScheduledTask:i,onAddEventTask:o,onAddAmplify:u}){const{zoomIn:h,zoomOut:l,fitView:d,getNodes:f,getEdges:p}=Kx(),[m,y]=E.useState(!1);E.useEffect(()=>{const S=window.localStorage.getItem("debug_positions")==="true";y(S)},[]);const j=()=>{const S=!m;window.localStorage.setItem("debug_positions",S.toString()),y(S),console.log(`=== DEBUG MODE: ${S?"ENABLED":"DISABLED"} ===`),console.log("Verbose position logging is now "+(S?"enabled":"disabled")),console.log("");const w=f(),g=p();console.log("=== DEBUG: Node Positions ==="),console.log("Total nodes:",w.length),w.forEach(b=>{console.log(`Node: ${b.id}`),console.log(`  Position: x=${b.position.x}, y=${b.position.y}`),console.log(`  Type: ${b.type}`),console.log("  Data:",b.data)}),console.log(`
=== DEBUG: Edge Connections ===`),console.log("Total edges:",g.length),g.forEach(b=>{console.log(`Edge: ${b.id}`),console.log(`  Source: ${b.source} (handle: ${b.sourceHandle||"default"})`),console.log(`  Target: ${b.target} (handle: ${b.targetHandle||"default"})`),console.log(`  Type: ${b.type}`),console.log(`  Label: ${b.label||"none"}`)});const v={nodes:w.map(b=>({id:b.id,position:{x:b.position.x,y:b.position.y},type:b.type})),edges:g.map(b=>({id:b.id,source:b.source,target:b.target,sourceHandle:b.sourceHandle,targetHandle:b.targetHandle,label:b.label}))};console.log(`
=== DEBUG: Summary (JSON) ===`),console.log(JSON.stringify(v,null,2)),console.log(`
=== DEBUG: Helper Information ===`),console.log("To copy a specific node position:"),console.log('  Right-click on the position object above and select "Copy object"'),console.log(""),console.log("To find missing nodes:"),console.log("  Compare the node IDs above with expected nodes in your configuration"),console.log(""),console.log("Debug mode is now:",m?"ON":"OFF"),console.log("When ON, all position save/load operations will be logged in detail")};return e.jsxs("div",{className:"absolute left-4 top-4 z-40 flex flex-col gap-2",children:[e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-1 flex flex-col gap-1",children:[e.jsx(ie,{size:"icon",variant:"ghost",onClick:()=>h(),className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-gray-700",children:e.jsx(ws,{className:"w-4 h-4"})}),e.jsx(ie,{size:"icon",variant:"ghost",onClick:()=>l(),className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-gray-700",children:e.jsx(JT,{className:"w-4 h-4"})}),e.jsx(ie,{size:"icon",variant:"ghost",onClick:()=>d(),className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-gray-700",children:e.jsx(bw,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-1 flex flex-col gap-1",children:[e.jsx(ie,{size:"icon",variant:"ghost",className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-gray-700",children:e.jsx(rR,{className:"w-4 h-4"})}),e.jsx(ie,{size:"icon",variant:"ghost",className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-gray-700",children:e.jsx(aR,{className:"w-4 h-4"})}),e.jsx(ie,{size:"icon",variant:"ghost",className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-gray-700",children:e.jsx(kT,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-1 flex flex-col gap-1",children:[e.jsx(ie,{size:"icon",variant:"ghost",onClick:n,className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-blue-700",title:"Add Service",children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsx(ie,{size:"icon",variant:"ghost",onClick:i,className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-green-700",title:"Add Scheduled Task",children:e.jsx(Ms,{className:"w-4 h-4"})}),e.jsx(ie,{size:"icon",variant:"ghost",onClick:o,className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-purple-700",title:"Add Event Task",children:e.jsx(ls,{className:"w-4 h-4"})}),e.jsx(ie,{size:"icon",variant:"ghost",onClick:u,className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-orange-700",title:"Add Amplify App",children:e.jsx(js,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-1",children:e.jsx(ie,{size:"icon",variant:"ghost",onClick:s,className:"w-8 h-8 text-gray-400 hover:text-white hover:bg-gray-700",title:t?"Hide inactive items":"Show inactive items",children:t?e.jsx(Lr,{className:"w-4 h-4"}):e.jsx(Ho,{className:"w-4 h-4"})})}),e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-1",children:e.jsx(ie,{size:"icon",variant:"ghost",onClick:j,className:`w-8 h-8 ${m?"text-red-400 bg-red-900/50":"text-gray-400"} hover:text-white hover:bg-red-700`,title:m?"Debug mode is ON - Click to disable and show current positions":"Debug mode is OFF - Click to enable verbose logging and show positions",children:e.jsx(BA,{className:"w-4 h-4"})})})]})}function i7({id:t,sourceX:s,sourceY:n,targetX:i,targetY:o,sourcePosition:u,targetPosition:h,label:l,markerEnd:d,markerStart:f,style:p={}}){const[m,y,j]=Xu({sourceX:s,sourceY:n,sourcePosition:u,targetX:i,targetY:o,targetPosition:h}),S=p.stroke||"#6b7280",w=p.animated!==!1,g=p.opacity&&Number(p.opacity)<1;return e.jsxs(e.Fragment,{children:[e.jsx(Qo,{id:t,path:m,markerEnd:d,markerStart:f,style:p}),l&&e.jsx(xP,{children:e.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${y}px,${j}px)`,pointerEvents:"all"},className:"nodrag nopan",children:e.jsx("div",{className:`
              px-2 py-1 text-xs font-medium rounded-md
              backdrop-blur-sm transition-all duration-200
              ${g?"opacity-30":"opacity-90"}
              ${w?"shadow-sm":""}
            `,style:{backgroundColor:`${S}20`,border:`1px solid ${S}40`,color:S,boxShadow:w&&!g?`0 0 8px ${S}30`:void 0},children:e.jsxs("div",{className:"flex items-center gap-1",children:[w&&!g&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full animate-pulse",style:{backgroundColor:S}}),e.jsx("span",{children:l})]})})})})]})}function o7({data:t}){const s=vP(),n=Et(o=>o.nodeInternals),i=E.useMemo(()=>{const o=s.filter(j=>{if(j.type==="dynamicGroup"||j.type==="group")return!1;if(t.nodeIds?.includes(j.id))return!0;const S=j.data;return S?.subgroup===t.label||S?.group===t.label&&!S?.subgroup});if(o.length===0)return{x:0,y:0,width:400,height:300};const u=o.filter(j=>j.position&&typeof j.position.x=="number"&&typeof j.position.y=="number"&&j.type==="service");if(u.length===0)return{x:0,y:0,width:400,height:300};let h=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;u.forEach(j=>{const S=n.get(j.id),w=S?.width||140,g=S?.height||80;h=Math.min(h,j.position.x),l=Math.min(l,j.position.y),d=Math.max(d,j.position.x+w),f=Math.max(f,j.position.y+g)});const p=20,m=40;return{x:h-p,y:l-m,width:d-h+p*2,height:f-l+m+20}},[s,n,t.nodeIds,t.label]);return e.jsx("div",{style:{position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height,borderRadius:12,border:"2px dashed #4b5563",backgroundColor:"rgba(75, 85, 99, 0.1)",pointerEvents:"none",...t.style},children:e.jsx("div",{style:{position:"absolute",top:8,left:20,backgroundColor:"#0a0a0a",padding:"4px 12px",borderRadius:6,fontSize:14,color:"#9ca3af",fontWeight:500},children:t.label})})}function fe({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:Ie("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function xe({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:Ie("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function ge({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:Ie("leading-none",t),...s})}function we({className:t,...s}){return e.jsx("p",{"data-slot":"card-description",className:Ie("text-muted-foreground",t),...s})}function pe({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:Ie("px-6 [&:last-child]:pb-6",t),...s})}const jj={top:DA,right:Mx,bottom:EA,left:AA};function l7({edge:t,position:s,onClose:n,onHandleChange:i}){const[o,u]=E.useState(t.sourceHandle||"source-right"),[h,l]=E.useState(t.targetHandle||"target-left"),d=p=>{u(p),i(t.id,p,h)},f=p=>{l(p),i(t.id,o,p)};return e.jsx("div",{className:"absolute z-50 pointer-events-none",style:{left:`${s.x}px`,top:`${s.y}px`,transform:"translate(-50%, -100%) translateY(-20px)"},children:e.jsx(fe,{className:"bg-gray-800/95 backdrop-blur-sm border-gray-600 shadow-xl pointer-events-auto",children:e.jsxs("div",{className:"flex items-center gap-3 p-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(FT,{className:"w-3 h-3 text-gray-400"}),e.jsx("div",{className:"flex gap-1",children:["top","right","bottom","left"].map(p=>{const m=jj[p],y=`source-${p}`;return e.jsx(ie,{size:"sm",variant:o===y?"default":"ghost",onClick:()=>d(y),className:"h-7 w-7 p-0",title:`Source ${p}`,children:e.jsx(m,{className:"w-3 h-3"})},y)})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-600"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(HT,{className:"w-3 h-3 text-gray-400"}),e.jsx("div",{className:"flex gap-1",children:["top","right","bottom","left"].map(p=>{const m=jj[p],y=`target-${p}`;return e.jsx(ie,{size:"sm",variant:h===y?"default":"ghost",onClick:()=>f(y),className:"h-7 w-7 p-0",title:`Target ${p}`,children:e.jsx(m,{className:"w-3 h-3"})},y)})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-600"}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:n,className:"h-7 w-7 p-0",title:"Close",children:e.jsx(ds,{className:"w-3 h-3"})})]})})})}function c7({data:t}){return e.jsx("div",{style:{padding:20,borderRadius:12,border:"2px dashed #4b5563",backgroundColor:"rgba(75, 85, 99, 0.1)",width:700,height:300,...t.style},children:e.jsx("div",{style:{position:"absolute",top:-10,left:20,backgroundColor:"#0a0a0a",padding:"2px 8px",borderRadius:4,fontSize:12,color:"#9ca3af",fontWeight:500},children:t.label})})}const Dp="/api",fC={async getApps(t,s){const n=new URLSearchParams({environment:t});s&&n.append("profile",s);const i=await fetch(`${Dp}/amplify/apps?${n}`);if(!i.ok){const o=await i.text();throw new Error(`Failed to fetch Amplify apps: ${o}`)}return i.json()},async getBuildLogs(t,s,n,i){const o=new URLSearchParams({appId:t,branchName:s,jobId:n});i&&o.append("profile",i);const u=await fetch(`${Dp}/amplify/build-logs?${o}`);if(!u.ok){const h=await u.text();throw new Error(`Failed to fetch build logs: ${h}`)}return u.json()},async triggerBuild(t){const s=await fetch(`${Dp}/amplify/trigger-build`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const n=await s.text();throw new Error(`Failed to trigger build: ${n}`)}return s.json()}},d7=Jx("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Te({className:t,variant:s,asChild:n=!1,...i}){const o=n?KS:"span";return e.jsx(o,{"data-slot":"badge",className:Ie(d7({variant:s}),t),...i})}var[Rh]=yr("Tooltip",[Nh]),Dh=Nh(),pC="TooltipProvider",u7=700,wx="tooltip.open",[h7,_g]=Rh(pC),xC=t=>{const{__scopeTooltip:s,delayDuration:n=u7,skipDelayDuration:i=300,disableHoverableContent:o=!1,children:u}=t,h=E.useRef(!0),l=E.useRef(!1),d=E.useRef(0);return E.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),e.jsx(h7,{scope:s,isOpenDelayedRef:h,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(d.current),h.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>h.current=!0,i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:E.useCallback(f=>{l.current=f},[]),disableHoverableContent:o,children:u})};xC.displayName=pC;var kc="Tooltip",[m7,Ic]=Rh(kc),gC=t=>{const{__scopeTooltip:s,children:n,open:i,defaultOpen:o,onOpenChange:u,disableHoverableContent:h,delayDuration:l}=t,d=_g(kc,t.__scopeTooltip),f=Dh(s),[p,m]=E.useState(null),y=Xn(),j=E.useRef(0),S=h??d.disableHoverableContent,w=l??d.delayDuration,g=E.useRef(!1),[v,b]=xn({prop:i,defaultProp:o??!1,onChange:R=>{R?(d.onOpen(),document.dispatchEvent(new CustomEvent(wx))):d.onClose(),u?.(R)},caller:kc}),_=E.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),C=E.useCallback(()=>{window.clearTimeout(j.current),j.current=0,g.current=!1,b(!0)},[b]),A=E.useCallback(()=>{window.clearTimeout(j.current),j.current=0,b(!1)},[b]),D=E.useCallback(()=>{window.clearTimeout(j.current),j.current=window.setTimeout(()=>{g.current=!0,b(!0),j.current=0},w)},[w,b]);return E.useEffect(()=>()=>{j.current&&(window.clearTimeout(j.current),j.current=0)},[]),e.jsx(fN,{...f,children:e.jsx(m7,{scope:s,contentId:y,open:v,stateAttribute:_,trigger:p,onTriggerChange:m,onTriggerEnter:E.useCallback(()=>{d.isOpenDelayedRef.current?D():C()},[d.isOpenDelayedRef,D,C]),onTriggerLeave:E.useCallback(()=>{S?A():(window.clearTimeout(j.current),j.current=0)},[A,S]),onOpen:C,onClose:A,disableHoverableContent:S,children:n})})};gC.displayName=kc;var Sx="TooltipTrigger",vC=E.forwardRef((t,s)=>{const{__scopeTooltip:n,...i}=t,o=Ic(Sx,n),u=_g(Sx,n),h=Dh(n),l=E.useRef(null),d=Qe(s,l,o.onTriggerChange),f=E.useRef(!1),p=E.useRef(!1),m=E.useCallback(()=>f.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(pN,{asChild:!0,...h,children:e.jsx(We.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...i,ref:d,onPointerMove:Pe(t.onPointerMove,y=>{y.pointerType!=="touch"&&!p.current&&!u.isPointerInTransitRef.current&&(o.onTriggerEnter(),p.current=!0)}),onPointerLeave:Pe(t.onPointerLeave,()=>{o.onTriggerLeave(),p.current=!1}),onPointerDown:Pe(t.onPointerDown,()=>{o.open&&o.onClose(),f.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Pe(t.onFocus,()=>{f.current||o.onOpen()}),onBlur:Pe(t.onBlur,o.onClose),onClick:Pe(t.onClick,o.onClose)})})});vC.displayName=Sx;var jg="TooltipPortal",[f7,p7]=Rh(jg,{forceMount:void 0}),yC=t=>{const{__scopeTooltip:s,forceMount:n,children:i,container:o}=t,u=Ic(jg,s);return e.jsx(f7,{scope:s,forceMount:n,children:e.jsx(br,{present:n||u.open,children:e.jsx(vh,{asChild:!0,container:o,children:i})})})};yC.displayName=jg;var Yo="TooltipContent",bC=E.forwardRef((t,s)=>{const n=p7(Yo,t.__scopeTooltip),{forceMount:i=n.forceMount,side:o="top",...u}=t,h=Ic(Yo,t.__scopeTooltip);return e.jsx(br,{present:i||h.open,children:h.disableHoverableContent?e.jsx(_C,{side:o,...u,ref:s}):e.jsx(x7,{side:o,...u,ref:s})})}),x7=E.forwardRef((t,s)=>{const n=Ic(Yo,t.__scopeTooltip),i=_g(Yo,t.__scopeTooltip),o=E.useRef(null),u=Qe(s,o),[h,l]=E.useState(null),{trigger:d,onClose:f}=n,p=o.current,{onPointerInTransitChange:m}=i,y=E.useCallback(()=>{l(null),m(!1)},[m]),j=E.useCallback((S,w)=>{const g=S.currentTarget,v={x:S.clientX,y:S.clientY},b=b7(v,g.getBoundingClientRect()),_=_7(v,b),C=j7(w.getBoundingClientRect()),A=S7([..._,...C]);l(A),m(!0)},[m]);return E.useEffect(()=>()=>y(),[y]),E.useEffect(()=>{if(d&&p){const S=g=>j(g,p),w=g=>j(g,d);return d.addEventListener("pointerleave",S),p.addEventListener("pointerleave",w),()=>{d.removeEventListener("pointerleave",S),p.removeEventListener("pointerleave",w)}}},[d,p,j,y]),E.useEffect(()=>{if(h){const S=w=>{const g=w.target,v={x:w.clientX,y:w.clientY},b=d?.contains(g)||p?.contains(g),_=!w7(v,h);b?y():_&&(y(),f())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,p,h,f,y]),e.jsx(_C,{...t,ref:u})}),[g7,v7]=Rh(kc,{isInside:!1}),y7=HP("TooltipContent"),_C=E.forwardRef((t,s)=>{const{__scopeTooltip:n,children:i,"aria-label":o,onEscapeKeyDown:u,onPointerDownOutside:h,...l}=t,d=Ic(Yo,n),f=Dh(n),{onClose:p}=d;return E.useEffect(()=>(document.addEventListener(wx,p),()=>document.removeEventListener(wx,p)),[p]),E.useEffect(()=>{if(d.trigger){const m=y=>{y.target?.contains(d.trigger)&&p()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,p]),e.jsx(gh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m=>m.preventDefault(),onDismiss:p,children:e.jsxs(xN,{"data-state":d.stateAttribute,...f,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(y7,{children:i}),e.jsx(g7,{scope:n,isInside:!0,children:e.jsx(AI,{id:d.contentId,role:"tooltip",children:o||i})})]})})});bC.displayName=Yo;var jC="TooltipArrow",wC=E.forwardRef((t,s)=>{const{__scopeTooltip:n,...i}=t,o=Dh(n);return v7(jC,n).isInside?null:e.jsx(gN,{...o,...i,ref:s})});wC.displayName=jC;function b7(t,s){const n=Math.abs(s.top-t.y),i=Math.abs(s.bottom-t.y),o=Math.abs(s.right-t.x),u=Math.abs(s.left-t.x);switch(Math.min(n,i,o,u)){case u:return"left";case o:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function _7(t,s,n=5){const i=[];switch(s){case"top":i.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":i.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":i.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":i.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return i}function j7(t){const{top:s,right:n,bottom:i,left:o}=t;return[{x:o,y:s},{x:n,y:s},{x:n,y:i},{x:o,y:i}]}function w7(t,s){const{x:n,y:i}=t;let o=!1;for(let u=0,h=s.length-1;u<s.length;h=u++){const l=s[u],d=s[h],f=l.x,p=l.y,m=d.x,y=d.y;p>i!=y>i&&n<(m-f)*(i-p)/(y-p)+f&&(o=!o)}return o}function S7(t){const s=t.slice();return s.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),N7(s)}function N7(t){if(t.length<=1)return t.slice();const s=[];for(let i=0;i<t.length;i++){const o=t[i];for(;s.length>=2;){const u=s[s.length-1],h=s[s.length-2];if((u.x-h.x)*(o.y-h.y)>=(u.y-h.y)*(o.x-h.x))s.pop();else break}s.push(o)}s.pop();const n=[];for(let i=t.length-1;i>=0;i--){const o=t[i];for(;n.length>=2;){const u=n[n.length-1],h=n[n.length-2];if((u.x-h.x)*(o.y-h.y)>=(u.y-h.y)*(o.x-h.x))n.pop();else break}n.push(o)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var C7=xC,E7=gC,k7=vC,A7=yC,T7=bC,R7=wC;function wg({delayDuration:t=0,...s}){return e.jsx(C7,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function SC({...t}){return e.jsx(wg,{children:e.jsx(E7,{"data-slot":"tooltip",...t})})}function NC({...t}){return e.jsx(k7,{"data-slot":"tooltip-trigger",...t})}function CC({className:t,sideOffset:s=0,children:n,...i}){return e.jsx(A7,{children:e.jsxs(T7,{"data-slot":"tooltip-content",sideOffset:s,className:Ie("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[n,e.jsx(R7,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const ju={SUCCEED:{color:"text-green-500",bgColor:"bg-green-500/10",icon:vt,text:"Success",priority:1},FAILED:{color:"text-red-500",bgColor:"bg-red-500/10",icon:Ci,text:"Failed",priority:4},RUNNING:{color:"text-blue-500",bgColor:"bg-blue-500/10",icon:st,text:"Running",pulse:!0,priority:3},PENDING:{color:"text-yellow-500",bgColor:"bg-yellow-500/10",icon:Ms,text:"Pending",priority:2},PROVISIONING:{color:"text-blue-500",bgColor:"bg-blue-500/10",icon:st,text:"Provisioning",pulse:!0,priority:3},CANCELLING:{color:"text-orange-500",bgColor:"bg-orange-500/10",icon:Ye,text:"Cancelling",priority:3},CANCELLED:{color:"text-gray-500",bgColor:"bg-gray-500/10",icon:Ci,text:"Cancelled",priority:2}};function D7({appName:t,environment:s,profile:n,variant:i="compact",showRefresh:o=!0,autoRefresh:u=!0,refreshInterval:h=3e4,enabled:l=!0,className:d}){const[f,p]=E.useState(null),[m,y]=E.useState(!0),[j,S]=E.useState(!1),[w,g]=E.useState(null),v=E.useCallback(async(R=!1)=>{R?S(!0):y(!0),g(null);try{const k=await fC.getApps(s,n);if(k?.apps&&Array.isArray(k.apps)){const M=k.apps.find(I=>I.name===t);M?p(M):g("App not found")}else g("No apps data available")}catch(k){console.error("Failed to fetch Amplify app status:",k),g(null)}finally{y(!1),S(!1)}},[s,n,t]);E.useEffect(()=>{if(!l){y(!1);return}if(v(),u){const R=setInterval(()=>v(!0),h);return()=>clearInterval(R)}},[l,u,h,v]);const b=()=>{if(!f||f.branches.length===0)return null;const R=f.branches.map(k=>({status:k.lastBuildStatus,config:ju[k.lastBuildStatus]||ju.PENDING,branchName:k.branchName}));return R.sort((k,M)=>(M.config.priority||0)-(k.config.priority||0)),R[0]};if(!l)return e.jsx("div",{className:Ie("flex items-center gap-2",d),children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-gray-500/10",children:[e.jsx(Ms,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Select node to view status"})]})});if(m&&!f)return e.jsxs("div",{className:Ie("flex items-center gap-2",d),children:[e.jsx(st,{className:"w-4 h-4 animate-spin text-muted-foreground"}),i!=="minimal"&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"Checking status..."})]});if(w||!f)return e.jsx("div",{className:Ie("flex items-center gap-2",d),children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-gray-500/10",children:[e.jsx(Ms,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Status Unavailable"})]})});const _=b();if(!_)return e.jsx("div",{className:Ie("flex items-center gap-2",d),children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-gray-500/10",children:[e.jsx(Ye,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"No branches"})]})});const C=_.config.icon,A=_.config.pulse;if(i==="minimal")return e.jsx(wg,{children:e.jsxs(SC,{children:[e.jsx(NC,{asChild:!0,children:e.jsxs("div",{className:Ie("relative",d),children:[e.jsx("div",{className:Ie("w-3 h-3 rounded-full",_.config.bgColor.replace("/10",""),A&&"animate-pulse")}),A&&e.jsx("div",{className:Ie("absolute inset-0 w-3 h-3 rounded-full animate-ping",_.config.bgColor.replace("/10","/50"))})]})}),e.jsx(CC,{children:e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-medium",children:f.name}),e.jsxs("p",{className:"text-muted-foreground",children:[_.branchName,": ",_.config.text]})]})})]})});const D=f.branches.map(R=>{const k=ju[R.lastBuildStatus]||ju.PENDING;return{branch:R,config:k}});return i==="compact"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:Ie("flex items-center gap-2",d),children:[e.jsxs("div",{className:Ie("flex items-center gap-1.5 px-2 py-1 rounded-md",_.config.bgColor),children:[e.jsx(C,{className:Ie("w-4 h-4",_.config.color,A&&"animate-spin")}),e.jsx("span",{className:Ie("text-sm font-medium",_.config.color),children:_.config.text})]}),f.branches.length>1&&e.jsxs(Te,{variant:"secondary",className:"text-xs",children:[e.jsx(Kr,{className:"w-3 h-3 mr-1"}),f.branches.length]}),o&&e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>v(!0),disabled:j,children:e.jsx(Wt,{className:Ie("w-3 h-3",j&&"animate-spin")})})]}),f.defaultDomain&&e.jsxs("div",{className:"text-xs text-gray-400",children:[e.jsx("span",{className:"text-gray-500",children:"Default:"})," ",f.defaultDomain]})]}):e.jsxs("div",{className:Ie("space-y-3 p-3 border rounded-lg",d),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium text-sm",children:f.name})]}),o&&e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>v(!0),disabled:j,children:e.jsx(Wt,{className:Ie("w-3 h-3",j&&"animate-spin")})})]}),e.jsx("div",{className:"space-y-2",children:D.map(({branch:R,config:k})=>{const M=k.icon,I=k.pulse;return e.jsxs("div",{className:Ie("flex items-center justify-between px-2 py-1.5 rounded text-sm",k.bgColor),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:R.branchName})]}),e.jsxs("div",{className:Ie("flex items-center gap-1",k.color),children:[e.jsx(M,{className:Ie("w-3 h-3",I&&"animate-spin")}),e.jsx("span",{className:"text-xs",children:k.text})]})]},R.branchName)})}),u&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Auto-refreshes every ",h/1e3,"s"]})]})}const EC="aws_pricing_rates",M7=3600*1e3;async function O7(t="us-east-1"){try{const s=await fetch(`/api/pricing/rates?region=${t}`);if(!s.ok)throw new Error(`Failed to fetch pricing rates: ${s.statusText}`);const n=await s.json();return sessionStorage.setItem(EC,JSON.stringify({rates:n,timestamp:Date.now()})),console.log(`[Pricing] Fetched rates for ${t} (source: ${n.source})`),n}catch(s){console.error("[Pricing] Failed to fetch rates:",s);const n=kC();if(n)return console.warn("[Pricing] Using cached rates due to fetch error"),n;throw s}}function kC(){try{const t=sessionStorage.getItem(EC);if(!t)return null;const{rates:s,timestamp:n}=JSON.parse(t);return Date.now()-n>M7?(console.log("[Pricing] Cache is stale, will refresh"),null):s}catch(t){return console.error("[Pricing] Error reading cache:",t),null}}const AC=E.createContext(void 0);function P7({children:t,region:s="us-east-1"}){const[n,i]=E.useState(kC()),[o,u]=E.useState(!1),[h,l]=E.useState(null),[d,f]=E.useState(null),p=async()=>{if(!o){u(!0),l(null);try{const m=await O7(s);i(m),f(new Date),console.log(`[PricingContext] Fetched pricing rates for ${s} (source: ${m.source})`)}catch(m){const y=m;l(y),console.error("[PricingContext] Failed to fetch pricing rates:",y),n||console.error("[PricingContext] No cached rates available")}finally{u(!1)}}};return E.useEffect(()=>{n?console.log("[PricingContext] Using cached rates:",n.region,n.source):(console.log("[PricingContext] No cached rates, fetching..."),p())},[]),E.useEffect(()=>{const m=setInterval(()=>{console.log("[PricingContext] Auto-refresh triggered"),p()},36e5);return()=>clearInterval(m)},[s]),e.jsx(AC.Provider,{value:{rates:n,loading:o,error:h,lastFetched:d,refresh:p},children:t})}function L7(){const t=E.useContext(AC);if(!t)throw new Error("usePricing must be used within PricingProvider");return t}function TC(){const{rates:t,loading:s,error:n}=L7();if(!s)return n&&!t?null:t}const Mh=730;function B7(t,s){let n=s.rds[t.instanceClass]||s.rds["db.t4g.micro"];t.multiAz&&(n*=2);const i=n*Mh,o=t.allocatedStorage*s.storage.gp3PerGbMonth;return i+o}function I7(t,s){return t.minCapacity*s.aurora.acuHourly*Mh}function $7(t,s){return t.maxCapacity*s.aurora.acuHourly*Mh}function wu(t,s){const n=t.cpu/1024,i=t.memory/1024,o=n*s.fargate.vcpuHourly,u=i*s.fargate.memoryGbHourly;return(o+u)*t.desiredCount*Mh}function La(t){return t<.01?`$${t.toFixed(4)}`:t<1?`$${t.toFixed(2)}`:`$${t.toFixed(0)}`}function H7({nodeType:t,pricing:s,level:n="startup",serviceName:i,configProperties:o}){const u=TC();if(!s)return null;const h=s.nodes||s;if(t==="postgres"&&o){if(o.aurora){if(!u)return e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-gray-600/90 text-gray-300 border-gray-700 text-xs px-1 py-0.5",children:"..."});const p={minCapacity:o.minCapacity??0,maxCapacity:o.maxCapacity||1},m=I7(p,u),y=$7(p,u);return p.minCapacity===p.maxCapacity?e.jsxs(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:[La(m),"/mo"]}):e.jsxs(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:[La(m),"-",La(y),"/mo"]})}if(o.instanceClass){if(!u)return e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-gray-600/90 text-gray-300 border-gray-700 text-xs px-1 py-0.5",children:"..."});const p={instanceClass:o.instanceClass||"db.t4g.micro",allocatedStorage:o.allocatedStorage||20,multiAz:o.multiAz||!1},m=B7(p,u);return e.jsxs(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:[La(m),"/mo"]})}}const l={ecs:"vpc",backend:"backend",service:"ecs",postgres:"rds",aurora:"rds",s3:"s3",cloudwatch:"cloudwatch",cognito:"cognito",alb:"alb",nat_gateway:"nat_gateway","api-gateway":"api_gateway",eventbridge:"eventbridge",lambda:"lambda",ses:"ses",sqs:"sqs",ssm:"ssm",secrets:"secrets",route53:"route53",ecr:"ecr","scheduled-task":"scheduled","event-task":"event",xray:"xray",efs:"efs",sns:"sns",waf:"waf","secrets-manager":"secrets"};if(t==="backend"&&i==="Backend service"&&o){if(!u)return e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-gray-600/90 text-gray-300 border-gray-700 text-xs px-1 py-0.5",children:"..."});const p=typeof o.cpu=="string"?parseInt(o.cpu):o.cpu||256,m=typeof o.memory=="string"?parseInt(o.memory):o.memory||512;if(o.autoscalingEnabled){const w=o.autoscalingMinCapacity||1,g=o.autoscalingMaxCapacity||1,v={cpu:p,memory:m,desiredCount:w},b={cpu:p,memory:m,desiredCount:g},_=wu(v,u),C=wu(b,u);return e.jsxs(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:[La(_),"-",La(C),"/mo"]})}const y=o.desiredCount||1,S=wu({cpu:p,memory:m,desiredCount:y},u);return e.jsxs(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:[La(S),"/mo"]})}if(t==="scheduled-task"&&i){const p=`scheduled_${i.toLowerCase()}`;if(h[p]){const m=h[p].levels[n];if(m){const y=m.monthlyPrice,j=y<1?`$${y.toFixed(2)}/mo`:`$${y.toFixed(0)}/mo`;return e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:j})}}}if(t==="event-task"&&i){const p=`event_${i.toLowerCase()}`;if(h[p]){const m=h[p].levels[n];if(m){const y=m.monthlyPrice,j=y<1?`$${y.toFixed(2)}/mo`:`$${y.toFixed(0)}/mo`;return e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:j})}}}if(t==="service"&&i&&o){if(!u)return e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-gray-600/90 text-gray-300 border-gray-700 text-xs px-1 py-0.5",children:"..."});const p=typeof o.cpu=="string"?parseInt(o.cpu):o.cpu||256,m=typeof o.memory=="string"?parseInt(o.memory):o.memory||512,y=o.desiredCount||1,S=wu({cpu:p,memory:m,desiredCount:y},u);return e.jsxs(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:[La(S),"/mo"]})}const d=l[t];if(d&&!h[d])return e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-gray-600/90 text-gray-300 border-gray-700 text-xs px-1 py-0.5",children:"--.--/mo"});if(!d)return null;const f=h[d]?.levels[n];return f?e.jsxs(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-green-600/90 text-white border-green-700 text-xs px-1 py-0.5",children:["$",f.monthlyPrice.toFixed(0),"/mo"]}):e.jsx(Te,{variant:"secondary",className:"absolute -top-2 -right-2 bg-gray-600/90 text-gray-300 border-gray-700 text-xs px-1 py-0.5",children:"--.--/mo"})}const z7={frontend:js,backend:_s,database:fr,cache:fr,api:_s,analytics:HA,infrastructure:qr,"container-registry":Eu,route53:qr,waf:Kt,"api-gateway":_s,ecs:Eu,ecr:Eu,aurora:fr,eventbridge:ls,"secrets-manager":yt,ses:zo,sns:Pr,s3:Wr,amplify:qn,xray:Ds,cloudwatch:Lr,telemetry:Hu,alarms:SR,github:lh,auth:Gp,"client-app":Gp,"admin-app":tR,opa:_R,"service-regular":_s,"service-periodic":Rc,"service-event-driven":Co,service:_s,"scheduled-task":AR,"event-task":ls,postgres:fr,sqs:Pr,efs:Wr,alb:qr,appsync:qr},F7={frontend:"bg-yellow-500",backend:"bg-blue-500",database:"bg-red-500",cache:"bg-red-500",api:"bg-blue-400",analytics:"bg-green-500",infrastructure:"bg-purple-500","container-registry":"bg-orange-500",route53:"bg-purple-600",waf:"bg-red-600","api-gateway":"bg-pink-600",ecs:"bg-orange-600",ecr:"bg-orange-500",aurora:"bg-purple-500",eventbridge:"bg-pink-500","secrets-manager":"bg-red-500",ses:"bg-red-500",sns:"bg-pink-500",s3:"bg-green-600",amplify:"bg-red-500",xray:"bg-purple-500",cloudwatch:"bg-pink-500",telemetry:"bg-yellow-600",alarms:"bg-blue-500",github:"bg-gray-700",auth:"bg-gray-800","client-app":"bg-indigo-700","admin-app":"bg-gray-600",opa:"bg-gray-700","service-regular":"bg-blue-600","service-periodic":"bg-purple-600","service-event-driven":"bg-green-600",service:"bg-blue-600","scheduled-task":"bg-purple-600","event-task":"bg-green-600",postgres:"bg-indigo-600",sqs:"bg-yellow-600",efs:"bg-teal-600",alb:"bg-pink-600",appsync:"bg-purple-600"};function U7({data:t,selected:s}){const n=z7[t.type],i=F7[t.type],o=["backend","service","service-regular","service-periodic","service-event-driven","scheduled-task","event-task","amplify"].includes(t.type);return e.jsxs("div",{className:`
      relative border-2 rounded-lg p-4 min-w-64 shadow-lg
      ${t.isExternal?"bg-gray-900 border-dashed":t.type==="amplify"?"bg-gradient-to-br from-red-950/20 to-gray-900 border-2":o?"bg-gradient-to-br from-gray-800 to-gray-900 border-2":"bg-gray-800"}
      ${s?"border-blue-500 shadow-blue-500/20":t.isExternal?"border-gray-500":o?t.type==="backend"?"border-blue-600/50 shadow-blue-900/20":t.type==="service"?"border-purple-600/50 shadow-purple-900/20":t.type==="scheduled-task"?"border-green-600/50 shadow-green-900/20":t.type==="event-task"?"border-orange-600/50 shadow-orange-900/20":t.type==="amplify"?"border-red-600/50 shadow-red-900/20":"border-gray-600":"border-gray-600"}
      hover:border-gray-400 transition-all duration-200
      ${t.disabled?"opacity-50":""}
    `,children:[e.jsx(Dr,{type:"target",position:Me.Top,id:"target-top",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),e.jsx(Dr,{type:"target",position:Me.Left,id:"target-left",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),e.jsx(Dr,{type:"target",position:Me.Bottom,id:"target-bottom",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),e.jsx(Dr,{type:"target",position:Me.Right,id:"target-right",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),e.jsx(Dr,{type:"source",position:Me.Top,id:"source-top",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),e.jsx(Dr,{type:"source",position:Me.Left,id:"source-left",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),e.jsx(Dr,{type:"source",position:Me.Bottom,id:"source-bottom",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),e.jsx(Dr,{type:"source",position:Me.Right,id:"source-right",className:"w-3 h-3 bg-gray-600 border-2 border-gray-700"}),o&&e.jsx("div",{className:`absolute -top-1 -right-1 w-2 h-2 rounded-full
          ${t.type==="backend"?"bg-blue-500":t.type==="service"?"bg-purple-500":t.type==="scheduled-task"?"bg-green-500":t.type==="event-task"?"bg-orange-500":"bg-gray-500"}`}),t.pricing&&!t.isExternal&&e.jsx(H7,{nodeType:t.type,pricing:t.pricing,serviceName:t.name,level:"startup",configProperties:t.configProperties}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${i} ${t.disabled?"opacity-60":""}`,children:e.jsx(n,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-white",children:t.name}),t.type==="amplify"&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",children:"BETA"})]}),t.url&&e.jsx("p",{className:"text-sm text-gray-400 truncate",children:t.url})]})]}),t.description&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"text-xs text-gray-400",children:t.description})}),o&&t.configProperties&&e.jsxs("div",{className:"space-y-2 mt-2",children:[(t.type==="backend"||t.type==="service")&&t.configProperties.domain&&e.jsx("div",{className:"text-xs bg-gray-900/50 rounded px-2 py-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(js,{className:"w-3 h-3"}),e.jsx("span",{className:"font-mono truncate",children:t.configProperties.domain})]})}),t.type==="scheduled-task"&&t.configProperties.schedule&&e.jsx("div",{className:"text-xs bg-gray-900/50 rounded px-2 py-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(Ms,{className:"w-3 h-3"}),e.jsx("span",{className:"font-mono",children:t.configProperties.schedule})]})}),t.type==="event-task"&&t.configProperties.sources&&e.jsxs("div",{className:"text-xs bg-gray-900/50 rounded px-2 py-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(ls,{className:"w-3 h-3"}),e.jsx("span",{children:"Event Rules:"})]}),t.configProperties.sources&&e.jsxs("div",{className:"text-gray-300 ml-4",children:["Source: ",t.configProperties.sources.join(", ")]}),t.configProperties.detailTypes&&e.jsxs("div",{className:"text-gray-300 ml-4 truncate",children:["Types: ",t.configProperties.detailTypes.join(", ")]})]}),t.type==="amplify"&&t.configProperties&&e.jsxs(e.Fragment,{children:[t.configProperties.repository&&e.jsx("div",{className:"text-xs bg-gray-900/50 rounded px-2 py-1 mb-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(lh,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:t.configProperties.repository})]})}),t.configProperties.customDomain&&e.jsx("div",{className:"text-xs bg-gray-900/50 rounded px-2 py-1 mb-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(js,{className:"w-3 h-3"}),e.jsx("span",{className:"text-gray-500",children:"Custom:"}),e.jsx("span",{className:"text-white ml-1",children:t.configProperties.customDomain})]})}),t.configProperties.branches&&t.configProperties.branches.length>0&&e.jsx("div",{className:"text-xs bg-gray-900/50 rounded px-2 py-1 mb-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(Kr,{className:"w-3 h-3"}),e.jsxs("span",{children:[t.configProperties.branches.length," branch",t.configProperties.branches.length!==1?"es":""]}),t.configProperties.branch&&e.jsxs("span",{className:"text-white ml-1",children:["(",t.configProperties.branch,")"]})]})}),e.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Build Status:"}),e.jsx(D7,{appName:t.name,environment:t.configProperties.environment||"dev",profile:t.configProperties.profile,variant:"compact",showRefresh:!1,autoRefresh:!0,enabled:s,className:"w-full"})]})]}),t.type!=="amplify"&&e.jsx("div",{className:"bg-gray-900/50 rounded px-2 py-1",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400",children:"Resources:"}),t.type==="backend"&&t.configProperties.autoscalingEnabled?e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(Ds,{className:"w-3 h-3 text-green-500"}),e.jsxs("span",{className:"text-white font-medium",children:[t.configProperties.autoscalingMinCapacity||1,"-",t.configProperties.autoscalingMaxCapacity||10," ","instances"]})]}):t.configProperties.desiredCount&&e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(ut,{className:"w-3 h-3 text-gray-500"}),e.jsxs("span",{className:"text-white font-medium",children:[t.configProperties.desiredCount," instance",t.configProperties.desiredCount!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsxs("span",{children:[t.configProperties.cpu||"0.25"," vCPU"]}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("span",{children:t.configProperties.memory||"512MB"})]})]})}),t.configProperties.healthStatus&&e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[t.configProperties.healthStatus.critical&&e.jsxs("div",{className:"flex items-center gap-0.5 text-red-400",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{children:"Critical"})]}),t.configProperties.healthStatus.monitored&&e.jsxs("div",{className:"flex items-center gap-0.5 text-green-400",children:[e.jsx(Ds,{className:"w-3 h-3"}),e.jsx("span",{children:"Monitored"})]})]})]}),t.isExternal&&e.jsx("div",{className:"text-xs text-blue-400 mb-2 italic",children:"External to infrastructure"}),t.deploymentType&&!o&&e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:t.deploymentType}),t.replicas&&!o&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(ut,{className:"w-3 h-3"}),e.jsxs("span",{children:[t.replicas," Replicas"]})]}),t.resources&&!o&&e.jsx("div",{className:"mt-2 p-2 bg-gray-700 rounded text-xs",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300",children:"Resources:"}),e.jsxs("span",{className:"text-gray-400",children:[t.resources.cpu,", ",t.resources.memory]})]})}),t.group&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(qr,{className:"w-3 h-3"}),e.jsx("span",{children:t.group}),t.subgroup&&e.jsxs("span",{children:["/ ",t.subgroup]})]}),t.hasTelemetry&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-purple-600 rounded-full p-1",children:e.jsx(Hu,{className:"w-3 h-3 text-white"})}),["backend","service"].includes(t.type)&&t.configProperties&&e.jsx("div",{className:"absolute -top-2 -left-2 flex flex-col gap-1",children:t.type==="backend"&&t.configProperties.autoscalingEnabled?e.jsxs("div",{className:"bg-green-600 text-white rounded-full px-2 py-0.5 text-xs font-medium flex items-center gap-1",children:[e.jsx(Ds,{className:"w-3 h-3"}),t.configProperties.autoscalingMinCapacity||1,"-",t.configProperties.autoscalingMaxCapacity||10]}):e.jsxs("div",{className:"bg-blue-600 text-white rounded-full px-2 py-0.5 text-xs font-medium flex items-center gap-1",children:[e.jsx(ut,{className:"w-3 h-3"}),t.configProperties.desiredCount||1]})})]})}const W7={service:U7,group:c7,dynamicGroup:o7},V7={smoothstep:i7},q7=[{id:"github",type:"service",position:{x:230,y:-80},data:{id:"github",type:"github",name:"GitHub Actions",description:"Source code & CI/CD",status:"running",deletable:!1},deletable:!1},{id:"client-app",type:"service",position:{x:-639,y:388},data:{id:"client-app",type:"client-app",name:"Client Applications",description:"Web, Mobile, Desktop apps",status:"external",isExternal:!0,deletable:!1},deletable:!1},{id:"route53",type:"service",position:{x:-131,y:158},data:{id:"route53",type:"route53",name:"Amazon Route 53",description:"DNS management",status:"running",deletable:!1},deletable:!1},{id:"api-gateway",type:"service",position:{x:-83,y:518},data:{id:"api-gateway",type:"api-gateway",name:"Amazon API Gateway",description:"API routing & throttling",status:"running",deletable:!1},deletable:!1},{id:"alb",type:"service",position:{x:-83,y:618},data:{id:"alb",type:"alb",name:"Application Load Balancer",description:"HTTP/HTTPS routing",status:"running",deletable:!1},deletable:!1},{id:"ecs-cluster-group",type:"dynamicGroup",position:{x:0,y:0},data:{label:"ECS Cluster",nodeIds:["ecs-cluster","backend-service"]},style:{zIndex:-3,backgroundColor:"rgba(59, 130, 246, 0.05)",border:"2px solid #3b82f6"},draggable:!1,selectable:!1},{id:"ecs-cluster",type:"service",position:{x:284,y:283},data:{id:"ecs-cluster",type:"ecs",name:"Amazon ECS Cluster",description:"Container orchestration",status:"running",deletable:!1,group:"ECS Cluster"},deletable:!1},{id:"ecr",type:"service",position:{x:280,y:110},data:{id:"ecr",type:"ecr",name:"Amazon ECR",description:"Docker image registry",status:"running",deletable:!1},deletable:!1},{id:"backend-service",type:"service",position:{x:292,y:459},data:{id:"backend-service",type:"backend",name:"Backend service",description:"Main API service",status:"running",group:"ECS Cluster",subgroup:"Services"}},{id:"aurora",type:"service",position:{x:600,y:110},data:{id:"aurora",type:"postgres",name:"PostgreSQL Database",description:"Relational data storage",status:"running",deletable:!1},deletable:!1},{id:"eventbridge",type:"service",position:{x:290,y:620},data:{id:"eventbridge",type:"eventbridge",name:"Amazon EventBridge",description:"Event routing",status:"running",deletable:!1},deletable:!1},{id:"ses",type:"service",position:{x:1170,y:620},data:{id:"ses",type:"ses",name:"Amazon SES",description:"Email delivery",status:"running",deletable:!1,disabled:!0},deletable:!1},{id:"sns",type:"service",position:{x:580,y:620},data:{id:"sns",type:"sns",name:"Amazon SNS",description:"Push notifications",status:"running",deletable:!1},deletable:!1},{id:"sqs",type:"service",position:{x:730,y:620},data:{id:"sqs",type:"sqs",name:"Amazon SQS",description:"Message queue",status:"running",deletable:!1,disabled:!0},deletable:!1},{id:"s3",type:"service",position:{x:880,y:620},data:{id:"s3",type:"s3",name:"Amazon S3",description:"Object storage",status:"running",deletable:!1},deletable:!1}],G7=[{id:"github-ecr",source:"github",target:"ecr",sourceHandle:"source-bottom",targetHandle:"target-top",type:"smoothstep",animated:!0,label:"push",style:{stroke:"#60a5fa",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#6b7280"}},{id:"ecr-ecs",source:"ecr",target:"ecs-cluster",sourceHandle:"source-bottom",targetHandle:"target-top",type:"smoothstep",animated:!0,label:"deploy",style:{stroke:"#60a5fa",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#6b7280"}},{id:"client-route53",source:"client-app",target:"route53",type:"smoothstep",animated:!0,label:"DNS",style:{stroke:"#8b5cf6",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#4f46e5"}},{id:"client-api",source:"client-app",target:"api-gateway",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",animated:!0,label:"HTTPS",style:{stroke:"#8b5cf6",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#4f46e5"}},{id:"client-alb",source:"client-app",target:"alb",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",animated:!0,label:"HTTPS",style:{stroke:"#8b5cf6",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#4f46e5"}},{id:"route53-api",source:"route53",target:"api-gateway",type:"smoothstep",animated:!0,label:"resolve",style:{stroke:"#a78bfa",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#8b5cf6"}},{id:"api-backend",source:"api-gateway",target:"backend-service",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",animated:!0,label:"route",style:{stroke:"#6366f1",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#4f46e5"}},{id:"route53-alb",source:"route53",target:"alb",type:"smoothstep",animated:!0,label:"resolve",style:{stroke:"#a78bfa",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#8b5cf6"}},{id:"alb-backend",source:"alb",target:"backend-service",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",animated:!0,label:"route",style:{stroke:"#6366f1",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#4f46e5"}},{id:"backend-aurora",source:"backend-service",target:"aurora",type:"smoothstep",animated:!0,label:"SQL",style:{stroke:"#10b981",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#10b981"}},{id:"backend-s3",source:"backend-service",target:"s3",sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",animated:!0,label:"S3",style:{stroke:"#10b981",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#10b981"}},{id:"backend-ses",source:"backend-service",target:"ses",type:"smoothstep",animated:!0,label:"SMTP",style:{stroke:"#10b981",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#10b981"}},{id:"backend-sns",source:"backend-service",target:"sns",type:"smoothstep",animated:!0,label:"publish",style:{stroke:"#10b981",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#10b981"}},{id:"backend-sqs",source:"backend-service",target:"sqs",type:"smoothstep",animated:!0,label:"queue",style:{stroke:"#10b981",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#10b981"}},{id:"backend-eventbridge",source:"backend-service",target:"eventbridge",sourceHandle:"source-bottom",targetHandle:"target-top",type:"smoothstep",animated:!0,label:"events",style:{stroke:"#10b981",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#10b981"}},{id:"backend-secrets",source:"backend-service",target:"secrets-manager",type:"smoothstep",animated:!0,label:"secrets",style:{stroke:"#10b981",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#10b981"}},{id:"backend-xray",source:"backend-service",target:"xray",type:"smoothstep",animated:!1,label:"trace",style:{stroke:"#94a3b8",strokeWidth:1.5,strokeDasharray:"4,4",opacity:.6},markerEnd:{type:Lt.ArrowClosed,color:"#94a3b8"}},{id:"backend-cloudwatch",source:"backend-service",target:"cloudwatch",type:"smoothstep",animated:!1,label:"logs",style:{stroke:"#94a3b8",strokeWidth:1.5,strokeDasharray:"4,4",opacity:.6},markerEnd:{type:Lt.ArrowClosed,color:"#94a3b8"}}];function Y7({onNodeSelect:t,selectedNode:s,config:n,environmentName:i,onAddService:o,onAddScheduledTask:u,onAddEventTask:h,onAddAmplify:l,pricing:d}){const f=E.useRef(null),[p,m]=ae.useState(new Map),[y,j]=E.useState(new Map),[S,w]=E.useState(!0),[g,v]=ae.useState(!0),[b,_]=E.useState(null),[C,A]=E.useState(null),D=E.useRef([]),R=E.useMemo(()=>{let Z=[...q7];const oe=Y$(n||null,292,459),P=oe.map(ee=>ee.id);Z=[...Z,...oe];const Q=t7(n||null,i);return Z=[...Z,...Q],Z=Z.map(ee=>ee.id==="ecs-cluster-group"?X$(ee,P):ee),p.size>0?(Z=Z.map(ee=>{const te=p.get(ee.id);return te?{...ee,position:te}:ee}),Z):n7(Z)},[n,p,i]),[k,M,I]=yP(R);E.useEffect(()=>{D.current=k},[k]);const q=E.useMemo(()=>{const Z=P=>yj(P,n||null),oe=[...G7];return n?.amplify_apps&&n.amplify_apps.forEach(P=>{P.custom_domain&&oe.push({id:`amplify-${P.name}-route53`,source:`amplify-${P.name}`,target:"route53",type:"smoothstep",animated:!0,label:"DNS",style:{stroke:"#8b5cf6",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#4f46e5"}})}),n?.amplify_apps&&n.amplify_apps.forEach(P=>{oe.push({id:`client-amplify-${P.name}`,source:"client-app",target:`amplify-${P.name}`,sourceHandle:"source-right",targetHandle:"target-left",type:"smoothstep",animated:!0,label:"HTTPS",style:{stroke:"#8b5cf6",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#4f46e5"}})}),n?.event_processor_tasks&&n.event_processor_tasks.forEach(P=>{oe.push({id:`eventbridge-event-${P.name}`,source:"eventbridge",target:`event-${P.name}`,sourceHandle:"source-bottom",targetHandle:"target-top",type:"smoothstep",animated:!0,label:"trigger",style:{stroke:"#f59e0b",strokeWidth:2},markerEnd:{type:Lt.ArrowClosed,color:"#d97706"}})}),oe.filter(P=>k.find(ee=>ee.id===P.source)?.data?.isExternal?Z(P.target):(P.source==="github"||P.source==="ecr",Z(P.source)&&Z(P.target))).map(P=>{const Q=y.get(P.id);return Q?{...P,sourceHandle:Q.sourceHandle||P.sourceHandle,targetHandle:Q.targetHandle||P.targetHandle}:P})},[n,k,y]),[W,G,$]=bP([]);E.useEffect(()=>{i?(w(!0),Be.getNodePositions(i).then(Z=>{const oe=new Map;if(!Z.positions||Z.positions.length===0?(console.log("No saved positions found, using default layout"),_u.nodes.forEach(P=>{oe.set(P.id,P.position)})):Z.positions.forEach(P=>{oe.set(P.nodeId,{x:P.x,y:P.y})}),window.localStorage.getItem("debug_positions")==="true"&&(console.log("DEBUG: All loaded positions:",Z.positions),console.log("DEBUG: All loaded edge handles:",Z.edgeHandles)),m(oe),Z.edgeHandles){const P=new Map;Z.edgeHandles.forEach(Q=>{P.set(Q.edgeId,Q)}),j(P)}else if(!Z.positions||Z.positions.length===0){const P=new Map;_u.edges.forEach(Q=>{(Q.sourceHandle||Q.targetHandle)&&P.set(Q.id,{edgeId:Q.id,sourceHandle:Q.sourceHandle,targetHandle:Q.targetHandle})}),j(P)}w(!1)}).catch(Z=>{console.error("Failed to load node positions:",Z);const oe=new Map;_u.nodes.forEach(Q=>{oe.set(Q.id,Q.position)}),m(oe);const P=new Map;_u.edges.forEach(Q=>{(Q.sourceHandle||Q.targetHandle)&&P.set(Q.id,{edgeId:Q.id,sourceHandle:Q.sourceHandle,targetHandle:Q.targetHandle})}),j(P),w(!1)})):w(!1)},[i]),E.useEffect(()=>{M(R)},[R,M]),E.useEffect(()=>{S||G(q)},[S,q,G]);const F=E.useCallback(()=>{v(Z=>!Z)},[]),B=E.useCallback(Z=>G(oe=>dS(Z,oe)),[G]),V=E.useCallback((Z,oe)=>{if(oe.type==="service"){const P=oe.data;P.isExternal||t(P)}},[t]),O=E.useCallback(()=>{t(null),_(null),A(null)},[t]),H=E.useCallback((Z,oe)=>{Z.stopPropagation(),_(oe),A({x:Z.clientX,y:Z.clientY})},[]),U=E.useMemo(()=>k.map(Z=>{const oe=yj(Z.id,n||null),P=q$(Z.id,n||null),Q=V$(Z.id,n||null);return{...Z,selected:s?.id===Z.id,data:{...Z.data,description:Q||Z.data.description,disabled:!oe,configProperties:P,pricing:d}}}).filter(Z=>Z.type==="group"||Z.type==="dynamicGroup"?!0:!(!g&&Z.data.disabled)),[k,s,n,g,d]),L=E.useMemo(()=>{const Z=new Map(U.map(P=>[P.id,P])),oe=new Set(U.map(P=>P.id));return W.filter(P=>oe.has(P.source)&&oe.has(P.target)).map(P=>{const Q=Z.get(P.source),ee=Z.get(P.target),te=Q?.data?.disabled||ee?.data?.disabled;return{...P,style:{...P.style,opacity:te?.3:1,animated:te?!1:P.animated},animated:te?!1:P.animated}})},[W,U]),Y=E.useCallback(()=>{if(!i||S)return;const oe=D.current.map(ee=>({nodeId:ee.id,x:ee.position.x,y:ee.position.y})),P=Array.from(y.values()),Q={environment:i,positions:oe,edgeHandles:P.length>0?P:void 0};console.log("Saving positions - total nodes:",oe.length),console.log("Saving positions for problematic nodes:",oe.filter(ee=>["s3","ses","sqs","eventbridge","sns"].includes(ee.nodeId))),window.localStorage.getItem("debug_positions")==="true"&&(console.log("DEBUG: All positions being saved:",oe),console.log("DEBUG: All edge handles being saved:",P)),Be.saveNodePositions(Q).catch(ee=>{console.error("Failed to save node positions:",ee)})},[i,y,S]),J=E.useCallback((Z,oe,P)=>{const Q={edgeId:Z,sourceHandle:oe,targetHandle:P};j(ee=>new Map(ee).set(Z,Q)),G(ee=>ee.map(te=>te.id===Z?{...te,sourceHandle:oe,targetHandle:P}:te)),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{Y()},1e3)},[G,Y]),K=E.useCallback(Z=>{I(Z),Z.some(P=>P.type==="position"&&P.dragging===!1)&&i&&(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{Y()},500))},[I,Y,i]);return e.jsxs("div",{className:"size-full",children:[e.jsxs(WS,{nodes:U,edges:L,onNodesChange:K,onEdgesChange:$,onConnect:B,onNodeClick:V,onEdgeClick:H,onPaneClick:O,nodeTypes:W7,edgeTypes:V7,fitView:!0,fitViewOptions:{padding:.3,includeHiddenNodes:!1,minZoom:.3,maxZoom:1},defaultViewport:{x:0,y:0,zoom:.4},className:"bg-gray-950",proOptions:{hideAttribution:!0},snapToGrid:!0,snapGrid:[10,10],children:[e.jsx(LP,{color:"#374151",gap:20,size:1}),e.jsx(TP,{nodeColor:"#4f46e5",nodeStrokeWidth:3,className:"bg-gray-800 border border-gray-700 rounded-lg"}),e.jsx(a7,{showInactive:g,onToggleInactive:F,onAddService:o,onAddScheduledTask:u,onAddEventTask:h,onAddAmplify:l})]}),b&&C&&e.jsx(l7,{edge:W.find(Z=>Z.id===b.id)||b,position:C,onClose:()=>{_(null),A(null)},onHandleChange:J})]})}const X7=Jx("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ze({className:t,variant:s,...n}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Ie(X7({variant:s}),t),...n})}function Fe({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:Ie("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}function K7({open:t,onSelect:s}){const[n,i]=E.useState([]),[o,u]=E.useState(""),[h,l]=E.useState(!0),[d,f]=E.useState(null),p=E.useCallback(async()=>{try{l(!0),f(null);const y=await Be.getEnvironments();i(y);const j=y.find(S=>S.isActive);j?u(j.name):y.length>0&&u(y[0].name)}catch(y){f(y instanceof Error?y.message:"Failed to load environments")}finally{l(!1)}},[]);E.useEffect(()=>{t&&p()},[t,p]);const m=()=>{o&&s(o)};return e.jsx(sa,{open:t,modal:!0,children:e.jsxs(ra,{className:"sm:max-w-[425px]",onPointerDownOutside:y=>y.preventDefault(),onEscapeKeyDown:y=>y.preventDefault(),children:[e.jsxs(na,{children:[e.jsx(ia,{children:"Select Environment"}),e.jsx(el,{children:"Choose an environment to load the infrastructure configuration"})]}),e.jsxs("div",{className:"py-4 space-y-4",children:[d&&e.jsx(ze,{variant:"destructive",className:"mb-4",children:e.jsx(Fe,{children:d})}),h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"size-8 animate-spin"})}):n.length===0?e.jsx(ze,{children:e.jsx(Fe,{children:"No environments found. Please create an environment configuration file first."})}):e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Environment"}),e.jsxs(Zt,{value:o,onValueChange:u,children:[e.jsx(es,{children:e.jsx(Jt,{placeholder:"Select an environment"})}),e.jsx(ts,{children:n.map(y=>e.jsx(Ee,{value:y.name,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-medium",children:y.name}),y.isActive&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Active  ",y.profile,"  ",y.accountId]})]})},y.name))})]})]})]}),e.jsx(aa,{children:e.jsx(ie,{onClick:m,disabled:!o||h,children:"Continue"})})]})})}function Q7(){const t=TC();if(!t)return null;const s=t.pricingDate||"2025-01-15",n=t.source==="aws_api"?"AWS API":"curated pricing",i=new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsx(wg,{children:e.jsxs(SC,{children:[e.jsx(NC,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400 cursor-help",children:[e.jsx(Le,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Pricing as of ",i]})]})}),e.jsxs(CC,{side:"top",className:"max-w-xs",children:[e.jsxs("p",{className:"text-sm",children:["Pricing data sourced from ",n," and updated quarterly to ensure accuracy."]}),t.source==="fallback"&&e.jsx("p",{className:"text-xs mt-1 text-gray-400",children:"Next review: April 2025"})]})]})})}var Oh="Switch",[Z7]=yr(Oh),[J7,e9]=Z7(Oh),RC=E.forwardRef((t,s)=>{const{__scopeSwitch:n,name:i,checked:o,defaultChecked:u,required:h,disabled:l,value:d="on",onCheckedChange:f,form:p,...m}=t,[y,j]=E.useState(null),S=Qe(s,_=>j(_)),w=E.useRef(!1),g=y?p||!!y.closest("form"):!0,[v,b]=xn({prop:o,defaultProp:u??!1,onChange:f,caller:Oh});return e.jsxs(J7,{scope:n,checked:v,disabled:l,children:[e.jsx(We.button,{type:"button",role:"switch","aria-checked":v,"aria-required":h,"data-state":PC(v),"data-disabled":l?"":void 0,disabled:l,value:d,...m,ref:S,onClick:Pe(t.onClick,_=>{b(C=>!C),g&&(w.current=_.isPropagationStopped(),w.current||_.stopPropagation())})}),g&&e.jsx(OC,{control:y,bubbles:!w.current,name:i,value:d,checked:v,required:h,disabled:l,form:p,style:{transform:"translateX(-100%)"}})]})});RC.displayName=Oh;var DC="SwitchThumb",MC=E.forwardRef((t,s)=>{const{__scopeSwitch:n,...i}=t,o=e9(DC,n);return e.jsx(We.span,{"data-state":PC(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:s})});MC.displayName=DC;var t9="SwitchBubbleInput",OC=E.forwardRef(({__scopeSwitch:t,control:s,checked:n,bubbles:i=!0,...o},u)=>{const h=E.useRef(null),l=Qe(h,u),d=Oc(n),f=Pc(s);return E.useEffect(()=>{const p=h.current;if(!p)return;const m=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==n&&j){const S=new Event("click",{bubbles:i});j.call(p,n),p.dispatchEvent(S)}},[d,n,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:l,style:{...o.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});OC.displayName=t9;function PC(t){return t?"checked":"unchecked"}var s9=RC,r9=MC;function ct({className:t,...s}){return e.jsx(s9,{"data-slot":"switch",className:Ie("peer data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-gray-500 data-[state=unchecked]:border-gray-500 data-[state=checked]:border-transparent transition-all outline-none focus-visible:ring-[3px] focus-visible:ring-blue-500/50 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(r9,{"data-slot":"switch-thumb",className:Ie("bg-white dark:bg-white pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function n9({config:t,onConfigChange:s}){const[n,i]=E.useState(t.alb?.enabled||!1),[o,u]=E.useState("");E.useEffect(()=>{u(`$${22.27.toFixed(2)}/month`)},[]);const h=d=>{i(d),s({alb:{...t.alb,enabled:d}})},l=()=>t.workload?.backend_alb_domain_name?`https://${t.workload.backend_alb_domain_name}/health`:"Not configured";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"w-5 h-5"}),"Application Load Balancer Settings"]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{htmlFor:"alb-enabled",children:"Enable ALB"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Use Application Load Balancer instead of API Gateway for incoming traffic"})]}),e.jsx(ct,{id:"alb-enabled",checked:n,onCheckedChange:h})]}),n&&e.jsx("div",{className:"pl-4 pt-2 border-l-2 border-blue-500 space-y-3",children:e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsx(Ye,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"When ALB is enabled, API Gateway will be disabled automatically"]})})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Network Configuration"]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Type:"}),e.jsx("p",{className:"font-mono text-white",children:"Application"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Scheme:"}),e.jsx("p",{className:"font-mono text-white",children:"Internet-facing"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"IP Address Type:"}),e.jsx("p",{className:"font-mono text-white",children:"IPv4"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Availability Zones:"}),e.jsx("p",{className:"font-mono text-white",children:"Multi-AZ"})]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-700",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Security Groups:"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-mono",children:"HTTPS (443) from 0.0.0.0/0"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-mono",children:"HTTP (80) from 0.0.0.0/0"})]})]})]})]})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5"}),"Target Groups"]})}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"font-medium text-white",children:"Backend Service"})}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Target Type: ",e.jsx("span",{className:"text-white",children:"IP"})]}),e.jsxs("div",{children:["Protocol: ",e.jsx("span",{className:"text-white",children:"HTTP"})]}),e.jsxs("div",{children:["Port:"," ",e.jsx("span",{className:"text-white",children:t.workload?.backend_image_port||8080})]}),e.jsxs("div",{children:["Health Check:"," ",e.jsx("span",{className:"text-white font-mono",children:t.workload?.backend_health_endpoint||"/health"})]})]})]}),t.services?.map(d=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"font-medium text-white",children:d.name})}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Target Type: ",e.jsx("span",{className:"text-white",children:"IP"})]}),e.jsxs("div",{children:["Protocol: ",e.jsx("span",{className:"text-white",children:"HTTP"})]}),e.jsxs("div",{children:["Port:"," ",e.jsx("span",{className:"text-white",children:d.container_port||8080})]}),e.jsxs("div",{children:["Desired Count:"," ",e.jsx("span",{className:"text-white",children:d.desired_count||1})]})]})]},d.name))]})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5"}),"Listener Rules"]})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"font-medium text-white mb-2",children:"HTTPS:443"}),e.jsx("div",{className:"text-sm text-gray-400 space-y-2",children:e.jsxs("div",{className:"pl-4 border-l-2 border-blue-500",children:[e.jsx("div",{className:"font-mono",children:"Default Action  Backend Target Group"}),e.jsx("div",{className:"text-xs mt-1",children:"SSL Certificate: ACM (Auto-managed)"})]})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"font-medium text-white mb-2",children:"HTTP:80"}),e.jsx("div",{className:"text-sm text-gray-400 space-y-2",children:e.jsxs("div",{className:"pl-4 border-l-2 border-orange-500",children:[e.jsx("div",{className:"font-mono",children:"Redirect to HTTPS"}),e.jsx("div",{className:"text-xs mt-1",children:"Status Code: 301 (Permanent)"})]})})]})]})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Domain & SSL Configuration"]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{children:"ALB Domain"}),e.jsx("div",{className:"mt-1 font-mono text-sm bg-gray-800 p-2 rounded",children:t.workload?.backend_alb_domain_name||"Not configured"})]}),t.workload?.backend_alb_domain_name&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-gray-400",children:"SSL Certificate provisioned via AWS Certificate Manager"})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Health Check Endpoint"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("code",{className:"text-xs bg-gray-800 px-2 py-1 rounded flex-1",children:l()}),e.jsx(ie,{size:"sm",variant:"outline",onClick:()=>window.open(l(),"_blank"),disabled:!t.workload?.backend_alb_domain_name,children:"Test"})]})]})]})]})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(uT,{className:"w-5 h-5"}),"Cost Estimation"]})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Base ALB Cost (24/7)"}),e.jsx("span",{className:"font-mono text-white",children:"$16.43/month"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Load Balancer Capacity Units (Est.)"}),e.jsx("span",{className:"font-mono text-white",children:"$5.84/month"})]}),e.jsx("div",{className:"border-t border-gray-700 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Estimated Cost"}),e.jsx("span",{className:"font-mono text-green-400 font-medium",children:o})]})}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"* Actual costs may vary based on traffic patterns and data transfer"})]})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsx(ge,{children:"ALB vs API Gateway Comparison"})}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-4 text-sm",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"ALB Advantages"}),e.jsxs("ul",{className:"space-y-1 text-gray-400",children:[e.jsx("li",{children:" Lower cost for high traffic"}),e.jsx("li",{children:" WebSocket support"}),e.jsx("li",{children:" Layer 7 load balancing"}),e.jsx("li",{children:" Direct ECS integration"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-400 mb-2",children:"API Gateway Advantages"}),e.jsxs("ul",{className:"space-y-1 text-gray-400",children:[e.jsx("li",{children:" Built-in request validation"}),e.jsx("li",{children:" API versioning"}),e.jsx("li",{children:" Request/response transformation"}),e.jsx("li",{children:" Usage plans & API keys"})]})]})]})})})]})]})]})}const a9=({config:t})=>{const s=[{priority:1,condition:"HTTPS:443",action:"Forward to Backend Target Group",description:"Default Action"},{priority:2,condition:"HTTP:80",action:"Redirect to HTTPS",description:"Redirect to port 443 (Permanent)"}],n=t.services?.map((o,u)=>({priority:u+3,condition:`Path: /${o.name}/*`,action:`Forward to ${o.name} Target Group`,description:`Route to ${o.name} service`}))||[],i=[...s,...n];return e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"w-5 h-5"}),"Listener Rules"]})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-4",children:"ALB routing rules are configured automatically based on your services."}),i.map(o=>e.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:["Priority ",o.priority]}),e.jsx("span",{className:"text-xs text-gray-500",children:o.description})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:o.condition}),e.jsx(Mx,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-gray-300",children:o.action})]})]})})},o.priority))]})})]})};function i9({config:t}){const[s,n]=E.useState(!1),[i,o]=E.useState(null),[u,h]=E.useState(null),[l,d]=E.useState(null),[f,p]=E.useState(null),m=E.useCallback(async()=>{if(t.alb?.enabled){n(!0),p(null);try{await new Promise(w=>setTimeout(w,1e3)),o({healthy:t.workload?.backend_desired_count||2,unhealthy:0,draining:0,initial:0,unused:0}),h({activeConnectionCount:Math.floor(Math.random()*100)+50,newConnectionCount:Math.floor(Math.random()*20)+5,processedBytes:Math.floor(Math.random()*1e6)+5e5,requestCount:Math.floor(Math.random()*1e3)+500,targetResponseTime:Math.random()*.5+.1}),d(new Date)}catch(w){p("Failed to fetch ALB status"),console.error("Error fetching ALB status:",w)}finally{n(!1)}}},[t.alb?.enabled,t.workload?.backend_desired_count]);if(E.useEffect(()=>{m();const w=setInterval(m,6e4);return()=>clearInterval(w)},[m]),!t.alb?.enabled)return e.jsx(fe,{children:e.jsx(pe,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(Ye,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"ALB is not enabled"})]})})});const y=()=>i?i.healthy+i.unhealthy+i.draining+i.initial:0,j=()=>{const w=y();return w===0?0:Math.round((i?.healthy||0)/w*100)},S=w=>w<1024?`${w} B`:w<1048576?`${(w/1024).toFixed(1)} KB`:`${(w/1048576).toFixed(1)} MB`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5"}),"Target Health Status"]}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:m,disabled:s,children:s?e.jsx(st,{className:"w-4 h-4 animate-spin"}):e.jsx(Wt,{className:"w-4 h-4"})})]})}),e.jsx(pe,{children:f?e.jsxs("div",{className:"text-red-400 text-sm flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),f]}):i?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${j()===100?"bg-green-500/20":j()>=50?"bg-yellow-500/20":"bg-red-500/20"}`,children:j()===100?e.jsx(vt,{className:"w-6 h-6 text-green-400"}):e.jsx(Ye,{className:"w-6 h-6 text-yellow-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-white",children:[j(),"% Healthy"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[y()," total targets"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Healthy"}),e.jsx("span",{className:"text-green-400 font-medium",children:i.healthy})]})}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Unhealthy"}),e.jsx("span",{className:"text-red-400 font-medium",children:i.unhealthy})]})}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Draining"}),e.jsx("span",{className:"text-yellow-400 font-medium",children:i.draining})]})}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Initial"}),e.jsx("span",{className:"text-blue-400 font-medium",children:i.initial})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin text-gray-400"})})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsx(ge,{children:"Performance Metrics"})}),e.jsx(pe,{children:u?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Active Connections"}),e.jsx("span",{className:"font-mono text-white",children:u.activeConnectionCount})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"New Connections/min"}),e.jsx("span",{className:"font-mono text-white",children:u.newConnectionCount})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Request Count (last hour)"}),e.jsx("span",{className:"font-mono text-white",children:u.requestCount.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Data Processed"}),e.jsx("span",{className:"font-mono text-white",children:S(u.processedBytes)})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Avg Response Time"}),e.jsxs("span",{className:"font-mono text-white",children:[(u.targetResponseTime*1e3).toFixed(0),"ms"]})]})]}):e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin text-gray-400"})})})]}),l&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",l.toLocaleTimeString()]})]})}function o9({config:t,nodeId:s,onConfigChange:n}){const i=s.replace("amplify-",""),o=t.amplify_apps?.findIndex(b=>b.name===i)??-1,u=t.amplify_apps?.[o],[h,l]=E.useState(null),[d,f]=E.useState({name:"",stage:"DEVELOPMENT",enable_auto_build:!0,enable_pull_request_preview:!1,environment_variables_text:""}),[p,m]=E.useState(!1);if(!u)return e.jsx("div",{className:"text-gray-400",children:e.jsx("p",{children:"Amplify app configuration not found."})});const y=b=>{if(n&&t.amplify_apps){const _=[...t.amplify_apps];_[o]={...u,branches:b},n({amplify_apps:_})}},j=()=>{if(!d.name)return;const b={};if(d.environment_variables_text){const C=d.environment_variables_text.split(`
`).filter(A=>A.trim());for(const A of C){const[D,...R]=A.split("=");D?.trim()&&(b[D.trim()]=R.join("=").trim())}}const _=[...u.branches||[],{name:d.name,stage:d.stage,enable_auto_build:d.enable_auto_build,enable_pull_request_preview:d.enable_pull_request_preview,environment_variables:b,custom_subdomains:[]}];y(_),f({name:"",stage:"DEVELOPMENT",enable_auto_build:!0,enable_pull_request_preview:!1,environment_variables_text:""}),m(!1)},S=b=>{const _=u.branches.filter((C,A)=>A!==b);y(_)},w=(b,_)=>{const C=[...u.branches];C[b]={...C[b],..._},y(C)},g=({stage:b})=>{const _={PRODUCTION:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",BETA:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",DEVELOPMENT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",EXPERIMENTAL:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${_[b||"DEVELOPMENT"]}`,children:b||"DEVELOPMENT"})},v=u.branches||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-white",children:"Branches"}),!p&&e.jsxs(ie,{size:"sm",onClick:()=>m(!0),children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Branch"]})]}),p&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 mb-4 space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"New Branch"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-branch-name",children:"Branch Name"}),e.jsx(je,{id:"new-branch-name",value:d.name,onChange:b=>f({...d,name:b.target.value}),placeholder:"feature/new-feature",className:"mt-1 bg-gray-900 border-gray-600 text-white"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-branch-stage",children:"Stage"}),e.jsxs(Zt,{value:d.stage,onValueChange:b=>f({...d,stage:b}),children:[e.jsx(es,{id:"new-branch-stage",className:"mt-1 bg-gray-900 border-gray-600 text-white",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"PRODUCTION",children:"Production"}),e.jsx(Ee,{value:"DEVELOPMENT",children:"Development"}),e.jsx(Ee,{value:"BETA",children:"Beta"}),e.jsx(Ee,{value:"EXPERIMENTAL",children:"Experimental"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_i,{id:"new-auto-build",checked:d.enable_auto_build,onCheckedChange:b=>f({...d,enable_auto_build:b})}),e.jsx(re,{htmlFor:"new-auto-build",className:"font-normal",children:"Enable automatic builds on push"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_i,{id:"new-pr-preview",checked:d.enable_pull_request_preview,onCheckedChange:b=>f({...d,enable_pull_request_preview:b})}),e.jsx(re,{htmlFor:"new-pr-preview",className:"font-normal",children:"Enable pull request previews"})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-env-vars",children:"Environment Variables"}),e.jsx(Qt,{id:"new-env-vars",value:d.environment_variables_text,onChange:b=>f({...d,environment_variables_text:b.target.value}),placeholder:`REACT_APP_API_URL=https://api.example.com
REACT_APP_ENV=production`,rows:3,className:"mt-1 bg-gray-900 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter one per line in KEY=VALUE format"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:()=>{m(!1),f({name:"",stage:"DEVELOPMENT",enable_auto_build:!0,enable_pull_request_preview:!1,environment_variables_text:""})},children:"Cancel"}),e.jsx(ie,{size:"sm",onClick:j,disabled:!d.name,children:"Add Branch"})]})]}),v.length===0?e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No branches configured. Add a branch to get started."})}):e.jsx("div",{className:"space-y-3",children:v.map((b,_)=>e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:h===_?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Edit Branch"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(ie,{size:"icon",variant:"ghost",onClick:()=>l(null),children:e.jsx(ds,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{children:"Branch Name"}),e.jsx(je,{value:b.name,onChange:C=>w(_,{name:C.target.value}),className:"mt-1 bg-gray-900 border-gray-600 text-white"})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Stage"}),e.jsxs(Zt,{value:b.stage||"DEVELOPMENT",onValueChange:C=>w(_,{stage:C}),children:[e.jsx(es,{className:"mt-1 bg-gray-900 border-gray-600 text-white",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"PRODUCTION",children:"Production"}),e.jsx(Ee,{value:"DEVELOPMENT",children:"Development"}),e.jsx(Ee,{value:"BETA",children:"Beta"}),e.jsx(Ee,{value:"EXPERIMENTAL",children:"Experimental"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_i,{id:`auto-build-${_}`,checked:b.enable_auto_build??!0,onCheckedChange:C=>w(_,{enable_auto_build:C===!0})}),e.jsx(re,{htmlFor:`auto-build-${_}`,className:"font-normal",children:"Enable automatic builds"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_i,{id:`pr-preview-${_}`,checked:b.enable_pull_request_preview??!1,onCheckedChange:C=>w(_,{enable_pull_request_preview:C===!0})}),e.jsx(re,{htmlFor:`pr-preview-${_}`,className:"font-normal",children:"Enable PR previews"})]})]}),e.jsxs("div",{children:[e.jsx(re,{className:"text-sm",children:"Environment Variables"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[Object.entries(b.environment_variables||{}).map(([C,A],D)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(je,{value:C,onChange:R=>{const k={...b.environment_variables};delete k[C],k[R.target.value]=A,w(_,{environment_variables:k})},placeholder:"KEY",className:"flex-1 bg-gray-900 border-gray-600 text-white font-mono text-sm"}),e.jsx(je,{value:A,onChange:R=>{const k={...b.environment_variables};k[C]=R.target.value,w(_,{environment_variables:k})},placeholder:"VALUE",className:"flex-[2] bg-gray-900 border-gray-600 text-white font-mono text-sm"}),e.jsx(ie,{size:"icon",variant:"ghost",onClick:()=>{const R={...b.environment_variables};delete R[C],w(_,{environment_variables:R})},className:"text-red-400 hover:text-red-300",children:e.jsx(ds,{className:"w-4 h-4"})})]},C)),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>{const C={...b.environment_variables,[`NEW_VAR_${Date.now()}`]:""};w(_,{environment_variables:C})},className:"w-full",children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Variable"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use $","{","variable","}"," for interpolation (e.g., $","{","cognito_user_pool_id","}",")"]})]}),e.jsxs(ie,{size:"sm",onClick:()=>l(null),children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Save"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kr,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:b.name}),e.jsx(g,{stage:b.stage})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>l(_),children:"Edit"}),v.length>1&&e.jsx(ie,{size:"icon",variant:"ghost",onClick:()=>S(_),className:"text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Auto Build"}),e.jsx("p",{className:"text-gray-300",children:b.enable_auto_build?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"PR Previews"}),e.jsx("p",{className:"text-gray-300",children:b.enable_pull_request_preview?"Enabled":"Disabled"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Environment Variables"}),Object.keys(b.environment_variables||{}).length>0?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-gray-300 text-sm",children:[Object.keys(b.environment_variables||{}).length," ","variable",Object.keys(b.environment_variables||{}).length!==1?"s":""," ","configured"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(yt,{className:"w-3 h-3"}),e.jsxs("span",{className:"truncate",children:[Object.keys(b.environment_variables||{}).slice(0,3).join(", "),Object.keys(b.environment_variables||{}).length>3&&"..."]})]})]}):e.jsx("p",{className:"text-gray-300 text-sm",children:"No variables configured"})]})]})},`branch-${b.name}-${_}`))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Branch Requirements"}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:e.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),"At least one branch is required for deployment"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),"Custom domains require at least one PRODUCTION branch"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),"Branch names must be unique within the app"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),"Environment variables are branch-specific"]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Common Environment Variables"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-2",children:"React Apps"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("code",{className:"text-xs text-gray-300 block",children:"REACT_APP_API_URL"}),e.jsx("code",{className:"text-xs text-gray-300 block",children:"REACT_APP_ENV"}),e.jsxs("code",{className:"text-xs text-gray-300 block",children:["REACT_APP_COGNITO_USER_POOL_ID=$","{","cognito_user_pool_id","}"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-2",children:"Next.js Apps"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("code",{className:"text-xs text-gray-300 block",children:"NEXT_PUBLIC_API_URL"}),e.jsx("code",{className:"text-xs text-gray-300 block",children:"NEXT_PUBLIC_ENV"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-2",children:"Vite Apps"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("code",{className:"text-xs text-gray-300 block",children:"VITE_API_URL"}),e.jsx("code",{className:"text-xs text-gray-300 block",children:"VITE_ENV"})]})]})]})]})]})}var Ph="Tabs",[l9]=yr(Ph,[Ah]),LC=Ah(),[c9,Sg]=l9(Ph),BC=E.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,onValueChange:o,defaultValue:u,orientation:h="horizontal",dir:l,activationMode:d="automatic",...f}=t,p=tl(l),[m,y]=xn({prop:i,onChange:o,defaultProp:u??"",caller:Ph});return e.jsx(c9,{scope:n,baseId:Xn(),value:m,onValueChange:y,orientation:h,dir:p,activationMode:d,children:e.jsx(We.div,{dir:p,"data-orientation":h,...f,ref:s})})});BC.displayName=Ph;var IC="TabsList",$C=E.forwardRef((t,s)=>{const{__scopeTabs:n,loop:i=!0,...o}=t,u=Sg(IC,n),h=LC(n);return e.jsx(ZN,{asChild:!0,...h,orientation:u.orientation,dir:u.dir,loop:i,children:e.jsx(We.div,{role:"tablist","aria-orientation":u.orientation,...o,ref:s})})});$C.displayName=IC;var HC="TabsTrigger",zC=E.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,disabled:o=!1,...u}=t,h=Sg(HC,n),l=LC(n),d=WC(h.baseId,i),f=VC(h.baseId,i),p=i===h.value;return e.jsx(JN,{asChild:!0,...l,focusable:!o,active:p,children:e.jsx(We.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":f,"data-state":p?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...u,ref:s,onMouseDown:Pe(t.onMouseDown,m=>{!o&&m.button===0&&m.ctrlKey===!1?h.onValueChange(i):m.preventDefault()}),onKeyDown:Pe(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&h.onValueChange(i)}),onFocus:Pe(t.onFocus,()=>{const m=h.activationMode!=="manual";!p&&!o&&m&&h.onValueChange(i)})})})});zC.displayName=HC;var FC="TabsContent",UC=E.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,forceMount:o,children:u,...h}=t,l=Sg(FC,n),d=WC(l.baseId,i),f=VC(l.baseId,i),p=i===l.value,m=E.useRef(p);return E.useEffect(()=>{const y=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx(br,{present:o||p,children:({present:y})=>e.jsx(We.div,{"data-state":p?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:f,tabIndex:0,...h,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:y&&u})})});UC.displayName=FC;function WC(t,s){return`${t}-trigger-${s}`}function VC(t,s){return`${t}-content-${s}`}var d9=BC,u9=$C,h9=zC,m9=UC;function qC({className:t,...s}){return e.jsx(d9,{"data-slot":"tabs",className:Ie("flex flex-col gap-2",t),...s})}function GC({className:t,...s}){return e.jsx(u9,{"data-slot":"tabs-list",className:Ie("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function Ro({className:t,...s}){return e.jsx(h9,{"data-slot":"tabs-trigger",className:Ie("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function Do({className:t,...s}){return e.jsx(m9,{"data-slot":"tabs-content",className:Ie("flex-1 outline-none",t),...s})}function f9({config:t,nodeId:s,selectedBranch:n}){const i=s.replace("amplify-",""),o=t.amplify_apps?.findIndex(y=>y.name===i)??-1,u=t.amplify_apps?.[o],[h,l]=E.useState(null);if(!u)return e.jsx("div",{className:"text-gray-400",children:e.jsx("p",{children:"Amplify app configuration not found."})});const d=(y,j)=>{navigator.clipboard.writeText(y),l(j),setTimeout(()=>l(null),2e3)},f={react:`version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*`,nextjs:`version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*`,monorepo:`version: 1
applications:
  - appRoot: apps/web
    frontend:
      phases:
        preBuild:
          commands:
            - npm ci --prefix ../..
            - npx lerna run build --scope=shared-ui
        build:
          commands:
            - npm run build
      artifacts:
        baseDirectory: dist
        files:
          - '**/*'
      cache:
        paths:
          - ../../node_modules/**/*`,custom:`version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Installing dependencies..."
        - yarn install --frozen-lockfile
        - echo "Running custom setup..."
        - npm run setup:env
    build:
      commands:
        - echo "Building application..."
        - npm run build:production
        - echo "Running post-build tasks..."
        - npm run postbuild
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
    excludeFiles:
      - '**/*.map'
      - '**/node_modules/**/*'
  cache:
    paths:
      - node_modules/**/*
      - .yarn/cache/**/*
  customHeaders:
    - pattern: '**/*'
      headers:
        - key: 'Cache-Control'
          value: 'public, max-age=31536000, immutable'
    - pattern: '**/*.html'
      headers:
        - key: 'Cache-Control'
          value: 'public, max-age=0, must-revalidate'`},p=u?.branches||[],m=p.find(y=>y.name===n)||p[0];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("h3",{className:"text-sm font-medium text-white mb-4",children:["Build Configuration",m&&e.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(Branch: ",m.name,")"]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"How Amplify Build Works"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Amplify automatically detects your framework and build settings:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-400 ml-2",children:[e.jsx("li",{children:"Scans for framework files (package.json, next.config.js, etc.)"}),e.jsx("li",{children:"Detects package manager (npm, yarn, pnpm) from lock files"}),e.jsx("li",{children:"Identifies framework from dependencies"}),e.jsx("li",{children:"Sets appropriate build commands and output directories"})]})]})]}),e.jsx("div",{className:"border-t border-gray-700 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Detected frameworks include:"})," ","React, Vue, Angular, Next.js, Nuxt.js, Gatsby, Svelte/SvelteKit, Astro, Ember, and more."]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Custom Build Configuration (Optional)"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["For custom build requirements, create an"," ",e.jsx("code",{className:"bg-gray-900 px-1 py-0.5 rounded text-blue-400",children:"amplify.yml"})," ","file in your repository root."]}),e.jsxs(qC,{defaultValue:"react",className:"mt-4",children:[e.jsxs(GC,{className:"grid grid-cols-4 w-full bg-gray-900",children:[e.jsx(Ro,{value:"react",className:"text-xs",children:"React/Vue"}),e.jsx(Ro,{value:"nextjs",className:"text-xs",children:"Next.js/Nuxt"}),e.jsx(Ro,{value:"monorepo",className:"text-xs",children:"Monorepo"}),e.jsx(Ro,{value:"custom",className:"text-xs",children:"Custom"})]}),e.jsx(Do,{value:"react",className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Standard React/Vue build configuration"}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>d(f.react,"react"),children:h==="react"?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono bg-gray-900 p-3 rounded overflow-x-auto",children:f.react})]})}),e.jsx(Do,{value:"nextjs",className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Next.js/Nuxt.js configuration"}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>d(f.nextjs,"nextjs"),children:h==="nextjs"?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono bg-gray-900 p-3 rounded overflow-x-auto",children:f.nextjs})]})}),e.jsx(Do,{value:"monorepo",className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Monorepo with shared dependencies"}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>d(f.monorepo,"monorepo"),children:h==="monorepo"?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono bg-gray-900 p-3 rounded overflow-x-auto",children:f.monorepo})]})}),e.jsx(Do,{value:"custom",className:"mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Advanced configuration with custom headers"}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>d(f.custom,"custom"),children:h==="custom"?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono bg-gray-900 p-3 rounded overflow-x-auto",children:f.custom})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Build Features"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Build Image"}),e.jsx("p",{className:"text-gray-300",children:"Amazon Linux 2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Node.js Versions"}),e.jsx("p",{className:"text-gray-300",children:"12, 14, 16, 18, 20"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Build Timeout"}),e.jsx("p",{className:"text-gray-300",children:"30 minutes (default)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Build Compute"}),e.jsx("p",{className:"text-gray-300",children:"4 vCPUs, 7 GB memory"})]})]}),e.jsx("div",{className:"border-t border-gray-700 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Available tools:"})," AWS CLI, Git, cURL, Python, Ruby, and more pre-installed in the build environment."]})})]})]})]})}function p9(t,s){if(!t||!s?.domain?.enabled||!s?.domain?.domain_name)return"";const n=s.domain.domain_name,i=s.domain.add_env_domain_prefix??!0,o=s.env||"dev";return i&&o!=="prod"?`${t}.${o}.${n}`:`${t}.${n}`}function x9({config:t,nodeId:s,onConfigChange:n}){const i=s.replace("amplify-",""),o=t.amplify_apps?.findIndex(g=>g.name===i)??-1,u=t.amplify_apps?.[o],[h,l]=E.useState(null),[d,f]=E.useState(!0);if(E.useEffect(()=>{(async()=>{try{const v=await fC.getApps(t.env||"dev");if(v?.apps&&Array.isArray(v.apps)){const b=v.apps.find(_=>_.name===i);b&&l(b)}}catch(v){console.error("Failed to fetch Amplify app status:",v)}finally{f(!1)}})()},[i,t.env]),!u)return e.jsx("div",{className:"text-gray-400",children:e.jsx("p",{children:"Amplify app configuration not found."})});const p=(g,v)=>{if(n&&t.amplify_apps){const b=[...t.amplify_apps];b[o]={...u,[g]:v},n({amplify_apps:b})}},m=!!u.subdomain_prefix,y=u.subdomain_prefix?p9(u.subdomain_prefix,t):"",j=u.branches||[],w=!!j.find(g=>g.stage==="PRODUCTION");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Domain Configuration"}),h&&e.jsx("div",{className:"mb-4 bg-gray-800 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Live Domain Information"})]}),h.defaultDomain&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Default Domain:"}),e.jsx("p",{className:"text-sm text-gray-300 font-mono",children:h.defaultDomain})]}),h.customDomain&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Custom Domain (from AWS):"}),e.jsx("p",{className:"text-sm text-gray-300 font-mono",children:h.customDomain})]})]})}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx(re,{htmlFor:"subdomain_prefix",children:"Subdomain Prefix"}),e.jsx(je,{id:"subdomain_prefix",value:u.subdomain_prefix||"",onChange:g=>p("subdomain_prefix",g.target.value),placeholder:"app",className:"mt-1 bg-gray-800 border-gray-600 text-white"}),m&&y&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-800/50 border border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(js,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs font-medium text-gray-400",children:"Your Domain"})]}),e.jsx("p",{className:"text-sm text-white font-mono",children:y}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(vt,{className:"w-3 h-3 text-green-400"}),e.jsx("span",{className:"text-xs text-green-400",children:"Connected to Route 53"})]})]}),!t?.domain?.enabled&&e.jsx("p",{className:"text-xs text-amber-400 mt-2",children:" Enable domain configuration to use custom domains"}),m&&!w&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-3 h-3 text-amber-400"}),e.jsx("span",{className:"text-xs text-amber-400",children:"Add a PRODUCTION branch for the domain to work"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Leave empty to use default Amplify domain (*.amplifyapp.com)"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Branch URLs & Subdomains"}),e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No branches configured. Add branches in the Branches tab."})}):j.map(g=>{const v=g.custom_subdomains||[],b=g.stage==="PRODUCTION";return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:g.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${g.stage==="PRODUCTION"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":g.stage==="BETA"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":g.stage==="DEVELOPMENT"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"}`,children:g.stage||"DEVELOPMENT"})]}),g.enable_pull_request_preview&&e.jsx("span",{className:"text-xs text-gray-400",children:"PR previews enabled"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Default Amplify URL"}),d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-3 h-3 animate-spin text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Loading..."})]}):h?e.jsxs("div",{children:[(()=>{const _=h.branches.find(C=>C.branchName===g.name);return _?.branchUrl?e.jsx("p",{className:"text-sm text-gray-300 font-mono",children:_.branchUrl}):e.jsxs("p",{className:"text-sm text-gray-300 font-mono",children:["https://",g.name.replace("/","-"),".",h.appId,".amplifyapp.com"]})})(),h.defaultDomain&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["App domain: ",h.defaultDomain]})]}):e.jsxs("p",{className:"text-sm text-gray-300 font-mono",children:["https://",g.name.replace("/","-"),".","<app-id>",".amplifyapp.com"]})]}),y&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Custom Domain Mappings"}),e.jsxs("div",{className:"space-y-1 mt-1",children:[b&&e.jsxs("p",{className:"text-sm text-gray-300 font-mono",children:[y,"  ",g.name]}),v.length>0&&v.map(_=>e.jsxs("p",{className:"text-sm text-gray-300 font-mono",children:[_,".",y," "," ",g.name]},_))]})]}),g.enable_pull_request_preview&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"PR Preview Pattern"}),e.jsxs("p",{className:"text-sm text-gray-300 font-mono",children:["https://pr-","<pr-number>",".",u.name,".amplifyapp.com"]})]})]})]},g.name)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"SSL/TLS"}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"SSL certificates are automatically managed by AWS Amplify"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Domain Configuration Notes"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("p",{className:"text-sm text-gray-300",children:"The root domain maps to the first PRODUCTION branch"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("p",{className:"text-sm text-gray-300",children:"Branch names with slashes (/) are converted to hyphens (-) in URLs"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("p",{className:"text-sm text-gray-300",children:"Configure subdomains for each branch in the Branches tab"})]})]})]})]})}function g9({config:t,nodeId:s}){const n=s.replace("amplify-",""),i=t.amplify_apps?.findIndex(l=>l.name===n)??-1,o=t.amplify_apps?.[i];if(!o)return e.jsx("div",{className:"text-gray-400",children:e.jsx("p",{children:"Amplify app configuration not found."})});const u=o.branches||[],h=u.reduce((l,d)=>l+Object.keys(d.environment_variables||{}).length,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Environment Variables"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 text-center",children:[e.jsx(Kr,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-white mb-2",children:"Environment Variables are Branch-Specific"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Each branch can have its own set of environment variables. Manage them in the Branches tab for better organization."}),e.jsx("div",{className:"bg-gray-900 rounded p-4 mb-4",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("p",{className:"font-medium",children:"Current Configuration:"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{children:[u.length," branch",u.length!==1?"es":""," ","configured"]}),e.jsxs("p",{children:[h," total environment variable",h!==1?"s":""]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-400",children:[e.jsx("span",{className:"text-sm",children:"Go to Branches tab to manage environment variables"}),e.jsx(Mx,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Environment Variable Overview"}),e.jsx("div",{className:"space-y-3",children:u.map(l=>{const d=Object.keys(l.environment_variables||{}).length;return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kr,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:l.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${l.stage==="PRODUCTION"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":l.stage==="BETA"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":l.stage==="DEVELOPMENT"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"}`,children:l.stage||"DEVELOPMENT"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsxs("span",{children:[d," variable",d!==1?"s":""]})]})]}),d>0&&e.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[Object.keys(l.environment_variables||{}).slice(0,3).join(", "),Object.keys(l.environment_variables||{}).length>3&&"..."]})]},l.name)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Variable Interpolation"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Variables can reference other values using the"," ",e.jsxs("code",{className:"text-blue-400",children:["$","{variable}"]})," syntax."]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-400",children:[e.jsx("p",{className:"font-medium",children:"Common interpolated variables:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:[e.jsx("code",{className:"text-gray-300",children:"PROJECT"})," - Project name"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-gray-300",children:"ENV"})," - Environment name"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-gray-300",children:"REGION"})," - AWS region"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-gray-300",children:"ACCOUNT_ID"})," - AWS account ID"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-gray-300",children:"cognito_user_pool_id"})," - Cognito user pool ID"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-gray-300",children:"cognito_web_client_id"})," - Cognito web client ID"]})]})]})]})]})]})}function v9({config:t,nodeId:s,onConfigChange:n}){const i=s.replace("amplify-",""),o=t.amplify_apps?.findIndex(W=>W.name===i)??-1,u=t.amplify_apps?.[o],[h,l]=E.useState(!1),[d,f]=E.useState(!1),[p,m]=E.useState(!1),[y,j]=E.useState(""),[S,w]=E.useState(""),[g,v]=E.useState(null),[b,_]=E.useState(""),C=E.useCallback(()=>`/${t.project}/${t.env}/github/amplify-token`,[t.project,t.env]),A=E.useCallback(async()=>{f(!0);try{const W=C();await Be.getSSMParameter(W),l(!0)}catch{l(!1)}finally{f(!1)}},[C]);E.useEffect(()=>{u&&A()},[u,A]),E.useEffect(()=>()=>{g&&clearInterval(g)},[g]);const D=async()=>{m(!0),_(""),j(""),w("");try{const W=await Be.initiateGitHubDeviceFlow({app_name:"shared",project:t.project,environment:t.env,scope:"repo"});j(W.user_code),w(W.verification_uri);try{await navigator.clipboard.writeText(W.user_code),console.log("Device code copied to clipboard")}catch(O){console.error("Failed to copy code to clipboard:",O)}const G=600,$=700,F=window.screen.width/2-G/2,B=window.screen.height/2-$/2;window.open(W.verification_uri,"github-device-auth",`width=${G},height=${$},left=${F},top=${B},toolbar=no,menubar=no,scrollbars=yes,resizable=yes`);const V=setInterval(async()=>{try{const O=await Be.checkGitHubAuthStatus(W.user_code);O.status==="authorized"?(clearInterval(V),v(null),m(!1),l(!0),j(""),w(""),M("github_oauth_token",C())):O.status==="expired"?(clearInterval(V),v(null),_("Device code expired. Please try again."),m(!1),j(""),w("")):O.status==="error"&&(clearInterval(V),v(null),_(O.error||"Authentication failed"),m(!1),j(""),w(""))}catch(O){console.error("Polling error:",O)}},(W.interval||5)*1e3);v(V)}catch(W){m(!1),_(W instanceof Error?W.message:"Failed to start authentication")}},R=W=>{navigator.clipboard.writeText(W)},k=()=>{S&&window.open(S,"_blank")};if(!u)return e.jsx("div",{className:"text-gray-400",children:e.jsx("p",{children:"Amplify app configuration not found."})});const M=(W,G)=>{if(n&&t.amplify_apps){const $=[...t.amplify_apps];$[o]={...u,[W]:G},n({amplify_apps:$})}},I=t.region||"us-east-1",q=`https://${I}.console.aws.amazon.com/amplify/home?region=${I}#/apps`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"General Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"App Name"}),e.jsx(je,{id:"name",value:u.name,className:"mt-1 bg-gray-800 border-gray-600 text-white",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"App name cannot be changed after creation"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"github_repository",children:"GitHub Repository URL"}),e.jsx(je,{id:"github_repository",value:u.github_repository,onChange:W=>M("github_repository",W.target.value),placeholder:"https://github.com/username/repo",className:"mt-1 bg-gray-800 border-gray-600 text-white"})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"Branches"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[u.branches?.length||0," branch",(u.branches?.length||0)!==1?"es":""," ","configured"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage branches in the Branches tab"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Authentication"}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-800 border-gray-700",children:[d?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(st,{className:"w-4 h-4 animate-spin"}),"Checking existing token..."]}):!h&&!y?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Authenticate with GitHub to grant Amplify access to your repository"}),e.jsx(ie,{type:"button",onClick:D,disabled:p,className:"w-full",children:p?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Starting authentication..."]}):e.jsxs(e.Fragment,{children:[e.jsx(lh,{className:"w-4 h-4 mr-2"}),"Authenticate with GitHub"]})})]}):!h&&y?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Enter this code on GitHub:"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("code",{className:"text-2xl font-mono bg-gray-900 text-white px-4 py-2 rounded select-all border border-gray-700",children:y}),e.jsx(ie,{type:"button",size:"icon",variant:"outline",onClick:()=>R(y),title:"Copy code",children:e.jsx(ut,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Code copied to clipboard! A popup window should have opened with GitHub."})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(ie,{type:"button",onClick:k,variant:"secondary",className:"w-full",children:[e.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Re-open GitHub verification page"]})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[e.jsx(st,{className:"w-4 h-4 animate-spin"}),"Waiting for authorization..."]}),e.jsx(ie,{type:"button",variant:"outline",size:"sm",onClick:async()=>{if(g&&(clearInterval(g),v(null)),y)try{await Be.deleteGitHubOAuthSession(y)}catch(W){console.error("Failed to cleanup OAuth session:",W)}m(!1),j(""),w("")},className:"w-full",children:"Cancel"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"GitHub authenticated successfully"})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Token stored in SSM:"," ",e.jsx("code",{className:"bg-gray-900 text-gray-300 px-1 rounded",children:C()})]}),e.jsx(ie,{type:"button",size:"sm",variant:"outline",onClick:()=>{l(!1),_("")},children:"Re-authenticate"})]}),b&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[e.jsx(Ye,{className:"w-4 h-4"}),b]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Management Console"}),e.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx(Xr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Open in AWS Console"})]})]})]})}function y9({config:t}){const s=`${t.project}-${t.env}`,n=`/aws/api_gateway/${s}`,[i,o]=E.useState(null),[u,h]=E.useState(!0),[l,d]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const m=await Be.getAPIGatewayInfo(t.env);o(m)}catch(m){console.error("Failed to fetch API Gateway info:",m)}finally{h(!1)}})()},[t.env]);const f=async p=>{await navigator.clipboard.writeText(p),d(!0),setTimeout(()=>d(!1),2e3)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{className:"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700 shadow-lg",children:e.jsxs(pe,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_s,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:s})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(Kr,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"HTTP API Gateway"}),e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("span",{className:"capitalize",children:[t.env," Stage"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2.5 py-1 bg-blue-500/10 text-blue-400 text-xs font-medium rounded-full border border-blue-500/20",children:"Regional"}),e.jsxs("span",{className:"px-2.5 py-1 bg-green-500/10 text-green-400 text-xs font-medium rounded-full border border-green-500/20 flex items-center gap-1",children:[e.jsx(Ds,{className:"w-3 h-3"}),"Active"]})]})]}),i&&!u&&!i.error&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{className:"text-xs font-semibold text-gray-300 uppercase tracking-wider",children:"Default Endpoint"}),e.jsx("button",{type:"button",onClick:()=>f(i.defaultEndpoint),className:"flex items-center gap-1.5 px-2 py-1 text-xs text-gray-400 hover:text-white transition-colors rounded hover:bg-gray-800",title:"Copy to clipboard",children:l?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-3.5 h-3.5 text-green-400"}),e.jsx("span",{className:"text-green-400",children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsxs("a",{href:i.defaultEndpoint,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:text-blue-300 font-mono flex items-center gap-2 break-all transition-colors group",children:[e.jsx(Xr,{className:"w-4 h-4 flex-shrink-0 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"group-hover:underline",children:i.defaultEndpoint})]})]}),i?.error&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-sm",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{children:i.error})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{className:"bg-gray-800 border-gray-700",children:e.jsx(pe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-purple-500/10 rounded-lg border border-purple-500/20",children:e.jsx(js,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 mb-0.5",children:"Protocol"}),e.jsx("div",{className:"text-sm font-semibold text-white",children:"HTTP API"})]})]})})}),e.jsx(fe,{className:"bg-gray-800 border-gray-700",children:e.jsx(pe,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-blue-500/10 rounded-lg border border-blue-500/20",children:e.jsx(Kr,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 mb-0.5",children:"Stage"}),e.jsx("div",{className:"text-sm font-semibold text-white capitalize",children:t.env})]})]})})})]}),i?.customDomainEnabled&&!u&&e.jsxs(fe,{className:"bg-gray-800 border-gray-700",children:[e.jsx(xe,{className:"pb-3",children:e.jsxs(ge,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx(zu,{className:"w-4 h-4 text-cyan-400"}),"Custom Domain Mapping"]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-900/50 rounded-lg",children:[e.jsx(re,{className:"text-xs text-gray-400 mb-1 block",children:"Domain"}),e.jsx("div",{className:"text-sm text-white font-mono",children:i.customDomain||t.api_domain||`api.${t.project}.com`})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/5 rounded-lg border border-green-500/20",children:[e.jsx(Kt,{className:"w-4 h-4 text-green-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Security"}),e.jsx("div",{className:"text-sm text-white",children:"TLS 1.2 with ACM certificate"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-500/5 rounded-lg border border-blue-500/20",children:[e.jsx(js,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"DNS"}),e.jsx("div",{className:"text-sm text-white",children:"Route 53 A record  API Gateway"})]})]})]})]}),e.jsxs(fe,{className:"bg-gray-800 border-gray-700",children:[e.jsx(xe,{className:"pb-3",children:e.jsxs(ge,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400"}),"Performance & Throttling"]})}),e.jsxs(pe,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/5 rounded-lg border border-green-500/20",children:[e.jsx(Ds,{className:"w-4 h-4 text-green-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Auto-Deploy"}),e.jsx("div",{className:"text-sm font-medium text-green-400",children:"Enabled"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-900/50 rounded-lg border border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Burst Limit"}),e.jsx("div",{className:"text-lg font-bold text-white font-mono",children:"5,000"}),e.jsx("div",{className:"text-xs text-gray-500",children:"requests"})]}),e.jsxs("div",{className:"p-3 bg-gray-900/50 rounded-lg border border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Rate Limit"}),e.jsx("div",{className:"text-lg font-bold text-white font-mono",children:"10,000"}),e.jsx("div",{className:"text-xs text-gray-500",children:"req/sec"})]})]})]})]}),e.jsxs(fe,{className:"bg-gray-800 border-gray-700",children:[e.jsx(xe,{className:"pb-3",children:e.jsxs(ge,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4 text-orange-400"}),"CloudWatch Logging"]})}),e.jsxs(pe,{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-900/50 rounded-lg border border-gray-700",children:[e.jsx(re,{className:"text-xs text-gray-400 mb-2 block",children:"Log Group"}),e.jsx("div",{className:"text-xs text-white font-mono break-all bg-gray-950 p-2 rounded",children:n})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-900/50 rounded-lg border border-gray-700",children:[e.jsx(Ms,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Retention"}),e.jsx("div",{className:"text-sm font-medium text-white",children:"30 days"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-900/50 rounded-lg border border-gray-700",children:[e.jsx(xs,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Format"}),e.jsx("div",{className:"text-sm font-medium text-white",children:"JSON"})]})]})]})]})]}),e.jsxs(fe,{className:"bg-gray-800 border-gray-700",children:[e.jsx(xe,{className:"pb-3",children:e.jsxs(ge,{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[e.jsx(fR,{className:"w-4 h-4 text-green-400"}),"API Routes"]})}),e.jsx(pe,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-r from-blue-500/10 to-blue-500/5 rounded-lg border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 text-xs font-bold rounded",children:"ANY"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Backend Route"})]}),e.jsxs("div",{className:"font-mono text-xs text-white bg-gray-950 p-2 rounded",children:["/","{proxy+}","  Backend service"]})]}),t.services&&t.services.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-400 font-medium mt-3 mb-2",children:"Service Routes"}),t.services.map(p=>e.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-500/10 to-purple-500/5 rounded-lg border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs font-bold rounded",children:"ANY"}),e.jsx("span",{className:"text-xs text-purple-300 font-medium",children:p.name})]}),e.jsxs("div",{className:"font-mono text-xs text-white bg-gray-950 p-2 rounded",children:["/",p.name,"/","{proxy+}","  ",p.name," service"]})]},p.name))]})]})})]})]})}function b9(){return e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Amazon Aurora"}),e.jsx(we,{children:"High-performance managed relational database"})]}),e.jsxs(pe,{children:[e.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-6 text-center space-y-4",children:[e.jsx(fr,{className:"w-12 h-12 text-gray-500 mx-auto"}),e.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Not Implemented"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Amazon Aurora is not implemented in this infrastructure template."})]}),e.jsx("div",{className:"mt-6 bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Alternative Solution"}),e.jsxs("p",{className:"text-xs text-gray-300",children:["This infrastructure uses ",e.jsx("strong",{children:"RDS PostgreSQL"})," ","instead of Aurora. RDS PostgreSQL provides a managed PostgreSQL database with automated backups, high availability, and read replicas support."]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"To configure the database, look for the PostgreSQL node in the infrastructure diagram."})]})]})})]})]})})}function _9({config:t}){return e.jsx("div",{className:"space-y-4",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-5 h-5"}),"CloudWatch Alarms & Alerts"]}),e.jsx(we,{children:"Monitor and alert on backend service metrics and events"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Pr,{className:"w-16 h-16 text-gray-600 mb-4"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full animate-pulse"})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-400 max-w-md mb-6",children:"Configure CloudWatch alarms for your backend service including CPU, memory, error rates, and custom metrics."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-2xl mt-8",children:[e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800/50",children:[e.jsx(Ye,{className:"w-8 h-8 text-yellow-400 mb-2"}),e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Error Rate Alerts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Get notified when error rates exceed thresholds"})]}),e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800/50",children:[e.jsx(Vp,{className:"w-8 h-8 text-green-400 mb-2"}),e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Performance Alerts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Monitor CPU, memory, and response times"})]}),e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800/50",children:[e.jsx(ls,{className:"w-8 h-8 text-blue-400 mb-2"}),e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Custom Metrics"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Create alerts for application-specific metrics"})]}),e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800/50",children:[e.jsx(Ms,{className:"w-8 h-8 text-purple-400 mb-2"}),e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Scheduled Health Checks"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Regular endpoint monitoring and alerting"})]})]})]})})]})})}function wj({config:t,node:s}){const n=s?.type==="service",i=n?s.id.replace("service-",""):null,[o,u]=E.useState(null),h=n?[{name:`${t.project}_service_${i}_${t.env}`,description:`${i} service logs`,service:`ECS ${i} Service`,retention:"7 days"}]:[{name:`${t.project}_backend_${t.env}`,description:"Backend service logs",service:"ECS Backend Service",retention:"7 days"},{name:`${t.project}_adot_collector_${t.env}`,description:"OpenTelemetry collector logs",service:"ADOT Sidecar Container",retention:"7 days"}],l=(y,j)=>{navigator.clipboard.writeText(y),u(j),setTimeout(()=>u(null),2e3)},d=y=>`aws logs tail ${y} --follow`,f=y=>`aws logs filter-log-events \\
  --log-group-name "${y}" \\
  --start-time $(date -d '30 minutes ago' +%s)000`,p=y=>`aws logs filter-log-events \\
  --log-group-name "${y}" \\
  --filter-pattern "[ERROR]" \\
  --start-time $(date -d '1 hour ago' +%s)000`,m=()=>`fields @timestamp, @message
| filter @message like /ERROR/
| sort @timestamp desc
| limit 100`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qn,{className:"w-5 h-5"}),"CloudWatch Log Groups"]}),e.jsxs(we,{children:["Log groups for"," ",n?`${i} service`:"backend services and collectors"]})]}),e.jsxs(pe,{children:[e.jsx("div",{className:"space-y-4",children:h.map((y,j)=>e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-200 flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4 text-blue-400"}),y.name]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:y.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{variant:"outline",className:"text-xs",children:y.service}),e.jsxs(Te,{variant:"secondary",className:"text-xs",children:[e.jsx(Ms,{className:"w-3 h-3 mr-1"}),y.retention]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Service:"}),e.jsx("code",{className:"text-blue-400",children:y.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Full Path:"}),e.jsx("code",{className:"text-green-400",children:y.name})]})]})]},j))}),e.jsxs(ze,{className:"mt-4",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Logs are automatically created when services start. Retention is set to 7 days by default. Log streams are created per task instance."})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"w-5 h-5"}),"CloudWatch CLI Commands"]}),e.jsx(we,{children:"Useful AWS CLI commands for viewing and filtering logs"})]}),e.jsx(pe,{className:"space-y-6",children:h.map((y,j)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-300 border-b border-gray-700 pb-2",children:[y.name," Commands"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(wo,{className:"text-xs font-medium text-gray-400",children:"Tail logs (real-time)"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>l(d(y.name),`tail-${j}`),className:"h-6 px-2 text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),o===`tail-${j}`?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:d(y.name)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(wo,{className:"text-xs font-medium text-gray-400",children:"Filter logs (last 30 minutes)"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>l(f(y.name),`filter-${j}`),className:"h-6 px-2 text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),o===`filter-${j}`?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:f(y.name)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(wo,{className:"text-xs font-medium text-gray-400",children:"Filter ERROR logs (last hour)"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>l(p(y.name),`error-${j}`),className:"h-6 px-2 text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),o===`error-${j}`?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:p(y.name)})})]})]},j))})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"CloudWatch Insights"}),e.jsx(we,{children:"Sample queries for analyzing logs in CloudWatch Insights"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsx("p",{className:"text-xs text-gray-300 mb-3",children:"CloudWatch Insights provides a powerful query language for analyzing log data. Here are some useful queries:"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(wo,{className:"text-xs font-medium text-gray-400",children:"Find all errors"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:m()})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(wo,{className:"text-xs font-medium text-gray-400",children:"Response time analysis"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`fields @timestamp, @message
| filter @message like /response_time/
| parse @message /response_time=(?<duration>\\d+)/
| stats avg(duration), max(duration), min(duration) by bin(5m)`})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(wo,{className:"text-xs font-medium text-gray-400",children:"Top error messages"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`fields @timestamp, @message
| filter @message like /ERROR/
| stats count() by @message
| sort count() desc
| limit 10`})})]})]}),e.jsxs(ze,{children:[e.jsx(Vs,{className:"h-4 w-4"}),e.jsx(Fe,{children:"You can run these queries in the AWS Console under CloudWatch  Logs  Insights. Select your log group and paste the query."})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"CLI Tips & Tricks"}),e.jsx(we,{children:"Additional useful commands and options"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Common Options"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 ml-4",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-blue-400",children:"--format short"})," - Simplified output format"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-blue-400",children:"--since 1h"})," - Show logs from last hour"]}),e.jsxs("li",{children:[""," ",e.jsx("code",{className:"text-blue-400",children:'--filter-pattern "[ERROR]"'})," ","- Filter specific patterns"]}),e.jsxs("li",{children:[""," ",e.jsx("code",{className:"text-blue-400",children:"--profile your-profile"})," ","- Use specific AWS profile"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-blue-400",children:"--region us-east-1"})," - Specify AWS region"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Export Logs"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`# Export logs to S3
aws logs create-export-task \\
  --log-group-name "${n?`${t.project}_service_${i}_${t.env}`:`${t.project}_backend_${t.env}`}" \\
  --from $(date -d '7 days ago' +%s)000 \\
  --to $(date +%s)000 \\
  --destination "${t.project}-logs-export" \\
  --destination-prefix "${n?`service/${i}`:"backend"}/${t.env}/"`})})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Stream to Local File"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`# Save logs to local file
aws logs tail ${n?`${t.project}_service_${i}_${t.env}`:`${t.project}_backend_${t.env}`} \\
  --follow \\
  --format short > ${n?`${i}`:"backend"}-logs-$(date +%Y%m%d-%H%M%S).log`})})]})]})})]})]})}function wo({children:t,className:s=""}){return e.jsx("div",{className:`text-sm font-medium ${s}`,children:t})}function j9({config:t,accountInfo:s,onConfigChange:n}){const[i,o]=E.useState(!1),[u,h]=E.useState(t.workload?.backend_image_port?.toString()||"8080"),[l,d]=E.useState(()=>{const D=t.workload?.backend_env_variables;return D&&typeof D=="object"?D:{}}),[f,p]=E.useState(""),[m,y]=E.useState(""),[j,S]=E.useState(null),[w,g]=E.useState(""),v=[{name:"PG_DATABASE_HOST",value:`${t.project}-${t.env}-rds.${t.region}.rds.amazonaws.com`,description:"RDS Instance Endpoint"},{name:"PG_DATABASE_USERNAME",value:t.postgres?.username||"postgres",description:"Database Username"},{name:"PG_DATABASE_NAME",value:t.postgres?.dbname||t.project,description:"Database Name"},{name:"AWS_S3_BUCKET",value:`${t.project}-backend-${t.env}${t.workload?.bucket_postfix?`-${t.workload.bucket_postfix}`:""}`,description:"S3 Bucket for Backend"},{name:"AWS_REGION",value:t.region,description:"AWS Region"},{name:"URL",value:t.workload?.backend_alb_domain_name||`api.${t.domain?.domain_name||""}`,description:"API Domain URL"},{name:"SQS_QUEUE_URL",value:`https://sqs.${t.region}.amazonaws.com/${s?.accountId||t.ecr_account_id||"<ACCOUNT_ID>"}/${t.project}-${t.env}-${t.sqs?.name||"queue"}`,description:"SQS Queue URL"},{name:"AWS_QUEUE_URL",value:`https://sqs.${t.region}.amazonaws.com/${s?.accountId||t.ecr_account_id||"<ACCOUNT_ID>"}/${t.project}-${t.env}-${t.sqs?.name||"queue"}`,description:"SQS Queue URL (Alias)"}],b=[{name:"PORT",value:u,description:"Application Port",editable:!0}],_=()=>{if(f&&m){const D={...l,[f]:m};d(D),p(""),y(""),n&&n({workload:{...t.workload,backend_env_variables:D}})}},C=D=>{const R={...l};delete R[D],d(R),n&&n({workload:{...t.workload,backend_env_variables:R}})},A=(D,R)=>{const k={...l,[D]:R};d(k),S(null),n&&n({workload:{...t.workload,backend_env_variables:k}})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ei,{className:"w-4 h-4"}),"Automatic Environment Variables"]}),e.jsx(we,{children:"Variables automatically derived from infrastructure configuration"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-2",children:v.map(D=>e.jsxs("div",{className:"p-2 bg-gray-800 rounded-lg",children:[e.jsx("code",{className:"text-xs font-mono text-blue-400",children:D.name}),e.jsx("div",{className:"text-xs text-gray-300 font-mono break-all mt-1",children:D.value}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.description})]},D.name))})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"w-4 h-4"}),"Configurable Environment Variables"]}),e.jsx(we,{children:"Variables you can modify"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-2",children:b.map(D=>e.jsxs("div",{className:"p-2 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs font-mono text-orange-400",children:D.name}),D.editable&&e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>o(!0),className:"h-5 w-5 p-0",children:e.jsx(Fo,{className:"w-3 h-3"})})]}),i&&D.name==="PORT"?e.jsxs("div",{className:"mt-1",children:[e.jsx(je,{type:"text",value:u,onChange:R=>h(R.target.value),className:"w-full h-6 text-xs"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>o(!1),className:"h-5 w-5 p-0",children:e.jsx(tt,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{h(t.workload?.backend_image_port?.toString()||"8080"),o(!1)},className:"h-5 w-5 p-0",children:e.jsx(ds,{className:"w-3 h-3"})})]})]}):e.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:D.value}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.description})]},D.name))})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Custom Environment Variables"}),e.jsx(we,{children:"Add your own environment variables"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[Object.entries(l).map(([D,R])=>e.jsxs("div",{className:"p-2 bg-gray-800 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs font-mono text-green-400",children:D}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{S(D),g(R)},className:"h-5 w-5 p-0",children:e.jsx(Fo,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>C(D),className:"h-5 w-5 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]}),j===D?e.jsxs("div",{className:"mt-1",children:[e.jsx(je,{type:"text",value:w,onChange:k=>g(k.target.value),className:"w-full h-6 text-xs"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>A(D,w),className:"h-5 w-5 p-0",children:e.jsx(tt,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>S(null),className:"h-5 w-5 p-0",children:e.jsx(ds,{className:"w-3 h-3"})})]})]}):e.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:R})]},D)),e.jsxs("div",{className:"border-t border-gray-700 pt-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-var-name",className:"text-xs text-gray-400",children:"Variable Name"}),e.jsx(je,{id:"new-var-name",type:"text",placeholder:"VARIABLE_NAME",value:f,onChange:D=>p(D.target.value.toUpperCase().replace(/[^A-Z0-9_]/g,"_")),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-var-value",className:"text-xs text-gray-400",children:"Value"}),e.jsx(je,{id:"new-var-value",type:"text",placeholder:"value",value:m,onChange:D=>y(D.target.value),className:"mt-1"})]})]}),e.jsxs(ie,{onClick:_,disabled:!f||!m,className:"mt-2 w-full",size:"sm",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Add Variable"]})]})]})})]})]})}function Sj({config:t,node:s,onConfigChange:n}){const i=s?.type==="service",o=i?s.id.replace("service-",""):null,u=i&&o?t.services?.find($=>$.name===o):null,[h,l]=E.useState(i?[]:t.workload?.policy||[]),[d,f]=E.useState(!1),[p,m]=E.useState(""),[y,j]=E.useState(""),[S,w]=E.useState(null),[g,v]=E.useState(""),[b,_]=E.useState(""),[C,A]=E.useState([]),D=()=>{if(p&&y){const $=p.split(`
`).filter(V=>V.trim()),F=y.split(`
`).filter(V=>V.trim()),B=[...h,{actions:$,resources:F}];l(B),m(""),j(""),f(!1),n&&!i&&n({workload:{...t.workload,policy:B}})}},R=$=>{const F=g.split(`
`).filter(O=>O.trim()),B=b.split(`
`).filter(O=>O.trim()),V=[...h];V[$]={actions:F,resources:B},l(V),w(null),n&&!i&&n({workload:{...t.workload,policy:V}})},k=$=>{const F=h.filter((B,V)=>V!==$);l(F),n&&!i&&n({workload:{...t.workload,policy:F}})},M=$=>{A(F=>F.includes($)?F.filter(B=>B!==$):[...F,$])},I=[{name:"CloudWatch Full Access",type:"managed",arn:"arn:aws:iam::aws:policy/CloudWatchFullAccess",description:"Applied to both task role and execution role"},{name:"S3 Backend Bucket Access",type:"custom",actions:["s3:*"],resources:[`arn:aws:s3:::${t.project}-backend-${t.env}${t.workload?.bucket_postfix||""}`,`arn:aws:s3:::${t.project}-backend-${t.env}${t.workload?.bucket_postfix||""}/*`],description:"Full access to backend S3 bucket"},{name:"SES Email Sending",type:"custom",actions:["ses:SendEmail","ses:SendRawEmail"],resources:["*"],description:"Send emails via Amazon SES"},{name:"SSM Parameter Access",type:"custom",actions:["ssm:GetParameter","ssm:GetParameters","ssm:GetParametersByPath"],resources:i?[`arn:aws:ssm:*:*:parameter/${t.env}/${t.project}/${o}/*`]:[`arn:aws:ssm:*:*:parameter/${t.env}/${t.project}/backend/*`],description:i?`Read parameters under /${t.env}/${t.project}/${o}/*`:"Read parameters from Parameter Store"},...i?[]:[{name:"X-Ray Write Access",type:"managed",arn:"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess",description:"Send traces to AWS X-Ray"}]],q=[{name:"SQS Access",condition:"sqs_enable = true",enabled:!!t.sqs?.enabled,type:"policy_arn",policyArn:void 0,description:"Attaches the policy specified in sqs_policy_arn"},{name:"ECS Execute Command",condition:i?"remote_access = true":"backend_remote_access = true",enabled:i?u?.remote_access||!1:t.workload?.backend_remote_access!==!1,type:"custom",actions:["ssmmessages:CreateControlChannel","ssmmessages:CreateDataChannel","ssmmessages:OpenControlChannel","ssmmessages:OpenDataChannel"],resources:["*"],description:"Remote shell access to containers"},{name:"S3 Environment Files",condition:"env_files_s3 is not empty",enabled:i?(u?.env_files_s3?.length||0)>0:(t.workload?.env_files_s3?.length||0)>0,type:"custom",actions:i?["s3:GetObject"]:["s3:*"],resources:i?u?.env_files_s3?.map($=>`arn:aws:s3:::${$.bucket}/${$.key}`)||[]:t.workload?.env_files_s3?.map($=>`arn:aws:s3:::${$.bucket}/${$.key}`)||[],description:i?"Read specific S3 environment files":"Access to specific S3 environment files"},...i?[]:[{name:"EFS Access",condition:"backend_efs_mounts is not empty",enabled:(t.workload?.efs?.length||0)>0,type:"custom",actions:["elasticfilesystem:ClientMount","elasticfilesystem:ClientWrite","elasticfilesystem:DescribeMountTargets","elasticfilesystem:ClientRootAccess"],resources:t.workload?.efs?.map($=>`arn:aws:elasticfilesystem:*:*:file-system/${$.name}`)||[],description:"Mount and access EFS file systems"}]],W=[{name:"ECS Task Execution Policy",type:"managed",arn:"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",description:"Basic ECS task execution permissions"},{name:"CloudWatch Full Access",type:"managed",arn:"arn:aws:iam::aws:policy/CloudWatchFullAccess",description:"Write logs and metrics"},{name:"SSM Parameter Access",type:"custom",actions:["ssm:GetParameter","ssm:GetParameters","ssm:GetParametersByPath"],resources:i?[`arn:aws:ssm:*:*:parameter/${t.env}/${t.project}/${o}/*`]:[`arn:aws:ssm:*:*:parameter/${t.env}/${t.project}/backend/*`],description:"Read parameters during task startup"}],G=i?u?.env_files_s3:t.workload?.env_files_s3;return(G?.length||0)>0&&W.push({name:"S3 Environment Files Access",type:"custom",actions:["s3:GetObject"],resources:G?.map($=>`arn:aws:s3:::${$.bucket}/${$.key}`)||[],description:"Read environment files during task startup"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"IAM Roles"]}),e.jsxs(we,{children:["Roles used by the ECS"," ",i?`${o} service`:"backend service"]})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-gray-200 mb-1",children:"Task Role"}),e.jsx("code",{className:"text-sm font-mono text-blue-400",children:i?`${t.project}_service_${o}_task_${t.env}`:`${t.project}_backend_task_${t.env}`}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Used by the running container to access AWS services"})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-gray-200 mb-1",children:"Task Execution Role"}),e.jsx("code",{className:"text-sm font-mono text-blue-400",children:i?`${t.project}_service_${o}_task_execution_${t.env}`:`${t.project}_backend_task_execution_${t.env}`}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Used by ECS to start the task (pull images, write logs)"})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Service Permissions"}),e.jsx(we,{children:"These permissions are always attached to the task role"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-3",children:I.map(($,F)=>e.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"font-medium text-sm",children:$.name})]}),e.jsx(Te,{variant:$.type==="managed"?"default":"secondary",className:"text-xs",children:$.type==="managed"?"Managed Policy":"Custom Policy"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:$.description}),$.type==="managed"?e.jsx("code",{className:"text-xs text-gray-500 font-mono block",children:$.arn}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Actions:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:$.actions?.map((B,V)=>e.jsx(Te,{variant:"outline",className:"text-xs font-mono",children:B},V))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Resources:"}),e.jsx("div",{className:"space-y-1 mt-1",children:$.resources?.map((B,V)=>e.jsx("code",{className:"text-xs text-gray-400 block font-mono",children:B},V))})]})]})]},F))})})]}),!i&&e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Custom IAM Policies"}),e.jsx(we,{children:"Additional permissions for specific AWS services"})]}),e.jsxs(ie,{size:"sm",onClick:()=>f(!0),disabled:d,children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Policy"]})]})}),e.jsxs(pe,{children:[e.jsxs("div",{className:"space-y-3",children:[d&&e.jsxs("div",{className:"border border-blue-700 bg-blue-900/10 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400",children:"Add New Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-actions",className:"text-xs",children:"Actions (one per line)"}),e.jsx(Qt,{id:"new-actions",placeholder:"s3:GetObject\\ns3:PutObject\\ndynamodb:GetItem",value:p,onChange:$=>m($.target.value),className:"mt-1 h-24 font-mono text-xs"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-resources",className:"text-xs",children:"Resources (one per line)"}),e.jsx(Qt,{id:"new-resources",placeholder:"arn:aws:s3:::my-bucket/*\\narn:aws:dynamodb:*:*:table/my-table",value:y,onChange:$=>j($.target.value),className:"mt-1 h-24 font-mono text-xs"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{f(!1),m(""),j("")},children:"Cancel"}),e.jsxs(ie,{size:"sm",onClick:D,disabled:!p||!y,children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Add Policy"]})]})]}),h.map(($,F)=>{const B=S===F,V=C.includes(F);return e.jsx("div",{className:"border border-gray-700 rounded-lg p-3",children:B?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-xs",children:"Actions"}),e.jsx(Qt,{value:g,onChange:O=>v(O.target.value),className:"mt-1 h-24 font-mono text-xs"})]}),e.jsxs("div",{children:[e.jsx(re,{className:"text-xs",children:"Resources"}),e.jsx(Qt,{value:b,onChange:O=>_(O.target.value),className:"mt-1 h-24 font-mono text-xs"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>w(null),children:e.jsx(ds,{className:"w-3 h-3"})}),e.jsxs(ie,{size:"sm",onClick:()=>R(F),children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4 text-purple-400"}),e.jsxs("span",{className:"text-sm font-medium",children:["Custom Policy ",F+1]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>M(F),className:"h-6 w-6 p-0",children:V?e.jsx(vw,{className:"w-3 h-3"}):e.jsx(Ox,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{w(F),v($.actions.join(`
`)),_($.resources.join(`
`))},className:"h-6 w-6 p-0",children:e.jsx(Fo,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>k(F),className:"h-6 w-6 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-1",children:"Actions:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(V?$.actions:$.actions.slice(0,3)).map((O,H)=>e.jsx(Te,{variant:"secondary",className:"text-xs font-mono",children:O},H)),!V&&$.actions.length>3&&e.jsxs(Te,{variant:"outline",className:"text-xs",children:["+",$.actions.length-3," more"]})]})]}),V&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-1",children:"Resources:"}),e.jsx("div",{className:"space-y-1",children:$.resources.map((O,H)=>e.jsx("code",{className:"text-xs text-gray-300 block font-mono",children:O},H))})]})]})]})},F)}),h.length===0&&!d&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Kt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No custom policies configured"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add Policy" to grant additional permissions'})]})]}),h.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-900/20 border border-yellow-700 rounded",children:e.jsxs("p",{className:"text-xs text-yellow-300",children:[e.jsx(Ye,{className:"w-3 h-3 inline mr-1"}),"Custom policies are added to the task role. Ensure resources follow the principle of least privilege."]})})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Optional Permissions"}),e.jsx(we,{children:"Permissions applied based on configuration"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-3",children:q.map(($,F)=>e.jsxs("div",{className:`border rounded-lg p-3 space-y-2 ${$.enabled?"border-gray-700":"border-gray-800 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[$.enabled?e.jsx(tt,{className:"w-4 h-4 text-green-400"}):e.jsx(ds,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-sm",children:$.name})]}),e.jsx(Te,{variant:$.enabled?"default":"outline",className:"text-xs",children:$.enabled?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-xs text-blue-400",children:["Condition: ",e.jsx("code",{className:"font-mono",children:$.condition})]}),e.jsx("p",{className:"text-xs text-gray-400",children:$.description}),$.enabled&&e.jsxs("div",{className:"pt-2",children:[$.type==="policy_arn"&&$.policyArn&&e.jsxs("code",{className:"text-xs text-gray-500 font-mono block",children:["Policy ARN: ",$.policyArn]}),$.type==="custom"&&$.actions&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Actions:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:$.actions.map((B,V)=>e.jsx(Te,{variant:"outline",className:"text-xs font-mono",children:B},V))})]}),$.resources&&$.resources.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Resources:"}),e.jsx("div",{className:"space-y-1 mt-1",children:$.resources.map((B,V)=>e.jsx("code",{className:"text-xs text-gray-400 block font-mono",children:B},V))})]})]})]})]},F))})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Task Execution Role Permissions"]}),e.jsx(we,{children:e.jsx("code",{className:"font-mono text-sm",children:i?`${t.project}_service_${o}_task_execution_${t.env}`:`${t.project}_backend_task_execution_${t.env}`})})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-gray-800 rounded mb-3",children:e.jsx("p",{className:"text-sm text-gray-300",children:"The execution role is used by ECS to pull images, write logs, and read secrets during task startup."})}),W.map(($,F)=>e.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"font-medium text-sm",children:$.name})]}),e.jsx(Te,{variant:$.type==="managed"?"default":"secondary",className:"text-xs",children:$.type==="managed"?"Managed Policy":"Custom Policy"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:$.description}),$.type==="managed"?e.jsx("code",{className:"text-xs text-gray-500 font-mono block",children:$.arn}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Actions:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:$.actions?.map((B,V)=>e.jsx(Te,{variant:"outline",className:"text-xs font-mono",children:B},V))})]}),$.resources&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Resources:"}),e.jsx("div",{className:"space-y-1 mt-1",children:$.resources.map((B,V)=>e.jsx("code",{className:"text-xs text-gray-400 block font-mono",children:B},V))})]})]})]},F))]})})]})]})}function w9({config:t}){const s=`/${t.env}/${t.project}/backend`,[n,i]=E.useState([]),[o,u]=E.useState(!0),[h,l]=E.useState(null),[d,f]=E.useState(null),[p,m]=E.useState(""),[y,j]=E.useState(""),[S,w]=E.useState(!1),[g,v]=E.useState(!1),[b,_]=E.useState(!1),[C,A]=E.useState(!1),[D,R]=E.useState(""),[k,M]=E.useState(""),[I,q]=E.useState("SecureString"),[W,G]=E.useState(""),[$,F]=E.useState(!1),B=["env","pg_database_password",...t.workload?.setup_fcnsns?["gcm-server-key"]:[]],V=E.useCallback(async()=>{try{u(!0),l(null);const K=await Be.listSSMParameters(s);i(K||[])}catch(K){const Z=K instanceof Error?K.message:"Failed to load parameters";Z.includes("not found")||Z.includes("not deployed")||Z.includes("does not exist")?(i([]),l(null)):l(Z)}finally{u(!1)}},[s]);E.useEffect(()=>{V()},[V]);const O=async K=>{try{f(K),w(!0),_(!0);const Z=await Be.getSSMParameter(K.name);j(Z.value),m(Z.value)}catch(Z){l(Z instanceof Error?Z.message:"Failed to load parameter value"),_(!1)}finally{w(!1)}},H=async()=>{if(d)try{v(!0),await Be.createOrUpdateSSMParameter({name:d.name,value:p,type:d.type,description:d.description,overwrite:!0}),j(p),await V(),_(!1)}catch(K){l(K instanceof Error?K.message:"Failed to update parameter")}finally{v(!1)}},U=async K=>{if(confirm(`Are you sure you want to delete parameter ${K}?`))try{await Be.deleteSSMParameter(K),await V()}catch(Z){l(Z instanceof Error?Z.message:"Failed to delete parameter")}},L=async()=>{try{F(!0);const K=`${s}/${D}`;await Be.createOrUpdateSSMParameter({name:K,value:k,type:I,description:W,overwrite:!1}),A(!1),R(""),M(""),G(""),await V()}catch(K){l(K instanceof Error?K.message:"Failed to create parameter")}finally{F(!1)}},Y=K=>K.replace(`${s}/`,""),J=K=>{const Z=Y(K);return B.includes(Z)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Px,{className:"w-5 h-5"}),"Parameter Namespace"]}),e.jsx(we,{children:e.jsxs("code",{className:"font-mono text-sm",children:[s,"/*"]})})]}),e.jsx(pe,{children:e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"All parameters in this namespace are automatically:"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1 ml-4",children:[e.jsxs("li",{children:[" Discovered at runtime using"," ",e.jsx("code",{className:"font-mono text-xs",children:"aws_ssm_parameters_by_path"})]}),e.jsx("li",{children:" Transformed to uppercase environment variables"}),e.jsx("li",{children:" Injected into the ECS container as secrets"}),e.jsx("li",{children:" Encrypted using AWS KMS"})]})]})})]}),h&&e.jsxs(ze,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:h})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Parameters"}),e.jsx(we,{children:"Current SSM parameters in this namespace"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:V,disabled:o,children:e.jsx(Wt,{className:`w-4 h-4 ${o?"animate-spin":""}`})}),e.jsxs(ie,{size:"sm",onClick:()=>A(!0),disabled:C,children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Parameter"]})]})]})}),e.jsx(pe,{children:o&&!n.length?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[C&&e.jsxs("div",{className:"border border-blue-700 bg-blue-900/10 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400",children:"Add New Parameter"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-name",className:"text-xs",children:"Parameter Name"}),e.jsx(je,{id:"new-param-name",placeholder:"parameter_name",value:D,onChange:K=>R(K.target.value),className:"mt-1 h-8 text-sm"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s,"/",D]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-type",className:"text-xs",children:"Type"}),e.jsxs(Zt,{value:I,onValueChange:K=>q(K),children:[e.jsx(es,{className:"mt-1 h-8 text-sm",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"String",children:"String"}),e.jsx(Ee,{value:"StringList",children:"StringList"}),e.jsx(Ee,{value:"SecureString",children:"SecureString"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-value",className:"text-xs",children:"Value"}),e.jsx(Qt,{id:"new-param-value",placeholder:"Parameter value...",value:k,onChange:K=>M(K.target.value),className:"mt-1 h-20 text-sm"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-desc",className:"text-xs",children:"Description (optional)"}),e.jsx(je,{id:"new-param-desc",placeholder:"What is this parameter for?",value:W,onChange:K=>G(K.target.value),className:"mt-1 h-8 text-sm"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{A(!1),R(""),M(""),G("")},disabled:$,children:"Cancel"}),e.jsxs(ie,{size:"sm",onClick:L,disabled:!D||!k||$,children:[$?e.jsx(st,{className:"w-4 h-4 animate-spin mr-1"}):e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Create"]})]})]}),n.map(K=>{const Z=Y(K.name),oe=J(K.name);return e.jsxs("div",{className:`border rounded-lg p-3 space-y-2 ${oe?"border-gray-700 bg-gray-800/50":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:`w-4 h-4 ${oe?"text-green-400":"text-blue-400"}`}),e.jsx("code",{className:`text-sm font-mono ${oe?"text-green-400":"text-blue-400"}`,children:Z.toUpperCase().replace(/-/g,"_")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{variant:oe?"secondary":"outline",className:"text-xs",children:oe?"Auto":"Manual"}),e.jsx(Te,{variant:"outline",className:"text-xs",children:K.type})]})]}),K.description&&e.jsx("p",{className:"text-xs text-gray-400",children:K.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(xs,{className:"w-3 h-3 text-gray-500"}),e.jsx("code",{className:"text-gray-500",children:K.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(ie,{size:"sm",variant:"ghost",onClick:()=>O(K),className:"h-6 px-2 text-xs",children:[e.jsx(Lr,{className:"w-3 h-3 mr-1"}),"View"]}),!oe&&e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>U(K.name),className:"h-6 w-6 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]})]},K.name)}),!o&&n.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(yt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No parameters found in this namespace"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add Parameter" to create one'}),!h&&e.jsx("p",{className:"text-xs mt-2 text-gray-500",children:"If the service is not deployed yet, parameters will be available after deployment"})]})]})})]}),e.jsx(sa,{open:b,onOpenChange:_,children:e.jsxs(ra,{className:"max-w-4xl w-[90vw] max-h-[85vh]",children:[e.jsxs(na,{children:[e.jsxs(ia,{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4"}),d&&Y(d.name).toUpperCase().replace(/-/g,"_")]}),e.jsx(el,{children:d?.description||"SSM Parameter"})]}),e.jsx("div",{className:"space-y-4 py-4",children:S?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Parameter Path"}),e.jsx("code",{className:"text-sm text-gray-400 block p-2 bg-gray-800 rounded",children:d?.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{children:"Value"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(Te,{variant:"outline",children:d?.type}),d&&e.jsxs("span",{children:["Version: ",d.version]})]})]}),e.jsx(Qt,{value:p,onChange:K=>m(K.target.value),className:"font-mono text-sm min-h-[400px] resize-y",placeholder:"Enter parameter value..."})]}),d?.lastModifiedDate&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Last modified:"," ",new Date(d.lastModifiedDate).toLocaleString()]})]})}),e.jsxs(aa,{children:[e.jsx(ie,{variant:"outline",onClick:()=>_(!1),disabled:g,children:"Cancel"}),e.jsx(ie,{onClick:H,disabled:g||S||p===y,children:g?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})})]})}function S9({config:t,onConfigChange:s}){const n=`${t.project}-backend-${t.env}${t.workload?.bucket_postfix||""}`,i=t.workload?.bucket_public!==!1,[o,u]=E.useState(t.workload?.env_files_s3||[]),[h,l]=E.useState(!1),[d,f]=E.useState(n),[p,m]=E.useState(""),[y,j]=E.useState(null),[S,w]=E.useState(""),[g,v]=E.useState(""),[b,_]=E.useState(!1),[C,A]=E.useState(null),[D,R]=E.useState(""),[k,M]=E.useState(!1),[I,q]=E.useState(!1),[W,G]=E.useState(null),$=()=>{if(d&&p){const H=[...o,{bucket:d,key:p}];u(H),f(""),m(""),l(!1),s&&s({workload:{...t.workload,env_files_s3:H}})}},F=H=>{const U=[...o];U[H]={bucket:S,key:g},u(U),j(null),s&&s({workload:{...t.workload,env_files_s3:U}})},B=H=>{const U=o.filter((L,Y)=>Y!==H);u(U),s&&s({workload:{...t.workload,env_files_s3:U}})},V=async H=>{try{A(H),_(!0),M(!0),G(null);const U=await Be.getS3File(H.bucket,H.key);R(U.content||"")}catch{R(`# Environment variables
# Add your configuration here

`),G("File does not exist yet. You can create it by saving.")}finally{M(!1)}},O=async()=>{if(C)try{q(!0),G(null),await Be.putS3File({bucket:C.bucket,key:C.key,content:D}),_(!1)}catch(H){G(H instanceof Error?H.message:"Failed to save file")}finally{q(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Wr,{className:"w-5 h-5"}),"Primary Backend Bucket"]}),e.jsx(we,{children:"Main S3 bucket for backend file storage"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_T,{className:"w-4 h-4 text-green-400"}),e.jsx("code",{className:"text-sm font-mono text-green-400",children:n})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i?e.jsx(js,{className:"w-3 h-3 text-yellow-400"}):e.jsx(Ei,{className:"w-3 h-3 text-gray-400"}),e.jsx(Te,{variant:i?"outline":"secondary",className:"text-xs",children:i?"Public Access":"Private"})]}),e.jsx(Te,{variant:"outline",className:"text-xs",children:"Primary"})]})]})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Environment Variable:"}),e.jsx("code",{className:"font-mono text-blue-400",children:"AWS_S3_BUCKET"})]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Purpose:"}),e.jsx("span",{children:"File uploads, static assets, temporary storage"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-300",children:"IAM Permissions:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 ml-4",children:[e.jsx("li",{children:" s3:GetObject"}),e.jsx("li",{children:" s3:PutObject"}),e.jsx("li",{children:" s3:DeleteObject"}),e.jsx("li",{children:" s3:ListBucket"})]})]})]})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"Environment Files"]}),e.jsx(we,{children:"Load .env files from S3 buckets"})]}),e.jsxs(ie,{size:"sm",onClick:()=>l(!0),disabled:h,children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add File"]})]})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[h&&e.jsxs("div",{className:"border border-blue-700 bg-blue-900/10 rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-bucket",className:"text-xs",children:"Bucket Name"}),e.jsx(je,{id:"new-bucket",placeholder:n,value:d,onChange:H=>f(H.target.value),className:"mt-1 h-8 text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter full S3 bucket name"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-key",className:"text-xs",children:"File Path"}),e.jsx(je,{id:"new-key",placeholder:"backend/.env",value:p,onChange:H=>m(H.target.value),className:"mt-1 h-8 text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{l(!1),f(n),m("")},children:"Cancel"}),e.jsxs(ie,{size:"sm",onClick:$,disabled:!d||!p,children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Add"]})]})]}),o.map((H,U)=>{const L=y===U;return e.jsx("div",{className:"border border-gray-700 rounded-lg p-3",children:L?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-xs",children:"Bucket Name"}),e.jsx(je,{value:S,onChange:Y=>w(Y.target.value),className:"mt-1 h-8 text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter full S3 bucket name"})]}),e.jsxs("div",{children:[e.jsx(re,{className:"text-xs",children:"Key"}),e.jsx(je,{value:g,onChange:Y=>v(Y.target.value),className:"mt-1 h-8 text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>j(null),children:e.jsx(ds,{className:"w-3 h-3"})}),e.jsxs(ie,{size:"sm",onClick:()=>F(U),children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"Save"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4 text-green-400"}),e.jsx("code",{className:"text-sm font-mono text-green-400",children:H.key})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(Wr,{className:"w-3 h-3"}),e.jsxs("span",{children:["s3://",e.jsxs("code",{className:"font-mono",children:[H.bucket,"/",H.key]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(ie,{size:"sm",variant:"ghost",onClick:()=>V(H),className:"h-6 px-2 text-xs",children:[e.jsx(Lr,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{j(U),w(H.bucket),v(H.key)},className:"h-6 w-6 p-0",children:e.jsx(Fo,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>B(U),className:"h-6 w-6 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]})},U)}),o.length===0&&!h&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(xs,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No environment files configured"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add File" to configure S3 environment files'})]})]})})]}),e.jsx(sa,{open:b,onOpenChange:_,children:e.jsxs(ra,{className:"max-w-4xl w-[90vw] max-h-[85vh]",children:[e.jsxs(na,{children:[e.jsxs(ia,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),C?.key]}),e.jsx(el,{children:C&&`s3://${C.bucket}/${C.key}`})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[W&&e.jsxs(ze,{children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:W})]}),k?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"File Content"}),e.jsx(Qt,{value:D,onChange:H=>R(H.target.value),className:"font-mono text-sm min-h-[400px] resize-y",placeholder:"# Environment variables\\nKEY=value\\nANOTHER_KEY=another_value"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Use standard .env format. One variable per line."})]})]}),e.jsxs(aa,{children:[e.jsx(ie,{variant:"outline",onClick:()=>_(!1),disabled:I,children:"Cancel"}),e.jsx(ie,{onClick:O,disabled:I||k,children:I?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Save File"]})})]})]})})]})}var YC=["PageUp","PageDown"],XC=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],KC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},al="Slider",[Nx,N9,C9]=og(al),[QC]=yr(al,[C9]),[E9,Lh]=QC(al),ZC=E.forwardRef((t,s)=>{const{name:n,min:i=0,max:o=100,step:u=1,orientation:h="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:f=[i],value:p,onValueChange:m=()=>{},onValueCommit:y=()=>{},inverted:j=!1,form:S,...w}=t,g=E.useRef(new Set),v=E.useRef(0),_=h==="horizontal"?k9:A9,[C=[],A]=xn({prop:p,defaultProp:f,onChange:q=>{[...g.current][v.current]?.focus(),m(q)}}),D=E.useRef(C);function R(q){const W=O9(C,q);I(q,W)}function k(q){I(q,v.current)}function M(){const q=D.current[v.current];C[v.current]!==q&&y(C)}function I(q,W,{commit:G}={commit:!1}){const $=I9(u),F=$9(Math.round((q-i)/u)*u+i,$),B=Nc(F,[i,o]);A((V=[])=>{const O=D9(V,B,W);if(B9(O,d*u)){v.current=O.indexOf(B);const H=String(O)!==String(V);return H&&G&&y(O),H?O:V}else return V})}return e.jsx(E9,{scope:t.__scopeSlider,name:n,disabled:l,min:i,max:o,valueIndexToChangeRef:v,thumbs:g.current,values:C,orientation:h,form:S,children:e.jsx(Nx.Provider,{scope:t.__scopeSlider,children:e.jsx(Nx.Slot,{scope:t.__scopeSlider,children:e.jsx(_,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:s,onPointerDown:Pe(w.onPointerDown,()=>{l||(D.current=C)}),min:i,max:o,inverted:j,onSlideStart:l?void 0:R,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&I(i,0,{commit:!0}),onEndKeyDown:()=>!l&&I(o,C.length-1,{commit:!0}),onStepKeyDown:({event:q,direction:W})=>{if(!l){const F=YC.includes(q.key)||q.shiftKey&&XC.includes(q.key)?10:1,B=v.current,V=C[B],O=u*F*W;I(V+O,B,{commit:!0})}}})})})})});ZC.displayName=al;var[JC,e2]=QC(al,{startEdge:"left",endEdge:"right",size:"width",direction:1}),k9=E.forwardRef((t,s)=>{const{min:n,max:i,dir:o,inverted:u,onSlideStart:h,onSlideMove:l,onSlideEnd:d,onStepKeyDown:f,...p}=t,[m,y]=E.useState(null),j=Qe(s,_=>y(_)),S=E.useRef(void 0),w=tl(o),g=w==="ltr",v=g&&!u||!g&&u;function b(_){const C=S.current||m.getBoundingClientRect(),A=[0,C.width],R=Ng(A,v?[n,i]:[i,n]);return S.current=C,R(_-C.left)}return e.jsx(JC,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:e.jsx(t2,{dir:w,"data-orientation":"horizontal",...p,ref:j,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const C=b(_.clientX);h?.(C)},onSlideMove:_=>{const C=b(_.clientX);l?.(C)},onSlideEnd:()=>{S.current=void 0,d?.()},onStepKeyDown:_=>{const A=KC[v?"from-left":"from-right"].includes(_.key);f?.({event:_,direction:A?-1:1})}})})}),A9=E.forwardRef((t,s)=>{const{min:n,max:i,inverted:o,onSlideStart:u,onSlideMove:h,onSlideEnd:l,onStepKeyDown:d,...f}=t,p=E.useRef(null),m=Qe(s,p),y=E.useRef(void 0),j=!o;function S(w){const g=y.current||p.current.getBoundingClientRect(),v=[0,g.height],_=Ng(v,j?[i,n]:[n,i]);return y.current=g,_(w-g.top)}return e.jsx(JC,{scope:t.__scopeSlider,startEdge:j?"bottom":"top",endEdge:j?"top":"bottom",size:"height",direction:j?1:-1,children:e.jsx(t2,{"data-orientation":"vertical",...f,ref:m,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const g=S(w.clientY);u?.(g)},onSlideMove:w=>{const g=S(w.clientY);h?.(g)},onSlideEnd:()=>{y.current=void 0,l?.()},onStepKeyDown:w=>{const v=KC[j?"from-bottom":"from-top"].includes(w.key);d?.({event:w,direction:v?-1:1})}})})}),t2=E.forwardRef((t,s)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:o,onSlideEnd:u,onHomeKeyDown:h,onEndKeyDown:l,onStepKeyDown:d,...f}=t,p=Lh(al,n);return e.jsx(We.span,{...f,ref:s,onKeyDown:Pe(t.onKeyDown,m=>{m.key==="Home"?(h(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):YC.concat(XC).includes(m.key)&&(d(m),m.preventDefault())}),onPointerDown:Pe(t.onPointerDown,m=>{const y=m.target;y.setPointerCapture(m.pointerId),m.preventDefault(),p.thumbs.has(y)?y.focus():i(m)}),onPointerMove:Pe(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&o(m)}),onPointerUp:Pe(t.onPointerUp,m=>{const y=m.target;y.hasPointerCapture(m.pointerId)&&(y.releasePointerCapture(m.pointerId),u(m))})})}),s2="SliderTrack",r2=E.forwardRef((t,s)=>{const{__scopeSlider:n,...i}=t,o=Lh(s2,n);return e.jsx(We.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...i,ref:s})});r2.displayName=s2;var Cx="SliderRange",n2=E.forwardRef((t,s)=>{const{__scopeSlider:n,...i}=t,o=Lh(Cx,n),u=e2(Cx,n),h=E.useRef(null),l=Qe(s,h),d=o.values.length,f=o.values.map(y=>o2(y,o.min,o.max)),p=d>1?Math.min(...f):0,m=100-Math.max(...f);return e.jsx(We.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...i,ref:l,style:{...t.style,[u.startEdge]:p+"%",[u.endEdge]:m+"%"}})});n2.displayName=Cx;var Ex="SliderThumb",a2=E.forwardRef((t,s)=>{const n=N9(t.__scopeSlider),[i,o]=E.useState(null),u=Qe(s,l=>o(l)),h=E.useMemo(()=>i?n().findIndex(l=>l.ref.current===i):-1,[n,i]);return e.jsx(T9,{...t,ref:u,index:h})}),T9=E.forwardRef((t,s)=>{const{__scopeSlider:n,index:i,name:o,...u}=t,h=Lh(Ex,n),l=e2(Ex,n),[d,f]=E.useState(null),p=Qe(s,b=>f(b)),m=d?h.form||!!d.closest("form"):!0,y=Pc(d),j=h.values[i],S=j===void 0?0:o2(j,h.min,h.max),w=M9(i,h.values.length),g=y?.[l.size],v=g?P9(g,S,l.direction):0;return E.useEffect(()=>{if(d)return h.thumbs.add(d),()=>{h.thumbs.delete(d)}},[d,h.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${S}% + ${v}px)`},children:[e.jsx(Nx.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(We.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":h.min,"aria-valuenow":j,"aria-valuemax":h.max,"aria-orientation":h.orientation,"data-orientation":h.orientation,"data-disabled":h.disabled?"":void 0,tabIndex:h.disabled?void 0:0,...u,ref:p,style:j===void 0?{display:"none"}:t.style,onFocus:Pe(t.onFocus,()=>{h.valueIndexToChangeRef.current=i})})}),m&&e.jsx(i2,{name:o??(h.name?h.name+(h.values.length>1?"[]":""):void 0),form:h.form,value:j},i)]})});a2.displayName=Ex;var R9="RadioBubbleInput",i2=E.forwardRef(({__scopeSlider:t,value:s,...n},i)=>{const o=E.useRef(null),u=Qe(o,i),h=Oc(s);return E.useEffect(()=>{const l=o.current;if(!l)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(h!==s&&p){const m=new Event("input",{bubbles:!0});p.call(l,s),l.dispatchEvent(m)}},[h,s]),e.jsx(We.input,{style:{display:"none"},...n,ref:u,defaultValue:s})});i2.displayName=R9;function D9(t=[],s,n){const i=[...t];return i[n]=s,i.sort((o,u)=>o-u)}function o2(t,s,n){const u=100/(n-s)*(t-s);return Nc(u,[0,100])}function M9(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function O9(t,s){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-s)),i=Math.min(...n);return n.indexOf(i)}function P9(t,s,n){const i=t/2,u=Ng([0,50],[0,i]);return(i-u(s)*n)*n}function L9(t){return t.slice(0,-1).map((s,n)=>t[n+1]-s)}function B9(t,s){if(s>0){const n=L9(t);return Math.min(...n)>=s}return!0}function Ng(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const i=(s[1]-s[0])/(t[1]-t[0]);return s[0]+i*(n-t[0])}}function I9(t){return(String(t).split(".")[1]||"").length}function $9(t,s){const n=Math.pow(10,s);return Math.round(t*n)/n}var H9=ZC,z9=r2,F9=n2,U9=a2;function Nj({className:t,defaultValue:s,value:n,min:i=0,max:o=100,...u}){const h=E.useMemo(()=>Array.isArray(n)?n:Array.isArray(s)?s:[i,o],[n,s,i,o]);return e.jsxs(H9,{"data-slot":"slider",defaultValue:s,value:n,min:i,max:o,className:Ie("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...u,children:[e.jsx(z9,{"data-slot":"slider-track",className:Ie("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(F9,{"data-slot":"slider-range",className:Ie("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:h.length},(l,d)=>e.jsx(U9,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}const Cj={256:["512","1024","2048"],512:["1024","2048","3072","4096"],1024:["2048","3072","4096","5120","6144","7168","8192"],2048:["4096","5120","6144","7168","8192","9216","10240","11264","12288","13312","14336","15360","16384"],4096:["8192","9216","10240","11264","12288","13312","14336","15360","16384","17408","18432","19456","20480","21504","22528","23552","24576","25600","26624","27648","28672","29696","30720"]};function Ej({config:t,onConfigChange:s,isService:n=!1,serviceName:i}){const o=n&&i?t.services?.find(I=>I.name===i):null,[u,h]=E.useState(n&&o?o.cpu?.toString()||"256":t.workload?.backend_cpu||"256"),[l,d]=E.useState(n&&o?o.memory?.toString()||"512":t.workload?.backend_memory||"512"),[f,p]=E.useState(n&&o?o.desired_count||1:t.workload?.backend_desired_count||1),[m,y]=E.useState(n?!1:t.workload?.backend_autoscaling_enabled||!1),[j,S]=E.useState(t.workload?.backend_autoscaling_min_capacity||1),[w,g]=E.useState(t.workload?.backend_autoscaling_max_capacity||10),[v,b]=E.useState(70),[_,C]=E.useState(80),[A,D]=E.useState(!1),[R,k]=E.useState(1e3);E.useEffect(()=>{const I=Cj[u];I&&!I.includes(l)&&d(I[0])},[u,l]);const M=I=>{if(n&&i){const q=t.services?.map(W=>W.name===i?{...W,cpu:I?.backend_cpu?Number.parseInt(I.backend_cpu):W.cpu,memory:I?.backend_memory?Number.parseInt(I.backend_memory):W.memory,desired_count:I?.backend_desired_count||W.desired_count}:W)||[];s({services:q})}else s({workload:{...t.workload,...I}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(lT,{className:"w-5 h-5 text-blue-400"}),"Resource Configuration"]}),e.jsx(we,{children:"Configure CPU and memory resources for each instance"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"cpu-units",children:"CPU Units"}),e.jsxs(Zt,{value:u,onValueChange:I=>{h(I),M({backend_cpu:I})},children:[e.jsx(es,{id:"cpu-units",className:"mt-1 bg-gray-800 border-gray-600",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"256",children:"256 (0.25 vCPU)"}),e.jsx(Ee,{value:"512",children:"512 (0.5 vCPU)"}),e.jsx(Ee,{value:"1024",children:"1024 (1 vCPU)"}),e.jsx(Ee,{value:"2048",children:"2048 (2 vCPU)"}),e.jsx(Ee,{value:"4096",children:"4096 (4 vCPU)"})]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"memory",children:"Memory (MB)"}),e.jsxs(Zt,{value:l,onValueChange:I=>{d(I),M({backend_memory:I})},children:[e.jsx(es,{id:"memory",className:"mt-1 bg-gray-800 border-gray-600",children:e.jsx(Jt,{})}),e.jsx(ts,{children:Cj[u]?.map(I=>e.jsxs(Ee,{value:I,children:[I," MB (",(Number.parseInt(I)/1024).toFixed(1)," GB)"]},I))})]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"base-count",children:"Base Instance Count"}),e.jsx(je,{id:"base-count",type:"number",min:"1",max:"100",value:f,onChange:I=>{const q=Number.parseInt(I.target.value)||1;p(q),M({backend_desired_count:q})},className:"mt-1 bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of instances to run when autoscaling is disabled"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Resource Guidelines"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-400",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"256 CPU:"})," Light workloads, simple APIs"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"512 CPU:"})," Standard web applications"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"1024 CPU:"})," CPU-intensive processing"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"2048+ CPU:"})," High-performance applications"]})]})]})]})]}),!n&&e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-green-400"}),"Autoscaling Configuration"]}),e.jsx(we,{children:"Configure automatic scaling based on metrics"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"enable-autoscaling",children:"Enable Autoscaling"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically adjust the number of instances based on load"})]}),e.jsx(ct,{id:"enable-autoscaling",checked:m,onCheckedChange:I=>{y(I),M({backend_autoscaling_enabled:I})},className:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-600"})]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"min-instances",children:"Minimum Instances"}),e.jsx(je,{id:"min-instances",type:"number",min:"1",max:w,value:j,onChange:I=>{const q=Number.parseInt(I.target.value)||1;S(q),M({backend_autoscaling_min_capacity:q})},className:"mt-1 bg-gray-800 border-gray-600 text-white"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"max-instances",children:"Maximum Instances"}),e.jsx(je,{id:"max-instances",type:"number",min:j,max:"100",value:w,onChange:I=>{const q=Number.parseInt(I.target.value)||1;g(q),M({backend_autoscaling_max_capacity:q})},className:"mt-1 bg-gray-800 border-gray-600 text-white"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Scaling Triggers"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{children:"CPU Target"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[v,"%"]})]}),e.jsx(Nj,{value:[v],onValueChange:([I])=>{b(I)},min:0,max:100,step:5,className:"mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Scale up when average CPU utilization exceeds this threshold"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{children:"Memory Target"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[_,"%"]})]}),e.jsx(Nj,{value:[_],onValueChange:([I])=>{C(I)},min:0,max:100,step:5,className:"mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Scale up when average memory utilization exceeds this threshold"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_i,{id:"request-scaling",checked:A,onCheckedChange:I=>{D(I)}}),e.jsx(re,{htmlFor:"request-scaling",className:"text-sm font-normal cursor-pointer",children:"Enable Request-based Scaling (requires ALB)"})]}),A&&e.jsxs("div",{className:"ml-6",children:[e.jsx(re,{htmlFor:"requests-per-instance",children:"Requests per Instance"}),e.jsx(je,{id:"requests-per-instance",type:"number",min:"100",max:"10000",value:R,onChange:I=>{const q=Number.parseInt(I.target.value)||1e3;k(q)},className:"mt-1 bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target number of requests each instance should handle"})]})]})]}),e.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-1",children:"Scaling Behavior"}),e.jsxs("p",{className:"text-xs text-gray-300",children:["The service will scale between ",j," and"," ",w," instances based on the configured metrics. Scaling decisions are made every 60 seconds."]})]})]})})]}),!m&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-1",children:"Manual Scaling"}),e.jsxs("p",{className:"text-xs text-gray-300",children:["With autoscaling disabled, your service will always run exactly ",f," instance",f>1?"s":"",". You'll need to manually adjust this value to handle load changes."]})]})]})})]})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Gp,{className:"w-5 h-5 text-purple-400"}),"Resource Summary"]})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Per Instance"}),e.jsxs("p",{className:"text-gray-300",children:[u," CPU / ",l," MB"]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Instance Range"}),e.jsxs("p",{className:"text-gray-300",children:[m?`${j} - ${w}`:f," ","instances"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Maximum Resources"}),e.jsxs("p",{className:"text-sm text-gray-300",children:[Number.parseInt(u)*(m?w:f)," ","CPU units /"," ",(Number.parseInt(l)*(m?w:f)/1024).toFixed(1)," ","GB memory"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("p",{children:" Fargate pricing is based on CPU and memory allocated"}),e.jsx("p",{children:" You only pay for what you use (per-second billing)"}),e.jsx("p",{children:" Data transfer and other AWS services incur additional charges"})]})]})})]})]})}function W9({config:t,onConfigChange:s,accountInfo:n}){const i=`${t.project}_backend`,o=n?.accountId||t.ecr_account_id,u=t.ecr_account_region||t.region,h=`${o||"<YOUR_ACCOUNT_ID>"}.dkr.ecr.${u}.amazonaws.com/${i}`,l=f=>{s({workload:{...t.workload,...f}})},d=f=>{s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,api_domain_prefix:f?"api":""}})};return e.jsxs(fe,{className:"w-full",children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Backend Service Configuration"}),e.jsx(we,{children:"Configure your backend service settings"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"health_endpoint",children:"Health Endpoint"}),e.jsx(je,{id:"health_endpoint",value:t.workload?.backend_health_endpoint||"/health",onChange:f=>l({backend_health_endpoint:f.target.value}),placeholder:"/health",className:"bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500",children:"API endpoint for health checks"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"backend_external_docker_image",children:"External Docker Image"}),e.jsx(je,{id:"backend_external_docker_image",value:t.workload?.backend_external_docker_image||"",onChange:f=>l({backend_external_docker_image:f.target.value}),placeholder:"docker.io/myapp:latest",className:"bg-gray-800 border-gray-600 text-white font-mono"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional: Use external Docker image instead of the ECR repository"}),e.jsx("div",{className:"mt-2 p-3 bg-blue-900/20 border border-blue-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-300",children:e.jsx("strong",{className:"text-blue-400",children:"Default ECR Repository:"})}),e.jsx("p",{className:"text-xs font-mono text-gray-400 mt-1 break-all",children:h}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"If you leave this field empty, the backend service will use images from this ECR repository. Specify an external image only if you want to use a different registry."})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"backend_container_command",children:"Container Command"}),e.jsx(je,{id:"backend_container_command",value:Array.isArray(t.workload?.backend_container_command)?t.workload.backend_container_command.join(", "):t.workload?.backend_container_command||"",onChange:f=>{const p=f.target.value.split(",").map(m=>m.trim()).filter(m=>m);l({backend_container_command:p.length>0?p:void 0})},placeholder:"npm, start",className:"bg-gray-800 border-gray-600 text-white font-mono"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Override container startup command (comma-separated)"})]}),e.jsx(Yr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"bucket_postfix",children:"Backend Bucket Postfix"}),e.jsx(je,{id:"bucket_postfix",value:t.workload?.bucket_postfix||"",onChange:f=>l({bucket_postfix:f.target.value}),placeholder:"backend",className:"bg-gray-800 border-gray-600 text-white"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["S3 bucket name will be:"," ",e.jsxs("code",{className:"text-blue-300",children:[t.project,"-backend-",t.env,"-",t.workload?.bucket_postfix||"backend"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"bucket_public",children:"Public Bucket"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Allow public access to backend bucket"})]}),e.jsx(ct,{id:"bucket_public",checked:t.workload?.bucket_public||!1,onCheckedChange:f=>l({bucket_public:f}),className:"data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600"})]}),e.jsx(Yr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"backend_image_port",children:"Container Port"}),e.jsx(je,{id:"backend_image_port",type:"number",value:t.workload?.backend_image_port||8080,onChange:f=>l({backend_image_port:parseInt(f.target.value)||8080}),placeholder:"8080",className:"bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Port your application listens on (default: 8080)"})]}),e.jsx(Yr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"create-api-domain-backend",children:"API Gateway Custom Domain"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Create API Gateway custom domain and Route53 A record for backend API"})]}),e.jsx(ct,{id:"create-api-domain-backend",checked:t.domain?.api_domain_prefix!==void 0&&t.domain?.api_domain_prefix!==null&&t.domain?.api_domain_prefix!=="",onCheckedChange:d,className:"data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600"})]}),t.domain?.api_domain_prefix&&t.domain.api_domain_prefix!==""&&e.jsxs("div",{className:"space-y-2 ml-4",children:[e.jsx(re,{htmlFor:"api_domain_prefix",children:"API Domain Prefix"}),e.jsx(je,{id:"api_domain_prefix",value:t.domain.api_domain_prefix,onChange:f=>s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,api_domain_prefix:f.target.value||"api"}}),placeholder:"api",className:"bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.domain?.domain_name?e.jsxs(e.Fragment,{children:["Subdomain prefix for API Gateway (creates"," ",e.jsxs("code",{className:"text-blue-300",children:[t.domain.api_domain_prefix||"api",".",t.domain.add_env_domain_prefix?`${t.env}.`:"",t.domain.domain_name]}),")"]}):"Subdomain prefix for API Gateway (configure domain in Route53 settings)"})]}),t.domain?.api_domain_prefix&&t.domain.api_domain_prefix!==""?e.jsx("div",{className:"p-3 bg-green-900/20 border border-green-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-300",children:e.jsx("strong",{className:"text-green-400",children:"API Gateway custom domain will be created"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Route53 A record will point to API Gateway for backend access"})]})]})}):e.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-300",children:e.jsx("strong",{className:"text-yellow-400",children:"API Gateway custom domain disabled"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Backend will use default AWS API Gateway domain"})]})]})})]})]})}function V9({config:t}){const s=`${t.project}-fcm-${t.env}`,n=`/${t.env}/${t.project}/backend/gcm-server-key`;return t.workload?.setup_fcnsns===!0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-5 h-5"}),"Amazon SNS - Firebase Cloud Messaging"]}),e.jsx(we,{children:"Push notification platform application"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(CR,{className:"w-4 h-4 text-pink-400"}),e.jsx("code",{className:"text-sm font-mono text-pink-400",children:s})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(Te,{variant:"outline",className:"text-xs",children:"GCM Platform"}),e.jsx(Te,{variant:"default",className:"text-xs",children:"Active"})]})]})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Platform:"}),e.jsx("span",{children:"Google Cloud Messaging (GCM/FCM)"})]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Purpose:"}),e.jsx("span",{children:"Mobile push notifications"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-300",children:"GCM Server Key Location:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-3 h-3 text-gray-400"}),e.jsx("code",{className:"text-xs font-mono text-blue-400",children:n})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Stored in AWS Systems Manager Parameter Store (SecureString)"})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-300",children:"IAM Permissions:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 ml-4",children:[e.jsx("li",{children:" sns:Publish"}),e.jsx("li",{children:" sns:CreatePlatformEndpoint"}),e.jsx("li",{children:" sns:DeleteEndpoint"}),e.jsx("li",{children:" sns:GetEndpointAttributes"}),e.jsx("li",{children:" sns:SetEndpointAttributes"})]})]})]})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2 text-lg",children:[e.jsx(_s,{className:"w-4 h-4"}),"Integration Details"]})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("h4",{className:"font-medium text-gray-200",children:"Backend Integration"}),e.jsxs("div",{className:"pl-4 space-y-1 text-gray-400",children:[e.jsx("p",{children:" Platform application ARN available via environment"}),e.jsx("p",{children:" Create platform endpoints for device tokens"}),e.jsx("p",{children:" Send push notifications to mobile devices"}),e.jsx("p",{children:" Manage endpoint attributes and subscriptions"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("h4",{className:"font-medium text-gray-200",children:"Required Setup"}),e.jsxs("div",{className:"pl-4 space-y-1 text-gray-400",children:[e.jsx("p",{children:"1. Add your FCM server key to Parameter Store:"}),e.jsxs("code",{className:"block ml-4 text-xs bg-gray-900 p-2 rounded font-mono",children:['aws ssm put-parameter --name "',n,'" \\',e.jsx("br",{}),'--value "YOUR_FCM_SERVER_KEY" --type SecureString']}),e.jsx("p",{className:"mt-2",children:"2. Enable in your environment YAML:"}),e.jsx("code",{className:"block ml-4 text-xs bg-gray-900 p-2 rounded font-mono",children:"setup_fcnsns: true"})]})]}),e.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-700 rounded",children:e.jsxs("p",{className:"text-xs text-yellow-300",children:[e.jsx("strong",{children:"Note:"})," Currently supports FCM (Firebase Cloud Messaging) only. For other SNS features like topics, email, or SMS, additional configuration would be needed."]})})]})})]})]}):e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-5 h-5"}),"Amazon SNS"]}),e.jsx(we,{children:"Firebase Cloud Messaging / Push Notifications"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Pr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"SNS is not enabled"}),e.jsx("p",{className:"text-xs mt-1",children:"Set setup_fcnsns: true in your environment YAML file to enable"})]})})]})}var Mp={exports:{}},kj;function q9(){return kj||(kj=1,(function(t,s){(function(n,i){t.exports=i()})(self,(()=>(()=>{var n={4567:function(h,l,d){var f=this&&this.__decorate||function(_,C,A,D){var R,k=arguments.length,M=k<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,A):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(_,C,A,D);else for(var I=_.length-1;I>=0;I--)(R=_[I])&&(M=(k<3?R(M):k>3?R(C,A,M):R(C,A))||M);return k>3&&M&&Object.defineProperty(C,A,M),M},p=this&&this.__param||function(_,C){return function(A,D){C(A,D,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const m=d(9042),y=d(6114),j=d(9924),S=d(844),w=d(5596),g=d(4725),v=d(3656);let b=l.AccessibilityManager=class extends S.Disposable{constructor(_,C){super(),this._terminal=_,this._renderService=C,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let A=0;A<this._terminal.rows;A++)this._rowElements[A]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[A]);if(this._topBoundaryFocusListener=A=>this._handleBoundaryFocus(A,0),this._bottomBoundaryFocusListener=A=>this._handleBoundaryFocus(A,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new j.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((A=>this._handleResize(A.rows)))),this.register(this._terminal.onRender((A=>this._refreshRows(A.start,A.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((A=>this._handleChar(A)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((A=>this._handleTab(A)))),this.register(this._terminal.onKey((A=>this._handleKey(A.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new w.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,v.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,S.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(_){for(let C=0;C<_;C++)this._handleChar(" ")}_handleChar(_){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==_&&(this._charsToAnnounce+=_):this._charsToAnnounce+=_,_===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=m.tooMuchOutput)),y.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,y.isMac&&this._liveRegion.remove()}_handleKey(_){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(_)||this._charsToConsume.push(_)}_refreshRows(_,C){this._liveRegionDebouncer.refresh(_,C,this._terminal.rows)}_renderRows(_,C){const A=this._terminal.buffer,D=A.lines.length.toString();for(let R=_;R<=C;R++){const k=A.translateBufferLineToString(A.ydisp+R,!0),M=(A.ydisp+R+1).toString(),I=this._rowElements[R];I&&(k.length===0?I.innerText="":I.textContent=k,I.setAttribute("aria-posinset",M),I.setAttribute("aria-setsize",D))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(_,C){const A=_.target,D=this._rowElements[C===0?1:this._rowElements.length-2];if(A.getAttribute("aria-posinset")===(C===0?"1":`${this._terminal.buffer.lines.length}`)||_.relatedTarget!==D)return;let R,k;if(C===0?(R=A,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(R=this._rowElements.shift(),k=A,this._rowContainer.removeChild(R)),R.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),C===0){const M=this._createAccessibilityTreeNode();this._rowElements.unshift(M),this._rowContainer.insertAdjacentElement("afterbegin",M)}else{const M=this._createAccessibilityTreeNode();this._rowElements.push(M),this._rowContainer.appendChild(M)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(C===0?-1:1),this._rowElements[C===0?1:this._rowElements.length-2].focus(),_.preventDefault(),_.stopImmediatePropagation()}_handleResize(_){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let C=this._rowContainer.children.length;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);for(;this._rowElements.length>_;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const _=document.createElement("div");return _.setAttribute("role","listitem"),_.tabIndex=-1,this._refreshRowDimensions(_),_}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let _=0;_<this._terminal.rows;_++)this._refreshRowDimensions(this._rowElements[_])}}_refreshRowDimensions(_){_.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=b=f([p(1,g.IRenderService)],b)},3614:(h,l)=>{function d(y){return y.replace(/\r?\n/g,"\r")}function f(y,j){return j?"\x1B[200~"+y+"\x1B[201~":y}function p(y,j,S,w){y=f(y=d(y),S.decPrivateModes.bracketedPasteMode&&w.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(y,!0),j.value=""}function m(y,j,S){const w=S.getBoundingClientRect(),g=y.clientX-w.left-10,v=y.clientY-w.top-10;j.style.width="20px",j.style.height="20px",j.style.left=`${g}px`,j.style.top=`${v}px`,j.style.zIndex="1000",j.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=d,l.bracketTextForPaste=f,l.copyHandler=function(y,j){y.clipboardData&&y.clipboardData.setData("text/plain",j.selectionText),y.preventDefault()},l.handlePasteEvent=function(y,j,S,w){y.stopPropagation(),y.clipboardData&&p(y.clipboardData.getData("text/plain"),j,S,w)},l.paste=p,l.moveTextAreaUnderMouseCursor=m,l.rightClickHandler=function(y,j,S,w,g){m(y,j,S),g&&w.rightClickSelect(y),j.value=w.selectionText,j.select()}},7239:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const f=d(1505);l.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(p,m,y){this._css.set(p,m,y)}getCss(p,m){return this._css.get(p,m)}setColor(p,m,y){this._color.set(p,m,y)}getColor(p,m){return this._color.get(p,m)}clear(){this._color.clear(),this._css.clear()}}},3656:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(d,f,p,m){d.addEventListener(f,p,m);let y=!1;return{dispose:()=>{y||(y=!0,d.removeEventListener(f,p,m))}}}},6465:function(h,l,d){var f=this&&this.__decorate||function(g,v,b,_){var C,A=arguments.length,D=A<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,b):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,v,b,_);else for(var R=g.length-1;R>=0;R--)(C=g[R])&&(D=(A<3?C(D):A>3?C(v,b,D):C(v,b))||D);return A>3&&D&&Object.defineProperty(v,b,D),D},p=this&&this.__param||function(g,v){return function(b,_){v(b,_,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;const m=d(3656),y=d(8460),j=d(844),S=d(2585);let w=l.Linkifier2=class extends j.Disposable{get currentLink(){return this._currentLink}constructor(g){super(),this._bufferService=g,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new y.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new y.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,j.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,j.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(g){return this._linkProviders.push(g),{dispose:()=>{const v=this._linkProviders.indexOf(g);v!==-1&&this._linkProviders.splice(v,1)}}}attachToDom(g,v,b){this._element=g,this._mouseService=v,this._renderService=b,this.register((0,m.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,m.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(g){if(this._lastMouseEvent=g,!this._element||!this._mouseService)return;const v=this._positionFromMouseEvent(g,this._element,this._mouseService);if(!v)return;this._isMouseOut=!1;const b=g.composedPath();for(let _=0;_<b.length;_++){const C=b[_];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&v.x===this._lastBufferCell.x&&v.y===this._lastBufferCell.y||(this._handleHover(v),this._lastBufferCell=v)}_handleHover(g){if(this._activeLine!==g.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(g,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,g)||(this._clearCurrentLink(),this._askForLink(g,!0))}_askForLink(g,v){var b,_;this._activeProviderReplies&&v||((b=this._activeProviderReplies)===null||b===void 0||b.forEach((A=>{A?.forEach((D=>{D.link.dispose&&D.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=g.y);let C=!1;for(const[A,D]of this._linkProviders.entries())v?!((_=this._activeProviderReplies)===null||_===void 0)&&_.get(A)&&(C=this._checkLinkProviderResult(A,g,C)):D.provideLinks(g.y,(R=>{var k,M;if(this._isMouseOut)return;const I=R?.map((q=>({link:q})));(k=this._activeProviderReplies)===null||k===void 0||k.set(A,I),C=this._checkLinkProviderResult(A,g,C),((M=this._activeProviderReplies)===null||M===void 0?void 0:M.size)===this._linkProviders.length&&this._removeIntersectingLinks(g.y,this._activeProviderReplies)}))}_removeIntersectingLinks(g,v){const b=new Set;for(let _=0;_<v.size;_++){const C=v.get(_);if(C)for(let A=0;A<C.length;A++){const D=C[A],R=D.link.range.start.y<g?0:D.link.range.start.x,k=D.link.range.end.y>g?this._bufferService.cols:D.link.range.end.x;for(let M=R;M<=k;M++){if(b.has(M)){C.splice(A--,1);break}b.add(M)}}}}_checkLinkProviderResult(g,v,b){var _;if(!this._activeProviderReplies)return b;const C=this._activeProviderReplies.get(g);let A=!1;for(let D=0;D<g;D++)this._activeProviderReplies.has(D)&&!this._activeProviderReplies.get(D)||(A=!0);if(!A&&C){const D=C.find((R=>this._linkAtPosition(R.link,v)));D&&(b=!0,this._handleNewLink(D))}if(this._activeProviderReplies.size===this._linkProviders.length&&!b)for(let D=0;D<this._activeProviderReplies.size;D++){const R=(_=this._activeProviderReplies.get(D))===null||_===void 0?void 0:_.find((k=>this._linkAtPosition(k.link,v)));if(R){b=!0,this._handleNewLink(R);break}}return b}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(g){if(!this._element||!this._mouseService||!this._currentLink)return;const v=this._positionFromMouseEvent(g,this._element,this._mouseService);v&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,v)&&this._currentLink.link.activate(g,this._currentLink.link.text)}_clearCurrentLink(g,v){this._element&&this._currentLink&&this._lastMouseEvent&&(!g||!v||this._currentLink.link.range.start.y>=g&&this._currentLink.link.range.end.y<=v)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,j.disposeArray)(this._linkCacheDisposables))}_handleNewLink(g){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._linkAtPosition(g.link,v)&&(this._currentLink=g,this._currentLink.state={decorations:{underline:g.link.decorations===void 0||g.link.decorations.underline,pointerCursor:g.link.decorations===void 0||g.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,g.link,this._lastMouseEvent),g.link.decorations={},Object.defineProperties(g.link.decorations,{pointerCursor:{get:()=>{var b,_;return(_=(b=this._currentLink)===null||b===void 0?void 0:b.state)===null||_===void 0?void 0:_.decorations.pointerCursor},set:b=>{var _,C;!((_=this._currentLink)===null||_===void 0)&&_.state&&this._currentLink.state.decorations.pointerCursor!==b&&(this._currentLink.state.decorations.pointerCursor=b,this._currentLink.state.isHovered&&((C=this._element)===null||C===void 0||C.classList.toggle("xterm-cursor-pointer",b)))}},underline:{get:()=>{var b,_;return(_=(b=this._currentLink)===null||b===void 0?void 0:b.state)===null||_===void 0?void 0:_.decorations.underline},set:b=>{var _,C,A;!((_=this._currentLink)===null||_===void 0)&&_.state&&((A=(C=this._currentLink)===null||C===void 0?void 0:C.state)===null||A===void 0?void 0:A.decorations.underline)!==b&&(this._currentLink.state.decorations.underline=b,this._currentLink.state.isHovered&&this._fireUnderlineEvent(g.link,b))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((b=>{if(!this._currentLink)return;const _=b.start===0?0:b.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+b.end;if(this._currentLink.link.range.start.y>=_&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(_,C),this._lastMouseEvent&&this._element)){const A=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);A&&this._askForLink(A,!1)}}))))}_linkHover(g,v,b){var _;!((_=this._currentLink)===null||_===void 0)&&_.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!0),this._currentLink.state.decorations.pointerCursor&&g.classList.add("xterm-cursor-pointer")),v.hover&&v.hover(b,v.text)}_fireUnderlineEvent(g,v){const b=g.range,_=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(b.start.x-1,b.start.y-_-1,b.end.x,b.end.y-_-1,void 0);(v?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(g,v,b){var _;!((_=this._currentLink)===null||_===void 0)&&_.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!1),this._currentLink.state.decorations.pointerCursor&&g.classList.remove("xterm-cursor-pointer")),v.leave&&v.leave(b,v.text)}_linkAtPosition(g,v){const b=g.range.start.y*this._bufferService.cols+g.range.start.x,_=g.range.end.y*this._bufferService.cols+g.range.end.x,C=v.y*this._bufferService.cols+v.x;return b<=C&&C<=_}_positionFromMouseEvent(g,v,b){const _=b.getCoords(g,v,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(g,v,b,_,C){return{x1:g,y1:v,x2:b,y2:_,cols:this._bufferService.cols,fg:C}}};l.Linkifier2=w=f([p(0,S.IBufferService)],w)},9042:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(h,l,d){var f=this&&this.__decorate||function(w,g,v,b){var _,C=arguments.length,A=C<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(w,g,v,b);else for(var D=w.length-1;D>=0;D--)(_=w[D])&&(A=(C<3?_(A):C>3?_(g,v,A):_(g,v))||A);return C>3&&A&&Object.defineProperty(g,v,A),A},p=this&&this.__param||function(w,g){return function(v,b){g(v,b,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const m=d(511),y=d(2585);let j=l.OscLinkProvider=class{constructor(w,g,v){this._bufferService=w,this._optionsService=g,this._oscLinkService=v}provideLinks(w,g){var v;const b=this._bufferService.buffer.lines.get(w-1);if(!b)return void g(void 0);const _=[],C=this._optionsService.rawOptions.linkHandler,A=new m.CellData,D=b.getTrimmedLength();let R=-1,k=-1,M=!1;for(let I=0;I<D;I++)if(k!==-1||b.hasContent(I)){if(b.loadCell(I,A),A.hasExtendedAttrs()&&A.extended.urlId){if(k===-1){k=I,R=A.extended.urlId;continue}M=A.extended.urlId!==R}else k!==-1&&(M=!0);if(M||k!==-1&&I===D-1){const q=(v=this._oscLinkService.getLinkData(R))===null||v===void 0?void 0:v.uri;if(q){const W={start:{x:k+1,y:w},end:{x:I+(M||I!==D-1?0:1),y:w}};let G=!1;if(!C?.allowNonHttpProtocols)try{const $=new URL(q);["http:","https:"].includes($.protocol)||(G=!0)}catch{G=!0}G||_.push({text:q,range:W,activate:($,F)=>C?C.activate($,F,W):S(0,F),hover:($,F)=>{var B;return(B=C?.hover)===null||B===void 0?void 0:B.call(C,$,F,W)},leave:($,F)=>{var B;return(B=C?.leave)===null||B===void 0?void 0:B.call(C,$,F,W)}})}M=!1,A.hasExtendedAttrs()&&A.extended.urlId?(k=I,R=A.extended.urlId):(k=-1,R=-1)}}g(_)}};function S(w,g){if(confirm(`Do you want to navigate to ${g}?

WARNING: This link could potentially be dangerous`)){const v=window.open();if(v){try{v.opener=null}catch{}v.location.href=g}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=j=f([p(0,y.IBufferService),p(1,y.IOptionsService),p(2,y.IOscLinkService)],j)},6193:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(d,f){this._parentWindow=d,this._renderCallback=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(d){return this._refreshCallbacks.push(d),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(d,f,p){this._rowCount=p,d=d!==void 0?d:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const d=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const d of this._refreshCallbacks)d(0);this._refreshCallbacks=[]}}},5596:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;const f=d(844);class p extends f.Disposable{constructor(y){super(),this._parentWindow=y,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,f.toDisposable)((()=>{this.clearListener()})))}setListener(y){this._listener&&this.clearListener(),this._listener=y,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)===null||y===void 0||y.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}l.ScreenDprMonitor=p},3236:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const f=d(3614),p=d(3656),m=d(6465),y=d(9042),j=d(3730),S=d(1680),w=d(3107),g=d(5744),v=d(2950),b=d(1296),_=d(428),C=d(4269),A=d(5114),D=d(8934),R=d(3230),k=d(9312),M=d(4725),I=d(6731),q=d(8055),W=d(8969),G=d(8460),$=d(844),F=d(6114),B=d(8437),V=d(2584),O=d(7399),H=d(5941),U=d(9074),L=d(2585),Y=d(5435),J=d(4567),K=typeof window<"u"?window.document:null;class Z extends W.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(P={}){super(P),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new $.MutableDisposable),this._onCursorMove=this.register(new G.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new G.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new G.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new G.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new G.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new G.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new G.EventEmitter),this._onBlur=this.register(new G.EventEmitter),this._onA11yCharEmitter=this.register(new G.EventEmitter),this._onA11yTabEmitter=this.register(new G.EventEmitter),this._onWillOpen=this.register(new G.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(m.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(j.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(U.DecorationService),this._instantiationService.setService(L.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((Q,ee)=>this.refresh(Q,ee)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((Q=>this._reportWindowsOptions(Q)))),this.register(this._inputHandler.onColor((Q=>this._handleColorEvent(Q)))),this.register((0,G.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,G.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,G.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,G.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((Q=>this._afterResize(Q.cols,Q.rows)))),this.register((0,$.toDisposable)((()=>{var Q,ee;this._customKeyEventHandler=void 0,(ee=(Q=this.element)===null||Q===void 0?void 0:Q.parentNode)===null||ee===void 0||ee.removeChild(this.element)})))}_handleColorEvent(P){if(this._themeService)for(const Q of P){let ee,te="";switch(Q.index){case 256:ee="foreground",te="10";break;case 257:ee="background",te="11";break;case 258:ee="cursor",te="12";break;default:ee="ansi",te="4;"+Q.index}switch(Q.type){case 0:const ye=q.color.toColorRGB(ee==="ansi"?this._themeService.colors.ansi[Q.index]:this._themeService.colors[ee]);this.coreService.triggerDataEvent(`${V.C0.ESC}]${te};${(0,H.toRgbString)(ye)}${V.C1_ESCAPED.ST}`);break;case 1:if(ee==="ansi")this._themeService.modifyColors((me=>me.ansi[Q.index]=q.rgba.toColor(...Q.color)));else{const me=ee;this._themeService.modifyColors((Ce=>Ce[me]=q.rgba.toColor(...Q.color)))}break;case 2:this._themeService.restoreColor(Q.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(P){P?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(P){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(V.C0.ESC+"[I"),this.updateCursorStyle(P),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var P;return(P=this.textarea)===null||P===void 0?void 0:P.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(V.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const P=this.buffer.ybase+this.buffer.y,Q=this.buffer.lines.get(P);if(!Q)return;const ee=Math.min(this.buffer.x,this.cols-1),te=this._renderService.dimensions.css.cell.height,ye=Q.getWidth(ee),me=this._renderService.dimensions.css.cell.width*ye,Ce=this.buffer.y*this._renderService.dimensions.css.cell.height,Ue=ee*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ue+"px",this.textarea.style.top=Ce+"px",this.textarea.style.width=me+"px",this.textarea.style.height=te+"px",this.textarea.style.lineHeight=te+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,p.addDisposableDomListener)(this.element,"copy",(Q=>{this.hasSelection()&&(0,f.copyHandler)(Q,this._selectionService)})));const P=Q=>(0,f.handlePasteEvent)(Q,this.textarea,this.coreService,this.optionsService);this.register((0,p.addDisposableDomListener)(this.textarea,"paste",P)),this.register((0,p.addDisposableDomListener)(this.element,"paste",P)),F.isFirefox?this.register((0,p.addDisposableDomListener)(this.element,"mousedown",(Q=>{Q.button===2&&(0,f.rightClickHandler)(Q,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,p.addDisposableDomListener)(this.element,"contextmenu",(Q=>{(0,f.rightClickHandler)(Q,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),F.isLinux&&this.register((0,p.addDisposableDomListener)(this.element,"auxclick",(Q=>{Q.button===1&&(0,f.moveTextAreaUnderMouseCursor)(Q,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,p.addDisposableDomListener)(this.textarea,"keyup",(P=>this._keyUp(P)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keydown",(P=>this._keyDown(P)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keypress",(P=>this._keyPress(P)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionupdate",(P=>this._compositionHelper.compositionupdate(P)))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,p.addDisposableDomListener)(this.textarea,"input",(P=>this._inputEvent(P)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(P){var Q;if(!P)throw new Error("Terminal requires a parent element.");P.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=P.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),P.appendChild(this.element);const ee=K.createDocumentFragment();this._viewportElement=K.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ee.appendChild(this._viewportElement),this._viewportScrollArea=K.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=K.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=K.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ee.appendChild(this.screenElement),this.textarea=K.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(A.CoreBrowserService,this.textarea,(Q=this._document.defaultView)!==null&&Q!==void 0?Q:window),this._instantiationService.setService(M.ICoreBrowserService,this._coreBrowserService),this.register((0,p.addDisposableDomListener)(this.textarea,"focus",(te=>this._handleTextAreaFocus(te)))),this.register((0,p.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(I.ThemeService),this._instantiationService.setService(M.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(C.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((te=>this._onRender.fire(te)))),this.onResize((te=>this._renderService.resize(te.cols,te.rows))),this._compositionView=K.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(v.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ee);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(D.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((te=>this.scrollLines(te.amount,te.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(k.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((te=>this.scrollLines(te.amount,te.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((te=>this._renderService.handleSelectionChanged(te.start,te.end,te.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((te=>{this.textarea.value=te,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((te=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(w.BufferDecorationRenderer,this.screenElement)),this.register((0,p.addDisposableDomListener)(this.element,"mousedown",(te=>this._selectionService.handleMouseDown(te)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(J.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(te=>this._handleScreenReaderModeOptionChange(te)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(g.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(te=>{!this._overviewRulerRenderer&&te&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(g.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(b.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const P=this,Q=this.element;function ee(me){const Ce=P._mouseService.getMouseReportCoords(me,P.screenElement);if(!Ce)return!1;let Ue,Ge;switch(me.overrideType||me.type){case"mousemove":Ge=32,me.buttons===void 0?(Ue=3,me.button!==void 0&&(Ue=me.button<3?me.button:3)):Ue=1&me.buttons?0:4&me.buttons?1:2&me.buttons?2:3;break;case"mouseup":Ge=0,Ue=me.button<3?me.button:3;break;case"mousedown":Ge=1,Ue=me.button<3?me.button:3;break;case"wheel":if(P.viewport.getLinesScrolled(me)===0)return!1;Ge=me.deltaY<0?0:1,Ue=4;break;default:return!1}return!(Ge===void 0||Ue===void 0||Ue>4)&&P.coreMouseService.triggerMouseEvent({col:Ce.col,row:Ce.row,x:Ce.x,y:Ce.y,button:Ue,action:Ge,ctrl:me.ctrlKey,alt:me.altKey,shift:me.shiftKey})}const te={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ye={mouseup:me=>(ee(me),me.buttons||(this._document.removeEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.removeEventListener("mousemove",te.mousedrag)),this.cancel(me)),wheel:me=>(ee(me),this.cancel(me,!0)),mousedrag:me=>{me.buttons&&ee(me)},mousemove:me=>{me.buttons||ee(me)}};this.register(this.coreMouseService.onProtocolChange((me=>{me?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(me)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&me?te.mousemove||(Q.addEventListener("mousemove",ye.mousemove),te.mousemove=ye.mousemove):(Q.removeEventListener("mousemove",te.mousemove),te.mousemove=null),16&me?te.wheel||(Q.addEventListener("wheel",ye.wheel,{passive:!1}),te.wheel=ye.wheel):(Q.removeEventListener("wheel",te.wheel),te.wheel=null),2&me?te.mouseup||(Q.addEventListener("mouseup",ye.mouseup),te.mouseup=ye.mouseup):(this._document.removeEventListener("mouseup",te.mouseup),Q.removeEventListener("mouseup",te.mouseup),te.mouseup=null),4&me?te.mousedrag||(te.mousedrag=ye.mousedrag):(this._document.removeEventListener("mousemove",te.mousedrag),te.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,p.addDisposableDomListener)(Q,"mousedown",(me=>{if(me.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(me))return ee(me),te.mouseup&&this._document.addEventListener("mouseup",te.mouseup),te.mousedrag&&this._document.addEventListener("mousemove",te.mousedrag),this.cancel(me)}))),this.register((0,p.addDisposableDomListener)(Q,"wheel",(me=>{if(!te.wheel){if(!this.buffer.hasScrollback){const Ce=this.viewport.getLinesScrolled(me);if(Ce===0)return;const Ue=V.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(me.deltaY<0?"A":"B");let Ge="";for(let pt=0;pt<Math.abs(Ce);pt++)Ge+=Ue;return this.coreService.triggerDataEvent(Ge,!0),this.cancel(me,!0)}return this.viewport.handleWheel(me)?this.cancel(me):void 0}}),{passive:!1})),this.register((0,p.addDisposableDomListener)(Q,"touchstart",(me=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(me),this.cancel(me)}),{passive:!0})),this.register((0,p.addDisposableDomListener)(Q,"touchmove",(me=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(me)?void 0:this.cancel(me)}),{passive:!1}))}refresh(P,Q){var ee;(ee=this._renderService)===null||ee===void 0||ee.refreshRows(P,Q)}updateCursorStyle(P){var Q;!((Q=this._selectionService)===null||Q===void 0)&&Q.shouldColumnSelect(P)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(P,Q,ee=0){var te;ee===1?(super.scrollLines(P,Q,ee),this.refresh(0,this.rows-1)):(te=this.viewport)===null||te===void 0||te.scrollLines(P)}paste(P){(0,f.paste)(P,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(P){this._customKeyEventHandler=P}registerLinkProvider(P){return this.linkifier2.registerLinkProvider(P)}registerCharacterJoiner(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const Q=this._characterJoinerService.register(P);return this.refresh(0,this.rows-1),Q}deregisterCharacterJoiner(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(P)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(P){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+P)}registerDecoration(P){return this._decorationService.registerDecoration(P)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(P,Q,ee){this._selectionService.setSelection(P,Q,ee)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var P;(P=this._selectionService)===null||P===void 0||P.clearSelection()}selectAll(){var P;(P=this._selectionService)===null||P===void 0||P.selectAll()}selectLines(P,Q){var ee;(ee=this._selectionService)===null||ee===void 0||ee.selectLines(P,Q)}_keyDown(P){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;const Q=this.browser.isMac&&this.options.macOptionIsMeta&&P.altKey;if(!Q&&!this._compositionHelper.keydown(P))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;Q||P.key!=="Dead"&&P.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ee=(0,O.evaluateKeyboardEvent)(P,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(P),ee.type===3||ee.type===2){const te=this.rows-1;return this.scrollLines(ee.type===2?-te:te),this.cancel(P,!0)}return ee.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,P)||(ee.cancel&&this.cancel(P,!0),!ee.key||!!(P.key&&!P.ctrlKey&&!P.altKey&&!P.metaKey&&P.key.length===1&&P.key.charCodeAt(0)>=65&&P.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ee.key!==V.C0.ETX&&ee.key!==V.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ee.key,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(ee.key,!0),!this.optionsService.rawOptions.screenReaderMode||P.altKey||P.ctrlKey?this.cancel(P,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(P,Q){const ee=P.isMac&&!this.options.macOptionIsMeta&&Q.altKey&&!Q.ctrlKey&&!Q.metaKey||P.isWindows&&Q.altKey&&Q.ctrlKey&&!Q.metaKey||P.isWindows&&Q.getModifierState("AltGraph");return Q.type==="keypress"?ee:ee&&(!Q.keyCode||Q.keyCode>47)}_keyUp(P){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1||((function(Q){return Q.keyCode===16||Q.keyCode===17||Q.keyCode===18})(P)||this.focus(),this.updateCursorStyle(P),this._keyPressHandled=!1)}_keyPress(P){let Q;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;if(this.cancel(P),P.charCode)Q=P.charCode;else if(P.which===null||P.which===void 0)Q=P.keyCode;else{if(P.which===0||P.charCode===0)return!1;Q=P.which}return!(!Q||(P.altKey||P.ctrlKey||P.metaKey)&&!this._isThirdLevelShift(this.browser,P)||(Q=String.fromCharCode(Q),this._onKey.fire({key:Q,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(Q,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(P){if(P.data&&P.inputType==="insertText"&&(!P.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const Q=P.data;return this.coreService.triggerDataEvent(Q,!0),this.cancel(P),!0}return!1}resize(P,Q){P!==this.cols||Q!==this.rows?super.resize(P,Q):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(P,Q){var ee,te;(ee=this._charSizeService)===null||ee===void 0||ee.measure(),(te=this.viewport)===null||te===void 0||te.syncScrollArea(!0)}clear(){var P;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let Q=1;Q<this.rows;Q++)this.buffer.lines.push(this.buffer.getBlankLine(B.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(P=this.viewport)===null||P===void 0||P.reset(),this.refresh(0,this.rows-1)}}reset(){var P,Q;this.options.rows=this.rows,this.options.cols=this.cols;const ee=this._customKeyEventHandler;this._setup(),super.reset(),(P=this._selectionService)===null||P===void 0||P.reset(),this._decorationService.reset(),(Q=this.viewport)===null||Q===void 0||Q.reset(),this._customKeyEventHandler=ee,this.refresh(0,this.rows-1)}clearTextureAtlas(){var P;(P=this._renderService)===null||P===void 0||P.clearTextureAtlas()}_reportFocus(){var P;!((P=this.element)===null||P===void 0)&&P.classList.contains("focus")?this.coreService.triggerDataEvent(V.C0.ESC+"[I"):this.coreService.triggerDataEvent(V.C0.ESC+"[O")}_reportWindowsOptions(P){if(this._renderService)switch(P){case Y.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const Q=this._renderService.dimensions.css.canvas.width.toFixed(0),ee=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${V.C0.ESC}[4;${ee};${Q}t`);break;case Y.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const te=this._renderService.dimensions.css.cell.width.toFixed(0),ye=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${V.C0.ESC}[6;${ye};${te}t`)}}cancel(P,Q){if(this.options.cancelEvents||Q)return P.preventDefault(),P.stopPropagation(),!1}}l.Terminal=Z},9924:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(d,f=1e3){this._renderCallback=d,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(d,f,p){this._rowCount=p,d=d!==void 0?d:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const m=Date.now();if(m-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=m,this._innerRefresh();else if(!this._additionalRefreshRequested){const y=m-this._lastRefreshMs,j=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),j)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const d=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,f)}}},1680:function(h,l,d){var f=this&&this.__decorate||function(v,b,_,C){var A,D=arguments.length,R=D<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(v,b,_,C);else for(var k=v.length-1;k>=0;k--)(A=v[k])&&(R=(D<3?A(R):D>3?A(b,_,R):A(b,_))||R);return D>3&&R&&Object.defineProperty(b,_,R),R},p=this&&this.__param||function(v,b){return function(_,C){b(_,C,v)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const m=d(3656),y=d(4725),j=d(8460),S=d(844),w=d(2585);let g=l.Viewport=class extends S.Disposable{constructor(v,b,_,C,A,D,R,k){super(),this._viewportElement=v,this._scrollArea=b,this._bufferService=_,this._optionsService=C,this._charSizeService=A,this._renderService=D,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new j.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((M=>this._activeBuffer=M.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((M=>this._renderDimensions=M))),this._handleThemeChange(k.colors),this.register(k.onChangeColors((M=>this._handleThemeChange(M)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(v){this._viewportElement.style.backgroundColor=v.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(v){if(v)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const b=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==b&&(this._lastRecordedBufferHeight=b,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const v=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==v&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=v),this._refreshAnimationFrame=null}syncScrollArea(v=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(v);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(v)}_handleScroll(v){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const b=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const v=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(v*(this._smoothScrollState.target-this._smoothScrollState.origin)),v<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(v,b){const _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(b<0&&this._viewportElement.scrollTop!==0||b>0&&_<this._lastRecordedBufferHeight)||(v.cancelable&&v.preventDefault(),!1)}handleWheel(v){const b=this._getPixelsScrolled(v);return b!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+b:this._smoothScrollState.target+=b,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=b,this._bubbleScroll(v,b))}scrollLines(v){if(v!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const b=v*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+b,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!1})}_getPixelsScrolled(v){if(v.deltaY===0||v.shiftKey)return 0;let b=this._applyScrollModifier(v.deltaY,v);return v.deltaMode===WheelEvent.DOM_DELTA_LINE?b*=this._currentRowHeight:v.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._currentRowHeight*this._bufferService.rows),b}getBufferElements(v,b){var _;let C,A="";const D=[],R=b??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let M=v;M<R;M++){const I=k.get(M);if(!I)continue;const q=(_=k.get(M+1))===null||_===void 0?void 0:_.isWrapped;if(A+=I.translateToString(!q),!q||M===k.length-1){const W=document.createElement("div");W.textContent=A,D.push(W),A.length>0&&(C=W),A=""}}return{bufferElements:D,cursorElement:C}}getLinesScrolled(v){if(v.deltaY===0||v.shiftKey)return 0;let b=this._applyScrollModifier(v.deltaY,v);return v.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(b/=this._currentRowHeight+0,this._wheelPartialScroll+=b,b=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):v.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._bufferService.rows),b}_applyScrollModifier(v,b){const _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&b.altKey||_==="ctrl"&&b.ctrlKey||_==="shift"&&b.shiftKey?v*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:v*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(v){this._lastTouchY=v.touches[0].pageY}handleTouchMove(v){const b=this._lastTouchY-v.touches[0].pageY;return this._lastTouchY=v.touches[0].pageY,b!==0&&(this._viewportElement.scrollTop+=b,this._bubbleScroll(v,b))}};l.Viewport=g=f([p(2,w.IBufferService),p(3,w.IOptionsService),p(4,y.ICharSizeService),p(5,y.IRenderService),p(6,y.ICoreBrowserService),p(7,y.IThemeService)],g)},3107:function(h,l,d){var f=this&&this.__decorate||function(g,v,b,_){var C,A=arguments.length,D=A<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,b):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,v,b,_);else for(var R=g.length-1;R>=0;R--)(C=g[R])&&(D=(A<3?C(D):A>3?C(v,b,D):C(v,b))||D);return A>3&&D&&Object.defineProperty(v,b,D),D},p=this&&this.__param||function(g,v){return function(b,_){v(b,_,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const m=d(3656),y=d(4725),j=d(844),S=d(2585);let w=l.BufferDecorationRenderer=class extends j.Disposable{constructor(g,v,b,_){super(),this._screenElement=g,this._bufferService=v,this._decorationService=b,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,m.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((C=>this._removeDecoration(C)))),this.register((0,j.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){var v,b;const _=document.createElement("div");_.classList.add("xterm-decoration"),_.classList.toggle("xterm-decoration-top-layer",((v=g?.options)===null||v===void 0?void 0:v.layer)==="top"),_.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,_.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",_.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",_.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const C=(b=g.options.x)!==null&&b!==void 0?b:0;return C&&C>this._bufferService.cols&&(_.style.display="none"),this._refreshXPosition(g,_),_}_refreshStyle(g){const v=g.marker.line-this._bufferService.buffers.active.ydisp;if(v<0||v>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let b=this._decorationElements.get(g);b||(b=this._createElement(g),g.element=b,this._decorationElements.set(g,b),this._container.appendChild(b),g.onDispose((()=>{this._decorationElements.delete(g),b.remove()}))),b.style.top=v*this._renderService.dimensions.css.cell.height+"px",b.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(b)}}_refreshXPosition(g,v=g.element){var b;if(!v)return;const _=(b=g.options.x)!==null&&b!==void 0?b:0;(g.options.anchor||"left")==="right"?v.style.right=_?_*this._renderService.dimensions.css.cell.width+"px":"":v.style.left=_?_*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){var v;(v=this._decorationElements.get(g))===null||v===void 0||v.remove(),this._decorationElements.delete(g),g.dispose()}};l.BufferDecorationRenderer=w=f([p(1,S.IBufferService),p(2,S.IDecorationService),p(3,y.IRenderService)],w)},5871:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(d){if(d.options.overviewRulerOptions){for(const f of this._zones)if(f.color===d.options.overviewRulerOptions.color&&f.position===d.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,d.marker.line))return;if(this._lineAdjacentToZone(f,d.marker.line,d.options.overviewRulerOptions.position))return void this._addLineToZone(f,d.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=d.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=d.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=d.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=d.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:d.options.overviewRulerOptions.color,position:d.options.overviewRulerOptions.position,startBufferLine:d.marker.line,endBufferLine:d.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(d){this._linePadding=d}_lineIntersectsZone(d,f){return f>=d.startBufferLine&&f<=d.endBufferLine}_lineAdjacentToZone(d,f,p){return f>=d.startBufferLine-this._linePadding[p||"full"]&&f<=d.endBufferLine+this._linePadding[p||"full"]}_addLineToZone(d,f){d.startBufferLine=Math.min(d.startBufferLine,f),d.endBufferLine=Math.max(d.endBufferLine,f)}}},5744:function(h,l,d){var f=this&&this.__decorate||function(C,A,D,R){var k,M=arguments.length,I=M<3?A:R===null?R=Object.getOwnPropertyDescriptor(A,D):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(C,A,D,R);else for(var q=C.length-1;q>=0;q--)(k=C[q])&&(I=(M<3?k(I):M>3?k(A,D,I):k(A,D))||I);return M>3&&I&&Object.defineProperty(A,D,I),I},p=this&&this.__param||function(C,A){return function(D,R){A(D,R,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const m=d(5871),y=d(3656),j=d(4725),S=d(844),w=d(2585),g={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0};let _=l.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(C,A,D,R,k,M,I){var q;super(),this._viewportElement=C,this._screenElement=A,this._bufferService=D,this._decorationService=R,this._renderService=k,this._optionsService=M,this._coreBrowseService=I,this._colorZoneStore=new m.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(q=this._viewportElement.parentElement)===null||q===void 0||q.insertBefore(this._canvas,this._viewportElement);const W=this._canvas.getContext("2d");if(!W)throw new Error("Ctx cannot be null");this._ctx=W,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)((()=>{var G;(G=this._canvas)===null||G===void 0||G.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,y.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const C=Math.floor(this._canvas.width/3),A=Math.ceil(this._canvas.width/3);v.full=this._canvas.width,v.left=C,v.center=A,v.right=C,this._refreshDrawHeightConstants(),b.full=0,b.left=0,b.center=v.left,b.right=v.left+v.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowseService.dpr);const C=this._canvas.height/this._bufferService.buffer.lines.length,A=Math.round(Math.max(Math.min(C,12),6)*this._coreBrowseService.dpr);g.left=A,g.center=A,g.right=A}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const A of this._decorationService.decorations)this._colorZoneStore.addDecoration(A);this._ctx.lineWidth=1;const C=this._colorZoneStore.zones;for(const A of C)A.position!=="full"&&this._renderColorZone(A);for(const A of C)A.position==="full"&&this._renderColorZone(A);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(C){this._ctx.fillStyle=C.color,this._ctx.fillRect(b[C.position||"full"],Math.round((this._canvas.height-1)*(C.startBufferLine/this._bufferService.buffers.active.lines.length)-g[C.position||"full"]/2),v[C.position||"full"],Math.round((this._canvas.height-1)*((C.endBufferLine-C.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[C.position||"full"]))}_queueRefresh(C,A){this._shouldUpdateDimensions=C||this._shouldUpdateDimensions,this._shouldUpdateAnchor=A||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};l.OverviewRulerRenderer=_=f([p(2,w.IBufferService),p(3,w.IDecorationService),p(4,j.IRenderService),p(5,w.IOptionsService),p(6,j.ICoreBrowserService)],_)},2950:function(h,l,d){var f=this&&this.__decorate||function(w,g,v,b){var _,C=arguments.length,A=C<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(w,g,v,b);else for(var D=w.length-1;D>=0;D--)(_=w[D])&&(A=(C<3?_(A):C>3?_(g,v,A):_(g,v))||A);return C>3&&A&&Object.defineProperty(g,v,A),A},p=this&&this.__param||function(w,g){return function(v,b){g(v,b,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const m=d(4725),y=d(2585),j=d(2584);let S=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(w,g,v,b,_,C){this._textarea=w,this._compositionView=g,this._bufferService=v,this._optionsService=b,this._coreService=_,this._renderService=C,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(w){this._compositionView.textContent=w.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(w){if(this._isComposing||this._isSendingComposition){if(w.keyCode===229||w.keyCode===16||w.keyCode===17||w.keyCode===18)return!1;this._finalizeComposition(!1)}return w.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(w){if(this._compositionView.classList.remove("active"),this._isComposing=!1,w){const g={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let v;this._isSendingComposition=!1,g.start+=this._dataAlreadySent.length,v=this._isComposing?this._textarea.value.substring(g.start,g.end):this._textarea.value.substring(g.start),v.length>0&&this._coreService.triggerDataEvent(v,!0)}}),0)}else{this._isSendingComposition=!1;const g=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(g,!0)}}_handleAnyTextareaChanges(){const w=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const g=this._textarea.value,v=g.replace(w,"");this._dataAlreadySent=v,g.length>w.length?this._coreService.triggerDataEvent(v,!0):g.length<w.length?this._coreService.triggerDataEvent(`${j.C0.DEL}`,!0):g.length===w.length&&g!==w&&this._coreService.triggerDataEvent(g,!0)}}),0)}updateCompositionElements(w){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),v=this._renderService.dimensions.css.cell.height,b=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=g*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=b+"px",this._compositionView.style.height=v+"px",this._compositionView.style.lineHeight=v+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const C=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=b+"px",this._textarea.style.width=Math.max(C.width,1)+"px",this._textarea.style.height=Math.max(C.height,1)+"px",this._textarea.style.lineHeight=C.height+"px"}w||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};l.CompositionHelper=S=f([p(2,y.IBufferService),p(3,y.IOptionsService),p(4,y.ICoreService),p(5,m.IRenderService)],S)},9806:(h,l)=>{function d(f,p,m){const y=m.getBoundingClientRect(),j=f.getComputedStyle(m),S=parseInt(j.getPropertyValue("padding-left")),w=parseInt(j.getPropertyValue("padding-top"));return[p.clientX-y.left-S,p.clientY-y.top-w]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=d,l.getCoords=function(f,p,m,y,j,S,w,g,v){if(!S)return;const b=d(f,p,m);return b?(b[0]=Math.ceil((b[0]+(v?w/2:0))/w),b[1]=Math.ceil(b[1]/g),b[0]=Math.min(Math.max(b[0],1),y+(v?1:0)),b[1]=Math.min(Math.max(b[1],1),j),b):void 0}},9504:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const f=d(2584);function p(g,v,b,_){const C=g-m(g,b),A=v-m(v,b),D=Math.abs(C-A)-(function(R,k,M){let I=0;const q=R-m(R,M),W=k-m(k,M);for(let G=0;G<Math.abs(q-W);G++){const $=y(R,k)==="A"?-1:1,F=M.buffer.lines.get(q+$*G);F?.isWrapped&&I++}return I})(g,v,b);return w(D,S(y(g,v),_))}function m(g,v){let b=0,_=v.buffer.lines.get(g),C=_?.isWrapped;for(;C&&g>=0&&g<v.rows;)b++,_=v.buffer.lines.get(--g),C=_?.isWrapped;return b}function y(g,v){return g>v?"A":"B"}function j(g,v,b,_,C,A){let D=g,R=v,k="";for(;D!==b||R!==_;)D+=C?1:-1,C&&D>A.cols-1?(k+=A.buffer.translateBufferLineToString(R,!1,g,D),D=0,g=0,R++):!C&&D<0&&(k+=A.buffer.translateBufferLineToString(R,!1,0,g+1),D=A.cols-1,g=D,R--);return k+A.buffer.translateBufferLineToString(R,!1,g,D)}function S(g,v){const b=v?"O":"[";return f.C0.ESC+b+g}function w(g,v){g=Math.floor(g);let b="";for(let _=0;_<g;_++)b+=v;return b}l.moveToCellSequence=function(g,v,b,_){const C=b.buffer.x,A=b.buffer.y;if(!b.buffer.hasScrollback)return(function(k,M,I,q,W,G){return p(M,q,W,G).length===0?"":w(j(k,M,k,M-m(M,W),!1,W).length,S("D",G))})(C,A,0,v,b,_)+p(A,v,b,_)+(function(k,M,I,q,W,G){let $;$=p(M,q,W,G).length>0?q-m(q,W):M;const F=q,B=(function(V,O,H,U,L,Y){let J;return J=p(H,U,L,Y).length>0?U-m(U,L):O,V<H&&J<=U||V>=H&&J<U?"C":"D"})(k,M,I,q,W,G);return w(j(k,$,I,F,B==="C",W).length,S(B,G))})(C,A,g,v,b,_);let D;if(A===v)return D=C>g?"D":"C",w(Math.abs(C-g),S(D,_));D=A>v?"D":"C";const R=Math.abs(A-v);return w((function(k,M){return M.cols-k})(A>v?g:C,b)+(R-1)*b.cols+1+((A>v?C:g)-1),S(D,_))}},1296:function(h,l,d){var f=this&&this.__decorate||function(W,G,$,F){var B,V=arguments.length,O=V<3?G:F===null?F=Object.getOwnPropertyDescriptor(G,$):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(W,G,$,F);else for(var H=W.length-1;H>=0;H--)(B=W[H])&&(O=(V<3?B(O):V>3?B(G,$,O):B(G,$))||O);return V>3&&O&&Object.defineProperty(G,$,O),O},p=this&&this.__param||function(W,G){return function($,F){G($,F,W)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const m=d(3787),y=d(2550),j=d(2223),S=d(6171),w=d(4725),g=d(8055),v=d(8460),b=d(844),_=d(2585),C="xterm-dom-renderer-owner-",A="xterm-rows",D="xterm-fg-",R="xterm-bg-",k="xterm-focus",M="xterm-selection";let I=1,q=l.DomRenderer=class extends b.Disposable{constructor(W,G,$,F,B,V,O,H,U,L){super(),this._element=W,this._screenElement=G,this._viewportElement=$,this._linkifier2=F,this._charSizeService=V,this._optionsService=O,this._bufferService=H,this._coreBrowserService=U,this._themeService=L,this._terminalClass=I++,this._rowElements=[],this.onRequestRedraw=this.register(new v.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(A),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(M),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Y=>this._injectCss(Y)))),this._injectCss(this._themeService.colors),this._rowFactory=B.createInstance(m.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Y=>this._handleLinkHover(Y)))),this.register(this._linkifier2.onHideLinkUnderline((Y=>this._handleLinkLeave(Y)))),this.register((0,b.toDisposable)((()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new y.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const W=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*W,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*W),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/W),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/W),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const $ of this._rowElements)$.style.width=`${this.dimensions.css.canvas.width}px`,$.style.height=`${this.dimensions.css.cell.height}px`,$.style.lineHeight=`${this.dimensions.css.cell.height}px`,$.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const G=`${this._terminalSelector} .${A} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=G,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(W){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let G=`${this._terminalSelector} .${A} { color: ${W.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;G+=`${this._terminalSelector} .${A} .xterm-dim { color: ${g.color.multiplyOpacity(W.foreground,.5).css};}`,G+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,G+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",G+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${W.cursor.css};  color: ${W.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${W.cursor.css}; }}`,G+=`${this._terminalSelector} .${A}.${k} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${A}.${k} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-block { background-color: ${W.cursor.css}; color: ${W.cursorAccent.css};}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${W.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${W.cursor.css} inset;}${this._terminalSelector} .${A} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${W.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,G+=`${this._terminalSelector} .${M} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${M} div { position: absolute; background-color: ${W.selectionBackgroundOpaque.css};}${this._terminalSelector} .${M} div { position: absolute; background-color: ${W.selectionInactiveBackgroundOpaque.css};}`;for(const[$,F]of W.ansi.entries())G+=`${this._terminalSelector} .${D}${$} { color: ${F.css}; }${this._terminalSelector} .${D}${$}.xterm-dim { color: ${g.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${R}${$} { background-color: ${F.css}; }`;G+=`${this._terminalSelector} .${D}${j.INVERTED_DEFAULT_COLOR} { color: ${g.color.opaque(W.background).css}; }${this._terminalSelector} .${D}${j.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${g.color.multiplyOpacity(g.color.opaque(W.background),.5).css}; }${this._terminalSelector} .${R}${j.INVERTED_DEFAULT_COLOR} { background-color: ${W.foreground.css}; }`,this._themeStyleElement.textContent=G}_setDefaultSpacing(){const W=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${W}px`,this._rowFactory.defaultSpacing=W}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(W,G){for(let $=this._rowElements.length;$<=G;$++){const F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>G;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(W,G){this._refreshRowElements(W,G),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(k)}handleFocus(){this._rowContainer.classList.add(k),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(W,G,$){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(W,G,$),this.renderRows(0,this._bufferService.rows-1),!W||!G)return;const F=W[1]-this._bufferService.buffer.ydisp,B=G[1]-this._bufferService.buffer.ydisp,V=Math.max(F,0),O=Math.min(B,this._bufferService.rows-1);if(V>=this._bufferService.rows||O<0)return;const H=document.createDocumentFragment();if($){const U=W[0]>G[0];H.appendChild(this._createSelectionElement(V,U?G[0]:W[0],U?W[0]:G[0],O-V+1))}else{const U=F===V?W[0]:0,L=V===B?G[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(V,U,L));const Y=O-V-1;if(H.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,Y)),V!==O){const J=B===O?G[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(O,0,J))}}this._selectionContainer.appendChild(H)}_createSelectionElement(W,G,$,F=1){const B=document.createElement("div");return B.style.height=F*this.dimensions.css.cell.height+"px",B.style.top=W*this.dimensions.css.cell.height+"px",B.style.left=G*this.dimensions.css.cell.width+"px",B.style.width=this.dimensions.css.cell.width*($-G)+"px",B}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const W of this._rowElements)W.replaceChildren()}renderRows(W,G){const $=this._bufferService.buffer,F=$.ybase+$.y,B=Math.min($.x,this._bufferService.cols-1),V=this._optionsService.rawOptions.cursorBlink,O=this._optionsService.rawOptions.cursorStyle,H=this._optionsService.rawOptions.cursorInactiveStyle;for(let U=W;U<=G;U++){const L=U+$.ydisp,Y=this._rowElements[U],J=$.lines.get(L);if(!Y||!J)break;Y.replaceChildren(...this._rowFactory.createRow(J,L,L===F,O,H,B,V,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(W){this._setCellUnderline(W.x1,W.x2,W.y1,W.y2,W.cols,!0)}_handleLinkLeave(W){this._setCellUnderline(W.x1,W.x2,W.y1,W.y2,W.cols,!1)}_setCellUnderline(W,G,$,F,B,V){$<0&&(W=0),F<0&&(G=0);const O=this._bufferService.rows-1;$=Math.max(Math.min($,O),0),F=Math.max(Math.min(F,O),0),B=Math.min(B,this._bufferService.cols);const H=this._bufferService.buffer,U=H.ybase+H.y,L=Math.min(H.x,B-1),Y=this._optionsService.rawOptions.cursorBlink,J=this._optionsService.rawOptions.cursorStyle,K=this._optionsService.rawOptions.cursorInactiveStyle;for(let Z=$;Z<=F;++Z){const oe=Z+H.ydisp,P=this._rowElements[Z],Q=H.lines.get(oe);if(!P||!Q)break;P.replaceChildren(...this._rowFactory.createRow(Q,oe,oe===U,J,K,L,Y,this.dimensions.css.cell.width,this._widthCache,V?Z===$?W:0:-1,V?(Z===F?G:B)-1:-1))}}};l.DomRenderer=q=f([p(4,_.IInstantiationService),p(5,w.ICharSizeService),p(6,_.IOptionsService),p(7,_.IBufferService),p(8,w.ICoreBrowserService),p(9,w.IThemeService)],q)},3787:function(h,l,d){var f=this&&this.__decorate||function(D,R,k,M){var I,q=arguments.length,W=q<3?R:M===null?M=Object.getOwnPropertyDescriptor(R,k):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(D,R,k,M);else for(var G=D.length-1;G>=0;G--)(I=D[G])&&(W=(q<3?I(W):q>3?I(R,k,W):I(R,k))||W);return q>3&&W&&Object.defineProperty(R,k,W),W},p=this&&this.__param||function(D,R){return function(k,M){R(k,M,D)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const m=d(2223),y=d(643),j=d(511),S=d(2585),w=d(8055),g=d(4725),v=d(4269),b=d(6171),_=d(3734);let C=l.DomRendererRowFactory=class{constructor(D,R,k,M,I,q,W){this._document=D,this._characterJoinerService=R,this._optionsService=k,this._coreBrowserService=M,this._coreService=I,this._decorationService=q,this._themeService=W,this._workCell=new j.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(D,R,k){this._selectionStart=D,this._selectionEnd=R,this._columnSelectMode=k}createRow(D,R,k,M,I,q,W,G,$,F,B){const V=[],O=this._characterJoinerService.getJoinedCharacters(R),H=this._themeService.colors;let U,L=D.getNoBgTrimmedLength();k&&L<q+1&&(L=q+1);let Y=0,J="",K=0,Z=0,oe=0,P=!1,Q=0,ee=!1,te=0;const ye=[],me=F!==-1&&B!==-1;for(let Ce=0;Ce<L;Ce++){D.loadCell(Ce,this._workCell);let Ue=this._workCell.getWidth();if(Ue===0)continue;let Ge=!1,pt=Ce,Ne=this._workCell;if(O.length>0&&Ce===O[0][0]){Ge=!0;const Ke=O.shift();Ne=new v.JoinedCellData(this._workCell,D.translateToString(!0,Ke[0],Ke[1]),Ke[1]-Ke[0]),pt=Ke[1]-1,Ue=Ne.getWidth()}const ke=this._isCellInSelection(Ce,R),ht=k&&Ce===q,us=me&&Ce>=F&&Ce<=B;let Us=!1;this._decorationService.forEachDecorationAtCell(Ce,R,void 0,(Ke=>{Us=!0}));let kt=Ne.getChars()||y.WHITESPACE_CELL_CHAR;if(kt===" "&&(Ne.isUnderline()||Ne.isOverline())&&(kt=""),te=Ue*G-$.get(kt,Ne.isBold(),Ne.isItalic()),U){if(Y&&(ke&&ee||!ke&&!ee&&Ne.bg===K)&&(ke&&ee&&H.selectionForeground||Ne.fg===Z)&&Ne.extended.ext===oe&&us===P&&te===Q&&!ht&&!Ge&&!Us){J+=kt,Y++;continue}Y&&(U.textContent=J),U=this._document.createElement("span"),Y=0,J=""}else U=this._document.createElement("span");if(K=Ne.bg,Z=Ne.fg,oe=Ne.extended.ext,P=us,Q=te,ee=ke,Ge&&q>=Ce&&q<=pt&&(q=Ce),!this._coreService.isCursorHidden&&ht){if(ye.push("xterm-cursor"),this._coreBrowserService.isFocused)W&&ye.push("xterm-cursor-blink"),ye.push(M==="bar"?"xterm-cursor-bar":M==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(I)switch(I){case"outline":ye.push("xterm-cursor-outline");break;case"block":ye.push("xterm-cursor-block");break;case"bar":ye.push("xterm-cursor-bar");break;case"underline":ye.push("xterm-cursor-underline")}}if(Ne.isBold()&&ye.push("xterm-bold"),Ne.isItalic()&&ye.push("xterm-italic"),Ne.isDim()&&ye.push("xterm-dim"),J=Ne.isInvisible()?y.WHITESPACE_CELL_CHAR:Ne.getChars()||y.WHITESPACE_CELL_CHAR,Ne.isUnderline()&&(ye.push(`xterm-underline-${Ne.extended.underlineStyle}`),J===" "&&(J=""),!Ne.isUnderlineColorDefault()))if(Ne.isUnderlineColorRGB())U.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB(Ne.getUnderlineColor()).join(",")})`;else{let Ke=Ne.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ne.isBold()&&Ke<8&&(Ke+=8),U.style.textDecorationColor=H.ansi[Ke].css}Ne.isOverline()&&(ye.push("xterm-overline"),J===" "&&(J="")),Ne.isStrikethrough()&&ye.push("xterm-strikethrough"),us&&(U.style.textDecoration="underline");let wt=Ne.getFgColor(),xt=Ne.getFgColorMode(),qt=Ne.getBgColor(),Gt=Ne.getBgColorMode();const Ps=!!Ne.isInverse();if(Ps){const Ke=wt;wt=qt,qt=Ke;const Cs=xt;xt=Gt,Gt=Cs}let $t,Ls,Bt,At=!1;switch(this._decorationService.forEachDecorationAtCell(Ce,R,void 0,(Ke=>{Ke.options.layer!=="top"&&At||(Ke.backgroundColorRGB&&(Gt=50331648,qt=Ke.backgroundColorRGB.rgba>>8&16777215,$t=Ke.backgroundColorRGB),Ke.foregroundColorRGB&&(xt=50331648,wt=Ke.foregroundColorRGB.rgba>>8&16777215,Ls=Ke.foregroundColorRGB),At=Ke.options.layer==="top")})),!At&&ke&&($t=this._coreBrowserService.isFocused?H.selectionBackgroundOpaque:H.selectionInactiveBackgroundOpaque,qt=$t.rgba>>8&16777215,Gt=50331648,At=!0,H.selectionForeground&&(xt=50331648,wt=H.selectionForeground.rgba>>8&16777215,Ls=H.selectionForeground)),At&&ye.push("xterm-decoration-top"),Gt){case 16777216:case 33554432:Bt=H.ansi[qt],ye.push(`xterm-bg-${qt}`);break;case 50331648:Bt=w.rgba.toColor(qt>>16,qt>>8&255,255&qt),this._addStyle(U,`background-color:#${A((qt>>>0).toString(16),"0",6)}`);break;default:Ps?(Bt=H.foreground,ye.push(`xterm-bg-${m.INVERTED_DEFAULT_COLOR}`)):Bt=H.background}switch($t||Ne.isDim()&&($t=w.color.multiplyOpacity(Bt,.5)),xt){case 16777216:case 33554432:Ne.isBold()&&wt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(wt+=8),this._applyMinimumContrast(U,Bt,H.ansi[wt],Ne,$t,void 0)||ye.push(`xterm-fg-${wt}`);break;case 50331648:const Ke=w.rgba.toColor(wt>>16&255,wt>>8&255,255&wt);this._applyMinimumContrast(U,Bt,Ke,Ne,$t,Ls)||this._addStyle(U,`color:#${A(wt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(U,Bt,H.foreground,Ne,$t,void 0)||Ps&&ye.push(`xterm-fg-${m.INVERTED_DEFAULT_COLOR}`)}ye.length&&(U.className=ye.join(" "),ye.length=0),ht||Ge||Us?U.textContent=J:Y++,te!==this.defaultSpacing&&(U.style.letterSpacing=`${te}px`),V.push(U),Ce=pt}return U&&Y&&(U.textContent=J),V}_applyMinimumContrast(D,R,k,M,I,q){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,b.excludeFromContrastRatioDemands)(M.getCode()))return!1;const W=this._getContrastCache(M);let G;if(I||q||(G=W.getColor(R.rgba,k.rgba)),G===void 0){const $=this._optionsService.rawOptions.minimumContrastRatio/(M.isDim()?2:1);G=w.color.ensureContrastRatio(I||R,q||k,$),W.setColor((I||R).rgba,(q||k).rgba,G??null)}return!!G&&(this._addStyle(D,`color:${G.css}`),!0)}_getContrastCache(D){return D.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(D,R){D.setAttribute("style",`${D.getAttribute("style")||""}${R};`)}_isCellInSelection(D,R){const k=this._selectionStart,M=this._selectionEnd;return!(!k||!M)&&(this._columnSelectMode?k[0]<=M[0]?D>=k[0]&&R>=k[1]&&D<M[0]&&R<=M[1]:D<k[0]&&R>=k[1]&&D>=M[0]&&R<=M[1]:R>k[1]&&R<M[1]||k[1]===M[1]&&R===k[1]&&D>=k[0]&&D<M[0]||k[1]<M[1]&&R===M[1]&&D<M[0]||k[1]<M[1]&&R===k[1]&&D>=k[0])}};function A(D,R,k){for(;D.length<k;)D=R+D;return D}l.DomRendererRowFactory=C=f([p(1,g.ICharacterJoinerService),p(2,S.IOptionsService),p(3,g.ICoreBrowserService),p(4,S.ICoreService),p(5,S.IDecorationService),p(6,g.IThemeService)],C)},2550:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(d){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=d.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const f=d.createElement("span"),p=d.createElement("span");p.style.fontWeight="bold";const m=d.createElement("span");m.style.fontStyle="italic";const y=d.createElement("span");y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[f,p,m,y],this._container.appendChild(f),this._container.appendChild(p),this._container.appendChild(m),this._container.appendChild(y),d.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(d,f,p,m){d===this._font&&f===this._fontSize&&p===this._weight&&m===this._weightBold||(this._font=d,this._fontSize=f,this._weight=p,this._weightBold=m,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${p}`,this._measureElements[1].style.fontWeight=`${m}`,this._measureElements[2].style.fontWeight=`${p}`,this._measureElements[3].style.fontWeight=`${m}`,this.clear())}get(d,f,p){let m=0;if(!f&&!p&&d.length===1&&(m=d.charCodeAt(0))<256)return this._flat[m]!==-9999?this._flat[m]:this._flat[m]=this._measure(d,0);let y=d;f&&(y+="B"),p&&(y+="I");let j=this._holey.get(y);if(j===void 0){let S=0;f&&(S|=1),p&&(S|=2),j=this._measure(d,S),this._holey.set(y,j)}return j}_measure(d,f){const p=this._measureElements[f];return p.textContent=d.repeat(32),p.offsetWidth/32}}},2223:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const f=d(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(h,l)=>{function d(f){return 57508<=f&&f<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},l.isPowerlineGlyph=d,l.isRestrictedPowerlineGlyph=function(f){return 57520<=f&&f<=57527},l.excludeFromContrastRatioDemands=function(f){return d(f)||(function(p){return 9472<=p&&p<=9631})(f)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[Math.max(d,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const d=this.selectionStart,f=this.selectionEnd;return!(!d||!f)&&(d[1]>f[1]||d[1]===f[1]&&d[0]>f[0])}handleTrim(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(h,l,d){var f=this&&this.__decorate||function(g,v,b,_){var C,A=arguments.length,D=A<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,b):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,v,b,_);else for(var R=g.length-1;R>=0;R--)(C=g[R])&&(D=(A<3?C(D):A>3?C(v,b,D):C(v,b))||D);return A>3&&D&&Object.defineProperty(v,b,D),D},p=this&&this.__param||function(g,v){return function(b,_){v(b,_,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const m=d(2585),y=d(8460),j=d(844);let S=l.CharSizeService=class extends j.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(g,v,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new y.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new w(g,v,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const g=this._measureStrategy.measure();g.width===this.width&&g.height===this.height||(this.width=g.width,this.height=g.height,this._onCharSizeChange.fire())}};l.CharSizeService=S=f([p(2,m.IOptionsService)],S);class w{constructor(v,b,_){this._document=v,this._parentElement=b,this._optionsService=_,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const v={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return v.width!==0&&v.height!==0&&(this._result.width=v.width/32,this._result.height=Math.ceil(v.height)),this._result}}},4269:function(h,l,d){var f=this&&this.__decorate||function(v,b,_,C){var A,D=arguments.length,R=D<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(v,b,_,C);else for(var k=v.length-1;k>=0;k--)(A=v[k])&&(R=(D<3?A(R):D>3?A(b,_,R):A(b,_))||R);return D>3&&R&&Object.defineProperty(b,_,R),R},p=this&&this.__param||function(v,b){return function(_,C){b(_,C,v)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const m=d(3734),y=d(643),j=d(511),S=d(2585);class w extends m.AttributeData{constructor(b,_,C){super(),this.content=0,this.combinedData="",this.fg=b.fg,this.bg=b.bg,this.combinedData=_,this._width=C}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(b){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=w;let g=l.CharacterJoinerService=class l2{constructor(b){this._bufferService=b,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new j.CellData}register(b){const _={id:this._nextCharacterJoinerId++,handler:b};return this._characterJoiners.push(_),_.id}deregister(b){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===b)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(b){if(this._characterJoiners.length===0)return[];const _=this._bufferService.buffer.lines.get(b);if(!_||_.length===0)return[];const C=[],A=_.translateToString(!0);let D=0,R=0,k=0,M=_.getFg(0),I=_.getBg(0);for(let q=0;q<_.getTrimmedLength();q++)if(_.loadCell(q,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==M||this._workCell.bg!==I){if(q-D>1){const W=this._getJoinedRanges(A,k,R,_,D);for(let G=0;G<W.length;G++)C.push(W[G])}D=q,k=R,M=this._workCell.fg,I=this._workCell.bg}R+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-D>1){const q=this._getJoinedRanges(A,k,R,_,D);for(let W=0;W<q.length;W++)C.push(q[W])}return C}_getJoinedRanges(b,_,C,A,D){const R=b.substring(_,C);let k=[];try{k=this._characterJoiners[0].handler(R)}catch(M){console.error(M)}for(let M=1;M<this._characterJoiners.length;M++)try{const I=this._characterJoiners[M].handler(R);for(let q=0;q<I.length;q++)l2._mergeRanges(k,I[q])}catch(I){console.error(I)}return this._stringRangesToCellRanges(k,A,D),k}_stringRangesToCellRanges(b,_,C){let A=0,D=!1,R=0,k=b[A];if(k){for(let M=C;M<this._bufferService.cols;M++){const I=_.getWidth(M),q=_.getString(M).length||y.WHITESPACE_CELL_CHAR.length;if(I!==0){if(!D&&k[0]<=R&&(k[0]=M,D=!0),k[1]<=R){if(k[1]=M,k=b[++A],!k)break;k[0]<=R?(k[0]=M,D=!0):D=!1}R+=q}}k&&(k[1]=this._bufferService.cols)}}static _mergeRanges(b,_){let C=!1;for(let A=0;A<b.length;A++){const D=b[A];if(C){if(_[1]<=D[0])return b[A-1][1]=_[1],b;if(_[1]<=D[1])return b[A-1][1]=Math.max(_[1],D[1]),b.splice(A,1),b;b.splice(A,1),A--}else{if(_[1]<=D[0])return b.splice(A,0,_),b;if(_[1]<=D[1])return D[0]=Math.min(_[0],D[0]),b;_[0]<D[1]&&(D[0]=Math.min(_[0],D[0]),C=!0)}}return C?b[b.length-1][1]=_[1]:b.push(_),b}};l.CharacterJoinerService=g=f([p(0,S.IBufferService)],g)},5114:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0,l.CoreBrowserService=class{constructor(d,f){this._textarea=d,this.window=f,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(h,l,d){var f=this&&this.__decorate||function(S,w,g,v){var b,_=arguments.length,C=_<3?w:v===null?v=Object.getOwnPropertyDescriptor(w,g):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(S,w,g,v);else for(var A=S.length-1;A>=0;A--)(b=S[A])&&(C=(_<3?b(C):_>3?b(w,g,C):b(w,g))||C);return _>3&&C&&Object.defineProperty(w,g,C),C},p=this&&this.__param||function(S,w){return function(g,v){w(g,v,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const m=d(4725),y=d(9806);let j=l.MouseService=class{constructor(S,w){this._renderService=S,this._charSizeService=w}getCoords(S,w,g,v,b){return(0,y.getCoords)(window,S,w,g,v,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,b)}getMouseReportCoords(S,w){const g=(0,y.getCoordsRelativeToElement)(window,S,w);if(this._charSizeService.hasValidSize)return g[0]=Math.min(Math.max(g[0],0),this._renderService.dimensions.css.canvas.width-1),g[1]=Math.min(Math.max(g[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(g[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(g[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(g[0]),y:Math.floor(g[1])}}};l.MouseService=j=f([p(0,m.IRenderService),p(1,m.ICharSizeService)],j)},3230:function(h,l,d){var f=this&&this.__decorate||function(C,A,D,R){var k,M=arguments.length,I=M<3?A:R===null?R=Object.getOwnPropertyDescriptor(A,D):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(C,A,D,R);else for(var q=C.length-1;q>=0;q--)(k=C[q])&&(I=(M<3?k(I):M>3?k(A,D,I):k(A,D))||I);return M>3&&I&&Object.defineProperty(A,D,I),I},p=this&&this.__param||function(C,A){return function(D,R){A(D,R,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const m=d(3656),y=d(6193),j=d(5596),S=d(4725),w=d(8460),g=d(844),v=d(7226),b=d(2585);let _=l.RenderService=class extends g.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(C,A,D,R,k,M,I,q){if(super(),this._rowCount=C,this._charSizeService=R,this._renderer=this.register(new g.MutableDisposable),this._pausedResizeTask=new v.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new y.RenderDebouncer(I.window,((W,G)=>this._renderRows(W,G))),this.register(this._renderDebouncer),this._screenDprMonitor=new j.ScreenDprMonitor(I.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(M.onResize((()=>this._fullRefresh()))),this.register(M.buffers.onBufferActivate((()=>{var W;return(W=this._renderer.value)===null||W===void 0?void 0:W.clear()}))),this.register(D.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(k.onDecorationRegistered((()=>this._fullRefresh()))),this.register(k.onDecorationRemoved((()=>this._fullRefresh()))),this.register(D.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(M.cols,M.rows),this._fullRefresh()}))),this.register(D.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(M.buffer.y,M.buffer.y,!0)))),this.register((0,m.addDisposableDomListener)(I.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(q.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in I.window){const W=new I.window.IntersectionObserver((G=>this._handleIntersectionChange(G[G.length-1])),{threshold:0});W.observe(A),this.register({dispose:()=>W.disconnect()})}}_handleIntersectionChange(C){this._isPaused=C.isIntersecting===void 0?C.intersectionRatio===0:!C.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(C,A,D=!1){this._isPaused?this._needsFullRefresh=!0:(D||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(C,A,this._rowCount))}_renderRows(C,A){this._renderer.value&&(C=Math.min(C,this._rowCount-1),A=Math.min(A,this._rowCount-1),this._renderer.value.renderRows(C,A),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:C,end:A}),this._onRender.fire({start:C,end:A}),this._isNextRenderRedrawOnly=!0)}resize(C,A){this._rowCount=A,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(C){this._renderer.value=C,this._renderer.value.onRequestRedraw((A=>this.refreshRows(A.start,A.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(C){return this._renderDebouncer.addRefreshCallback(C)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var C,A;this._renderer.value&&((A=(C=this._renderer.value).clearTextureAtlas)===null||A===void 0||A.call(C),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(C,A){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(C,A))):this._renderer.value.handleResize(C,A),this._fullRefresh())}handleCharSizeChanged(){var C;(C=this._renderer.value)===null||C===void 0||C.handleCharSizeChanged()}handleBlur(){var C;(C=this._renderer.value)===null||C===void 0||C.handleBlur()}handleFocus(){var C;(C=this._renderer.value)===null||C===void 0||C.handleFocus()}handleSelectionChanged(C,A,D){var R;this._selectionState.start=C,this._selectionState.end=A,this._selectionState.columnSelectMode=D,(R=this._renderer.value)===null||R===void 0||R.handleSelectionChanged(C,A,D)}handleCursorMove(){var C;(C=this._renderer.value)===null||C===void 0||C.handleCursorMove()}clear(){var C;(C=this._renderer.value)===null||C===void 0||C.clear()}};l.RenderService=_=f([p(2,b.IOptionsService),p(3,S.ICharSizeService),p(4,b.IDecorationService),p(5,b.IBufferService),p(6,S.ICoreBrowserService),p(7,S.IThemeService)],_)},9312:function(h,l,d){var f=this&&this.__decorate||function(k,M,I,q){var W,G=arguments.length,$=G<3?M:q===null?q=Object.getOwnPropertyDescriptor(M,I):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(k,M,I,q);else for(var F=k.length-1;F>=0;F--)(W=k[F])&&($=(G<3?W($):G>3?W(M,I,$):W(M,I))||$);return G>3&&$&&Object.defineProperty(M,I,$),$},p=this&&this.__param||function(k,M){return function(I,q){M(I,q,k)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const m=d(9806),y=d(9504),j=d(456),S=d(4725),w=d(8460),g=d(844),v=d(6114),b=d(4841),_=d(511),C=d(2585),A="",D=new RegExp(A,"g");let R=l.SelectionService=class extends g.Disposable{constructor(k,M,I,q,W,G,$,F,B){super(),this._element=k,this._screenElement=M,this._linkifier=I,this._bufferService=q,this._coreService=W,this._mouseService=G,this._optionsService=$,this._renderService=F,this._coreBrowserService=B,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new w.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new w.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=V=>this._handleMouseMove(V),this._mouseUpListener=V=>this._handleMouseUp(V),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((V=>this._handleTrim(V))),this.register(this._bufferService.buffers.onBufferActivate((V=>this._handleBufferActivate(V)))),this.enable(),this._model=new j.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,g.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const k=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!k||!M||k[0]===M[0]&&k[1]===M[1])}get selectionText(){const k=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;if(!k||!M)return"";const I=this._bufferService.buffer,q=[];if(this._activeSelectionMode===3){if(k[0]===M[0])return"";const W=k[0]<M[0]?k[0]:M[0],G=k[0]<M[0]?M[0]:k[0];for(let $=k[1];$<=M[1];$++){const F=I.translateBufferLineToString($,!0,W,G);q.push(F)}}else{const W=k[1]===M[1]?M[0]:void 0;q.push(I.translateBufferLineToString(k[1],!0,k[0],W));for(let G=k[1]+1;G<=M[1]-1;G++){const $=I.lines.get(G),F=I.translateBufferLineToString(G,!0);$?.isWrapped?q[q.length-1]+=F:q.push(F)}if(k[1]!==M[1]){const G=I.lines.get(M[1]),$=I.translateBufferLineToString(M[1],!0,0,M[0]);G&&G.isWrapped?q[q.length-1]+=$:q.push($)}}return q.map((W=>W.replace(D," "))).join(v.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(k){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),v.isLinux&&k&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(k){const M=this._getMouseBufferCoords(k),I=this._model.finalSelectionStart,q=this._model.finalSelectionEnd;return!!(I&&q&&M)&&this._areCoordsInSelection(M,I,q)}isCellInSelection(k,M){const I=this._model.finalSelectionStart,q=this._model.finalSelectionEnd;return!(!I||!q)&&this._areCoordsInSelection([k,M],I,q)}_areCoordsInSelection(k,M,I){return k[1]>M[1]&&k[1]<I[1]||M[1]===I[1]&&k[1]===M[1]&&k[0]>=M[0]&&k[0]<I[0]||M[1]<I[1]&&k[1]===I[1]&&k[0]<I[0]||M[1]<I[1]&&k[1]===M[1]&&k[0]>=M[0]}_selectWordAtCursor(k,M){var I,q;const W=(q=(I=this._linkifier.currentLink)===null||I===void 0?void 0:I.link)===null||q===void 0?void 0:q.range;if(W)return this._model.selectionStart=[W.start.x-1,W.start.y-1],this._model.selectionStartLength=(0,b.getRangeLength)(W,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const G=this._getMouseBufferCoords(k);return!!G&&(this._selectWordAt(G,M),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(k,M){this._model.clearSelection(),k=Math.max(k,0),M=Math.min(M,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,k],this._model.selectionEnd=[this._bufferService.cols,M],this.refresh(),this._onSelectionChange.fire()}_handleTrim(k){this._model.handleTrim(k)&&this.refresh()}_getMouseBufferCoords(k){const M=this._mouseService.getCoords(k,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(M)return M[0]--,M[1]--,M[1]+=this._bufferService.buffer.ydisp,M}_getMouseEventScrollAmount(k){let M=(0,m.getCoordsRelativeToElement)(this._coreBrowserService.window,k,this._screenElement)[1];const I=this._renderService.dimensions.css.canvas.height;return M>=0&&M<=I?0:(M>I&&(M-=I),M=Math.min(Math.max(M,-50),50),M/=50,M/Math.abs(M)+Math.round(14*M))}shouldForceSelection(k){return v.isMac?k.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:k.shiftKey}handleMouseDown(k){if(this._mouseDownTimeStamp=k.timeStamp,(k.button!==2||!this.hasSelection)&&k.button===0){if(!this._enabled){if(!this.shouldForceSelection(k))return;k.stopPropagation()}k.preventDefault(),this._dragScrollAmount=0,this._enabled&&k.shiftKey?this._handleIncrementalClick(k):k.detail===1?this._handleSingleClick(k):k.detail===2?this._handleDoubleClick(k):k.detail===3&&this._handleTripleClick(k),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(k){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(k))}_handleSingleClick(k){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(k)?3:0,this._model.selectionStart=this._getMouseBufferCoords(k),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const M=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);M&&M.length!==this._model.selectionStart[0]&&M.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(k){this._selectWordAtCursor(k,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(k){const M=this._getMouseBufferCoords(k);M&&(this._activeSelectionMode=2,this._selectLineAt(M[1]))}shouldColumnSelect(k){return k.altKey&&!(v.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(k){if(k.stopImmediatePropagation(),!this._model.selectionStart)return;const M=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(k),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(k),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const I=this._bufferService.buffer;if(this._model.selectionEnd[1]<I.lines.length){const q=I.lines.get(this._model.selectionEnd[1]);q&&q.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}M&&M[0]===this._model.selectionEnd[0]&&M[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const k=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(k.ydisp+this._bufferService.rows,k.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=k.ydisp),this.refresh()}}_handleMouseUp(k){const M=k.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&M<500&&k.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const I=this._mouseService.getCoords(k,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(I&&I[0]!==void 0&&I[1]!==void 0){const q=(0,y.moveToCellSequence)(I[0]-1,I[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(q,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const k=this._model.finalSelectionStart,M=this._model.finalSelectionEnd,I=!(!k||!M||k[0]===M[0]&&k[1]===M[1]);I?k&&M&&(this._oldSelectionStart&&this._oldSelectionEnd&&k[0]===this._oldSelectionStart[0]&&k[1]===this._oldSelectionStart[1]&&M[0]===this._oldSelectionEnd[0]&&M[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(k,M,I)):this._oldHasSelection&&this._fireOnSelectionChange(k,M,I)}_fireOnSelectionChange(k,M,I){this._oldSelectionStart=k,this._oldSelectionEnd=M,this._oldHasSelection=I,this._onSelectionChange.fire()}_handleBufferActivate(k){this.clearSelection(),this._trimListener.dispose(),this._trimListener=k.activeBuffer.lines.onTrim((M=>this._handleTrim(M)))}_convertViewportColToCharacterIndex(k,M){let I=M;for(let q=0;M>=q;q++){const W=k.loadCell(q,this._workCell).getChars().length;this._workCell.getWidth()===0?I--:W>1&&M!==q&&(I+=W-1)}return I}setSelection(k,M,I){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[k,M],this._model.selectionStartLength=I,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(k){this._isClickInSelection(k)||(this._selectWordAtCursor(k,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(k,M,I=!0,q=!0){if(k[0]>=this._bufferService.cols)return;const W=this._bufferService.buffer,G=W.lines.get(k[1]);if(!G)return;const $=W.translateBufferLineToString(k[1],!1);let F=this._convertViewportColToCharacterIndex(G,k[0]),B=F;const V=k[0]-F;let O=0,H=0,U=0,L=0;if($.charAt(F)===" "){for(;F>0&&$.charAt(F-1)===" ";)F--;for(;B<$.length&&$.charAt(B+1)===" ";)B++}else{let K=k[0],Z=k[0];G.getWidth(K)===0&&(O++,K--),G.getWidth(Z)===2&&(H++,Z++);const oe=G.getString(Z).length;for(oe>1&&(L+=oe-1,B+=oe-1);K>0&&F>0&&!this._isCharWordSeparator(G.loadCell(K-1,this._workCell));){G.loadCell(K-1,this._workCell);const P=this._workCell.getChars().length;this._workCell.getWidth()===0?(O++,K--):P>1&&(U+=P-1,F-=P-1),F--,K--}for(;Z<G.length&&B+1<$.length&&!this._isCharWordSeparator(G.loadCell(Z+1,this._workCell));){G.loadCell(Z+1,this._workCell);const P=this._workCell.getChars().length;this._workCell.getWidth()===2?(H++,Z++):P>1&&(L+=P-1,B+=P-1),B++,Z++}}B++;let Y=F+V-O+U,J=Math.min(this._bufferService.cols,B-F+O+H-U-L);if(M||$.slice(F,B).trim()!==""){if(I&&Y===0&&G.getCodePoint(0)!==32){const K=W.lines.get(k[1]-1);if(K&&G.isWrapped&&K.getCodePoint(this._bufferService.cols-1)!==32){const Z=this._getWordAt([this._bufferService.cols-1,k[1]-1],!1,!0,!1);if(Z){const oe=this._bufferService.cols-Z.start;Y-=oe,J+=oe}}}if(q&&Y+J===this._bufferService.cols&&G.getCodePoint(this._bufferService.cols-1)!==32){const K=W.lines.get(k[1]+1);if(K?.isWrapped&&K.getCodePoint(0)!==32){const Z=this._getWordAt([0,k[1]+1],!1,!1,!0);Z&&(J+=Z.length)}}return{start:Y,length:J}}}_selectWordAt(k,M){const I=this._getWordAt(k,M);if(I){for(;I.start<0;)I.start+=this._bufferService.cols,k[1]--;this._model.selectionStart=[I.start,k[1]],this._model.selectionStartLength=I.length}}_selectToWordAt(k){const M=this._getWordAt(k,!0);if(M){let I=k[1];for(;M.start<0;)M.start+=this._bufferService.cols,I--;if(!this._model.areSelectionValuesReversed())for(;M.start+M.length>this._bufferService.cols;)M.length-=this._bufferService.cols,I++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?M.start:M.start+M.length,I]}}_isCharWordSeparator(k){return k.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(k.getChars())>=0}_selectLineAt(k){const M=this._bufferService.buffer.getWrappedRangeForLine(k),I={start:{x:0,y:M.first},end:{x:this._bufferService.cols-1,y:M.last}};this._model.selectionStart=[0,M.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,b.getRangeLength)(I,this._bufferService.cols)}};l.SelectionService=R=f([p(3,C.IBufferService),p(4,C.ICoreService),p(5,S.IMouseService),p(6,C.IOptionsService),p(7,S.IRenderService),p(8,S.ICoreBrowserService)],R)},4725:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const f=d(8343);l.ICharSizeService=(0,f.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),l.IMouseService=(0,f.createDecorator)("MouseService"),l.IRenderService=(0,f.createDecorator)("RenderService"),l.ISelectionService=(0,f.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,f.createDecorator)("ThemeService")},6731:function(h,l,d){var f=this&&this.__decorate||function(R,k,M,I){var q,W=arguments.length,G=W<3?k:I===null?I=Object.getOwnPropertyDescriptor(k,M):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(R,k,M,I);else for(var $=R.length-1;$>=0;$--)(q=R[$])&&(G=(W<3?q(G):W>3?q(k,M,G):q(k,M))||G);return W>3&&G&&Object.defineProperty(k,M,G),G},p=this&&this.__param||function(R,k){return function(M,I){k(M,I,R)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const m=d(7239),y=d(8055),j=d(8460),S=d(844),w=d(2585),g=y.css.toColor("#ffffff"),v=y.css.toColor("#000000"),b=y.css.toColor("#ffffff"),_=y.css.toColor("#000000"),C={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const R=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],k=[0,95,135,175,215,255];for(let M=0;M<216;M++){const I=k[M/36%6|0],q=k[M/6%6|0],W=k[M%6];R.push({css:y.channels.toCss(I,q,W),rgba:y.channels.toRgba(I,q,W)})}for(let M=0;M<24;M++){const I=8+10*M;R.push({css:y.channels.toCss(I,I,I),rgba:y.channels.toRgba(I,I,I)})}return R})());let A=l.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(R){super(),this._optionsService=R,this._contrastCache=new m.ColorContrastCache,this._halfContrastCache=new m.ColorContrastCache,this._onChangeColors=this.register(new j.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:g,background:v,cursor:b,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:C,selectionBackgroundOpaque:y.color.blend(v,C),selectionInactiveBackgroundTransparent:C,selectionInactiveBackgroundOpaque:y.color.blend(v,C),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(R={}){const k=this._colors;if(k.foreground=D(R.foreground,g),k.background=D(R.background,v),k.cursor=D(R.cursor,b),k.cursorAccent=D(R.cursorAccent,_),k.selectionBackgroundTransparent=D(R.selectionBackground,C),k.selectionBackgroundOpaque=y.color.blend(k.background,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundTransparent=D(R.selectionInactiveBackground,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundOpaque=y.color.blend(k.background,k.selectionInactiveBackgroundTransparent),k.selectionForeground=R.selectionForeground?D(R.selectionForeground,y.NULL_COLOR):void 0,k.selectionForeground===y.NULL_COLOR&&(k.selectionForeground=void 0),y.color.isOpaque(k.selectionBackgroundTransparent)&&(k.selectionBackgroundTransparent=y.color.opacity(k.selectionBackgroundTransparent,.3)),y.color.isOpaque(k.selectionInactiveBackgroundTransparent)&&(k.selectionInactiveBackgroundTransparent=y.color.opacity(k.selectionInactiveBackgroundTransparent,.3)),k.ansi=l.DEFAULT_ANSI_COLORS.slice(),k.ansi[0]=D(R.black,l.DEFAULT_ANSI_COLORS[0]),k.ansi[1]=D(R.red,l.DEFAULT_ANSI_COLORS[1]),k.ansi[2]=D(R.green,l.DEFAULT_ANSI_COLORS[2]),k.ansi[3]=D(R.yellow,l.DEFAULT_ANSI_COLORS[3]),k.ansi[4]=D(R.blue,l.DEFAULT_ANSI_COLORS[4]),k.ansi[5]=D(R.magenta,l.DEFAULT_ANSI_COLORS[5]),k.ansi[6]=D(R.cyan,l.DEFAULT_ANSI_COLORS[6]),k.ansi[7]=D(R.white,l.DEFAULT_ANSI_COLORS[7]),k.ansi[8]=D(R.brightBlack,l.DEFAULT_ANSI_COLORS[8]),k.ansi[9]=D(R.brightRed,l.DEFAULT_ANSI_COLORS[9]),k.ansi[10]=D(R.brightGreen,l.DEFAULT_ANSI_COLORS[10]),k.ansi[11]=D(R.brightYellow,l.DEFAULT_ANSI_COLORS[11]),k.ansi[12]=D(R.brightBlue,l.DEFAULT_ANSI_COLORS[12]),k.ansi[13]=D(R.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),k.ansi[14]=D(R.brightCyan,l.DEFAULT_ANSI_COLORS[14]),k.ansi[15]=D(R.brightWhite,l.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){const M=Math.min(k.ansi.length-16,R.extendedAnsi.length);for(let I=0;I<M;I++)k.ansi[I+16]=D(R.extendedAnsi[I],l.DEFAULT_ANSI_COLORS[I+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(R!==void 0)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let k=0;k<this._restoreColors.ansi.length;++k)this._colors.ansi[k]=this._restoreColors.ansi[k]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function D(R,k){if(R!==void 0)try{return y.css.toColor(R)}catch{}return k}l.ThemeService=A=f([p(0,w.IOptionsService)],A)},6349:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const f=d(8460),p=d(844);class m extends p.Disposable{constructor(j){super(),this._maxLength=j,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(j){if(this._maxLength===j)return;const S=new Array(j);for(let w=0;w<Math.min(j,this.length);w++)S[w]=this._array[this._getCyclicIndex(w)];this._array=S,this._maxLength=j,this._startIndex=0}get length(){return this._length}set length(j){if(j>this._length)for(let S=this._length;S<j;S++)this._array[S]=void 0;this._length=j}get(j){return this._array[this._getCyclicIndex(j)]}set(j,S){this._array[this._getCyclicIndex(j)]=S}push(j){this._array[this._getCyclicIndex(this._length)]=j,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(j,S,...w){if(S){for(let g=j;g<this._length-S;g++)this._array[this._getCyclicIndex(g)]=this._array[this._getCyclicIndex(g+S)];this._length-=S,this.onDeleteEmitter.fire({index:j,amount:S})}for(let g=this._length-1;g>=j;g--)this._array[this._getCyclicIndex(g+w.length)]=this._array[this._getCyclicIndex(g)];for(let g=0;g<w.length;g++)this._array[this._getCyclicIndex(j+g)]=w[g];if(w.length&&this.onInsertEmitter.fire({index:j,amount:w.length}),this._length+w.length>this._maxLength){const g=this._length+w.length-this._maxLength;this._startIndex+=g,this._length=this._maxLength,this.onTrimEmitter.fire(g)}else this._length+=w.length}trimStart(j){j>this._length&&(j=this._length),this._startIndex+=j,this._length-=j,this.onTrimEmitter.fire(j)}shiftElements(j,S,w){if(!(S<=0)){if(j<0||j>=this._length)throw new Error("start argument out of range");if(j+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(let v=S-1;v>=0;v--)this.set(j+v+w,this.get(j+v));const g=j+S+w-this._length;if(g>0)for(this._length+=g;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let g=0;g<S;g++)this.set(j+g+w,this.get(j+g))}}_getCyclicIndex(j){return(this._startIndex+j)%this._maxLength}}l.CircularList=m},1439:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function d(f,p=5){if(typeof f!="object")return f;const m=Array.isArray(f)?[]:{};for(const y in f)m[y]=p<=1?f[y]:f[y]&&d(f[y],p-1);return m}},8055:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const f=d(6114);let p=0,m=0,y=0,j=0;var S,w,g,v,b;function _(A){const D=A.toString(16);return D.length<2?"0"+D:D}function C(A,D){return A<D?(D+.05)/(A+.05):(A+.05)/(D+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},(function(A){A.toCss=function(D,R,k,M){return M!==void 0?`#${_(D)}${_(R)}${_(k)}${_(M)}`:`#${_(D)}${_(R)}${_(k)}`},A.toRgba=function(D,R,k,M=255){return(D<<24|R<<16|k<<8|M)>>>0}})(S||(l.channels=S={})),(function(A){function D(R,k){return j=Math.round(255*k),[p,m,y]=b.toChannels(R.rgba),{css:S.toCss(p,m,y,j),rgba:S.toRgba(p,m,y,j)}}A.blend=function(R,k){if(j=(255&k.rgba)/255,j===1)return{css:k.css,rgba:k.rgba};const M=k.rgba>>24&255,I=k.rgba>>16&255,q=k.rgba>>8&255,W=R.rgba>>24&255,G=R.rgba>>16&255,$=R.rgba>>8&255;return p=W+Math.round((M-W)*j),m=G+Math.round((I-G)*j),y=$+Math.round((q-$)*j),{css:S.toCss(p,m,y),rgba:S.toRgba(p,m,y)}},A.isOpaque=function(R){return(255&R.rgba)==255},A.ensureContrastRatio=function(R,k,M){const I=b.ensureContrastRatio(R.rgba,k.rgba,M);if(I)return b.toColor(I>>24&255,I>>16&255,I>>8&255)},A.opaque=function(R){const k=(255|R.rgba)>>>0;return[p,m,y]=b.toChannels(k),{css:S.toCss(p,m,y),rgba:k}},A.opacity=D,A.multiplyOpacity=function(R,k){return j=255&R.rgba,D(R,j*k/255)},A.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}})(w||(l.color=w={})),(function(A){let D,R;if(!f.isNode){const k=document.createElement("canvas");k.width=1,k.height=1;const M=k.getContext("2d",{willReadFrequently:!0});M&&(D=M,D.globalCompositeOperation="copy",R=D.createLinearGradient(0,0,1,1))}A.toColor=function(k){if(k.match(/#[\da-f]{3,8}/i))switch(k.length){case 4:return p=parseInt(k.slice(1,2).repeat(2),16),m=parseInt(k.slice(2,3).repeat(2),16),y=parseInt(k.slice(3,4).repeat(2),16),b.toColor(p,m,y);case 5:return p=parseInt(k.slice(1,2).repeat(2),16),m=parseInt(k.slice(2,3).repeat(2),16),y=parseInt(k.slice(3,4).repeat(2),16),j=parseInt(k.slice(4,5).repeat(2),16),b.toColor(p,m,y,j);case 7:return{css:k,rgba:(parseInt(k.slice(1),16)<<8|255)>>>0};case 9:return{css:k,rgba:parseInt(k.slice(1),16)>>>0}}const M=k.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(M)return p=parseInt(M[1]),m=parseInt(M[2]),y=parseInt(M[3]),j=Math.round(255*(M[5]===void 0?1:parseFloat(M[5]))),b.toColor(p,m,y,j);if(!D||!R)throw new Error("css.toColor: Unsupported css format");if(D.fillStyle=R,D.fillStyle=k,typeof D.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(D.fillRect(0,0,1,1),[p,m,y,j]=D.getImageData(0,0,1,1).data,j!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:S.toRgba(p,m,y,j),css:k}}})(g||(l.css=g={})),(function(A){function D(R,k,M){const I=R/255,q=k/255,W=M/255;return .2126*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.7152*(q<=.03928?q/12.92:Math.pow((q+.055)/1.055,2.4))+.0722*(W<=.03928?W/12.92:Math.pow((W+.055)/1.055,2.4))}A.relativeLuminance=function(R){return D(R>>16&255,R>>8&255,255&R)},A.relativeLuminance2=D})(v||(l.rgb=v={})),(function(A){function D(k,M,I){const q=k>>24&255,W=k>>16&255,G=k>>8&255;let $=M>>24&255,F=M>>16&255,B=M>>8&255,V=C(v.relativeLuminance2($,F,B),v.relativeLuminance2(q,W,G));for(;V<I&&($>0||F>0||B>0);)$-=Math.max(0,Math.ceil(.1*$)),F-=Math.max(0,Math.ceil(.1*F)),B-=Math.max(0,Math.ceil(.1*B)),V=C(v.relativeLuminance2($,F,B),v.relativeLuminance2(q,W,G));return($<<24|F<<16|B<<8|255)>>>0}function R(k,M,I){const q=k>>24&255,W=k>>16&255,G=k>>8&255;let $=M>>24&255,F=M>>16&255,B=M>>8&255,V=C(v.relativeLuminance2($,F,B),v.relativeLuminance2(q,W,G));for(;V<I&&($<255||F<255||B<255);)$=Math.min(255,$+Math.ceil(.1*(255-$))),F=Math.min(255,F+Math.ceil(.1*(255-F))),B=Math.min(255,B+Math.ceil(.1*(255-B))),V=C(v.relativeLuminance2($,F,B),v.relativeLuminance2(q,W,G));return($<<24|F<<16|B<<8|255)>>>0}A.ensureContrastRatio=function(k,M,I){const q=v.relativeLuminance(k>>8),W=v.relativeLuminance(M>>8);if(C(q,W)<I){if(W<q){const F=D(k,M,I),B=C(q,v.relativeLuminance(F>>8));if(B<I){const V=R(k,M,I);return B>C(q,v.relativeLuminance(V>>8))?F:V}return F}const G=R(k,M,I),$=C(q,v.relativeLuminance(G>>8));if($<I){const F=D(k,M,I);return $>C(q,v.relativeLuminance(F>>8))?G:F}return G}},A.reduceLuminance=D,A.increaseLuminance=R,A.toChannels=function(k){return[k>>24&255,k>>16&255,k>>8&255,255&k]},A.toColor=function(k,M,I,q){return{css:S.toCss(k,M,I,q),rgba:S.toRgba(k,M,I,q)}}})(b||(l.rgba=b={})),l.toPaddedHex=_,l.contrastRatio=C},8969:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const f=d(844),p=d(2585),m=d(4348),y=d(7866),j=d(744),S=d(7302),w=d(6975),g=d(8460),v=d(1753),b=d(1480),_=d(7994),C=d(9282),A=d(5435),D=d(5981),R=d(2660);let k=!1;class M extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new g.EventEmitter),this._onScroll.event((q=>{var W;(W=this._onScrollApi)===null||W===void 0||W.fire(q.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(q){for(const W in q)this.optionsService.options[W]=q[W]}constructor(q){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new g.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new g.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new g.EventEmitter),this._instantiationService=new m.InstantiationService,this.optionsService=this.register(new S.OptionsService(q)),this._instantiationService.setService(p.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(j.BufferService)),this._instantiationService.setService(p.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(y.LogService)),this._instantiationService.setService(p.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(w.CoreService)),this._instantiationService.setService(p.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(v.CoreMouseService)),this._instantiationService.setService(p.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(b.UnicodeService)),this._instantiationService.setService(p.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(p.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(p.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new A.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,g.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,g.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,g.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,g.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((W=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((W=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new D.WriteBuffer(((W,G)=>this._inputHandler.parse(W,G)))),this.register((0,g.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(q,W){this._writeBuffer.write(q,W)}writeSync(q,W){this._logService.logLevel<=p.LogLevelEnum.WARN&&!k&&(this._logService.warn("writeSync is unreliable and will be removed soon."),k=!0),this._writeBuffer.writeSync(q,W)}resize(q,W){isNaN(q)||isNaN(W)||(q=Math.max(q,j.MINIMUM_COLS),W=Math.max(W,j.MINIMUM_ROWS),this._bufferService.resize(q,W))}scroll(q,W=!1){this._bufferService.scroll(q,W)}scrollLines(q,W,G){this._bufferService.scrollLines(q,W,G)}scrollPages(q){this.scrollLines(q*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(q){const W=q-this._bufferService.buffer.ydisp;W!==0&&this.scrollLines(W)}registerEscHandler(q,W){return this._inputHandler.registerEscHandler(q,W)}registerDcsHandler(q,W){return this._inputHandler.registerDcsHandler(q,W)}registerCsiHandler(q,W){return this._inputHandler.registerCsiHandler(q,W)}registerOscHandler(q,W){return this._inputHandler.registerOscHandler(q,W)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let q=!1;const W=this.optionsService.rawOptions.windowsPty;W&&W.buildNumber!==void 0&&W.buildNumber!==void 0?q=W.backend==="conpty"&&W.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(q=!0),q?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const q=[];q.push(this.onLineFeed(C.updateWindowsModeWrappedState.bind(null,this._bufferService))),q.push(this.registerCsiHandler({final:"H"},(()=>((0,C.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)((()=>{for(const W of q)W.dispose()}))}}}l.CoreTerminal=M},8460:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=d=>(this._listeners.push(d),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===d)return void this._listeners.splice(f,1)}}})),this._event}fire(d,f){const p=[];for(let m=0;m<this._listeners.length;m++)p.push(this._listeners[m]);for(let m=0;m<p.length;m++)p[m].call(void 0,d,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(d,f){return d((p=>f.fire(p)))}},5435:function(h,l,d){var f=this&&this.__decorate||function(V,O,H,U){var L,Y=arguments.length,J=Y<3?O:U===null?U=Object.getOwnPropertyDescriptor(O,H):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(V,O,H,U);else for(var K=V.length-1;K>=0;K--)(L=V[K])&&(J=(Y<3?L(J):Y>3?L(O,H,J):L(O,H))||J);return Y>3&&J&&Object.defineProperty(O,H,J),J},p=this&&this.__param||function(V,O){return function(H,U){O(H,U,V)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const m=d(2584),y=d(7116),j=d(2015),S=d(844),w=d(482),g=d(8437),v=d(8460),b=d(643),_=d(511),C=d(3734),A=d(2585),D=d(6242),R=d(6351),k=d(5941),M={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function q(V,O){if(V>24)return O.setWinLines||!1;switch(V){case 1:return!!O.restoreWin;case 2:return!!O.minimizeWin;case 3:return!!O.setWinPosition;case 4:return!!O.setWinSizePixels;case 5:return!!O.raiseWin;case 6:return!!O.lowerWin;case 7:return!!O.refreshWin;case 8:return!!O.setWinSizeChars;case 9:return!!O.maximizeWin;case 10:return!!O.fullscreenWin;case 11:return!!O.getWinState;case 13:return!!O.getWinPosition;case 14:return!!O.getWinSizePixels;case 15:return!!O.getScreenSizePixels;case 16:return!!O.getCellSizePixels;case 18:return!!O.getWinSizeChars;case 19:return!!O.getScreenSizeChars;case 20:return!!O.getIconTitle;case 21:return!!O.getWinTitle;case 22:return!!O.pushTitle;case 23:return!!O.popTitle;case 24:return!!O.setWinLines}return!1}var W;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(W||(l.WindowsOptionsReportType=W={}));let G=0;class $ extends S.Disposable{getAttrData(){return this._curAttrData}constructor(O,H,U,L,Y,J,K,Z,oe=new j.EscapeSequenceParser){super(),this._bufferService=O,this._charsetService=H,this._coreService=U,this._logService=L,this._optionsService=Y,this._oscLinkService=J,this._coreMouseService=K,this._unicodeService=Z,this._parser=oe,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new w.StringToUtf32,this._utf8Decoder=new w.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new v.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new v.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new v.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new v.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new v.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new v.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new v.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new v.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new v.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new v.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new v.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new v.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new v.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((P=>this._activeBuffer=P.activeBuffer))),this._parser.setCsiHandlerFallback(((P,Q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(P),params:Q.toArray()})})),this._parser.setEscHandlerFallback((P=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(P)})})),this._parser.setExecuteHandlerFallback((P=>{this._logService.debug("Unknown EXECUTE code: ",{code:P})})),this._parser.setOscHandlerFallback(((P,Q,ee)=>{this._logService.debug("Unknown OSC code: ",{identifier:P,action:Q,data:ee})})),this._parser.setDcsHandlerFallback(((P,Q,ee)=>{Q==="HOOK"&&(ee=ee.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(P),action:Q,payload:ee})})),this._parser.setPrintHandler(((P,Q,ee)=>this.print(P,Q,ee))),this._parser.registerCsiHandler({final:"@"},(P=>this.insertChars(P))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(P=>this.scrollLeft(P))),this._parser.registerCsiHandler({final:"A"},(P=>this.cursorUp(P))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(P=>this.scrollRight(P))),this._parser.registerCsiHandler({final:"B"},(P=>this.cursorDown(P))),this._parser.registerCsiHandler({final:"C"},(P=>this.cursorForward(P))),this._parser.registerCsiHandler({final:"D"},(P=>this.cursorBackward(P))),this._parser.registerCsiHandler({final:"E"},(P=>this.cursorNextLine(P))),this._parser.registerCsiHandler({final:"F"},(P=>this.cursorPrecedingLine(P))),this._parser.registerCsiHandler({final:"G"},(P=>this.cursorCharAbsolute(P))),this._parser.registerCsiHandler({final:"H"},(P=>this.cursorPosition(P))),this._parser.registerCsiHandler({final:"I"},(P=>this.cursorForwardTab(P))),this._parser.registerCsiHandler({final:"J"},(P=>this.eraseInDisplay(P,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(P=>this.eraseInDisplay(P,!0))),this._parser.registerCsiHandler({final:"K"},(P=>this.eraseInLine(P,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(P=>this.eraseInLine(P,!0))),this._parser.registerCsiHandler({final:"L"},(P=>this.insertLines(P))),this._parser.registerCsiHandler({final:"M"},(P=>this.deleteLines(P))),this._parser.registerCsiHandler({final:"P"},(P=>this.deleteChars(P))),this._parser.registerCsiHandler({final:"S"},(P=>this.scrollUp(P))),this._parser.registerCsiHandler({final:"T"},(P=>this.scrollDown(P))),this._parser.registerCsiHandler({final:"X"},(P=>this.eraseChars(P))),this._parser.registerCsiHandler({final:"Z"},(P=>this.cursorBackwardTab(P))),this._parser.registerCsiHandler({final:"`"},(P=>this.charPosAbsolute(P))),this._parser.registerCsiHandler({final:"a"},(P=>this.hPositionRelative(P))),this._parser.registerCsiHandler({final:"b"},(P=>this.repeatPrecedingCharacter(P))),this._parser.registerCsiHandler({final:"c"},(P=>this.sendDeviceAttributesPrimary(P))),this._parser.registerCsiHandler({prefix:">",final:"c"},(P=>this.sendDeviceAttributesSecondary(P))),this._parser.registerCsiHandler({final:"d"},(P=>this.linePosAbsolute(P))),this._parser.registerCsiHandler({final:"e"},(P=>this.vPositionRelative(P))),this._parser.registerCsiHandler({final:"f"},(P=>this.hVPosition(P))),this._parser.registerCsiHandler({final:"g"},(P=>this.tabClear(P))),this._parser.registerCsiHandler({final:"h"},(P=>this.setMode(P))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(P=>this.setModePrivate(P))),this._parser.registerCsiHandler({final:"l"},(P=>this.resetMode(P))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(P=>this.resetModePrivate(P))),this._parser.registerCsiHandler({final:"m"},(P=>this.charAttributes(P))),this._parser.registerCsiHandler({final:"n"},(P=>this.deviceStatus(P))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(P=>this.deviceStatusPrivate(P))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(P=>this.softReset(P))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(P=>this.setCursorStyle(P))),this._parser.registerCsiHandler({final:"r"},(P=>this.setScrollRegion(P))),this._parser.registerCsiHandler({final:"s"},(P=>this.saveCursor(P))),this._parser.registerCsiHandler({final:"t"},(P=>this.windowOptions(P))),this._parser.registerCsiHandler({final:"u"},(P=>this.restoreCursor(P))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(P=>this.insertColumns(P))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(P=>this.deleteColumns(P))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(P=>this.selectProtected(P))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(P=>this.requestMode(P,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(P=>this.requestMode(P,!1))),this._parser.setExecuteHandler(m.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(m.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(m.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(m.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(m.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(m.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(m.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(m.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(m.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(m.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(m.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(m.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new D.OscHandler((P=>(this.setTitle(P),this.setIconName(P),!0)))),this._parser.registerOscHandler(1,new D.OscHandler((P=>this.setIconName(P)))),this._parser.registerOscHandler(2,new D.OscHandler((P=>this.setTitle(P)))),this._parser.registerOscHandler(4,new D.OscHandler((P=>this.setOrReportIndexedColor(P)))),this._parser.registerOscHandler(8,new D.OscHandler((P=>this.setHyperlink(P)))),this._parser.registerOscHandler(10,new D.OscHandler((P=>this.setOrReportFgColor(P)))),this._parser.registerOscHandler(11,new D.OscHandler((P=>this.setOrReportBgColor(P)))),this._parser.registerOscHandler(12,new D.OscHandler((P=>this.setOrReportCursorColor(P)))),this._parser.registerOscHandler(104,new D.OscHandler((P=>this.restoreIndexedColor(P)))),this._parser.registerOscHandler(110,new D.OscHandler((P=>this.restoreFgColor(P)))),this._parser.registerOscHandler(111,new D.OscHandler((P=>this.restoreBgColor(P)))),this._parser.registerOscHandler(112,new D.OscHandler((P=>this.restoreCursorColor(P)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const P in y.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:P},(()=>this.selectCharset("("+P))),this._parser.registerEscHandler({intermediates:")",final:P},(()=>this.selectCharset(")"+P))),this._parser.registerEscHandler({intermediates:"*",final:P},(()=>this.selectCharset("*"+P))),this._parser.registerEscHandler({intermediates:"+",final:P},(()=>this.selectCharset("+"+P))),this._parser.registerEscHandler({intermediates:"-",final:P},(()=>this.selectCharset("-"+P))),this._parser.registerEscHandler({intermediates:".",final:P},(()=>this.selectCharset("."+P))),this._parser.registerEscHandler({intermediates:"/",final:P},(()=>this.selectCharset("/"+P)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((P=>(this._logService.error("Parsing error: ",P),P))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new R.DcsHandler(((P,Q)=>this.requestStatusString(P,Q))))}_preserveStack(O,H,U,L){this._parseStack.paused=!0,this._parseStack.cursorStartX=O,this._parseStack.cursorStartY=H,this._parseStack.decodedLength=U,this._parseStack.position=L}_logSlowResolvingAsync(O){this._logService.logLevel<=A.LogLevelEnum.WARN&&Promise.race([O,new Promise(((H,U)=>setTimeout((()=>U("#SLOW_TIMEOUT")),5e3)))]).catch((H=>{if(H!=="#SLOW_TIMEOUT")throw H;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(O,H){let U,L=this._activeBuffer.x,Y=this._activeBuffer.y,J=0;const K=this._parseStack.paused;if(K){if(U=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,H))return this._logSlowResolvingAsync(U),U;L=this._parseStack.cursorStartX,Y=this._parseStack.cursorStartY,this._parseStack.paused=!1,O.length>I&&(J=this._parseStack.position+I)}if(this._logService.logLevel<=A.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof O=="string"?` "${O}"`:` "${Array.prototype.map.call(O,(Z=>String.fromCharCode(Z))).join("")}"`),typeof O=="string"?O.split("").map((Z=>Z.charCodeAt(0))):O),this._parseBuffer.length<O.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min(O.length,I))),K||this._dirtyRowTracker.clearRange(),O.length>I)for(let Z=J;Z<O.length;Z+=I){const oe=Z+I<O.length?Z+I:O.length,P=typeof O=="string"?this._stringDecoder.decode(O.substring(Z,oe),this._parseBuffer):this._utf8Decoder.decode(O.subarray(Z,oe),this._parseBuffer);if(U=this._parser.parse(this._parseBuffer,P))return this._preserveStack(L,Y,P,Z),this._logSlowResolvingAsync(U),U}else if(!K){const Z=typeof O=="string"?this._stringDecoder.decode(O,this._parseBuffer):this._utf8Decoder.decode(O,this._parseBuffer);if(U=this._parser.parse(this._parseBuffer,Z))return this._preserveStack(L,Y,Z,0),this._logSlowResolvingAsync(U),U}this._activeBuffer.x===L&&this._activeBuffer.y===Y||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(O,H,U){let L,Y;const J=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,Z=this._bufferService.cols,oe=this._coreService.decPrivateModes.wraparound,P=this._coreService.modes.insertMode,Q=this._curAttrData;let ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&U-H>0&&ee.getWidth(this._activeBuffer.x-1)===2&&ee.setCellFromCodePoint(this._activeBuffer.x-1,0,1,Q.fg,Q.bg,Q.extended);for(let te=H;te<U;++te){if(L=O[te],Y=this._unicodeService.wcwidth(L),L<127&&J){const ye=J[String.fromCharCode(L)];ye&&(L=ye.charCodeAt(0))}if(K&&this._onA11yChar.fire((0,w.stringFromCodePoint)(L)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),Y||!this._activeBuffer.x){if(this._activeBuffer.x+Y-1>=Z){if(oe){for(;this._activeBuffer.x<Z;)ee.setCellFromCodePoint(this._activeBuffer.x++,0,1,Q.fg,Q.bg,Q.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Z-1,Y===2)continue}if(P&&(ee.insertCells(this._activeBuffer.x,Y,this._activeBuffer.getNullCell(Q),Q),ee.getWidth(Z-1)===2&&ee.setCellFromCodePoint(Z-1,b.NULL_CELL_CODE,b.NULL_CELL_WIDTH,Q.fg,Q.bg,Q.extended)),ee.setCellFromCodePoint(this._activeBuffer.x++,L,Y,Q.fg,Q.bg,Q.extended),Y>0)for(;--Y;)ee.setCellFromCodePoint(this._activeBuffer.x++,0,0,Q.fg,Q.bg,Q.extended)}else ee.getWidth(this._activeBuffer.x-1)?ee.addCodepointToCell(this._activeBuffer.x-1,L):ee.addCodepointToCell(this._activeBuffer.x-2,L)}U-H>0&&(ee.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Z&&U-H>0&&ee.getWidth(this._activeBuffer.x)===0&&!ee.hasContent(this._activeBuffer.x)&&ee.setCellFromCodePoint(this._activeBuffer.x,0,1,Q.fg,Q.bg,Q.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(O,H){return O.final!=="t"||O.prefix||O.intermediates?this._parser.registerCsiHandler(O,H):this._parser.registerCsiHandler(O,(U=>!q(U.params[0],this._optionsService.rawOptions.windowOptions)||H(U)))}registerDcsHandler(O,H){return this._parser.registerDcsHandler(O,new R.DcsHandler(H))}registerEscHandler(O,H){return this._parser.registerEscHandler(O,H)}registerOscHandler(O,H){return this._parser.registerOscHandler(O,new D.OscHandler(H))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var O;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||O===void 0)&&O.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);H.hasWidth(this._activeBuffer.x)&&!H.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const O=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-O),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(O=this._bufferService.cols-1){this._activeBuffer.x=Math.min(O,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(O,H){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=O,this._activeBuffer.y=this._activeBuffer.scrollTop+H):(this._activeBuffer.x=O,this._activeBuffer.y=H),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(O,H){this._restrictCursor(),this._setCursor(this._activeBuffer.x+O,this._activeBuffer.y+H)}cursorUp(O){const H=this._activeBuffer.y-this._activeBuffer.scrollTop;return H>=0?this._moveCursor(0,-Math.min(H,O.params[0]||1)):this._moveCursor(0,-(O.params[0]||1)),!0}cursorDown(O){const H=this._activeBuffer.scrollBottom-this._activeBuffer.y;return H>=0?this._moveCursor(0,Math.min(H,O.params[0]||1)):this._moveCursor(0,O.params[0]||1),!0}cursorForward(O){return this._moveCursor(O.params[0]||1,0),!0}cursorBackward(O){return this._moveCursor(-(O.params[0]||1),0),!0}cursorNextLine(O){return this.cursorDown(O),this._activeBuffer.x=0,!0}cursorPrecedingLine(O){return this.cursorUp(O),this._activeBuffer.x=0,!0}cursorCharAbsolute(O){return this._setCursor((O.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(O){return this._setCursor(O.length>=2?(O.params[1]||1)-1:0,(O.params[0]||1)-1),!0}charPosAbsolute(O){return this._setCursor((O.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(O){return this._moveCursor(O.params[0]||1,0),!0}linePosAbsolute(O){return this._setCursor(this._activeBuffer.x,(O.params[0]||1)-1),!0}vPositionRelative(O){return this._moveCursor(0,O.params[0]||1),!0}hVPosition(O){return this.cursorPosition(O),!0}tabClear(O){const H=O.params[0];return H===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:H===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(O){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=O.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(O){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let H=O.params[0]||1;for(;H--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(O){const H=O.params[0];return H===1&&(this._curAttrData.bg|=536870912),H!==2&&H!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(O,H,U,L=!1,Y=!1){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);J.replaceCells(H,U,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),Y),L&&(J.isWrapped=!1)}_resetBufferLine(O,H=!1){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);U&&(U.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),H),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+O),U.isWrapped=!1)}eraseInDisplay(O,H=!1){let U;switch(this._restrictCursor(this._bufferService.cols),O.params[0]){case 0:for(U=this._activeBuffer.y,this._dirtyRowTracker.markDirty(U),this._eraseInBufferLine(U++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);U<this._bufferService.rows;U++)this._resetBufferLine(U,H);this._dirtyRowTracker.markDirty(U);break;case 1:for(U=this._activeBuffer.y,this._dirtyRowTracker.markDirty(U),this._eraseInBufferLine(U,0,this._activeBuffer.x+1,!0,H),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(U+1).isWrapped=!1);U--;)this._resetBufferLine(U,H);this._dirtyRowTracker.markDirty(0);break;case 2:for(U=this._bufferService.rows,this._dirtyRowTracker.markDirty(U-1);U--;)this._resetBufferLine(U,H);this._dirtyRowTracker.markDirty(0);break;case 3:const L=this._activeBuffer.lines.length-this._bufferService.rows;L>0&&(this._activeBuffer.lines.trimStart(L),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-L,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-L,0),this._onScroll.fire(0))}return!0}eraseInLine(O,H=!1){switch(this._restrictCursor(this._bufferService.cols),O.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,H);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,H);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,H)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(O){this._restrictCursor();let H=O.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=this._activeBuffer.ybase+this._activeBuffer.y,L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Y=this._bufferService.rows-1+this._activeBuffer.ybase-L+1;for(;H--;)this._activeBuffer.lines.splice(Y-1,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(O){this._restrictCursor();let H=O.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const U=this._activeBuffer.ybase+this._activeBuffer.y;let L;for(L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,L=this._bufferService.rows-1+this._activeBuffer.ybase-L;H--;)this._activeBuffer.lines.splice(U,1),this._activeBuffer.lines.splice(L,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(O){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.insertCells(this._activeBuffer.x,O.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(O){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.deleteCells(this._activeBuffer.x,O.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(O){let H=O.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(O){let H=O.params[0]||1;for(;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(g.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=O.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);L.deleteCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=O.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);L.insertCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=O.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);L.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(O){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const H=O.params[0]||1;for(let U=this._activeBuffer.scrollTop;U<=this._activeBuffer.scrollBottom;++U){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);L.deleteCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(O){this._restrictCursor();const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(O.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(O){if(!this._parser.precedingCodepoint)return!0;const H=O.params[0]||1,U=new Uint32Array(H);for(let L=0;L<H;++L)U[L]=this._parser.precedingCodepoint;return this.print(U,0,U.length),!0}sendDeviceAttributesPrimary(O){return O.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(m.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(m.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(O){return O.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(m.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(m.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(O.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(m.C0.ESC+"[>83;40003;0c")),!0}_is(O){return(this._optionsService.rawOptions.termName+"").indexOf(O)===0}setMode(O){for(let H=0;H<O.length;H++)switch(O.params[H]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(O){for(let H=0;H<O.length;H++)switch(O.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(O){for(let H=0;H<O.length;H++)switch(O.params[H]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(O){for(let H=0;H<O.length;H++)switch(O.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),O.params[H]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(O,H){const U=this._coreService.decPrivateModes,{activeProtocol:L,activeEncoding:Y}=this._coreMouseService,J=this._coreService,{buffers:K,cols:Z}=this._bufferService,{active:oe,alt:P}=K,Q=this._optionsService.rawOptions,ee=Ce=>Ce?1:2,te=O.params[0];return ye=te,me=H?te===2?4:te===4?ee(J.modes.insertMode):te===12?3:te===20?ee(Q.convertEol):0:te===1?ee(U.applicationCursorKeys):te===3?Q.windowOptions.setWinLines?Z===80?2:Z===132?1:0:0:te===6?ee(U.origin):te===7?ee(U.wraparound):te===8?3:te===9?ee(L==="X10"):te===12?ee(Q.cursorBlink):te===25?ee(!J.isCursorHidden):te===45?ee(U.reverseWraparound):te===66?ee(U.applicationKeypad):te===67?4:te===1e3?ee(L==="VT200"):te===1002?ee(L==="DRAG"):te===1003?ee(L==="ANY"):te===1004?ee(U.sendFocus):te===1005?4:te===1006?ee(Y==="SGR"):te===1015?4:te===1016?ee(Y==="SGR_PIXELS"):te===1048?1:te===47||te===1047||te===1049?ee(oe===P):te===2004?ee(U.bracketedPasteMode):0,J.triggerDataEvent(`${m.C0.ESC}[${H?"":"?"}${ye};${me}$y`),!0;var ye,me}_updateAttrColor(O,H,U,L,Y){return H===2?(O|=50331648,O&=-16777216,O|=C.AttributeData.fromColorRGB([U,L,Y])):H===5&&(O&=-50331904,O|=33554432|255&U),O}_extractColor(O,H,U){const L=[0,0,-1,0,0,0];let Y=0,J=0;do{if(L[J+Y]=O.params[H+J],O.hasSubParams(H+J)){const K=O.getSubParams(H+J);let Z=0;do L[1]===5&&(Y=1),L[J+Z+1+Y]=K[Z];while(++Z<K.length&&Z+J+1+Y<L.length);break}if(L[1]===5&&J+Y>=2||L[1]===2&&J+Y>=5)break;L[1]&&(Y=1)}while(++J+H<O.length&&J+Y<L.length);for(let K=2;K<L.length;++K)L[K]===-1&&(L[K]=0);switch(L[0]){case 38:U.fg=this._updateAttrColor(U.fg,L[1],L[3],L[4],L[5]);break;case 48:U.bg=this._updateAttrColor(U.bg,L[1],L[3],L[4],L[5]);break;case 58:U.extended=U.extended.clone(),U.extended.underlineColor=this._updateAttrColor(U.extended.underlineColor,L[1],L[3],L[4],L[5])}return J}_processUnderline(O,H){H.extended=H.extended.clone(),(!~O||O>5)&&(O=1),H.extended.underlineStyle=O,H.fg|=268435456,O===0&&(H.fg&=-268435457),H.updateExtended()}_processSGR0(O){O.fg=g.DEFAULT_ATTR_DATA.fg,O.bg=g.DEFAULT_ATTR_DATA.bg,O.extended=O.extended.clone(),O.extended.underlineStyle=0,O.extended.underlineColor&=-67108864,O.updateExtended()}charAttributes(O){if(O.length===1&&O.params[0]===0)return this._processSGR0(this._curAttrData),!0;const H=O.length;let U;const L=this._curAttrData;for(let Y=0;Y<H;Y++)U=O.params[Y],U>=30&&U<=37?(L.fg&=-50331904,L.fg|=16777216|U-30):U>=40&&U<=47?(L.bg&=-50331904,L.bg|=16777216|U-40):U>=90&&U<=97?(L.fg&=-50331904,L.fg|=16777224|U-90):U>=100&&U<=107?(L.bg&=-50331904,L.bg|=16777224|U-100):U===0?this._processSGR0(L):U===1?L.fg|=134217728:U===3?L.bg|=67108864:U===4?(L.fg|=268435456,this._processUnderline(O.hasSubParams(Y)?O.getSubParams(Y)[0]:1,L)):U===5?L.fg|=536870912:U===7?L.fg|=67108864:U===8?L.fg|=1073741824:U===9?L.fg|=2147483648:U===2?L.bg|=134217728:U===21?this._processUnderline(2,L):U===22?(L.fg&=-134217729,L.bg&=-134217729):U===23?L.bg&=-67108865:U===24?(L.fg&=-268435457,this._processUnderline(0,L)):U===25?L.fg&=-536870913:U===27?L.fg&=-67108865:U===28?L.fg&=-1073741825:U===29?L.fg&=2147483647:U===39?(L.fg&=-67108864,L.fg|=16777215&g.DEFAULT_ATTR_DATA.fg):U===49?(L.bg&=-67108864,L.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):U===38||U===48||U===58?Y+=this._extractColor(O,Y,L):U===53?L.bg|=1073741824:U===55?L.bg&=-1073741825:U===59?(L.extended=L.extended.clone(),L.extended.underlineColor=-1,L.updateExtended()):U===100?(L.fg&=-67108864,L.fg|=16777215&g.DEFAULT_ATTR_DATA.fg,L.bg&=-67108864,L.bg|=16777215&g.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",U);return!0}deviceStatus(O){switch(O.params[0]){case 5:this._coreService.triggerDataEvent(`${m.C0.ESC}[0n`);break;case 6:const H=this._activeBuffer.y+1,U=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${m.C0.ESC}[${H};${U}R`)}return!0}deviceStatusPrivate(O){if(O.params[0]===6){const H=this._activeBuffer.y+1,U=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${m.C0.ESC}[?${H};${U}R`)}return!0}softReset(O){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(O){const H=O.params[0]||1;switch(H){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const U=H%2==1;return this._optionsService.options.cursorBlink=U,!0}setScrollRegion(O){const H=O.params[0]||1;let U;return(O.length<2||(U=O.params[1])>this._bufferService.rows||U===0)&&(U=this._bufferService.rows),U>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=U-1,this._setCursor(0,0)),!0}windowOptions(O){if(!q(O.params[0],this._optionsService.rawOptions.windowOptions))return!0;const H=O.length>1?O.params[1]:0;switch(O.params[0]){case 14:H!==2&&this._onRequestWindowsOptionsReport.fire(W.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(W.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${m.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:H!==0&&H!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),H!==0&&H!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:H!==0&&H!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),H!==0&&H!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(O){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(O){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(O){return this._windowTitle=O,this._onTitleChange.fire(O),!0}setIconName(O){return this._iconName=O,!0}setOrReportIndexedColor(O){const H=[],U=O.split(";");for(;U.length>1;){const L=U.shift(),Y=U.shift();if(/^\d+$/.exec(L)){const J=parseInt(L);if(B(J))if(Y==="?")H.push({type:0,index:J});else{const K=(0,k.parseColor)(Y);K&&H.push({type:1,index:J,color:K})}}}return H.length&&this._onColor.fire(H),!0}setHyperlink(O){const H=O.split(";");return!(H.length<2)&&(H[1]?this._createHyperlink(H[0],H[1]):!H[0]&&this._finishHyperlink())}_createHyperlink(O,H){this._getCurrentLinkId()&&this._finishHyperlink();const U=O.split(":");let L;const Y=U.findIndex((J=>J.startsWith("id=")));return Y!==-1&&(L=U[Y].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:L,uri:H}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(O,H){const U=O.split(";");for(let L=0;L<U.length&&!(H>=this._specialColors.length);++L,++H)if(U[L]==="?")this._onColor.fire([{type:0,index:this._specialColors[H]}]);else{const Y=(0,k.parseColor)(U[L]);Y&&this._onColor.fire([{type:1,index:this._specialColors[H],color:Y}])}return!0}setOrReportFgColor(O){return this._setOrReportSpecialColor(O,0)}setOrReportBgColor(O){return this._setOrReportSpecialColor(O,1)}setOrReportCursorColor(O){return this._setOrReportSpecialColor(O,2)}restoreIndexedColor(O){if(!O)return this._onColor.fire([{type:2}]),!0;const H=[],U=O.split(";");for(let L=0;L<U.length;++L)if(/^\d+$/.exec(U[L])){const Y=parseInt(U[L]);B(Y)&&H.push({type:2,index:Y})}return H.length&&this._onColor.fire(H),!0}restoreFgColor(O){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(O){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(O){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0}selectCharset(O){return O.length!==2?(this.selectDefaultCharset(),!0):(O[0]==="/"||this._charsetService.setgCharset(M[O[0]],y.CHARSETS[O[1]]||y.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const O=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,O,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=g.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=g.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(O){return this._charsetService.setgLevel(O),!0}screenAlignmentPattern(){const O=new _.CellData;O.content=4194373,O.fg=this._curAttrData.fg,O.bg=this._curAttrData.bg,this._setCursor(0,0);for(let H=0;H<this._bufferService.rows;++H){const U=this._activeBuffer.ybase+this._activeBuffer.y+H,L=this._activeBuffer.lines.get(U);L&&(L.fill(O),L.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(O,H){const U=this._bufferService.buffer,L=this._optionsService.rawOptions;return(Y=>(this._coreService.triggerDataEvent(`${m.C0.ESC}${Y}${m.C0.ESC}\\`),!0))(O==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:O==='"p'?'P1$r61;1"p':O==="r"?`P1$r${U.scrollTop+1};${U.scrollBottom+1}r`:O==="m"?"P1$r0m":O===" q"?`P1$r${{block:2,underline:4,bar:6}[L.cursorStyle]-(L.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(O,H){this._dirtyRowTracker.markRangeDirty(O,H)}}l.InputHandler=$;let F=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,O){V>O&&(G=V,V=O,O=G),V<this.start&&(this.start=V),O>this.end&&(this.end=O)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function B(V){return 0<=V&&V<256}F=f([p(0,A.IBufferService)],F)},844:(h,l)=>{function d(f){for(const p of f)p.dispose();f.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const p=this._disposables.indexOf(f);p!==-1&&this._disposables.splice(p,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var p;this._isDisposed||f===this._value||((p=this._value)===null||p===void 0||p.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)===null||f===void 0||f.dispose(),this._value=void 0}},l.toDisposable=function(f){return{dispose:f}},l.disposeArray=d,l.getDisposeArrayDisposable=function(f){return{dispose:()=>d(f)}}},1505:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class d{constructor(){this._data={}}set(p,m,y){this._data[p]||(this._data[p]={}),this._data[p][m]=y}get(p,m){return this._data[p]?this._data[p][m]:void 0}clear(){this._data={}}}l.TwoKeyMap=d,l.FourKeyMap=class{constructor(){this._data=new d}set(f,p,m,y,j){this._data.get(f,p)||this._data.set(f,p,new d),this._data.get(f,p).set(m,y,j)}get(f,p,m,y){var j;return(j=this._data.get(f,p))===null||j===void 0?void 0:j.get(m,y)}clear(){this._data.clear()}}},6114:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const d=l.isNode?"node":navigator.userAgent,f=l.isNode?"node":navigator.platform;l.isFirefox=d.includes("Firefox"),l.isLegacyEdge=d.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(d),l.getSafariVersion=function(){if(!l.isSafari)return 0;const p=d.match(/Version\/(\d+)/);return p===null||p.length<2?0:parseInt(p[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),l.isIpad=f==="iPad",l.isIphone=f==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),l.isLinux=f.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(d)},6106:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let d=0;l.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(d=this._search(this._getKey(f)),this._array.splice(d,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const p=this._getKey(f);if(p===void 0||(d=this._search(p),d===-1)||this._getKey(this._array[d])!==p)return!1;do if(this._array[d]===f)return this._array.splice(d,1),!0;while(++d<this._array.length&&this._getKey(this._array[d])===p);return!1}*getKeyIterator(f){if(this._array.length!==0&&(d=this._search(f),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===f))do yield this._array[d];while(++d<this._array.length&&this._getKey(this._array[d])===f)}forEachByKey(f,p){if(this._array.length!==0&&(d=this._search(f),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===f))do p(this._array[d]);while(++d<this._array.length&&this._getKey(this._array[d])===f)}values(){return[...this._array].values()}_search(f){let p=0,m=this._array.length-1;for(;m>=p;){let y=p+m>>1;const j=this._getKey(this._array[y]);if(j>f)m=y-1;else{if(!(j<f)){for(;y>0&&this._getKey(this._array[y-1])===f;)y--;return y}p=y+1}}return p}}},7226:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const f=d(6114);class p{constructor(){this._tasks=[],this._i=0}enqueue(j){this._tasks.push(j),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(j){this._idleCallback=void 0;let S=0,w=0,g=j.timeRemaining(),v=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),w=Math.max(S,w),v=j.timeRemaining(),1.5*w>v)return g-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(g-S))}ms`),void this._start();g=v}this.clear()}}class m extends p{_requestCallback(j){return setTimeout((()=>j(this._createDeadline(16))))}_cancelCallback(j){clearTimeout(j)}_createDeadline(j){const S=Date.now()+j;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}l.PriorityTaskQueue=m,l.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends p{_requestCallback(y){return requestIdleCallback(y)}_cancelCallback(y){cancelIdleCallback(y)}}:m,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(y){this._queue.clear(),this._queue.enqueue(y)}flush(){this._queue.flush()}}},9282:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const f=d(643);l.updateWindowsModeWrappedState=function(p){const m=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),y=m?.get(p.cols-1),j=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);j&&y&&(j.isWrapped=y[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&y[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class d{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(m){return[m>>>16&255,m>>>8&255,255&m]}static fromColorRGB(m){return(255&m[0])<<16|(255&m[1])<<8|255&m[2]}clone(){const m=new d;return m.fg=this.fg,m.bg=this.bg,m.extended=this.extended.clone(),m}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=d;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(m){this._ext=m}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(m){this._ext&=-469762049,this._ext|=m<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(m){this._ext&=-67108864,this._ext|=67108863&m}get urlId(){return this._urlId}set urlId(m){this._urlId=m}constructor(m=0,y=0){this._ext=0,this._urlId=0,this._ext=m,this._urlId=y}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=f},9092:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const f=d(6349),p=d(7226),m=d(3734),y=d(8437),j=d(4634),S=d(511),w=d(643),g=d(4863),v=d(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(b,_,C){this._hasScrollback=b,this._optionsService=_,this._bufferService=C,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=y.DEFAULT_ATTR_DATA.clone(),this.savedCharset=v.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,w.NULL_CELL_CHAR,w.NULL_CELL_WIDTH,w.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,w.WHITESPACE_CELL_CHAR,w.WHITESPACE_CELL_WIDTH,w.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new p.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(b){return b?(this._nullCell.fg=b.fg,this._nullCell.bg=b.bg,this._nullCell.extended=b.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new m.ExtendedAttrs),this._nullCell}getWhitespaceCell(b){return b?(this._whitespaceCell.fg=b.fg,this._whitespaceCell.bg=b.bg,this._whitespaceCell.extended=b.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new m.ExtendedAttrs),this._whitespaceCell}getBlankLine(b,_){return new y.BufferLine(this._bufferService.cols,this.getNullCell(b),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const b=this.ybase+this.y-this.ydisp;return b>=0&&b<this._rows}_getCorrectBufferLength(b){if(!this._hasScrollback)return b;const _=b+this._optionsService.rawOptions.scrollback;return _>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:_}fillViewportRows(b){if(this.lines.length===0){b===void 0&&(b=y.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(b))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(b,_){const C=this.getNullCell(y.DEFAULT_ATTR_DATA);let A=0;const D=this._getCorrectBufferLength(_);if(D>this.lines.maxLength&&(this.lines.maxLength=D),this.lines.length>0){if(this._cols<b)for(let k=0;k<this.lines.length;k++)A+=+this.lines.get(k).resize(b,C);let R=0;if(this._rows<_)for(let k=this._rows;k<_;k++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new y.BufferLine(b,C)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new y.BufferLine(b,C)));else for(let k=this._rows;k>_;k--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(D<this.lines.maxLength){const k=this.lines.length-D;k>0&&(this.lines.trimStart(k),this.ybase=Math.max(this.ybase-k,0),this.ydisp=Math.max(this.ydisp-k,0),this.savedY=Math.max(this.savedY-k,0)),this.lines.maxLength=D}this.x=Math.min(this.x,b-1),this.y=Math.min(this.y,_-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,b-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(b,_),this._cols>b))for(let R=0;R<this.lines.length;R++)A+=+this.lines.get(R).resize(b,C);this._cols=b,this._rows=_,this._memoryCleanupQueue.clear(),A>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let b=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,b=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return b}get _isReflowEnabled(){const b=this._optionsService.rawOptions.windowsPty;return b&&b.buildNumber?this._hasScrollback&&b.backend==="conpty"&&b.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(b,_){this._cols!==b&&(b>this._cols?this._reflowLarger(b,_):this._reflowSmaller(b,_))}_reflowLarger(b,_){const C=(0,j.reflowLargerGetLinesToRemove)(this.lines,this._cols,b,this.ybase+this.y,this.getNullCell(y.DEFAULT_ATTR_DATA));if(C.length>0){const A=(0,j.reflowLargerCreateNewLayout)(this.lines,C);(0,j.reflowLargerApplyNewLayout)(this.lines,A.layout),this._reflowLargerAdjustViewport(b,_,A.countRemoved)}}_reflowLargerAdjustViewport(b,_,C){const A=this.getNullCell(y.DEFAULT_ATTR_DATA);let D=C;for(;D-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new y.BufferLine(b,A))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-C,0)}_reflowSmaller(b,_){const C=this.getNullCell(y.DEFAULT_ATTR_DATA),A=[];let D=0;for(let R=this.lines.length-1;R>=0;R--){let k=this.lines.get(R);if(!k||!k.isWrapped&&k.getTrimmedLength()<=b)continue;const M=[k];for(;k.isWrapped&&R>0;)k=this.lines.get(--R),M.unshift(k);const I=this.ybase+this.y;if(I>=R&&I<R+M.length)continue;const q=M[M.length-1].getTrimmedLength(),W=(0,j.reflowSmallerGetNewLineLengths)(M,this._cols,b),G=W.length-M.length;let $;$=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+G):Math.max(0,this.lines.length-this.lines.maxLength+G);const F=[];for(let L=0;L<G;L++){const Y=this.getBlankLine(y.DEFAULT_ATTR_DATA,!0);F.push(Y)}F.length>0&&(A.push({start:R+M.length+D,newLines:F}),D+=F.length),M.push(...F);let B=W.length-1,V=W[B];V===0&&(B--,V=W[B]);let O=M.length-G-1,H=q;for(;O>=0;){const L=Math.min(H,V);if(M[B]===void 0)break;if(M[B].copyCellsFrom(M[O],H-L,V-L,L,!0),V-=L,V===0&&(B--,V=W[B]),H-=L,H===0){O--;const Y=Math.max(O,0);H=(0,j.getWrappedLineTrimmedLength)(M,Y,this._cols)}}for(let L=0;L<M.length;L++)W[L]<b&&M[L].setCell(W[L],C);let U=G-$;for(;U-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+D)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+G,this.ybase+_-1)}if(A.length>0){const R=[],k=[];for(let B=0;B<this.lines.length;B++)k.push(this.lines.get(B));const M=this.lines.length;let I=M-1,q=0,W=A[q];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+D);let G=0;for(let B=Math.min(this.lines.maxLength-1,M+D-1);B>=0;B--)if(W&&W.start>I+G){for(let V=W.newLines.length-1;V>=0;V--)this.lines.set(B--,W.newLines[V]);B++,R.push({index:I+1,amount:W.newLines.length}),G+=W.newLines.length,W=A[++q]}else this.lines.set(B,k[I--]);let $=0;for(let B=R.length-1;B>=0;B--)R[B].index+=$,this.lines.onInsertEmitter.fire(R[B]),$+=R[B].amount;const F=Math.max(0,M+D-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(b,_,C=0,A){const D=this.lines.get(b);return D?D.translateToString(_,C,A):""}getWrappedRangeForLine(b){let _=b,C=b;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;C+1<this.lines.length&&this.lines.get(C+1).isWrapped;)C++;return{first:_,last:C}}setupTabStops(b){for(b!=null?this.tabs[b]||(b=this.prevStop(b)):(this.tabs={},b=0);b<this._cols;b+=this._optionsService.rawOptions.tabStopWidth)this.tabs[b]=!0}prevStop(b){for(b==null&&(b=this.x);!this.tabs[--b]&&b>0;);return b>=this._cols?this._cols-1:b<0?0:b}nextStop(b){for(b==null&&(b=this.x);!this.tabs[++b]&&b<this._cols;);return b>=this._cols?this._cols-1:b<0?0:b}clearMarkers(b){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===b&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let b=0;b<this.markers.length;b++)this.markers[b].dispose(),this.markers.splice(b--,1);this._isClearing=!1}addMarker(b){const _=new g.Marker(b);return this.markers.push(_),_.register(this.lines.onTrim((C=>{_.line-=C,_.line<0&&_.dispose()}))),_.register(this.lines.onInsert((C=>{_.line>=C.index&&(_.line+=C.amount)}))),_.register(this.lines.onDelete((C=>{_.line>=C.index&&_.line<C.index+C.amount&&_.dispose(),_.line>C.index&&(_.line-=C.amount)}))),_.register(_.onDispose((()=>this._removeMarker(_)))),_}_removeMarker(b){this._isClearing||this.markers.splice(this.markers.indexOf(b),1)}}},8437:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const f=d(3734),p=d(511),m=d(643),y=d(482);l.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let j=0;class S{constructor(g,v,b=!1){this.isWrapped=b,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*g);const _=v||p.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]);for(let C=0;C<g;++C)this.setCell(C,_);this.length=g}get(g){const v=this._data[3*g+0],b=2097151&v;return[this._data[3*g+1],2097152&v?this._combined[g]:b?(0,y.stringFromCodePoint)(b):"",v>>22,2097152&v?this._combined[g].charCodeAt(this._combined[g].length-1):b]}set(g,v){this._data[3*g+1]=v[m.CHAR_DATA_ATTR_INDEX],v[m.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[g]=v[1],this._data[3*g+0]=2097152|g|v[m.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*g+0]=v[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[m.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(g){return this._data[3*g+0]>>22}hasWidth(g){return 12582912&this._data[3*g+0]}getFg(g){return this._data[3*g+1]}getBg(g){return this._data[3*g+2]}hasContent(g){return 4194303&this._data[3*g+0]}getCodePoint(g){const v=this._data[3*g+0];return 2097152&v?this._combined[g].charCodeAt(this._combined[g].length-1):2097151&v}isCombined(g){return 2097152&this._data[3*g+0]}getString(g){const v=this._data[3*g+0];return 2097152&v?this._combined[g]:2097151&v?(0,y.stringFromCodePoint)(2097151&v):""}isProtected(g){return 536870912&this._data[3*g+2]}loadCell(g,v){return j=3*g,v.content=this._data[j+0],v.fg=this._data[j+1],v.bg=this._data[j+2],2097152&v.content&&(v.combinedData=this._combined[g]),268435456&v.bg&&(v.extended=this._extendedAttrs[g]),v}setCell(g,v){2097152&v.content&&(this._combined[g]=v.combinedData),268435456&v.bg&&(this._extendedAttrs[g]=v.extended),this._data[3*g+0]=v.content,this._data[3*g+1]=v.fg,this._data[3*g+2]=v.bg}setCellFromCodePoint(g,v,b,_,C,A){268435456&C&&(this._extendedAttrs[g]=A),this._data[3*g+0]=v|b<<22,this._data[3*g+1]=_,this._data[3*g+2]=C}addCodepointToCell(g,v){let b=this._data[3*g+0];2097152&b?this._combined[g]+=(0,y.stringFromCodePoint)(v):(2097151&b?(this._combined[g]=(0,y.stringFromCodePoint)(2097151&b)+(0,y.stringFromCodePoint)(v),b&=-2097152,b|=2097152):b=v|4194304,this._data[3*g+0]=b)}insertCells(g,v,b,_){if((g%=this.length)&&this.getWidth(g-1)===2&&this.setCellFromCodePoint(g-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs),v<this.length-g){const C=new p.CellData;for(let A=this.length-g-v-1;A>=0;--A)this.setCell(g+v+A,this.loadCell(g+A,C));for(let A=0;A<v;++A)this.setCell(g+A,b)}else for(let C=g;C<this.length;++C)this.setCell(C,b);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs)}deleteCells(g,v,b,_){if(g%=this.length,v<this.length-g){const C=new p.CellData;for(let A=0;A<this.length-g-v;++A)this.setCell(g+A,this.loadCell(g+v+A,C));for(let A=this.length-v;A<this.length;++A)this.setCell(A,b)}else for(let C=g;C<this.length;++C)this.setCell(C,b);g&&this.getWidth(g-1)===2&&this.setCellFromCodePoint(g-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs),this.getWidth(g)!==0||this.hasContent(g)||this.setCellFromCodePoint(g,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs)}replaceCells(g,v,b,_,C=!1){if(C)for(g&&this.getWidth(g-1)===2&&!this.isProtected(g-1)&&this.setCellFromCodePoint(g-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs),v<this.length&&this.getWidth(v-1)===2&&!this.isProtected(v)&&this.setCellFromCodePoint(v,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs);g<v&&g<this.length;)this.isProtected(g)||this.setCell(g,b),g++;else for(g&&this.getWidth(g-1)===2&&this.setCellFromCodePoint(g-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs),v<this.length&&this.getWidth(v-1)===2&&this.setCellFromCodePoint(v,0,1,_?.fg||0,_?.bg||0,_?.extended||new f.ExtendedAttrs);g<v&&g<this.length;)this.setCell(g++,b)}resize(g,v){if(g===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const b=3*g;if(g>this.length){if(this._data.buffer.byteLength>=4*b)this._data=new Uint32Array(this._data.buffer,0,b);else{const _=new Uint32Array(b);_.set(this._data),this._data=_}for(let _=this.length;_<g;++_)this.setCell(_,v)}else{this._data=this._data.subarray(0,b);const _=Object.keys(this._combined);for(let A=0;A<_.length;A++){const D=parseInt(_[A],10);D>=g&&delete this._combined[D]}const C=Object.keys(this._extendedAttrs);for(let A=0;A<C.length;A++){const D=parseInt(C[A],10);D>=g&&delete this._extendedAttrs[D]}}return this.length=g,4*b*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const g=new Uint32Array(this._data.length);return g.set(this._data),this._data=g,1}return 0}fill(g,v=!1){if(v)for(let b=0;b<this.length;++b)this.isProtected(b)||this.setCell(b,g);else{this._combined={},this._extendedAttrs={};for(let b=0;b<this.length;++b)this.setCell(b,g)}}copyFrom(g){this.length!==g.length?this._data=new Uint32Array(g._data):this._data.set(g._data),this.length=g.length,this._combined={};for(const v in g._combined)this._combined[v]=g._combined[v];this._extendedAttrs={};for(const v in g._extendedAttrs)this._extendedAttrs[v]=g._extendedAttrs[v];this.isWrapped=g.isWrapped}clone(){const g=new S(0);g._data=new Uint32Array(this._data),g.length=this.length;for(const v in this._combined)g._combined[v]=this._combined[v];for(const v in this._extendedAttrs)g._extendedAttrs[v]=this._extendedAttrs[v];return g.isWrapped=this.isWrapped,g}getTrimmedLength(){for(let g=this.length-1;g>=0;--g)if(4194303&this._data[3*g+0])return g+(this._data[3*g+0]>>22);return 0}getNoBgTrimmedLength(){for(let g=this.length-1;g>=0;--g)if(4194303&this._data[3*g+0]||50331648&this._data[3*g+2])return g+(this._data[3*g+0]>>22);return 0}copyCellsFrom(g,v,b,_,C){const A=g._data;if(C)for(let R=_-1;R>=0;R--){for(let k=0;k<3;k++)this._data[3*(b+R)+k]=A[3*(v+R)+k];268435456&A[3*(v+R)+2]&&(this._extendedAttrs[b+R]=g._extendedAttrs[v+R])}else for(let R=0;R<_;R++){for(let k=0;k<3;k++)this._data[3*(b+R)+k]=A[3*(v+R)+k];268435456&A[3*(v+R)+2]&&(this._extendedAttrs[b+R]=g._extendedAttrs[v+R])}const D=Object.keys(g._combined);for(let R=0;R<D.length;R++){const k=parseInt(D[R],10);k>=v&&(this._combined[k-v+b]=g._combined[k])}}translateToString(g=!1,v=0,b=this.length){g&&(b=Math.min(b,this.getTrimmedLength()));let _="";for(;v<b;){const C=this._data[3*v+0],A=2097151&C;_+=2097152&C?this._combined[v]:A?(0,y.stringFromCodePoint)(A):m.WHITESPACE_CELL_CHAR,v+=C>>22||1}return _}}l.BufferLine=S},4841:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(d,f){if(d.start.y>d.end.y)throw new Error(`Buffer range end (${d.end.x}, ${d.end.y}) cannot be before start (${d.start.x}, ${d.start.y})`);return f*(d.end.y-d.start.y)+(d.end.x-d.start.x+1)}},4634:(h,l)=>{function d(f,p,m){if(p===f.length-1)return f[p].getTrimmedLength();const y=!f[p].hasContent(m-1)&&f[p].getWidth(m-1)===1,j=f[p+1].getWidth(0)===2;return y&&j?m-1:m}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(f,p,m,y,j){const S=[];for(let w=0;w<f.length-1;w++){let g=w,v=f.get(++g);if(!v.isWrapped)continue;const b=[f.get(w)];for(;g<f.length&&v.isWrapped;)b.push(v),v=f.get(++g);if(y>=w&&y<g){w+=b.length-1;continue}let _=0,C=d(b,_,p),A=1,D=0;for(;A<b.length;){const k=d(b,A,p),M=k-D,I=m-C,q=Math.min(M,I);b[_].copyCellsFrom(b[A],D,C,q,!1),C+=q,C===m&&(_++,C=0),D+=q,D===k&&(A++,D=0),C===0&&_!==0&&b[_-1].getWidth(m-1)===2&&(b[_].copyCellsFrom(b[_-1],m-1,C++,1,!1),b[_-1].setCell(m-1,j))}b[_].replaceCells(C,m,j);let R=0;for(let k=b.length-1;k>0&&(k>_||b[k].getTrimmedLength()===0);k--)R++;R>0&&(S.push(w+b.length-R),S.push(R)),w+=b.length-1}return S},l.reflowLargerCreateNewLayout=function(f,p){const m=[];let y=0,j=p[y],S=0;for(let w=0;w<f.length;w++)if(j===w){const g=p[++y];f.onDeleteEmitter.fire({index:w-S,amount:g}),w+=g-1,S+=g,j=p[++y]}else m.push(w);return{layout:m,countRemoved:S}},l.reflowLargerApplyNewLayout=function(f,p){const m=[];for(let y=0;y<p.length;y++)m.push(f.get(p[y]));for(let y=0;y<m.length;y++)f.set(y,m[y]);f.length=p.length},l.reflowSmallerGetNewLineLengths=function(f,p,m){const y=[],j=f.map(((v,b)=>d(f,b,p))).reduce(((v,b)=>v+b));let S=0,w=0,g=0;for(;g<j;){if(j-g<m){y.push(j-g);break}S+=m;const v=d(f,w,p);S>v&&(S-=v,w++);const b=f[w].getWidth(S-1)===2;b&&S--;const _=b?m-1:m;y.push(_),g+=_}return y},l.getWrappedLineTrimmedLength=d},5295:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const f=d(8460),p=d(844),m=d(9092);class y extends p.Disposable{constructor(S,w){super(),this._optionsService=S,this._bufferService=w,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new m.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new m.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,w){this._normal.resize(S,w),this._alt.resize(S,w),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}l.BufferSet=y},511:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const f=d(482),p=d(643),m=d(3734);class y extends m.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new m.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const w=new y;return w.setFromCharData(S),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[p.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(S[p.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(S[p.CHAR_DATA_CHAR_INDEX].length===2){const g=S[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=g&&g<=56319){const v=S[p.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=v&&v<=57343?this.content=1024*(g-55296)+v-56320+65536|S[p.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=S[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[p.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=S[p.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[p.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=y},643:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const f=d(8460),p=d(844);class m{get id(){return this._id}constructor(j){this.line=j,this.isDisposed=!1,this._disposables=[],this._id=m._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,p.disposeArray)(this._disposables),this._disposables.length=0)}register(j){return this._disposables.push(j),j}}l.Marker=m,m._nextId=1},7116:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(h,l)=>{var d,f,p;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,(function(m){m.NUL="\0",m.SOH="",m.STX="",m.ETX="",m.EOT="",m.ENQ="",m.ACK="",m.BEL="\x07",m.BS="\b",m.HT="	",m.LF=`
`,m.VT="\v",m.FF="\f",m.CR="\r",m.SO="",m.SI="",m.DLE="",m.DC1="",m.DC2="",m.DC3="",m.DC4="",m.NAK="",m.SYN="",m.ETB="",m.CAN="",m.EM="",m.SUB="",m.ESC="\x1B",m.FS="",m.GS="",m.RS="",m.US="",m.SP=" ",m.DEL=""})(d||(l.C0=d={})),(function(m){m.PAD="",m.HOP="",m.BPH="",m.NBH="",m.IND="",m.NEL="",m.SSA="",m.ESA="",m.HTS="",m.HTJ="",m.VTS="",m.PLD="",m.PLU="",m.RI="",m.SS2="",m.SS3="",m.DCS="",m.PU1="",m.PU2="",m.STS="",m.CCH="",m.MW="",m.SPA="",m.EPA="",m.SOS="",m.SGCI="",m.SCI="",m.CSI="",m.ST="",m.OSC="",m.PM="",m.APC=""})(f||(l.C1=f={})),(function(m){m.ST=`${d.ESC}\\`})(p||(l.C1_ESCAPED=p={}))},7399:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const f=d(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(m,y,j,S){const w={type:0,cancel:!1,key:void 0},g=(m.shiftKey?1:0)|(m.altKey?2:0)|(m.ctrlKey?4:0)|(m.metaKey?8:0);switch(m.keyCode){case 0:m.key==="UIKeyInputUpArrow"?w.key=y?f.C0.ESC+"OA":f.C0.ESC+"[A":m.key==="UIKeyInputLeftArrow"?w.key=y?f.C0.ESC+"OD":f.C0.ESC+"[D":m.key==="UIKeyInputRightArrow"?w.key=y?f.C0.ESC+"OC":f.C0.ESC+"[C":m.key==="UIKeyInputDownArrow"&&(w.key=y?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:if(m.altKey){w.key=f.C0.ESC+f.C0.DEL;break}w.key=f.C0.DEL;break;case 9:if(m.shiftKey){w.key=f.C0.ESC+"[Z";break}w.key=f.C0.HT,w.cancel=!0;break;case 13:w.key=m.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,w.cancel=!0;break;case 27:w.key=f.C0.ESC,m.altKey&&(w.key=f.C0.ESC+f.C0.ESC),w.cancel=!0;break;case 37:if(m.metaKey)break;g?(w.key=f.C0.ESC+"[1;"+(g+1)+"D",w.key===f.C0.ESC+"[1;3D"&&(w.key=f.C0.ESC+(j?"b":"[1;5D"))):w.key=y?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(m.metaKey)break;g?(w.key=f.C0.ESC+"[1;"+(g+1)+"C",w.key===f.C0.ESC+"[1;3C"&&(w.key=f.C0.ESC+(j?"f":"[1;5C"))):w.key=y?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(m.metaKey)break;g?(w.key=f.C0.ESC+"[1;"+(g+1)+"A",j||w.key!==f.C0.ESC+"[1;3A"||(w.key=f.C0.ESC+"[1;5A")):w.key=y?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(m.metaKey)break;g?(w.key=f.C0.ESC+"[1;"+(g+1)+"B",j||w.key!==f.C0.ESC+"[1;3B"||(w.key=f.C0.ESC+"[1;5B")):w.key=y?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:m.shiftKey||m.ctrlKey||(w.key=f.C0.ESC+"[2~");break;case 46:w.key=g?f.C0.ESC+"[3;"+(g+1)+"~":f.C0.ESC+"[3~";break;case 36:w.key=g?f.C0.ESC+"[1;"+(g+1)+"H":y?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:w.key=g?f.C0.ESC+"[1;"+(g+1)+"F":y?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:m.shiftKey?w.type=2:m.ctrlKey?w.key=f.C0.ESC+"[5;"+(g+1)+"~":w.key=f.C0.ESC+"[5~";break;case 34:m.shiftKey?w.type=3:m.ctrlKey?w.key=f.C0.ESC+"[6;"+(g+1)+"~":w.key=f.C0.ESC+"[6~";break;case 112:w.key=g?f.C0.ESC+"[1;"+(g+1)+"P":f.C0.ESC+"OP";break;case 113:w.key=g?f.C0.ESC+"[1;"+(g+1)+"Q":f.C0.ESC+"OQ";break;case 114:w.key=g?f.C0.ESC+"[1;"+(g+1)+"R":f.C0.ESC+"OR";break;case 115:w.key=g?f.C0.ESC+"[1;"+(g+1)+"S":f.C0.ESC+"OS";break;case 116:w.key=g?f.C0.ESC+"[15;"+(g+1)+"~":f.C0.ESC+"[15~";break;case 117:w.key=g?f.C0.ESC+"[17;"+(g+1)+"~":f.C0.ESC+"[17~";break;case 118:w.key=g?f.C0.ESC+"[18;"+(g+1)+"~":f.C0.ESC+"[18~";break;case 119:w.key=g?f.C0.ESC+"[19;"+(g+1)+"~":f.C0.ESC+"[19~";break;case 120:w.key=g?f.C0.ESC+"[20;"+(g+1)+"~":f.C0.ESC+"[20~";break;case 121:w.key=g?f.C0.ESC+"[21;"+(g+1)+"~":f.C0.ESC+"[21~";break;case 122:w.key=g?f.C0.ESC+"[23;"+(g+1)+"~":f.C0.ESC+"[23~";break;case 123:w.key=g?f.C0.ESC+"[24;"+(g+1)+"~":f.C0.ESC+"[24~";break;default:if(!m.ctrlKey||m.shiftKey||m.altKey||m.metaKey)if(j&&!S||!m.altKey||m.metaKey)!j||m.altKey||m.ctrlKey||m.shiftKey||!m.metaKey?m.key&&!m.ctrlKey&&!m.altKey&&!m.metaKey&&m.keyCode>=48&&m.key.length===1?w.key=m.key:m.key&&m.ctrlKey&&(m.key==="_"&&(w.key=f.C0.US),m.key==="@"&&(w.key=f.C0.NUL)):m.keyCode===65&&(w.type=1);else{const v=p[m.keyCode],b=v?.[m.shiftKey?1:0];if(b)w.key=f.C0.ESC+b;else if(m.keyCode>=65&&m.keyCode<=90){const _=m.ctrlKey?m.keyCode-64:m.keyCode+32;let C=String.fromCharCode(_);m.shiftKey&&(C=C.toUpperCase()),w.key=f.C0.ESC+C}else if(m.keyCode===32)w.key=f.C0.ESC+(m.ctrlKey?f.C0.NUL:" ");else if(m.key==="Dead"&&m.code.startsWith("Key")){let _=m.code.slice(3,4);m.shiftKey||(_=_.toLowerCase()),w.key=f.C0.ESC+_,w.cancel=!0}}else m.keyCode>=65&&m.keyCode<=90?w.key=String.fromCharCode(m.keyCode-64):m.keyCode===32?w.key=f.C0.NUL:m.keyCode>=51&&m.keyCode<=55?w.key=String.fromCharCode(m.keyCode-51+27):m.keyCode===56?w.key=f.C0.DEL:m.keyCode===219?w.key=f.C0.ESC:m.keyCode===220?w.key=f.C0.FS:m.keyCode===221&&(w.key=f.C0.GS)}return w}},482:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},l.utf32ToString=function(d,f=0,p=d.length){let m="";for(let y=f;y<p;++y){let j=d[y];j>65535?(j-=65536,m+=String.fromCharCode(55296+(j>>10))+String.fromCharCode(j%1024+56320)):m+=String.fromCharCode(j)}return m},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(d,f){const p=d.length;if(!p)return 0;let m=0,y=0;if(this._interim){const j=d.charCodeAt(y++);56320<=j&&j<=57343?f[m++]=1024*(this._interim-55296)+j-56320+65536:(f[m++]=this._interim,f[m++]=j),this._interim=0}for(let j=y;j<p;++j){const S=d.charCodeAt(j);if(55296<=S&&S<=56319){if(++j>=p)return this._interim=S,m;const w=d.charCodeAt(j);56320<=w&&w<=57343?f[m++]=1024*(S-55296)+w-56320+65536:(f[m++]=S,f[m++]=w)}else S!==65279&&(f[m++]=S)}return m}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(d,f){const p=d.length;if(!p)return 0;let m,y,j,S,w=0,g=0,v=0;if(this.interim[0]){let C=!1,A=this.interim[0];A&=(224&A)==192?31:(240&A)==224?15:7;let D,R=0;for(;(D=63&this.interim[++R])&&R<4;)A<<=6,A|=D;const k=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=k-R;for(;v<M;){if(v>=p)return 0;if(D=d[v++],(192&D)!=128){v--,C=!0;break}this.interim[R++]=D,A<<=6,A|=63&D}C||(k===2?A<128?v--:f[w++]=A:k===3?A<2048||A>=55296&&A<=57343||A===65279||(f[w++]=A):A<65536||A>1114111||(f[w++]=A)),this.interim.fill(0)}const b=p-4;let _=v;for(;_<p;){for(;!(!(_<b)||128&(m=d[_])||128&(y=d[_+1])||128&(j=d[_+2])||128&(S=d[_+3]));)f[w++]=m,f[w++]=y,f[w++]=j,f[w++]=S,_+=4;if(m=d[_++],m<128)f[w++]=m;else if((224&m)==192){if(_>=p)return this.interim[0]=m,w;if(y=d[_++],(192&y)!=128){_--;continue}if(g=(31&m)<<6|63&y,g<128){_--;continue}f[w++]=g}else if((240&m)==224){if(_>=p)return this.interim[0]=m,w;if(y=d[_++],(192&y)!=128){_--;continue}if(_>=p)return this.interim[0]=m,this.interim[1]=y,w;if(j=d[_++],(192&j)!=128){_--;continue}if(g=(15&m)<<12|(63&y)<<6|63&j,g<2048||g>=55296&&g<=57343||g===65279)continue;f[w++]=g}else if((248&m)==240){if(_>=p)return this.interim[0]=m,w;if(y=d[_++],(192&y)!=128){_--;continue}if(_>=p)return this.interim[0]=m,this.interim[1]=y,w;if(j=d[_++],(192&j)!=128){_--;continue}if(_>=p)return this.interim[0]=m,this.interim[1]=y,this.interim[2]=j,w;if(S=d[_++],(192&S)!=128){_--;continue}if(g=(7&m)<<18|(63&y)<<12|(63&j)<<6|63&S,g<65536||g>1114111)continue;f[w++]=g}}return w}}},225:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let p;l.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let m=0;m<d.length;++m)p.fill(0,d[m][0],d[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?p[m]:(function(y,j){let S,w=0,g=j.length-1;if(y<j[0][0]||y>j[g][1])return!1;for(;g>=w;)if(S=w+g>>1,y>j[S][1])w=S+1;else{if(!(y<j[S][0]))return!0;g=S-1}return!1})(m,f)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}}},5981:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const f=d(8460),p=d(844);class m extends p.Disposable{constructor(j){super(),this._action=j,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(j,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=j.length,this._writeBuffer.push(j),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let w;for(this._isSyncWriting=!0;w=this._writeBuffer.shift();){this._action(w);const g=this._callbacks.shift();g&&g()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(j,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=j.length,this._writeBuffer.push(j),this._callbacks.push(S),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=j.length,this._writeBuffer.push(j),this._callbacks.push(S)}_innerWrite(j=0,S=!0){const w=j||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const g=this._writeBuffer[this._bufferOffset],v=this._action(g,S);if(v){const _=C=>Date.now()-w>=12?setTimeout((()=>this._innerWrite(0,C))):this._innerWrite(w,C);return void v.catch((C=>(queueMicrotask((()=>{throw C})),Promise.resolve(!1)))).then(_)}const b=this._callbacks[this._bufferOffset];if(b&&b(),this._bufferOffset++,this._pendingData-=g.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=m},5941:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const d=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function p(m,y){const j=m.toString(16),S=j.length<2?"0"+j:j;switch(y){case 4:return j[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}l.parseColor=function(m){if(!m)return;let y=m.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);const j=d.exec(y);if(j){const S=j[1]?15:j[4]?255:j[7]?4095:65535;return[Math.round(parseInt(j[1]||j[4]||j[7]||j[10],16)/S*255),Math.round(parseInt(j[2]||j[5]||j[8]||j[11],16)/S*255),Math.round(parseInt(j[3]||j[6]||j[9]||j[12],16)/S*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),f.exec(y)&&[3,6,9,12].includes(y.length))){const j=y.length/3,S=[0,0,0];for(let w=0;w<3;++w){const g=parseInt(y.slice(j*w,j*w+j),16);S[w]=j===1?g<<4:j===2?g:j===3?g>>4:g>>8}return S}},l.toRgbString=function(m,y=16){const[j,S,w]=m;return`rgb:${p(j,y)}/${p(S,y)}/${p(w,y)}`}},5770:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const f=d(482),p=d(8742),m=d(5770),y=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=y}registerHandler(S,w){this._handlers[S]===void 0&&(this._handlers[S]=[]);const g=this._handlers[S];return g.push(w),{dispose:()=>{const v=g.indexOf(w);v!==-1&&g.splice(v,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0}hook(S,w){if(this.reset(),this._ident=S,this._active=this._handlers[S]||y,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].hook(w);else this._handlerFb(this._ident,"HOOK",w)}put(S,w,g){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(S,w,g);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(S,w,g))}unhook(S,w=!0){if(this._active.length){let g=!1,v=this._active.length-1,b=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,g=w,b=this._stack.fallThrough,this._stack.paused=!1),!b&&g===!1){for(;v>=0&&(g=this._active[v].unhook(S),g!==!0);v--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,g;v--}for(;v>=0;v--)if(g=this._active[v].unhook(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,g}else this._handlerFb(this._ident,"UNHOOK",S);this._active=y,this._ident=0}};const j=new p.Params;j.addParam(0),l.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=j,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():j,this._data="",this._hitLimit=!1}put(S,w,g){this._hitLimit||(this._data+=(0,f.utf32ToString)(S,w,g),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let w=!1;if(this._hitLimit)w=!1;else if(S&&(w=this._handler(this._data,this._params),w instanceof Promise))return w.then((g=>(this._params=j,this._data="",this._hitLimit=!1,g)));return this._params=j,this._data="",this._hitLimit=!1,w}}},2015:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const f=d(844),p=d(8742),m=d(6242),y=d(6351);class j{constructor(v){this.table=new Uint8Array(v)}setDefault(v,b){this.table.fill(v<<4|b)}add(v,b,_,C){this.table[b<<8|v]=_<<4|C}addMany(v,b,_,C){for(let A=0;A<v.length;A++)this.table[b<<8|v[A]]=_<<4|C}}l.TransitionTable=j;const S=160;l.VT500_TRANSITION_TABLE=(function(){const g=new j(4095),v=Array.apply(null,Array(256)).map(((R,k)=>k)),b=(R,k)=>v.slice(R,k),_=b(32,127),C=b(0,24);C.push(25),C.push.apply(C,b(28,32));const A=b(0,14);let D;for(D in g.setDefault(1,0),g.addMany(_,0,2,0),A)g.addMany([24,26,153,154],D,3,0),g.addMany(b(128,144),D,3,0),g.addMany(b(144,152),D,3,0),g.add(156,D,0,0),g.add(27,D,11,1),g.add(157,D,4,8),g.addMany([152,158,159],D,0,7),g.add(155,D,11,3),g.add(144,D,11,9);return g.addMany(C,0,3,0),g.addMany(C,1,3,1),g.add(127,1,0,1),g.addMany(C,8,0,8),g.addMany(C,3,3,3),g.add(127,3,0,3),g.addMany(C,4,3,4),g.add(127,4,0,4),g.addMany(C,6,3,6),g.addMany(C,5,3,5),g.add(127,5,0,5),g.addMany(C,2,3,2),g.add(127,2,0,2),g.add(93,1,4,8),g.addMany(_,8,5,8),g.add(127,8,5,8),g.addMany([156,27,24,26,7],8,6,0),g.addMany(b(28,32),8,0,8),g.addMany([88,94,95],1,0,7),g.addMany(_,7,0,7),g.addMany(C,7,0,7),g.add(156,7,0,0),g.add(127,7,0,7),g.add(91,1,11,3),g.addMany(b(64,127),3,7,0),g.addMany(b(48,60),3,8,4),g.addMany([60,61,62,63],3,9,4),g.addMany(b(48,60),4,8,4),g.addMany(b(64,127),4,7,0),g.addMany([60,61,62,63],4,0,6),g.addMany(b(32,64),6,0,6),g.add(127,6,0,6),g.addMany(b(64,127),6,0,0),g.addMany(b(32,48),3,9,5),g.addMany(b(32,48),5,9,5),g.addMany(b(48,64),5,0,6),g.addMany(b(64,127),5,7,0),g.addMany(b(32,48),4,9,5),g.addMany(b(32,48),1,9,2),g.addMany(b(32,48),2,9,2),g.addMany(b(48,127),2,10,0),g.addMany(b(48,80),1,10,0),g.addMany(b(81,88),1,10,0),g.addMany([89,90,92],1,10,0),g.addMany(b(96,127),1,10,0),g.add(80,1,11,9),g.addMany(C,9,0,9),g.add(127,9,0,9),g.addMany(b(28,32),9,0,9),g.addMany(b(32,48),9,9,12),g.addMany(b(48,60),9,8,10),g.addMany([60,61,62,63],9,9,10),g.addMany(C,11,0,11),g.addMany(b(32,128),11,0,11),g.addMany(b(28,32),11,0,11),g.addMany(C,10,0,10),g.add(127,10,0,10),g.addMany(b(28,32),10,0,10),g.addMany(b(48,60),10,8,10),g.addMany([60,61,62,63],10,0,11),g.addMany(b(32,48),10,9,12),g.addMany(C,12,0,12),g.add(127,12,0,12),g.addMany(b(28,32),12,0,12),g.addMany(b(32,48),12,9,12),g.addMany(b(48,64),12,0,11),g.addMany(b(64,127),12,12,13),g.addMany(b(64,127),10,12,13),g.addMany(b(64,127),9,12,13),g.addMany(C,13,13,13),g.addMany(_,13,13,13),g.add(127,13,0,13),g.addMany([27,156,24,26],13,14,0),g.add(S,0,2,0),g.add(S,8,5,8),g.add(S,6,0,6),g.add(S,11,0,11),g.add(S,13,13,13),g})();class w extends f.Disposable{constructor(v=l.VT500_TRANSITION_TABLE){super(),this._transitions=v,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new p.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(b,_,C)=>{},this._executeHandlerFb=b=>{},this._csiHandlerFb=(b,_)=>{},this._escHandlerFb=b=>{},this._errorHandlerFb=b=>b,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new m.OscParser),this._dcsParser=this.register(new y.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(v,b=[64,126]){let _=0;if(v.prefix){if(v.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=v.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(v.intermediates){if(v.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let A=0;A<v.intermediates.length;++A){const D=v.intermediates.charCodeAt(A);if(32>D||D>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=D}}if(v.final.length!==1)throw new Error("final must be a single byte");const C=v.final.charCodeAt(0);if(b[0]>C||C>b[1])throw new Error(`final must be in range ${b[0]} .. ${b[1]}`);return _<<=8,_|=C,_}identToString(v){const b=[];for(;v;)b.push(String.fromCharCode(255&v)),v>>=8;return b.reverse().join("")}setPrintHandler(v){this._printHandler=v}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(v,b){const _=this._identifier(v,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);const C=this._escHandlers[_];return C.push(b),{dispose:()=>{const A=C.indexOf(b);A!==-1&&C.splice(A,1)}}}clearEscHandler(v){this._escHandlers[this._identifier(v,[48,126])]&&delete this._escHandlers[this._identifier(v,[48,126])]}setEscHandlerFallback(v){this._escHandlerFb=v}setExecuteHandler(v,b){this._executeHandlers[v.charCodeAt(0)]=b}clearExecuteHandler(v){this._executeHandlers[v.charCodeAt(0)]&&delete this._executeHandlers[v.charCodeAt(0)]}setExecuteHandlerFallback(v){this._executeHandlerFb=v}registerCsiHandler(v,b){const _=this._identifier(v);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);const C=this._csiHandlers[_];return C.push(b),{dispose:()=>{const A=C.indexOf(b);A!==-1&&C.splice(A,1)}}}clearCsiHandler(v){this._csiHandlers[this._identifier(v)]&&delete this._csiHandlers[this._identifier(v)]}setCsiHandlerFallback(v){this._csiHandlerFb=v}registerDcsHandler(v,b){return this._dcsParser.registerHandler(this._identifier(v),b)}clearDcsHandler(v){this._dcsParser.clearHandler(this._identifier(v))}setDcsHandlerFallback(v){this._dcsParser.setHandlerFallback(v)}registerOscHandler(v,b){return this._oscParser.registerHandler(v,b)}clearOscHandler(v){this._oscParser.clearHandler(v)}setOscHandlerFallback(v){this._oscParser.setHandlerFallback(v)}setErrorHandler(v){this._errorHandler=v}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(v,b,_,C,A){this._parseStack.state=v,this._parseStack.handlers=b,this._parseStack.handlerPos=_,this._parseStack.transition=C,this._parseStack.chunkPos=A}parse(v,b,_){let C,A=0,D=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const k=this._parseStack.handlers;let M=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&M>-1){for(;M>=0&&(C=k[M](this._params),C!==!0);M--)if(C instanceof Promise)return this._parseStack.handlerPos=M,C}this._parseStack.handlers=[];break;case 4:if(_===!1&&M>-1){for(;M>=0&&(C=k[M](),C!==!0);M--)if(C instanceof Promise)return this._parseStack.handlerPos=M,C}this._parseStack.handlers=[];break;case 6:if(A=v[this._parseStack.chunkPos],C=this._dcsParser.unhook(A!==24&&A!==26,_),C)return C;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(A=v[this._parseStack.chunkPos],C=this._oscParser.end(A!==24&&A!==26,_),C)return C;A===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let k=R;k<b;++k){switch(A=v[k],D=this._transitions.table[this.currentState<<8|(A<160?A:S)],D>>4){case 2:for(let G=k+1;;++G){if(G>=b||(A=v[G])<32||A>126&&A<S){this._printHandler(v,k,G),k=G-1;break}if(++G>=b||(A=v[G])<32||A>126&&A<S){this._printHandler(v,k,G),k=G-1;break}if(++G>=b||(A=v[G])<32||A>126&&A<S){this._printHandler(v,k,G),k=G-1;break}if(++G>=b||(A=v[G])<32||A>126&&A<S){this._printHandler(v,k,G),k=G-1;break}}break;case 3:this._executeHandlers[A]?this._executeHandlers[A]():this._executeHandlerFb(A),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:k,code:A,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const M=this._csiHandlers[this._collect<<8|A];let I=M?M.length-1:-1;for(;I>=0&&(C=M[I](this._params),C!==!0);I--)if(C instanceof Promise)return this._preserveStack(3,M,I,D,k),C;I<0&&this._csiHandlerFb(this._collect<<8|A,this._params),this.precedingCodepoint=0;break;case 8:do switch(A){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(A-48)}while(++k<b&&(A=v[k])>47&&A<60);k--;break;case 9:this._collect<<=8,this._collect|=A;break;case 10:const q=this._escHandlers[this._collect<<8|A];let W=q?q.length-1:-1;for(;W>=0&&(C=q[W](),C!==!0);W--)if(C instanceof Promise)return this._preserveStack(4,q,W,D,k),C;W<0&&this._escHandlerFb(this._collect<<8|A),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|A,this._params);break;case 13:for(let G=k+1;;++G)if(G>=b||(A=v[G])===24||A===26||A===27||A>127&&A<S){this._dcsParser.put(v,k,G),k=G-1;break}break;case 14:if(C=this._dcsParser.unhook(A!==24&&A!==26),C)return this._preserveStack(6,[],0,D,k),C;A===27&&(D|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let G=k+1;;G++)if(G>=b||(A=v[G])<32||A>127&&A<S){this._oscParser.put(v,k,G),k=G-1;break}break;case 6:if(C=this._oscParser.end(A!==24&&A!==26),C)return this._preserveStack(5,[],0,D,k),C;A===27&&(D|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&D}}}l.EscapeSequenceParser=w},6242:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const f=d(5770),p=d(482),m=[];l.OscParser=class{constructor(){this._state=0,this._active=m,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(y,j){this._handlers[y]===void 0&&(this._handlers[y]=[]);const S=this._handlers[y];return S.push(j),{dispose:()=>{const w=S.indexOf(j);w!==-1&&S.splice(w,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}reset(){if(this._state===2)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].end(!1);this._stack.paused=!1,this._active=m,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||m,this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].start();else this._handlerFb(this._id,"START")}_put(y,j,S){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(y,j,S);else this._handlerFb(this._id,"PUT",(0,p.utf32ToString)(y,j,S))}start(){this.reset(),this._state=1}put(y,j,S){if(this._state!==3){if(this._state===1)for(;j<S;){const w=y[j++];if(w===59){this._state=2,this._start();break}if(w<48||57<w)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+w-48}this._state===2&&S-j>0&&this._put(y,j,S)}}end(y,j=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,w=this._active.length-1,g=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,S=j,g=this._stack.fallThrough,this._stack.paused=!1),!g&&S===!1){for(;w>=0&&(S=this._active[w].end(y),S!==!0);w--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,S;w--}for(;w>=0;w--)if(S=this._active[w].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",y);this._active=m,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(y){this._handler=y,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(y,j,S){this._hitLimit||(this._data+=(0,p.utf32ToString)(y,j,S),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(y){let j=!1;if(this._hitLimit)j=!1;else if(y&&(j=this._handler(this._data),j instanceof Promise))return j.then((S=>(this._data="",this._hitLimit=!1,S)));return this._data="",this._hitLimit=!1,j}}},8742:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const d=2147483647;class f{static fromArray(m){const y=new f;if(!m.length)return y;for(let j=Array.isArray(m[0])?1:0;j<m.length;++j){const S=m[j];if(Array.isArray(S))for(let w=0;w<S.length;++w)y.addSubParam(S[w]);else y.addParam(S)}return y}constructor(m=32,y=32){if(this.maxLength=m,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(m),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(m),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const m=new f(this.maxLength,this.maxSubParamsLength);return m.params.set(this.params),m.length=this.length,m._subParams.set(this._subParams),m._subParamsLength=this._subParamsLength,m._subParamsIdx.set(this._subParamsIdx),m._rejectDigits=this._rejectDigits,m._rejectSubDigits=this._rejectSubDigits,m._digitIsSub=this._digitIsSub,m}toArray(){const m=[];for(let y=0;y<this.length;++y){m.push(this.params[y]);const j=this._subParamsIdx[y]>>8,S=255&this._subParamsIdx[y];S-j>0&&m.push(Array.prototype.slice.call(this._subParams,j,S))}return m}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(m){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=m>d?d:m}}addSubParam(m){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(m<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=m>d?d:m,this._subParamsIdx[this.length-1]++}}hasSubParams(m){return(255&this._subParamsIdx[m])-(this._subParamsIdx[m]>>8)>0}getSubParams(m){const y=this._subParamsIdx[m]>>8,j=255&this._subParamsIdx[m];return j-y>0?this._subParams.subarray(y,j):null}getSubParamsAll(){const m={};for(let y=0;y<this.length;++y){const j=this._subParamsIdx[y]>>8,S=255&this._subParamsIdx[y];S-j>0&&(m[y]=this._subParams.slice(j,S))}return m}addDigit(m){let y;if(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const j=this._digitIsSub?this._subParams:this.params,S=j[y-1];j[y-1]=~S?Math.min(10*S+m,d):m}}l.Params=f},5741:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()}loadAddon(d,f){const p={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(p),f.dispose=()=>this._wrappedAddonDispose(p),f.activate(d)}_wrappedAddonDispose(d){if(d.isDisposed)return;let f=-1;for(let p=0;p<this._addons.length;p++)if(this._addons[p]===d){f=p;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(f,1)}}},8771:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const f=d(3785),p=d(511);l.BufferApiView=class{constructor(m,y){this._buffer=m,this.type=y}init(m){return this._buffer=m,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(m){const y=this._buffer.lines.get(m);if(y)return new f.BufferLineApiView(y)}getNullCell(){return new p.CellData}}},3785:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const f=d(511);l.BufferLineApiView=class{constructor(p){this._line=p}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(p,m){if(!(p<0||p>=this._line.length))return m?(this._line.loadCell(p,m),m):this._line.loadCell(p,new f.CellData)}translateToString(p,m,y){return this._line.translateToString(p,m,y)}}},8285:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const f=d(8771),p=d(8460),m=d(844);class y extends m.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new p.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=y},7975:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(d){this._core=d}registerCsiHandler(d,f){return this._core.registerCsiHandler(d,(p=>f(p.toArray())))}addCsiHandler(d,f){return this.registerCsiHandler(d,f)}registerDcsHandler(d,f){return this._core.registerDcsHandler(d,((p,m)=>f(p,m.toArray())))}addDcsHandler(d,f){return this.registerDcsHandler(d,f)}registerEscHandler(d,f){return this._core.registerEscHandler(d,f)}addEscHandler(d,f){return this.registerEscHandler(d,f)}registerOscHandler(d,f){return this._core.registerOscHandler(d,f)}addOscHandler(d,f){return this.registerOscHandler(d,f)}}},7090:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(d){this._core=d}register(d){this._core.unicodeService.register(d)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(d){this._core.unicodeService.activeVersion=d}}},744:function(h,l,d){var f=this&&this.__decorate||function(g,v,b,_){var C,A=arguments.length,D=A<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,b):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,v,b,_);else for(var R=g.length-1;R>=0;R--)(C=g[R])&&(D=(A<3?C(D):A>3?C(v,b,D):C(v,b))||D);return A>3&&D&&Object.defineProperty(v,b,D),D},p=this&&this.__param||function(g,v){return function(b,_){v(b,_,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const m=d(8460),y=d(844),j=d(5295),S=d(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let w=l.BufferService=class extends y.Disposable{get buffer(){return this.buffers.active}constructor(g){super(),this.isUserScrolling=!1,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(g.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(g.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new j.BufferSet(g,this))}resize(g,v){this.cols=g,this.rows=v,this.buffers.resize(g,v),this._onResize.fire({cols:g,rows:v})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(g,v=!1){const b=this.buffer;let _;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===g.fg&&_.getBg(0)===g.bg||(_=b.getBlankLine(g,v),this._cachedBlankLine=_),_.isWrapped=v;const C=b.ybase+b.scrollTop,A=b.ybase+b.scrollBottom;if(b.scrollTop===0){const D=b.lines.isFull;A===b.lines.length-1?D?b.lines.recycle().copyFrom(_):b.lines.push(_.clone()):b.lines.splice(A+1,0,_.clone()),D?this.isUserScrolling&&(b.ydisp=Math.max(b.ydisp-1,0)):(b.ybase++,this.isUserScrolling||b.ydisp++)}else{const D=A-C+1;b.lines.shiftElements(C+1,D-1,-1),b.lines.set(A,_.clone())}this.isUserScrolling||(b.ydisp=b.ybase),this._onScroll.fire(b.ydisp)}scrollLines(g,v,b){const _=this.buffer;if(g<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else g+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);const C=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+g,_.ybase),0),C!==_.ydisp&&(v||this._onScroll.fire(_.ydisp))}};l.BufferService=w=f([p(0,S.IOptionsService)],w)},7994:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(d){this.glevel=d,this.charset=this._charsets[d]}setgCharset(d,f){this._charsets[d]=f,this.glevel===d&&(this.charset=f)}}},1753:function(h,l,d){var f=this&&this.__decorate||function(_,C,A,D){var R,k=arguments.length,M=k<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,A):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(_,C,A,D);else for(var I=_.length-1;I>=0;I--)(R=_[I])&&(M=(k<3?R(M):k>3?R(C,A,M):R(C,A))||M);return k>3&&M&&Object.defineProperty(C,A,M),M},p=this&&this.__param||function(_,C){return function(A,D){C(A,D,_)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const m=d(2585),y=d(8460),j=d(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function w(_,C){let A=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(A|=64,A|=_.action):(A|=3&_.button,4&_.button&&(A|=64),8&_.button&&(A|=128),_.action===32?A|=32:_.action!==0||C||(A|=3)),A}const g=String.fromCharCode,v={DEFAULT:_=>{const C=[w(_,!1)+32,_.col+32,_.row+32];return C[0]>255||C[1]>255||C[2]>255?"":`\x1B[M${g(C[0])}${g(C[1])}${g(C[2])}`},SGR:_=>{const C=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${w(_,!0)};${_.col};${_.row}${C}`},SGR_PIXELS:_=>{const C=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${w(_,!0)};${_.x};${_.y}${C}`}};let b=l.CoreMouseService=class extends j.Disposable{constructor(_,C){super(),this._bufferService=_,this._coreService=C,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new y.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const A of Object.keys(S))this.addProtocol(A,S[A]);for(const A of Object.keys(v))this.addEncoding(A,v[A]);this.reset()}addProtocol(_,C){this._protocols[_]=C}addEncoding(_,C){this._encodings[_]=C}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;const C=this._encodings[this._activeEncoding](_);return C&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(C):this._coreService.triggerDataEvent(C,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,C,A){if(A){if(_.x!==C.x||_.y!==C.y)return!1}else if(_.col!==C.col||_.row!==C.row)return!1;return _.button===C.button&&_.action===C.action&&_.ctrl===C.ctrl&&_.alt===C.alt&&_.shift===C.shift}};l.CoreMouseService=b=f([p(0,m.IBufferService),p(1,m.ICoreService)],b)},6975:function(h,l,d){var f=this&&this.__decorate||function(b,_,C,A){var D,R=arguments.length,k=R<3?_:A===null?A=Object.getOwnPropertyDescriptor(_,C):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,_,C,A);else for(var M=b.length-1;M>=0;M--)(D=b[M])&&(k=(R<3?D(k):R>3?D(_,C,k):D(_,C))||k);return R>3&&k&&Object.defineProperty(_,C,k),k},p=this&&this.__param||function(b,_){return function(C,A){_(C,A,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const m=d(1439),y=d(8460),j=d(844),S=d(2585),w=Object.freeze({insertMode:!1}),g=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let v=l.CoreService=class extends j.Disposable{constructor(b,_,C){super(),this._bufferService=b,this._logService=_,this._optionsService=C,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new y.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new y.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new y.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new y.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,m.clone)(w),this.decPrivateModes=(0,m.clone)(g)}reset(){this.modes=(0,m.clone)(w),this.decPrivateModes=(0,m.clone)(g)}triggerDataEvent(b,_=!1){if(this._optionsService.rawOptions.disableStdin)return;const C=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&C.ybase!==C.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${b}"`,(()=>b.split("").map((A=>A.charCodeAt(0))))),this._onData.fire(b)}triggerBinaryEvent(b){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${b}"`,(()=>b.split("").map((_=>_.charCodeAt(0))))),this._onBinary.fire(b))}};l.CoreService=v=f([p(0,S.IBufferService),p(1,S.ILogService),p(2,S.IOptionsService)],v)},9074:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const f=d(8055),p=d(8460),m=d(844),y=d(6106);let j=0,S=0;class w extends m.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new y.SortedList((b=>b?.marker.line)),this._onDecorationRegistered=this.register(new p.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new p.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,m.toDisposable)((()=>this.reset())))}registerDecoration(b){if(b.marker.isDisposed)return;const _=new g(b);if(_){const C=_.marker.onDispose((()=>_.dispose()));_.onDispose((()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),C.dispose())})),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(const b of this._decorations.values())b.dispose();this._decorations.clear()}*getDecorationsAtCell(b,_,C){var A,D,R;let k=0,M=0;for(const I of this._decorations.getKeyIterator(_))k=(A=I.options.x)!==null&&A!==void 0?A:0,M=k+((D=I.options.width)!==null&&D!==void 0?D:1),b>=k&&b<M&&(!C||((R=I.options.layer)!==null&&R!==void 0?R:"bottom")===C)&&(yield I)}forEachDecorationAtCell(b,_,C,A){this._decorations.forEachByKey(_,(D=>{var R,k,M;j=(R=D.options.x)!==null&&R!==void 0?R:0,S=j+((k=D.options.width)!==null&&k!==void 0?k:1),b>=j&&b<S&&(!C||((M=D.options.layer)!==null&&M!==void 0?M:"bottom")===C)&&A(D)}))}}l.DecorationService=w;class g extends m.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(b){super(),this.options=b,this.onRenderEmitter=this.register(new p.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=b.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const f=d(2585),p=d(8343);class m{constructor(...j){this._entries=new Map;for(const[S,w]of j)this.set(S,w)}set(j,S){const w=this._entries.get(j);return this._entries.set(j,S),w}forEach(j){for(const[S,w]of this._entries.entries())j(S,w)}has(j){return this._entries.has(j)}get(j){return this._entries.get(j)}}l.ServiceCollection=m,l.InstantiationService=class{constructor(){this._services=new m,this._services.set(f.IInstantiationService,this)}setService(y,j){this._services.set(y,j)}getService(y){return this._services.get(y)}createInstance(y,...j){const S=(0,p.getServiceDependencies)(y).sort(((v,b)=>v.index-b.index)),w=[];for(const v of S){const b=this._services.get(v.id);if(!b)throw new Error(`[createInstance] ${y.name} depends on UNKNOWN service ${v.id}.`);w.push(b)}const g=S.length>0?S[0].index:j.length;if(j.length!==g)throw new Error(`[createInstance] First service dependency of ${y.name} at position ${g+1} conflicts with ${j.length} static arguments`);return new y(...j,...w)}}},7866:function(h,l,d){var f=this&&this.__decorate||function(g,v,b,_){var C,A=arguments.length,D=A<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,b):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,v,b,_);else for(var R=g.length-1;R>=0;R--)(C=g[R])&&(D=(A<3?C(D):A>3?C(v,b,D):C(v,b))||D);return A>3&&D&&Object.defineProperty(v,b,D),D},p=this&&this.__param||function(g,v){return function(b,_){v(b,_,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const m=d(844),y=d(2585),j={trace:y.LogLevelEnum.TRACE,debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF};let S,w=l.LogService=class extends m.Disposable{get logLevel(){return this._logLevel}constructor(g){super(),this._optionsService=g,this._logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),S=this}_updateLogLevel(){this._logLevel=j[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(g){for(let v=0;v<g.length;v++)typeof g[v]=="function"&&(g[v]=g[v]())}_log(g,v,b){this._evalLazyOptionalParams(b),g.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+v,...b)}trace(g,...v){var b,_;this._logLevel<=y.LogLevelEnum.TRACE&&this._log((_=(b=this._optionsService.options.logger)===null||b===void 0?void 0:b.trace.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,g,v)}debug(g,...v){var b,_;this._logLevel<=y.LogLevelEnum.DEBUG&&this._log((_=(b=this._optionsService.options.logger)===null||b===void 0?void 0:b.debug.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,g,v)}info(g,...v){var b,_;this._logLevel<=y.LogLevelEnum.INFO&&this._log((_=(b=this._optionsService.options.logger)===null||b===void 0?void 0:b.info.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.info,g,v)}warn(g,...v){var b,_;this._logLevel<=y.LogLevelEnum.WARN&&this._log((_=(b=this._optionsService.options.logger)===null||b===void 0?void 0:b.warn.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.warn,g,v)}error(g,...v){var b,_;this._logLevel<=y.LogLevelEnum.ERROR&&this._log((_=(b=this._optionsService.options.logger)===null||b===void 0?void 0:b.error.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.error,g,v)}};l.LogService=w=f([p(0,y.IOptionsService)],w),l.setTraceLogger=function(g){S=g},l.traceCall=function(g,v,b){if(typeof b.value!="function")throw new Error("not supported");const _=b.value;b.value=function(...C){if(S.logLevel!==y.LogLevelEnum.TRACE)return _.apply(this,C);S.trace(`GlyphRenderer#${_.name}(${C.map((D=>JSON.stringify(D))).join(", ")})`);const A=_.apply(this,C);return S.trace(`GlyphRenderer#${_.name} return`,A),A}}},7302:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const f=d(8460),p=d(844),m=d(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:m.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const y=["normal","bold","100","200","300","400","500","600","700","800","900"];class j extends p.Disposable{constructor(w){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const g=Object.assign({},l.DEFAULT_OPTIONS);for(const v in w)if(v in g)try{const b=w[v];g[v]=this._sanitizeAndValidateOption(v,b)}catch(b){console.error(b)}this.rawOptions=g,this.options=Object.assign({},g),this._setupOptions()}onSpecificOptionChange(w,g){return this.onOptionChange((v=>{v===w&&g(this.rawOptions[w])}))}onMultipleOptionChange(w,g){return this.onOptionChange((v=>{w.indexOf(v)!==-1&&g()}))}_setupOptions(){const w=v=>{if(!(v in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${v}"`);return this.rawOptions[v]},g=(v,b)=>{if(!(v in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${v}"`);b=this._sanitizeAndValidateOption(v,b),this.rawOptions[v]!==b&&(this.rawOptions[v]=b,this._onOptionChange.fire(v))};for(const v in this.rawOptions){const b={get:w.bind(this,v),set:g.bind(this,v)};Object.defineProperty(this.options,v,b)}}_sanitizeAndValidateOption(w,g){switch(w){case"cursorStyle":if(g||(g=l.DEFAULT_OPTIONS[w]),!(function(v){return v==="block"||v==="underline"||v==="bar"})(g))throw new Error(`"${g}" is not a valid value for ${w}`);break;case"wordSeparator":g||(g=l.DEFAULT_OPTIONS[w]);break;case"fontWeight":case"fontWeightBold":if(typeof g=="number"&&1<=g&&g<=1e3)break;g=y.includes(g)?g:l.DEFAULT_OPTIONS[w];break;case"cursorWidth":g=Math.floor(g);case"lineHeight":case"tabStopWidth":if(g<1)throw new Error(`${w} cannot be less than 1, value: ${g}`);break;case"minimumContrastRatio":g=Math.max(1,Math.min(21,Math.round(10*g)/10));break;case"scrollback":if((g=Math.min(g,4294967295))<0)throw new Error(`${w} cannot be less than 0, value: ${g}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(g<=0)throw new Error(`${w} cannot be less than or equal to 0, value: ${g}`);break;case"rows":case"cols":if(!g&&g!==0)throw new Error(`${w} must be numeric, value: ${g}`);break;case"windowsPty":g=g??{}}return g}}l.OptionsService=j},2660:function(h,l,d){var f=this&&this.__decorate||function(j,S,w,g){var v,b=arguments.length,_=b<3?S:g===null?g=Object.getOwnPropertyDescriptor(S,w):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(j,S,w,g);else for(var C=j.length-1;C>=0;C--)(v=j[C])&&(_=(b<3?v(_):b>3?v(S,w,_):v(S,w))||_);return b>3&&_&&Object.defineProperty(S,w,_),_},p=this&&this.__param||function(j,S){return function(w,g){S(w,g,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const m=d(2585);let y=l.OscLinkService=class{constructor(j){this._bufferService=j,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(j){const S=this._bufferService.buffer;if(j.id===void 0){const C=S.addMarker(S.ybase+S.y),A={data:j,id:this._nextId++,lines:[C]};return C.onDispose((()=>this._removeMarkerFromLink(A,C))),this._dataByLinkId.set(A.id,A),A.id}const w=j,g=this._getEntryIdKey(w),v=this._entriesWithId.get(g);if(v)return this.addLineToLink(v.id,S.ybase+S.y),v.id;const b=S.addMarker(S.ybase+S.y),_={id:this._nextId++,key:this._getEntryIdKey(w),data:w,lines:[b]};return b.onDispose((()=>this._removeMarkerFromLink(_,b))),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(j,S){const w=this._dataByLinkId.get(j);if(w&&w.lines.every((g=>g.line!==S))){const g=this._bufferService.buffer.addMarker(S);w.lines.push(g),g.onDispose((()=>this._removeMarkerFromLink(w,g)))}}getLinkData(j){var S;return(S=this._dataByLinkId.get(j))===null||S===void 0?void 0:S.data}_getEntryIdKey(j){return`${j.id};;${j.uri}`}_removeMarkerFromLink(j,S){const w=j.lines.indexOf(S);w!==-1&&(j.lines.splice(w,1),j.lines.length===0&&(j.data.id!==void 0&&this._entriesWithId.delete(j.key),this._dataByLinkId.delete(j.id)))}};l.OscLinkService=y=f([p(0,m.IBufferService)],y)},8343:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const d="di$target",f="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(p){return p[f]||[]},l.createDecorator=function(p){if(l.serviceRegistry.has(p))return l.serviceRegistry.get(p);const m=function(y,j,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,g,v){g[d]===g?g[f].push({id:w,index:v}):(g[f]=[{id:w,index:v}],g[d]=g)})(m,y,S)};return m.toString=()=>p,l.serviceRegistry.set(p,m),m}},2585:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const f=d(8343);var p;l.IBufferService=(0,f.createDecorator)("BufferService"),l.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),l.ICoreService=(0,f.createDecorator)("CoreService"),l.ICharsetService=(0,f.createDecorator)("CharsetService"),l.IInstantiationService=(0,f.createDecorator)("InstantiationService"),(function(m){m[m.TRACE=0]="TRACE",m[m.DEBUG=1]="DEBUG",m[m.INFO=2]="INFO",m[m.WARN=3]="WARN",m[m.ERROR=4]="ERROR",m[m.OFF=5]="OFF"})(p||(l.LogLevelEnum=p={})),l.ILogService=(0,f.createDecorator)("LogService"),l.IOptionsService=(0,f.createDecorator)("OptionsService"),l.IOscLinkService=(0,f.createDecorator)("OscLinkService"),l.IUnicodeService=(0,f.createDecorator)("UnicodeService"),l.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(h,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const f=d(8460),p=d(225);l.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const m=new p.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let y=0;const j=m.length;for(let S=0;S<j;++S){let w=m.charCodeAt(S);if(55296<=w&&w<=56319){if(++S>=j)return y+this.wcwidth(w);const g=m.charCodeAt(S);56320<=g&&g<=57343?w=1024*(w-55296)+g-56320+65536:y+=this.wcwidth(g)}y+=this.wcwidth(w)}return y}}}},i={};function o(h){var l=i[h];if(l!==void 0)return l.exports;var d=i[h]={exports:{}};return n[h].call(d.exports,d,d.exports,o),d.exports}var u={};return(()=>{var h=u;Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;const l=o(9042),d=o(3236),f=o(844),p=o(5741),m=o(8285),y=o(7975),j=o(7090),S=["cols","rows"];class w extends f.Disposable{constructor(v){super(),this._core=this.register(new d.Terminal(v)),this._addonManager=this.register(new p.AddonManager),this._publicOptions=Object.assign({},this._core.options);const b=C=>this._core.options[C],_=(C,A)=>{this._checkReadonlyOptions(C),this._core.options[C]=A};for(const C in this._core.options){const A={get:b.bind(this,C),set:_.bind(this,C)};Object.defineProperty(this._publicOptions,C,A)}}_checkReadonlyOptions(v){if(S.includes(v))throw new Error(`Option "${v}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new y.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new j.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new m.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const v=this._core.coreService.decPrivateModes;let b="none";switch(this._core.coreMouseService.activeProtocol){case"X10":b="x10";break;case"VT200":b="vt200";break;case"DRAG":b="drag";break;case"ANY":b="any"}return{applicationCursorKeysMode:v.applicationCursorKeys,applicationKeypadMode:v.applicationKeypad,bracketedPasteMode:v.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:b,originMode:v.origin,reverseWraparoundMode:v.reverseWraparound,sendFocusMode:v.sendFocus,wraparoundMode:v.wraparound}}get options(){return this._publicOptions}set options(v){for(const b in v)this._publicOptions[b]=v[b]}blur(){this._core.blur()}focus(){this._core.focus()}resize(v,b){this._verifyIntegers(v,b),this._core.resize(v,b)}open(v){this._core.open(v)}attachCustomKeyEventHandler(v){this._core.attachCustomKeyEventHandler(v)}registerLinkProvider(v){return this._core.registerLinkProvider(v)}registerCharacterJoiner(v){return this._checkProposedApi(),this._core.registerCharacterJoiner(v)}deregisterCharacterJoiner(v){this._checkProposedApi(),this._core.deregisterCharacterJoiner(v)}registerMarker(v=0){return this._verifyIntegers(v),this._core.registerMarker(v)}registerDecoration(v){var b,_,C;return this._checkProposedApi(),this._verifyPositiveIntegers((b=v.x)!==null&&b!==void 0?b:0,(_=v.width)!==null&&_!==void 0?_:0,(C=v.height)!==null&&C!==void 0?C:0),this._core.registerDecoration(v)}hasSelection(){return this._core.hasSelection()}select(v,b,_){this._verifyIntegers(v,b,_),this._core.select(v,b,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(v,b){this._verifyIntegers(v,b),this._core.selectLines(v,b)}dispose(){super.dispose()}scrollLines(v){this._verifyIntegers(v),this._core.scrollLines(v)}scrollPages(v){this._verifyIntegers(v),this._core.scrollPages(v)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(v){this._verifyIntegers(v),this._core.scrollToLine(v)}clear(){this._core.clear()}write(v,b){this._core.write(v,b)}writeln(v,b){this._core.write(v),this._core.write(`\r
`,b)}paste(v){this._core.paste(v)}refresh(v,b){this._verifyIntegers(v,b),this._core.refresh(v,b)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(v){this._addonManager.loadAddon(this,v)}static get strings(){return l}_verifyIntegers(...v){for(const b of v)if(b===1/0||isNaN(b)||b%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...v){for(const b of v)if(b&&(b===1/0||isNaN(b)||b%1!=0||b<0))throw new Error("This API only accepts positive integers")}}h.Terminal=w})(),u})()))})(Mp)),Mp.exports}var G9=q9(),Op={exports:{}},Aj;function Y9(){return Aj||(Aj=1,(function(t,s){(function(n,i){t.exports=i()})(self,(()=>(()=>{var n={};return(()=>{var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const u=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(u._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,u=o._renderService.dimensions;if(u.css.cell.width===0||u.css.cell.height===0)return;const h=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(l.getPropertyValue("height")),f=Math.max(0,parseInt(l.getPropertyValue("width"))),p=window.getComputedStyle(this._terminal.element),m=d-(parseInt(p.getPropertyValue("padding-top"))+parseInt(p.getPropertyValue("padding-bottom"))),y=f-(parseInt(p.getPropertyValue("padding-right"))+parseInt(p.getPropertyValue("padding-left")))-h;return{cols:Math.max(2,Math.floor(y/u.css.cell.width)),rows:Math.max(1,Math.floor(m/u.css.cell.height))}}}})(),n})()))})(Op)),Op.exports}var X9=Y9(),Pp={exports:{}},Tj;function K9(){return Tj||(Tj=1,(function(t,s){(function(n,i){t.exports=i()})(self,(()=>(()=>{var n={6:(h,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0,l.WebLinkProvider=class{constructor(f,p,m,y={}){this._terminal=f,this._regex=p,this._handler=m,this._options=y}provideLinks(f,p){const m=d.computeLink(f,this._regex,this._terminal,this._handler);p(this._addCallbacks(m))}_addCallbacks(f){return f.map((p=>(p.leave=this._options.leave,p.hover=(m,y)=>{if(this._options.hover){const{range:j}=p;this._options.hover(m,y,j)}},p)))}};class d{static computeLink(p,m,y,j){const S=new RegExp(m.source,(m.flags||"")+"g"),[w,g]=d._getWindowedLineStrings(p-1,y),v=w.join("");let b;const _=[];for(;b=S.exec(v);){const C=b[0];try{const I=new URL(C),q=decodeURI(I.toString());if(C!==q&&C+"/"!==q)continue}catch{continue}const[A,D]=d._mapStrIdx(y,g,0,b.index),[R,k]=d._mapStrIdx(y,A,D,C.length);if(A===-1||D===-1||R===-1||k===-1)continue;const M={start:{x:D+1,y:A+1},end:{x:k,y:R+1}};_.push({range:M,text:C,activate:j})}return _}static _getWindowedLineStrings(p,m){let y,j=p,S=p,w=0,g="";const v=[];if(y=m.buffer.active.getLine(p)){const b=y.translateToString(!0);if(y.isWrapped&&b[0]!==" "){for(w=0;(y=m.buffer.active.getLine(--j))&&w<2048&&(g=y.translateToString(!0),w+=g.length,v.push(g),y.isWrapped&&g.indexOf(" ")===-1););v.reverse()}for(v.push(b),w=0;(y=m.buffer.active.getLine(++S))&&y.isWrapped&&w<2048&&(g=y.translateToString(!0),w+=g.length,v.push(g),g.indexOf(" ")===-1););}return[v,j]}static _mapStrIdx(p,m,y,j){const S=p.buffer.active,w=S.getNullCell();let g=y;for(;j;){const v=S.getLine(m);if(!v)return[-1,-1];for(let b=g;b<v.length;++b){v.getCell(b,w);const _=w.getChars();if(w.getWidth()&&(j-=_.length||1,b===v.length-1&&_==="")){const C=S.getLine(m+1);C&&C.isWrapped&&(C.getCell(0,w),w.getWidth()===2&&(j+=1))}if(j<0)return[m,b]}m++,g=0}return[m,g]}}l.LinkComputer=d}},i={};function o(h){var l=i[h];if(l!==void 0)return l.exports;var d=i[h]={exports:{}};return n[h](d,d.exports,o),d.exports}var u={};return(()=>{var h=u;Object.defineProperty(h,"__esModule",{value:!0}),h.WebLinksAddon=void 0;const l=o(6),d=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function f(p,m){const y=window.open();if(y){try{y.opener=null}catch{}y.location.href=m}else console.warn("Opening link blocked as opener could not be cleared")}h.WebLinksAddon=class{constructor(p=f,m={}){this._handler=p,this._options=m}activate(p){this._terminal=p;const m=this._options,y=m.urlRegex||d;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,y,this._handler,m))}dispose(){var p;(p=this._linkProvider)===null||p===void 0||p.dispose()}}})(),u})()))})(Pp)),Pp.exports}var Q9=K9();class Mo{static instance;connections=new Map;configs=new Map;static getInstance(){return Mo.instance||(Mo.instance=new Mo),Mo.instance}getConnection(s,n){const i=this.connections.get(s);if(i&&(i.readyState===WebSocket.OPEN||i.readyState===WebSocket.CONNECTING))return console.log(`Reusing existing connection for key: ${s}, state: ${i.readyState}`),this.configs.set(s,n),i.readyState===WebSocket.OPEN&&n.onOpen?.(),i;console.log(`Creating new WebSocket connection for key: ${s}, URL: ${n.url}`);const o=new WebSocket(n.url);return this.connections.set(s,o),this.configs.set(s,n),o.onopen=()=>{console.log(`SSH WebSocket connected for key: ${s}`),n.onOpen?.()},o.onmessage=u=>{try{const h=JSON.parse(u.data);this.configs.get(s)?.onMessage(h)}catch(h){console.error("Failed to parse SSH message:",h)}},o.onerror=u=>{console.error(`SSH WebSocket error for key ${s}:`,u),this.configs.get(s)?.onError?.(new Error("WebSocket error"))},o.onclose=u=>{console.log(`SSH WebSocket closed for key ${s}, code: ${u.code}, reason: ${u.reason}`),this.connections.delete(s);const h=this.configs.get(s);this.configs.delete(s),h?.onClose?.()},o.sendInput=u=>{if(o.readyState===WebSocket.OPEN){const h=JSON.stringify({type:"input",data:u});console.log("WebSocket sending:",h),o.send(h)}else console.warn("WebSocket not open, cannot send input. State:",o.readyState)},o}closeConnection(s,n,i){const o=this.connections.get(s);o&&o.readyState!==WebSocket.CLOSED&&(o.close(n||1e3,i||"Normal closure"),this.connections.delete(s),this.configs.delete(s))}isConnected(s){const n=this.connections.get(s);return n?n.readyState===WebSocket.OPEN:!1}getConnectionState(s){const n=this.connections.get(s);return n?n.readyState:null}}function Z9({env:t,serviceName:s,taskArn:n,containerName:i,onClose:o}){const u=E.useRef(null),h=E.useRef(null),l=E.useRef(null),d=E.useRef(Mo.getInstance()),f=E.useRef(`${t}-${s}-${n}`),p=E.useRef("connecting"),[m,y]=E.useState(!0),[j,S]=E.useState("connecting"),[w,g]=E.useState(null),v=E.useRef(!1);E.useEffect(()=>{p.current=j},[j]);const b=D=>{p.current=D,S(D)};E.useEffect(()=>{if(!u.current||v.current)return;const D=()=>{if(!u.current)return;const R=u.current.getBoundingClientRect();if(R.width===0||R.height===0){setTimeout(D,50);return}v.current=!0;const k=new G9.Terminal({fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0c0c0c",foreground:"#d0d0d0",cursor:"#d0d0d0",black:"#000000",red:"#ff5555",green:"#50fa7b",yellow:"#f1fa8c",blue:"#bd93f9",magenta:"#ff79c6",cyan:"#8be9fd",white:"#bbbbbb",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#50fa7b",brightYellow:"#f1fa8c",brightBlue:"#bd93f9",brightMagenta:"#ff79c6",brightCyan:"#8be9fd",brightWhite:"#ffffff"},cursorBlink:!0,allowTransparency:!0,rows:24,cols:80}),M=new X9.FitAddon,I=new Q9.WebLinksAddon;k.loadAddon(M),k.loadAddon(I),h.current=k,l.current=M,k.open(u.current),requestAnimationFrame(()=>{if(u.current&&u.current.offsetWidth>0&&u.current.offsetHeight>0)try{M.fit(),k.refresh(0,k.rows-1)}catch(V){console.error("Error fitting terminal:",V),setTimeout(()=>{try{M.fit(),k.refresh(0,k.rows-1)}catch(O){console.error("Second attempt to fit terminal failed:",O)}},100)}else console.warn("Terminal container has no dimensions, retrying..."),setTimeout(()=>{if(u.current&&u.current.offsetWidth>0&&u.current.offsetHeight>0)try{M.fit(),k.refresh(0,k.rows-1)}catch(V){console.error("Delayed fit attempt failed:",V)}},100)}),k.writeln(`\x1B[1;36mConnecting to SSH session...\x1B[0m
`);const q=new URLSearchParams({env:t,service:s,taskArn:n});i&&q.append("container",i);let W;W=`${"http://localhost:8080".replace(/^http/,"ws")}/ws/ssh?${q}`,console.log("SSHTerminal: Attempting to connect with URL:",W),console.log("SSHTerminal: Connection key:",f.current);const $=d.current.getConnection(f.current,{url:W,onOpen:()=>{console.log("SSH WebSocket opened - sending connected status"),d.current.isConnected(f.current)&&console.log("WebSocket is confirmed open, waiting for backend connected message")},onMessage:V=>{console.log("SSH message received:",V);const O=h.current;if(!O){console.error("Terminal not initialized when message received");return}switch(V.type){case"connected":clearTimeout(F),b("connected"),O.writeln(`
\x1B[1;32m SSH session connected!\x1B[0m`),V.data&&O.writeln(`\x1B[1;36m${V.data}\x1B[0m`);break;case"output":O.write(V.data);break;case"error":b("error"),g(V.data),O.writeln(`
\x1B[1;31mError: ${V.data}\x1B[0m`);break;case"disconnected":b("disconnected"),O.writeln(`
\x1B[1;33mSSH session disconnected.\x1B[0m`);break}},onError:V=>{b("error");const O=V.message||"Failed to establish WebSocket connection";g(O);const H=h.current;H&&(H.writeln(`
\x1B[1;31mConnection error: ${O}\x1B[0m`),H.writeln("\x1B[1;33mPlease ensure the backend server is running and accessible.\x1B[0m"))},onClose:()=>{b("disconnected");const V=h.current;V&&V.writeln(`
\x1B[1;33mConnection closed.\x1B[0m`)}}),F=setTimeout(()=>{if(!d.current.isConnected(f.current)){console.error("SSH connection timeout after 10 seconds"),b("error"),g("Connection timeout - backend may not be responding");const V=h.current;V&&(V.writeln(`
\x1B[1;31mConnection timeout after 10 seconds\x1B[0m`),V.writeln("\x1B[1;33mThe backend server may not have the SSH endpoint implemented.\x1B[0m"))}},1e4);k.onData(V=>{console.log("Terminal input:",JSON.stringify(V),"Connection status:",p.current),d.current.isConnected(f.current)&&p.current==="connected"&&(console.log("Sending input to WebSocket:",JSON.stringify(V)),$.sendInput(V))});const B=()=>{if(l.current&&h.current)try{l.current.fit()}catch(V){console.error("Error resizing terminal:",V)}};return window.addEventListener("resize",B),()=>{clearTimeout(F),window.removeEventListener("resize",B),k.dispose(),d.current.closeConnection(f.current)}};D()},[]);const _=()=>{y(!m),setTimeout(()=>{if(l.current&&h.current)try{l.current.fit()}catch(D){console.error("Error fitting terminal on fullscreen toggle:",D)}},100)},C=()=>{d.current.closeConnection(f.current),o()},A=n.split("/").pop()||n;return e.jsxs("div",{className:`fixed ${m?"inset-0":"inset-4"} z-50 bg-gray-950 flex flex-col transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white",children:["SSH Terminal - ",s]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["Task: ",A.substring(0,12),"..."]}),j==="connecting"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-800 text-yellow-300 rounded animate-pulse",children:"Connecting..."}),j==="connected"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-800 text-green-300 rounded",children:"Connected"}),j==="disconnected"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-700 text-gray-300 rounded",children:"Disconnected"}),j==="error"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-800 text-red-300 rounded",children:"Error"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:_,children:m?e.jsx(QT,{className:"w-4 h-4"}):e.jsx(VT,{className:"w-4 h-4"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:C,children:e.jsx(ds,{className:"w-4 h-4"})})]})]}),w&&e.jsx("div",{className:"p-4 bg-red-900/20 border-b border-red-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-300",children:w})]})}),e.jsx("div",{className:"flex-1 overflow-hidden bg-black p-4",style:{minHeight:"300px"},children:e.jsx("div",{ref:u,className:"h-full w-full",style:{backgroundColor:"#0c0c0c",minHeight:"200px",minWidth:"400px",height:"100%",width:"100%",position:"relative",display:"block"},children:!h.current&&e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Initializing terminal..."})]})})})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-900 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[e.jsxs("span",{children:["Environment: ",t]}),e.jsxs("span",{children:["Service: ",s]}),i&&e.jsxs("span",{children:["Container: ",i]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Press Ctrl+C to interrupt  Ctrl+D to exit"})]})]})}function Rj({config:t,onConfigChange:s,accountInfo:n,isService:i=!1,serviceName:o}){const[u,h]=E.useState([]),[l,d]=E.useState(!1),[f,p]=E.useState(null),[m,y]=E.useState(!1),[j,S]=E.useState(null),[w,g]=E.useState(null),v=i&&o?t.services?.find(I=>I.name===o):null,b=i&&o?o:"backend",_=I=>{if(i&&o){const q=t.services?.map(W=>W.name===o?{...W,remote_access:I}:W)||[];s({services:q})}else s({workload:{...t.workload,backend_remote_access:I}})},C=async()=>{try{d(!0),p(null);const I=await Be.getServiceTasks(t.env,b);h(I.tasks||[])}catch(I){p(I instanceof Error?I.message:"Failed to fetch tasks"),console.error("Failed to fetch ECS tasks:",I)}finally{d(!1)}},A=I=>{navigator.clipboard.writeText(I),y(!0),setTimeout(()=>y(!1),2e3)},D=async I=>{try{g(I.taskArn);const q=await Be.checkSSHCapability(t.env,b,I.taskArn);if(!q.enabled){p(`SSH not available: ${q.reason||"Unknown reason"}`);return}S({taskArn:I.taskArn,containerName:i?b:`${t.project}_service_${t.env}`})}catch(q){p(q instanceof Error?q.message:"Failed to check SSH capability")}finally{g(null)}},R=u.filter(I=>I.lastStatus==="RUNNING"),k=R[0],M=I=>{const q=I||"{task-arn}",W=`${t.project}_cluster_${t.env}`,G=i?b:`${t.project}_service_${t.env}`;return`AWS_PROFILE=${n?.profile||"{profile-name}"} aws ecs execute-command \\
--cluster ${W} \\
--task ${q} \\
--container ${G} \\
--interactive \\
--command "/bin/bash" \\
--region ${t.region}`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"w-5 h-5 text-blue-400"}),"Remote SSH Access"]}),e.jsxs(we,{children:["Enable secure remote access to ",b," containers for debugging"]})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"remote_access",children:"Enable Remote Access"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provisions secure SSH access through ECS Exec"})]}),e.jsx(ct,{id:"remote_access",checked:i?v?.remote_access||!1:t.workload?.backend_remote_access!==!1,onCheckedChange:_,className:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-600"})]}),(i?v?.remote_access:t.workload?.backend_remote_access!==!1)&&e.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-1",children:"Remote Access Enabled"}),e.jsxs("p",{className:"text-xs text-gray-300",children:["ECS Exec is enabled for secure SSH access to your"," ",b," containers. No bastion host required."]})]})]})})]})]}),t.workload?.backend_remote_access!==!1&&e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"SSH Connection"}),e.jsxs(we,{children:["Get running tasks and connect to your ",b," ","containers"]})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"SSH Command"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ie,{size:"sm",variant:"outline",onClick:C,disabled:l,children:[e.jsx(Wt,{className:`w-3 h-3 mr-1 ${l?"animate-spin":""}`}),l?"Getting Tasks...":"Get Tasks"]}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>A(M(k?.taskArn)),className:"text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),m?"Copied!":"Copy"]})]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:M(k?.taskArn)})}),!k&&!l&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Click "Get Tasks" to fill in the actual task ARN'}),k&&e.jsx("p",{className:"text-xs text-green-400 mt-2",children:" Using task ARN from running task"})]}),f&&e.jsxs(ze,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:f})]}),R.length>0&&e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400",children:"Running Tasks"}),e.jsxs("span",{className:"text-xs text-gray-400",children:[R.length," active"]})]}),e.jsxs("div",{className:"space-y-3",children:[R.slice(0,3).map((I,q)=>e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-300",children:["Task ",q+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-800 text-green-300 rounded",children:I.lastStatus}),I.healthStatus&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-800 text-blue-300 rounded",children:I.healthStatus})]})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("div",{className:"font-mono text-gray-300 break-all",children:["ARN: ",I.taskArn.split("/").pop()]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["CPU: ",I.cpu]}),e.jsxs("span",{children:["Memory: ",I.memory]}),e.jsxs("span",{children:["AZ: ",I.availabilityZone]})]}),e.jsxs("div",{children:["Started:"," ",new Date(I.startedAt||I.createdAt).toLocaleString()]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(ie,{size:"sm",onClick:()=>D(I),disabled:w===I.taskArn,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:w===I.taskArn?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-3 h-3 mr-2 animate-spin"}),"Checking SSH..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vs,{className:"w-3 h-3 mr-2"}),"Open SSH Terminal"]})})})]},I.taskArn)),R.length>3&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+ ",R.length-3," more tasks"]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"How to Get Task ARN"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:"Option 1: Use the Web UI (Recommended)"}),e.jsx("p",{className:"text-xs text-gray-400",children:'Click the "Get Tasks" button above to automatically fetch running tasks and fill in the task ARN.'})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:"Option 2: Use AWS CLI"}),e.jsx("div",{className:"bg-gray-900 rounded p-2 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsxs("pre",{children:["aws ecs list-tasks --cluster ",t.project,"_cluster_",t.env," --service-name ",b," --region"," ",t.region]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Then use one of the returned task ARNs in the SSH command."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:"Option 3: Get Task Details"}),e.jsx("div",{className:"bg-gray-900 rounded p-2 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsxs("pre",{children:["aws ecs describe-tasks --cluster ",t.project,"_cluster_",t.env," --tasks $(aws ecs list-tasks --cluster"," ",t.project,"_cluster_",t.env," --service-name"," ",b," --query 'taskArns[0]' --output text) --region ",t.region]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This command gets details about the first running task."})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Prerequisites"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("li",{children:" AWS CLI configured with appropriate permissions"}),e.jsxs("li",{children:[" Session Manager plugin:"," ",e.jsx("code",{className:"text-gray-300",children:"aws ssm install-plugin"})]}),e.jsxs("li",{children:[" Your container must include"," ",e.jsx("code",{className:"text-gray-300",children:"/bin/bash"})]})]})]})]})]}),(i?!v?.remote_access:t.workload?.backend_remote_access===!1)&&e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsx(ge,{children:"Getting Started"})}),e.jsx(pe,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vs,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Remote Access Disabled"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Enable remote access to SSH into your ",b," ","containers for debugging and troubleshooting."]}),e.jsx(ie,{onClick:()=>_(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Enable Remote Access"})]})})]}),j&&e.jsx(Z9,{env:t.env,serviceName:b,taskArn:j.taskArn,containerName:j.containerName,onClose:()=>S(null)})]})}function J9({config:t,onConfigChange:s}){const n=t.workload?.xray_enabled||!1,i=`${t.project}_adot_collector_${t.env}`,o=u=>{s&&s({workload:{...t.workload,xray_enabled:u}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"X-Ray Tracing Configuration"}),e.jsx(we,{children:"Enable distributed tracing for debugging and performance analysis"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"enable-xray",children:"Enable AWS X-Ray Tracing"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Adds ADOT collector sidecar to capture and forward traces"})]}),e.jsx(ct,{id:"enable-xray",checked:n,onCheckedChange:o,disabled:!s,className:"data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600"})]}),e.jsx("div",{className:`p-4 rounded-lg ${n?"bg-green-900/20 border border-green-700":"bg-gray-800"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[n?e.jsx(vt,{className:"w-4 h-4 text-green-400 mt-0.5"}):e.jsx(Ci,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-300",children:n?"X-Ray tracing is active. The ADOT collector sidecar is running alongside your backend service.":"X-Ray tracing is inactive. Enable it to start collecting distributed traces."})})]})})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5 text-blue-400"}),"Sidecar Container Details"]})}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Container Name"}),e.jsx("p",{className:"text-sm font-mono text-gray-300",children:"adot-collector"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Image"}),e.jsx("p",{className:"text-sm font-mono text-gray-300 break-all",children:"public.ecr.aws/aws-observability/aws-otel-collector:latest"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Configuration"}),e.jsx("p",{className:"text-sm font-mono text-gray-300",children:"--config=/etc/ecs/container-insights/otel-task-metrics-config.yaml"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Log Group"}),e.jsx("p",{className:"text-sm font-mono text-gray-300",children:i})]})]})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"w-5 h-5 text-purple-400"}),"Port Mappings"]})}),e.jsxs(pe,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[e.jsx("div",{children:e.jsx("p",{className:"text-gray-400 mb-1",children:"Port"})}),e.jsx("div",{children:e.jsx("p",{className:"text-gray-400 mb-1",children:"Protocol"})}),e.jsx("div",{children:e.jsx("p",{className:"text-gray-400 mb-1",children:"Description"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-2 bg-gray-800 rounded text-xs",children:[e.jsx("p",{className:"font-mono text-gray-300",children:"2000"}),e.jsx("p",{className:"text-gray-300",children:"UDP"}),e.jsx("p",{className:"text-gray-300",children:"X-Ray daemon endpoint"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-2 bg-gray-800 rounded text-xs",children:[e.jsx("p",{className:"font-mono text-gray-300",children:"4317"}),e.jsx("p",{className:"text-gray-300",children:"TCP"}),e.jsx("p",{className:"text-gray-300",children:"OpenTelemetry gRPC endpoint"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-2 bg-gray-800 rounded text-xs",children:[e.jsx("p",{className:"font-mono text-gray-300",children:"4318"}),e.jsx("p",{className:"text-gray-300",children:"TCP"}),e.jsx("p",{className:"text-gray-300",children:"OpenTelemetry HTTP endpoint"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-2 bg-gray-800 rounded text-xs",children:[e.jsx("p",{className:"font-mono text-gray-300",children:"55681"}),e.jsx("p",{className:"text-gray-300",children:"TCP"}),e.jsx("p",{className:"text-gray-300",children:"Legacy Jaeger/Zipkin endpoint"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-purple-900/20 border border-purple-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-purple-400 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-xs text-gray-300",children:"The sidecar runs in the same network namespace as your backend container (awsvpc mode). Communication happens via localhost."})})]})})]})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"w-5 h-5 text-green-400"}),"ADOT Collector Resources"]})}),e.jsxs(pe,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"CPU"}),e.jsx(Ds,{className:"w-4 h-4 text-green-400"})]}),e.jsx("p",{className:"text-2xl font-medium text-gray-300",children:"256"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"vCPU units"}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:"ADOT sidecar"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Memory"}),e.jsx(_s,{className:"w-4 h-4 text-green-400"})]}),e.jsx("p",{className:"text-2xl font-medium text-gray-300",children:"512"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"MB"}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:"ADOT sidecar"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-700 rounded-lg",children:e.jsx("p",{className:"text-xs text-gray-300",children:"The ADOT collector sidecar runs efficiently alongside your backend container with minimal resource overhead."})})]})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsx(ge,{children:"How X-Ray Tracing Works"})}),e.jsxs(pe,{children:[e.jsxs("ol",{className:"space-y-3 text-xs text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"1."}),e.jsx("span",{children:"ADOT collector sidecar is added to your ECS task definition"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"2."}),e.jsxs("span",{children:["The sidecar listens on"," ",e.jsx("code",{className:"text-blue-300",children:"localhost:2000"})," for X-Ray traces"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"3."}),e.jsxs("span",{children:["Your backend application sends traces to"," ",e.jsx("code",{className:"text-blue-300",children:"localhost:2000"})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"4."}),e.jsx("span",{children:"ADOT collector forwards traces to AWS X-Ray service"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"5."}),e.jsx("span",{children:"View traces in the AWS X-Ray console for debugging and performance analysis"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-900/20 border border-blue-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Environment Variable"}),e.jsxs("p",{className:"text-xs text-gray-300",children:["The"," ",e.jsx("code",{className:"text-blue-300",children:"ADOT_COLLECTOR_URL=localhost:2000"})," ","environment variable is automatically added to your backend container when X-Ray is enabled."]})]})]})})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Integration Guide"}),e.jsx(we,{children:"How to instrument your application for X-Ray"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Node.js Example"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`const AWSXRay = require('aws-xray-sdk-core');
const AWS = AWSXRay.captureAWS(require('aws-sdk'));

// Capture HTTP calls
const http = AWSXRay.captureHTTPs(require('http'));

// The daemon endpoint is already configured
// via ADOT_COLLECTOR_URL env variable`})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Python Example"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`from aws_xray_sdk.core import xray_recorder

# Configure the daemon address
xray_recorder.configure(
    daemon_address='localhost:2000'
)

# Or use the environment variable
# AWS_XRAY_DAEMON_ADDRESS=localhost:2000`})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Java Example"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`// Add to your application
@EnableXRay

// The SDK will automatically use
// localhost:2000 as the daemon endpoint`})]})]})})]})]}),!n&&e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsx(ge,{children:"Getting Started with X-Ray"})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Enable X-Ray tracing using the toggle above to:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:" Trace requests as they travel through your services"}),e.jsx("li",{children:" Identify performance bottlenecks"}),e.jsx("li",{children:" Debug distributed applications"}),e.jsx("li",{children:" Analyze service dependencies"})]}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"No Additional Resource Cost"}),e.jsx("p",{className:"text-xs text-gray-300",children:"X-Ray tracing runs efficiently within your existing container resources. The ADOT collector sidecar has minimal overhead."})]})]})})]})})]})]})}function eH({config:t,onConfigChange:s,accountInfo:n}){const[i,o]=E.useState(t.ecr_strategy==="cross_account"?"cross-account":"create"),[u,h]=E.useState([]),[l,d]=E.useState(""),[f,p]=E.useState(!1),[m,y]=E.useState(!1),[j,S]=E.useState(null),[w,g]=E.useState(""),[v,b]=E.useState(null);E.useEffect(()=>{i==="cross-account"&&_()},[i]);const _=async()=>{p(!0),g("");try{const R=await Be.getECRSources();if(h(R.sources),t.ecr_account_id&&t.ecr_account_region){const k=R.sources.find(M=>M.account_id===t.ecr_account_id&&M.region===t.ecr_account_region);k&&(d(k.name),C(k.name))}}catch(R){g(R instanceof Error?R.message:"Failed to load ECR sources")}finally{p(!1)}},C=async R=>{if(t.account_id){b({deployed:!1,has_trust_for:!1,checking:!0});try{const k=await Be.checkECRTrustPolicy(R,t.account_id);b({deployed:k.deployed,has_trust_for:k.has_trust_for,checking:!1,repository:k.repository})}catch(k){console.error("Failed to check deployment status:",k),b({deployed:!1,has_trust_for:!1,checking:!1})}}},A=async R=>{d(R),y(!0),g(""),S(null),b(null);try{const k=await Be.configureCrossAccountECR({source_env:R,target_env:t.env});S(k),s({ecr_strategy:"cross_account",ecr_account_id:k.source_env.account_id,ecr_account_region:k.source_env.region}),await C(R)}catch(k){g(k instanceof Error?k.message:"Failed to configure cross-account ECR")}finally{y(!1)}},D=R=>{const k=R;o(k),k==="create"?(g(""),d(""),S(null),s({...t,ecr_strategy:"local",ecr_account_id:void 0,ecr_account_region:void 0})):s({...t,ecr_strategy:"cross_account"})};return e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"ECR Configuration"}),e.jsx(we,{children:"Configure container registry for your application"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs(vg,{value:i,onValueChange:D,children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-gray-700 hover:bg-gray-800",children:[e.jsx(Ni,{value:"create",id:"create-ecr"}),e.jsxs(re,{htmlFor:"create-ecr",className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:"Create ECR Repository"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Create a new ECR repository in this AWS account"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-gray-700 hover:bg-gray-800",children:[e.jsx(Ni,{value:"cross-account",id:"cross-account-ecr"}),e.jsxs(re,{htmlFor:"cross-account-ecr",className:"flex-1 cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:"Use Cross-Account ECR"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Use an ECR repository from another AWS account"})]})]})]}),i==="create"&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"ECR repositories will be created automatically for each service in your infrastructure"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Note: A new ECR repository will be created in this environment"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-xs text-gray-400",children:"Repository Naming"}),e.jsxs("div",{className:"text-sm font-medium",children:[t.project,"_[type]_[name]"]})]}),e.jsxs("div",{children:[e.jsx(re,{className:"text-xs text-gray-400",children:"Region"}),e.jsx("div",{className:"text-sm font-medium",children:t.region})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-xs text-gray-400",children:"AWS Account ID"}),e.jsx("div",{className:"text-sm font-mono",children:n.accountId})]}),e.jsxs("div",{children:[e.jsx(re,{className:"text-xs text-gray-400",children:"AWS Profile"}),e.jsx("div",{className:"text-sm font-medium",children:n.profile})]})]}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-xs font-medium text-yellow-400 mb-2",children:"Repository Creation Rules"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsxs("li",{children:[" Repositories are created in environments with"," ",e.jsx("code",{className:"text-yellow-400",children:"ecr_strategy: local"})]}),e.jsxs("li",{children:[" Repository names follow pattern:"," ",e.jsxs("code",{className:"text-yellow-400",children:[t.project,"_[type]_[name]"]})]}),e.jsxs("li",{children:[" Types: ",e.jsx("code",{children:"backend"}),", ",e.jsx("code",{children:"service"}),","," ",e.jsx("code",{children:"task"})]}),e.jsx("li",{children:" Names must be unique within the AWS account"})]})]})]}),i==="cross-account"&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs(ze,{className:"bg-blue-900/20 border-blue-700",children:[e.jsx(Le,{className:"h-4 w-4 text-blue-400"}),e.jsx(Fe,{className:"text-xs",children:"Selecting a source will automatically update both YAML files (source and target). The source will grant access to this environment."})]}),w&&e.jsxs(ze,{className:"bg-red-900/20 border-red-700",children:[e.jsx(Ye,{className:"h-4 w-4 text-red-400"}),e.jsx(Fe,{className:"text-sm text-red-400",children:w})]}),f&&e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(st,{className:"h-6 w-6 animate-spin text-blue-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading ECR sources..."})]}),!f&&u.length>0&&e.jsxs("div",{children:[e.jsx(re,{htmlFor:"ecr-source",children:"Select ECR Source Environment"}),e.jsxs("select",{id:"ecr-source",value:l,onChange:R=>A(R.target.value),disabled:m||f,className:"mt-1 w-full bg-gray-800 border-gray-600 text-white rounded-md px-3 py-2 text-sm disabled:opacity-50",children:[e.jsx("option",{value:"",children:"-- Choose an environment --"}),u.map(R=>e.jsxs("option",{value:R.name,children:[R.name," (",R.account_id," - ",R.region,")"]},R.name))]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select an environment with local ECR repositories"})]}),!f&&u.length===0&&!w&&e.jsxs(ze,{className:"bg-yellow-900/20 border-yellow-700",children:[e.jsx(Ye,{className:"h-4 w-4 text-yellow-400"}),e.jsxs(Fe,{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-400",children:"No ECR Sources Available"}),e.jsx("div",{className:"text-xs text-gray-300 mt-1",children:"Create an environment with ecr_strategy: local first, then configure it with an AWS account ID and region."})]})]}),l&&(u.find(M=>M.name===l)?.trusted_accounts.some(M=>M.account_id===t.account_id&&M.env===t.env)?e.jsxs(ze,{className:"bg-blue-900/20 border-blue-700",children:[e.jsx(Le,{className:"h-4 w-4 text-blue-400"}),e.jsxs(Fe,{className:"text-sm text-blue-400",children:["This environment is already configured to trust ",t.env,". Re-selecting will update the configuration files."]})]}):null),v&&!v.checking&&l&&e.jsxs(e.Fragment,{children:[v.deployed&&v.has_trust_for&&e.jsxs(ze,{className:"bg-green-900/20 border-green-700",children:[e.jsx(Hb,{className:"h-4 w-4 text-green-400"}),e.jsxs(Fe,{className:"text-sm text-green-400",children:[e.jsx("div",{className:"font-medium",children:" Trust Policy Deployed in AWS"}),e.jsxs("div",{className:"text-xs mt-1",children:["Cross-account access is ready. Repository: ",v.repository]})]})]}),v.deployed&&!v.has_trust_for&&e.jsxs(ze,{className:"bg-yellow-900/20 border-yellow-700",children:[e.jsx(Le,{className:"h-4 w-4 text-yellow-400"}),e.jsxs(Fe,{className:"text-sm text-yellow-400",children:[e.jsx("div",{className:"font-medium",children:" Configuration Updated - Deployment Required"}),e.jsxs("div",{className:"text-xs mt-1 space-y-2",children:[e.jsxs("div",{children:["We've updated ",e.jsxs("strong",{children:[l,".yaml"]})," to grant access to this account (",t.account_id,"). Now deploy the source environment to apply the trust policy to AWS:"]}),e.jsxs("pre",{className:"bg-gray-800 rounded p-2 text-xs",children:["make infra-apply env=",l]}),e.jsx("div",{className:"text-yellow-300",children:"This will update the ECR repository policy in AWS to allow cross-account pull access."})]})]})]}),!v.deployed&&e.jsxs(ze,{className:"bg-yellow-900/20 border-yellow-700",children:[e.jsx(Le,{className:"h-4 w-4 text-yellow-400"}),e.jsxs(Fe,{className:"text-sm text-yellow-400",children:[e.jsx("div",{className:"font-medium",children:" Configuration Updated - Deployment Required"}),e.jsxs("div",{className:"text-xs mt-1 space-y-2",children:[e.jsxs("div",{children:["We've updated ",e.jsxs("strong",{children:[l,".yaml"]})," to grant access to this account (",t.account_id,"). Deploy the source environment to create the trust policy in AWS:"]}),e.jsxs("pre",{className:"bg-gray-800 rounded p-2 text-xs",children:["make infra-apply env=",l]}),e.jsx("div",{className:"text-yellow-300",children:"This will create the ECR repository policy in AWS and enable cross-account pull access."})]})]})]})]}),v?.checking&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-400",children:[e.jsx(st,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Checking AWS deployment status..."})]}),j&&e.jsxs(ze,{className:"bg-green-900/20 border-green-700",children:[e.jsx(Hb,{className:"h-4 w-4 text-green-400"}),e.jsxs(Fe,{children:[e.jsx("div",{className:"font-medium text-green-400 mb-2",children:"Configuration Updated Successfully"}),e.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("div",{children:"Modified files:"}),e.jsx("ul",{className:"list-disc list-inside",children:j.modified_files.map(R=>e.jsx("li",{children:R},R))}),e.jsx("div",{className:"mt-3",children:"Next steps:"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1",children:j.next_steps.map((R,k)=>e.jsx("li",{children:R},k))})]})]})]}),t.ecr_account_id&&t.ecr_account_region&&e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-xs font-medium text-blue-400 mb-2",children:"ECR Repository URL"}),e.jsx("div",{className:"bg-gray-800 rounded p-2",children:e.jsxs("code",{className:"text-xs text-gray-300 break-all",children:[t.ecr_account_id,".dkr.ecr.",t.ecr_account_region,".amazonaws.com/",t.project,"_backend"]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Backend service will pull images from this URL"})]})]})]})]})})}function tH({config:t,accountInfo:s}){const[n,i]=E.useState(null),o=(y,j)=>{navigator.clipboard.writeText(y),i(j),setTimeout(()=>i(null),2e3)},u=!!t.ecr_account_id,h=u?t.ecr_account_id:s?.accountId,l=u&&t.ecr_account_region?t.ecr_account_region:t.region,d=`${t.project}_backend`;if(!h)return e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("p",{className:"text-sm text-gray-400",children:"Loading account information..."})});const f=`${h}.dkr.ecr.${l}.amazonaws.com`,p=`${f}/${d}`,m={login:`aws ecr get-login-password --region ${l} | docker login --username AWS --password-stdin ${f}`,build:`docker build -t ${d} .`,tag:`docker tag ${d}:latest ${p}:latest`,push:`docker push ${p}:latest`};return e.jsx("div",{className:"space-y-4",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Push to ECR"}),e.jsx(we,{children:"Step-by-step instructions to push Docker images to your ECR repository"})]}),e.jsxs(pe,{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Prerequisites"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("li",{children:" AWS CLI installed and configured with appropriate credentials"}),e.jsx("li",{children:" Docker installed and running"}),e.jsx("li",{children:" ECR repository created (happens automatically in dev environment)"}),u&&e.jsx("li",{children:" Cross-account permissions configured for ECR access"})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-bold",children:"1"}),e.jsx("h3",{className:"text-sm font-medium",children:"Authenticate Docker to ECR"})]}),e.jsxs("div",{className:"ml-8",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Login to ECR using AWS CLI:"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("code",{className:"text-xs text-gray-300 flex-1 break-all",children:m.login}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>o(m.login,"login"),children:n==="login"?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-bold",children:"2"}),e.jsx("h3",{className:"text-sm font-medium",children:"Build Docker Image"})]}),e.jsxs("div",{className:"ml-8",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Build your Docker image (run from your project directory):"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("code",{className:"text-xs text-gray-300 flex-1",children:m.build}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>o(m.build,"build"),children:n==="build"?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-bold",children:"3"}),e.jsx("h3",{className:"text-sm font-medium",children:"Tag Image for ECR"})]}),e.jsxs("div",{className:"ml-8",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Tag your image with the ECR repository URI:"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("code",{className:"text-xs text-gray-300 flex-1 break-all",children:m.tag}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>o(m.tag,"tag"),children:n==="tag"?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-bold",children:"4"}),e.jsx("h3",{className:"text-sm font-medium",children:"Push to ECR"})]}),e.jsxs("div",{className:"ml-8",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Push your image to ECR:"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("code",{className:"text-xs text-gray-300 flex-1 break-all",children:m.push}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>o(m.push,"push"),children:n==="push"?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"All-in-One Script"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Run all commands in sequence:"}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("code",{className:"text-xs text-gray-300 flex-1 whitespace-pre-wrap break-all",children:`#!/bin/bash
# Login to ECR
${m.login}

# Build the image
${m.build}

# Tag the image
${m.tag}

# Push to ECR
${m.push}`}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>o(`#!/bin/bash
# Login to ECR
${m.login}

# Build the image
${m.build}

# Tag the image
${m.tag}

# Push to ECR
${m.push}`,"script"),children:n==="script"?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})})]}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Tips"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsxs("li",{children:[" You can tag images with version numbers:"," ",e.jsx("code",{className:"text-yellow-300",children:":v1.0.0"})," instead of"," ",e.jsx("code",{className:"text-yellow-300",children:":latest"})]}),e.jsxs("li",{children:[" Use ",e.jsx("code",{className:"text-yellow-300",children:"docker images"})," to see all local images"]}),e.jsxs("li",{children:[" Use"," ",e.jsxs("code",{className:"text-yellow-300",children:["aws ecr describe-images --repository-name ",d]})," ","to list pushed images"]}),e.jsx("li",{children:" ECR automatically scans images for vulnerabilities if enabled"})]})]})]})]})})}function sH({config:t,accountInfo:s}){const[n,i]=E.useState(null),o=d=>{navigator.clipboard.writeText(d),i(d),setTimeout(()=>i(null),2e3)},u=!!t.ecr_account_id,h=u?t.ecr_account_id:s?.accountId,l=u&&t.ecr_account_region?t.ecr_account_region:t.region;return!s&&!u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin text-gray-400"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{className:"text-sm font-medium",children:"ECR Repositories"}),e.jsx("p",{className:"text-xs text-gray-400",children:u?`Using cross-account ECR in ${h}`:"Repositories that will be created in your AWS account"})]}),h&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-300 mb-2",children:"Main Backend Service"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-blue-400 font-mono text-xs",children:[t.project,"_backend"]}),e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsxs("div",{className:"text-gray-500 font-mono text-xs overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:[h,".dkr.ecr.",l,".amazonaws.com/",t.project,"_backend"]}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",onClick:()=>o(`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_backend`),children:n===`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_backend`?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]})]}),t.services&&t.services.length>0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-300 mb-2",children:"Additional Services"}),t.services.map((d,f)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-blue-400 font-mono text-xs",children:[t.project,"_service_",d.name]}),e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsxs("div",{className:"text-gray-500 font-mono text-xs overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:[h,".dkr.ecr.",l,".amazonaws.com/",t.project,"_service_",d.name]}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",onClick:()=>o(`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_service_{service.name}`),children:n===`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_service_{service.name}`?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]},f))]}),(t.scheduled_tasks&&t.scheduled_tasks.length>0||t.event_processor_tasks&&t.event_processor_tasks.length>0)&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-300 mb-2",children:"Task Repositories"}),t.scheduled_tasks?.map((d,f)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-blue-400 font-mono text-xs",children:[t.project,"_task_",d.name]}),e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsxs("div",{className:"text-gray-500 font-mono text-xs overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:[h,".dkr.ecr.",l,".amazonaws.com/",t.project,"_task_",d.name]}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",onClick:()=>o(`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_task_{task.name}`),children:n===`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_task_{task.name}`?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]},`scheduled-${f}`)),t.event_processor_tasks?.map((d,f)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-blue-400 font-mono text-xs",children:[t.project,"_task_",d.name]}),e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsxs("div",{className:"text-gray-500 font-mono text-xs overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:[h,".dkr.ecr.",l,".amazonaws.com/",t.project,"_task_",d.name]}),e.jsx(ie,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",onClick:()=>o(`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_task_{task.name}`),children:n===`${h}.dkr.ecr.${l}.amazonaws.com/${t.project}_task_{task.name}`?e.jsx(tt,{className:"h-3 w-3 text-green-400"}):e.jsx(ut,{className:"h-3 w-3"})})]})]},`event-${f}`))]})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Total repositories:"," ",1+(t.services?.length||0)+(t.scheduled_tasks?.length||0)+(t.event_processor_tasks?.length||0)]})]})}function rH({config:t,onConfigChange:s}){const n=u=>{const h=u.toLowerCase().replace(/[^a-z0-9-]/g,"");s({project:h})},i=u=>{const h=u.toLowerCase().replace(/[^a-z0-9.-]/g,"");s({state_bucket:h})},o=u=>{const h=u.replace(/[^a-zA-Z0-9._-]/g,"");s({state_file:h})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Project Configuration"}),e.jsx(we,{children:"Core infrastructure settings for this environment"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"project-name",children:"Project Name"}),e.jsx(je,{id:"project-name",value:t.project,onChange:u=>n(u.target.value),className:"mt-1 bg-gray-800 border-gray-600 text-white font-mono",placeholder:"my-app"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Alphanumeric + dash (e.g., "my-app")'})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"environment",children:"Environment"}),e.jsx(je,{id:"environment",value:t.env,className:"mt-1 bg-gray-800 border-gray-600 text-white font-mono",disabled:!0,readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Environment name cannot be changed"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"is-prod",children:"Production Environment"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Affects domain behavior and security settings"})]}),e.jsx(ct,{id:"is-prod",checked:t.is_prod||!1,onCheckedChange:u=>s({is_prod:u}),className:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-600"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"state-bucket",children:"Terraform State Bucket"}),e.jsx(je,{id:"state-bucket",value:t.state_bucket,onChange:u=>i(u.target.value),className:"mt-1 bg-gray-800 border-gray-600 text-white font-mono",placeholder:"my-terraform-state-bucket"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"S3 bucket for Terraform state storage"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"state-file",children:"State File"}),e.jsx(je,{id:"state-file",value:t.state_file,onChange:u=>o(u.target.value),className:"mt-1 bg-gray-800 border-gray-600 text-white font-mono",placeholder:"state.tfstate"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Terraform state file name"})]})]}),t.is_prod&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-1",children:"Production Environment Active"}),e.jsx("p",{className:"text-xs text-gray-300",children:"This environment is marked as production. This affects domain prefixing and other security settings."})]})]})}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Infrastructure Impact"}),e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:"Changing these values requires infrastructure updates:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Project/Region:"})," Requires destroying and recreating all resources"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"State Bucket/File:"})," Requires Terraform state migration"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Production Flag:"})," May affect domain configuration and security policies"]})]}),e.jsxs("p",{className:"text-xs text-gray-300 mt-2",children:["Always run"," ",e.jsx("code",{className:"text-blue-300",children:"make infra-plan"})," before applying changes."]})]})]})})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Amazon ECS Configuration"}),e.jsx(we,{children:"Elastic Container Service cluster settings"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Cluster Overview"}),e.jsx("p",{className:"text-xs text-gray-300",children:"This ECS cluster runs all your containerized services using AWS Fargate. It provides serverless compute for containers with automatic scaling and high availability."})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Key Features"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Fargate launch type (serverless containers)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Service Connect for service discovery"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Multi-AZ deployment for high availability"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Integrated with CloudWatch Container Insights"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Service Discovery"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Services use AWS Cloud Map for service discovery with the namespace ",e.jsx("code",{className:"text-blue-300",children:"local"}),". This allows services to communicate using DNS names like"," ",e.jsx("code",{className:"text-blue-300",children:"backend.local"}),"."]})]}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Auto Scaling"}),e.jsx("p",{className:"text-xs text-gray-300",children:"ECS services are configured with auto-scaling policies based on CPU and memory utilization. Services automatically scale in and out based on demand."})]})]})]})]})}function nH({config:t}){const[s,n]=E.useState(!0),[i,o]=E.useState(null),[u,h]=E.useState(null);return E.useEffect(()=>{(async()=>{try{n(!0),o(null);const d=await Be.getECSClusterInfo(t.env);h(d)}catch(d){o(d instanceof Error?d.message:"Failed to fetch cluster info")}finally{n(!1)}})()},[t.env]),s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(st,{className:"w-6 h-6 text-blue-400 animate-spin"}),e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading cluster information..."})]}):i?e.jsx("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-red-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-400 mb-1",children:"Error Loading Cluster Info"}),e.jsx("p",{className:"text-xs text-gray-300",children:i})]})]})}):u?e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5 text-blue-400"}),"Cluster Information"]}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{n(!0),o(null),Be.getECSClusterInfo(t.env).then(h).catch(l=>o(l instanceof Error?l.message:"Failed to fetch cluster info")).finally(()=>n(!1))},disabled:s,children:e.jsx(Wt,{className:`w-4 h-4 ${s?"animate-spin":""}`})})]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Cluster Name"}),e.jsx("p",{className:"text-sm font-mono text-gray-300",children:u.clusterName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Status"}),e.jsx("p",{className:"text-sm text-gray-300",children:e.jsxs("span",{className:`inline-flex items-center gap-1 ${u.status==="ACTIVE"?"text-green-400":"text-yellow-400"}`,children:[u.status==="ACTIVE"?e.jsx(vt,{className:"w-3 h-3"}):e.jsx(Ye,{className:"w-3 h-3"}),u.status]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Region"}),e.jsx("p",{className:"text-sm text-gray-300",children:t.region})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Running Tasks"}),e.jsx("p",{className:"text-2xl font-medium text-gray-300",children:u.runningTasks})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Active Services"}),e.jsx("p",{className:"text-2xl font-medium text-gray-300",children:u.activeServices})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Registered Tasks"}),e.jsx("p",{className:"text-2xl font-medium text-gray-300",children:u.registeredTasks})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Container Insights"}),e.jsx("p",{className:"text-sm text-gray-300",children:e.jsxs("span",{className:`inline-flex items-center gap-1 ${u.containerInsights==="enabled"?"text-green-400":"text-gray-400"}`,children:[u.containerInsights==="enabled"?e.jsx(vt,{className:"w-3 h-3"}):e.jsx(Ci,{className:"w-3 h-3"}),u.containerInsights==="enabled"?"Enabled":"Disabled"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Compute Configuration"}),e.jsx("div",{className:"mt-1 bg-gray-800 rounded p-3",children:e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("li",{children:" Serverless compute with AWS Fargate"}),e.jsx("li",{children:" No EC2 instances to manage"}),e.jsx("li",{children:" Pay only for resources used by containers"}),e.jsx("li",{children:" Automatic OS and runtime patching"})]})})]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Capacity Providers"}),e.jsx("div",{className:"space-y-2",children:u.capacityProviders.map(l=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-300",children:l}),e.jsx("span",{className:"text-green-400",children:"Active"})]},l))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Cluster ARN"}),e.jsx("p",{className:"text-xs font-mono text-gray-300 mt-1 break-all",children:u.clusterArn})]})]})]})}):null}function aH({config:t}){const[s,n]=E.useState(!0),[i,o]=E.useState(null),[u,h]=E.useState(null);if(E.useEffect(()=>{(async()=>{try{n(!0),o(null);const p=await Be.getECSNetworkInfo(t.env);h(p)}catch(p){o(p instanceof Error?p.message:"Failed to fetch network info")}finally{n(!1)}})()},[t.env]),s)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(st,{className:"w-6 h-6 text-purple-400 animate-spin"}),e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading network information..."})]});if(i)return e.jsx("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-red-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-400 mb-1",children:"Error Loading Network Info"}),e.jsx("p",{className:"text-xs text-gray-300",children:i})]})]})});if(!u)return null;const l=u.subnets.filter(f=>f.type==="private"),d=u.subnets.filter(f=>f.type==="public");return e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qr,{className:"w-5 h-5 text-purple-400"}),"Network Details"]}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{n(!0),o(null),Be.getECSNetworkInfo(t.env).then(h).catch(f=>o(f instanceof Error?f.message:"Failed to fetch network info")).finally(()=>n(!1))},disabled:s,children:e.jsx(Wt,{className:`w-4 h-4 ${s?"animate-spin":""}`})})]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"VPC"}),e.jsxs("p",{className:"text-sm text-gray-300",children:["VPC ID: ",u.vpc.vpcId]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["CIDR: ",u.vpc.cidrBlock]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["State:"," ",e.jsx("span",{className:"text-green-400",children:u.vpc.state})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Availability Zones"}),e.jsx("div",{className:"flex gap-2 mt-1",children:u.availabilityZones.map(f=>e.jsx("span",{className:"px-2 py-1 bg-purple-900/30 border border-purple-700 rounded text-xs text-purple-300",children:f},f))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Subnet Configuration"}),e.jsxs("div",{className:"mt-1 space-y-2",children:[l.length>0&&e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-300 mb-2",children:["Private Subnets (",l.length,")"]}),e.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:l.map(f=>e.jsxs("li",{children:[" ",f.cidrBlock," (",f.availabilityZone,") -"," ",f.availableIpCount," IPs available"]},f.subnetId))}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Used for ECS tasks and RDS instances"})]}),d.length>0&&e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsxs("h5",{className:"text-xs font-medium text-gray-300 mb-2",children:["Public Subnets (",d.length,")"]}),e.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:d.map(f=>e.jsxs("li",{children:[" ",f.cidrBlock," (",f.availabilityZone,") -"," ",f.availableIpCount," IPs available"]},f.subnetId))}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Used for NAT gateways and load balancers"})]})]})]}),u.serviceDiscovery&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Service Discovery Namespace"}),e.jsx("p",{className:"text-sm font-mono text-gray-300",children:u.serviceDiscovery.namespaceName}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u.serviceDiscovery.serviceCount," service",u.serviceDiscovery.serviceCount!==1?"s":""," ","registered"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Services can discover each other using DNS names like"," ",e.jsxs("code",{children:["service-name.",u.serviceDiscovery.namespaceName]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Subnet Details"}),e.jsx("div",{className:"space-y-2",children:u.subnets.map(f=>e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-mono text-gray-400",children:f.subnetId}),e.jsxs("p",{className:"text-gray-500 ml-2",children:[f.type==="private"?"":""," ",f.cidrBlock," "," ",f.availabilityZone,"  ",f.availableIpCount," IPs"]})]},f.subnetId))})]}),e.jsxs("div",{className:"bg-purple-900/20 border border-purple-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-400 mb-2",children:"Security Configuration"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("li",{children:" Dedicated security groups per service"}),e.jsx("li",{children:" Least privilege access between services"}),e.jsx("li",{children:" No direct internet access for tasks (NAT Gateway)"}),e.jsx("li",{children:" ALB handles public traffic termination"})]})]})]})]})})}function iH({config:t}){const[s,n]=E.useState(!0),[i,o]=E.useState(null),[u,h]=E.useState(null);if(E.useEffect(()=>{(async()=>{try{n(!0),o(null);const m=await Be.getECSServicesInfo(t.env);h(m)}catch(m){o(m instanceof Error?m.message:"Failed to fetch services info")}finally{n(!1)}})()},[t.env]),s)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(st,{className:"w-6 h-6 text-green-400 animate-spin"}),e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Loading services information..."})]});if(i)return e.jsx("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-red-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-400 mb-1",children:"Error Loading Services Info"}),e.jsx("p",{className:"text-xs text-gray-300",children:i})]})]})});if(!u)return null;const l=u.services.length,d=u.scheduledTasks.length,f=u.eventTasks.length;return e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-green-400"}),"Services Running"]}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{n(!0),o(null),Be.getECSServicesInfo(t.env).then(h).catch(p=>o(p instanceof Error?p.message:"Failed to fetch services info")).finally(()=>n(!1))},disabled:s,children:e.jsx(Wt,{className:`w-4 h-4 ${s?"animate-spin":""}`})})]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Active Services"}),e.jsx("p",{className:"text-2xl font-medium text-gray-300 mb-3",children:l}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:u.services.map(p=>e.jsxs("p",{className:"text-xs text-gray-500 truncate",title:p.serviceName,children:[" ",p.serviceName]},p.serviceName))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-medium text-gray-300 mb-3",children:u.totalTasks}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[" Service Tasks: ",l]}),d>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[" Scheduled Tasks: ",d]}),f>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[" Event Tasks: ",f]})]})]})]}),u.services.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Deployed Services"}),e.jsx("div",{className:"space-y-2",children:u.services.map(p=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${p.status==="ACTIVE"?"bg-green-400":p.status==="DRAINING"?"bg-yellow-400":"bg-red-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-300 truncate",title:p.serviceName,children:p.serviceName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[p.launchType," "," ",p.taskDefinition.split("/").pop()]})]})]}),e.jsx("span",{className:`text-xs ${p.status==="ACTIVE"?"text-green-400":p.status==="DRAINING"?"text-yellow-400":"text-red-400"}`,children:p.status})]}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-400",children:[e.jsxs("span",{children:["Desired: ",p.desiredCount]}),e.jsxs("span",{children:["Running: ",p.runningCount]}),e.jsxs("span",{children:["Pending: ",p.pendingCount]})]})]},p.serviceName))})]}),u.scheduledTasks.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Scheduled Tasks"}),e.jsx("div",{className:"space-y-2",children:u.scheduledTasks.map(p=>e.jsx("div",{className:"p-3 bg-gray-800 rounded",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-300 truncate",title:p.taskName,children:p.taskName}),e.jsx("p",{className:"text-xs text-gray-500",children:p.schedule})]}),e.jsx("span",{className:`text-xs flex-shrink-0 ${p.enabled?"text-green-400":"text-gray-400"}`,children:p.enabled?"Enabled":"Disabled"})]})},p.taskName))})]}),u.eventTasks.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Event-Driven Tasks"}),e.jsx("div",{className:"space-y-2",children:u.eventTasks.map(p=>e.jsx("div",{className:"p-3 bg-gray-800 rounded",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-300 truncate",title:p.taskName,children:p.taskName}),e.jsx("p",{className:"text-xs text-gray-500",children:"Event pattern configured"})]}),e.jsx("span",{className:`text-xs flex-shrink-0 ${p.enabled?"text-green-400":"text-gray-400"}`,children:p.enabled?"Enabled":"Disabled"})]})},p.taskName))})]}),e.jsxs("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-2",children:"Resource Allocation"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Each service is allocated CPU and memory based on workload requirements. Fargate automatically provisions the right compute resources."})]})]})]})})}function oH({config:t,onConfigChange:s}){const[n,i]=E.useState(!1),[o,u]=E.useState(null),h=async()=>{if(t.workload?.slack_webhook){i(!0),u(null);try{const l=await fetch(t.workload.slack_webhook,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:` Test notification from ${t.project} (${t.env})`,attachments:[{color:"good",fields:[{title:"Project",value:t.project,short:!0},{title:"Environment",value:t.env,short:!0},{title:"Region",value:t.region,short:!0},{title:"Status",value:"Webhook test successful",short:!0}],footer:"ECS Infrastructure",ts:Math.floor(Date.now()/1e3)}]})});l.ok?u({success:!0,message:"Test notification sent successfully!"}):u({success:!1,message:`Failed to send test notification: ${l.status}`})}catch(l){u({success:!1,message:`Error testing webhook: ${l instanceof Error?l.message:"Unknown error"}`})}finally{i(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Slack Notifications"}),e.jsx(we,{children:"Configure Slack webhook for deployment notifications and alerts"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"slack-webhook",children:"Slack Webhook URL"}),e.jsxs("div",{className:"mt-1 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(je,{id:"slack-webhook",type:"url",value:t.workload?.slack_webhook||"",onChange:l=>{u(null),s({workload:{...t.workload,slack_webhook:l.target.value}})},className:"flex-1 bg-gray-800 border-gray-600 text-white font-mono text-sm",placeholder:"https://hooks.slack.com/services/..."}),t.workload?.slack_webhook&&e.jsx(ie,{variant:"outline",size:"sm",onClick:h,disabled:n,children:n?e.jsx(st,{className:"w-4 h-4 animate-spin"}):"Test"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Webhook URL for deployment notifications and alerts"}),o&&e.jsx("div",{className:`text-xs p-2 rounded ${o.success?"bg-green-900/20 text-green-400":"bg-red-900/20 text-red-400"}`,children:o.message})]})]}),t.workload?.slack_webhook&&e.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Pr,{className:"w-4 h-4 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-1",children:"Slack Notifications Configured"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Deployment events and critical alerts will be sent to your Slack channel."}),e.jsxs("ul",{className:"text-xs text-gray-400 mt-2 space-y-1",children:[e.jsx("li",{children:" Deployment started/completed"}),e.jsx("li",{children:" Service health check failures"}),e.jsx("li",{children:" Auto-scaling events"}),e.jsx("li",{children:" Task failures and restarts"})]})]})]})}),!t.workload?.slack_webhook&&e.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx("strong",{children:"Note:"})," Without a Slack webhook, deployment notifications will only be available in CloudWatch Logs."]})})]})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsx(ge,{children:"How to Setup Slack Webhook"})}),e.jsxs(pe,{children:[e.jsxs("ol",{className:"space-y-3 text-xs text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"1."}),e.jsxs("span",{children:["Go to your Slack workspace and navigate to ",e.jsx("strong",{children:"Apps"})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"2."}),e.jsxs("span",{children:["Search for and add ",e.jsx("strong",{children:'"Incoming Webhooks"'})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"3."}),e.jsx("span",{children:"Choose the channel where you want to receive notifications"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"4."}),e.jsx("span",{children:"Copy the webhook URL and paste it above"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium flex-shrink-0",children:"5."}),e.jsxs("span",{children:["Click ",e.jsx("strong",{children:"Test"})," to verify the connection"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded",children:e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx("strong",{children:"Tip:"})," Create a dedicated channel like"," ",e.jsx("code",{children:"#deployments"})," or"," ",e.jsxs("code",{children:["#",t.project,"-",t.env]})," ","for infrastructure notifications."]})})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Additional Notification Options"}),e.jsx(we,{children:"Other notification channels and integrations"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400"}),e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"CloudWatch Logs"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"All deployment events are automatically logged to CloudWatch. Access them through the AWS Console or CLI."})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 text-purple-400"}),e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"EventBridge Integration"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"ECS deployment events are published to EventBridge, allowing custom integrations with SNS, Lambda, or other services."})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 text-yellow-400"}),e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Coming Soon"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Future support planned for: Email notifications, PagerDuty, Discord webhooks, and custom webhook endpoints."})]})]})})]})]})}function lH({config:t}){const[s,n]=E.useState({source:"meroku.test",detailType:"Test Event",detail:{}}),[i,o]=E.useState(`{
  "test": true,
  "timestamp": "`+new Date().toISOString()+`",
  "message": "EventBridge test event"
}`),[u,h]=E.useState(!1),[l,d]=E.useState(null),[f,p]=E.useState(null),m=g=>{o(g);try{const v=JSON.parse(g);n(b=>({...b,detail:v})),p(null)}catch{p("Invalid JSON format")}},y=async()=>{if(!s.source||!s.detailType){d({success:!1,message:"Source and Detail Type are required"});return}h(!0),d(null);try{const g=await Be.sendTestEvent(s);d(g)}catch(g){d({success:!1,message:g instanceof Error?g.message:"Failed to send test event"})}finally{h(!1)}},j=t.event_processor_tasks||[],S=[...new Set(j.flatMap(g=>g.sources||[]))],w=[...new Set(j.flatMap(g=>g.detail_types||[]))];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Send test events to EventBridge to test your event-driven infrastructure. Events will be published to your custom event bus and can trigger any configured event processor tasks."})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"w-5 h-5"}),"Test Event Configuration"]}),e.jsx(we,{children:"Configure and send a test event to EventBridge"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"test-source",children:"Event Source"}),e.jsx(je,{id:"test-source",value:s.source,onChange:g=>n(v=>({...v,source:g.target.value})),placeholder:"e.g., meroku.test",className:"font-mono"}),S.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Event processor sources: ",S.join(", ")]}),!S.includes(s.source)&&s.source&&e.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"}),"This source doesn't match any configured event processors"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"test-detail-type",children:"Detail Type"}),e.jsx(je,{id:"test-detail-type",value:s.detailType,onChange:g=>n(v=>({...v,detailType:g.target.value})),placeholder:"e.g., Test Event"}),w.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Event processor detail types:"," ",w.join(", ")]}),!w.includes(s.detailType)&&s.detailType&&e.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"}),"This detail type doesn't match any configured event processors"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"test-detail",children:"Event Detail (JSON)"}),e.jsx(Qt,{id:"test-detail",value:i,onChange:g=>m(g.target.value),placeholder:'{"test": true, "message": "EventBridge test event"}',className:"font-mono text-sm min-h-[200px]",rows:10}),f&&e.jsx("p",{className:"text-xs text-red-400",children:f})]}),e.jsx(ie,{onClick:y,disabled:u||!!f||!s.source||!s.detailType,className:"w-full",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Send Test Event to EventBridge"]})}),l&&e.jsxs(ze,{className:l.success?"border-green-600":"border-red-600",children:[l.success?e.jsx(vt,{className:"h-4 w-4 text-green-600"}):e.jsx(Ci,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{children:[l.message,l.eventId&&e.jsxs("div",{className:"text-xs mt-1 font-mono",children:["Event ID: ",l.eventId]})]})]})]})]}),j.length>0&&e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5"}),"Configured Event Processors"]}),e.jsx(we,{children:"Event processor tasks that can be triggered by events"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-3",children:j.map((g,v)=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:g.name}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-400",children:"Sources:"})," ",g.sources?.join(", ")||"None"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-400",children:"Detail Types:"})," ",g.detail_types?.join(", ")||"None"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-400",children:"Rule:"})," ",g.rule_name]})]})]},g.name))})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5"}),"Example Test Events"]}),e.jsx(we,{children:"Common test event patterns for different scenarios"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Basic Test Event"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "test": true,
  "timestamp": "${new Date().toISOString()}",
  "message": "This is a test event from EventBridge"
}`})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Application Event"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "eventType": "user.created",
  "userId": "user-123",
  "email": "user@example.com",
  "timestamp": "${new Date().toISOString()}",
  "source": "user-service"
}`})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"System Event"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "eventType": "deployment.completed",
  "serviceName": "backend",
  "version": "v1.2.3",
  "environment": "${t.env}",
  "status": "success",
  "timestamp": "${new Date().toISOString()}"
}`})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Business Event"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "eventType": "order.processed",
  "orderId": "ORD-123456",
  "customerId": "CUST-789",
  "amount": 99.99,
  "currency": "USD",
  "status": "completed",
  "timestamp": "${new Date().toISOString()}"
}`})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Testing Tips"}),e.jsx(we,{children:"Best practices for testing EventBridge"})]}),e.jsx(pe,{children:e.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsxs("span",{children:["Use ",e.jsx("code",{className:"text-blue-400 text-xs",children:"meroku.test"})," ","as the source for test events to easily identify them"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsxs("span",{children:["Include a"," ",e.jsx("code",{className:"text-blue-400 text-xs",children:"test: true"})," field in your event detail for easy filtering"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Always include timestamps in your test events for debugging"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Check CloudWatch Logs for event processor tasks to see if they were triggered"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsxs("span",{children:["Events are published to your custom event bus:"," ",e.jsxs("code",{className:"text-blue-400 text-xs",children:[t.project,"_",t.env,"_eventbus"]})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Use EventBridge console to monitor event delivery and rule matches"})]})]})})]})]})}function c2(t,s){if(t===s)return!0;if(t==null||s==null||typeof t!="object"||typeof s!="object")return!1;const n=Object.keys(t),i=Object.keys(s);if(n.length!==i.length)return!1;for(const o of n)if(!i.includes(o)||!c2(t[o],s[o]))return!1;return!0}function d2(t,s){const n=E.useRef(void 0);return(!n.current||!c2(n.current.deps,s))&&(n.current={deps:s,value:t()}),n.current.value}const u2=E.memo(function({config:s,currentServiceName:n,currentServiceType:i,ecrConfig:o,onEcrConfigChange:u,accountInfo:h}){const l=E.useRef(0);l.current++;const d=E.useRef({config:s,ecrConfig:o,onEcrConfigChange:u,accountInfo:h});E.useEffect(()=>{const j=d.current,S=[];j.config!==s&&S.push("config"),j.ecrConfig!==o&&S.push("ecrConfig"),j.onEcrConfigChange!==u&&S.push("onEcrConfigChange"),j.accountInfo!==h&&S.push("accountInfo"),S.length>0&&console.log(` [ECRConfigEditor] Props changed: ${S.join(", ")}`,{configRef:j.config===s?"same":"CHANGED",ecrConfigRef:j.ecrConfig===o?"same":"CHANGED",onChangeRef:j.onEcrConfigChange===u?"same":"CHANGED"}),d.current={config:s,ecrConfig:o,onEcrConfigChange:u,accountInfo:h}},[s,o,u,h]),console.log(` [ECRConfigEditor] Render #${l.current} for ${i}/${n}`),l.current>50&&(console.error(" [ECRConfigEditor] INFINITE LOOP DETECTED - More than 50 renders!"),console.trace("Stack trace at 50th render")),console.log(" [ECRConfigEditor] Props:",{currentServiceName:n,currentServiceType:i,ecrConfig:o,servicesCount:s.services?.length,eventTasksCount:s.event_processor_tasks?.length,scheduledTasksCount:s.scheduled_tasks?.length});const f=i==="services"?`${s.project}_service_${n}`:`${s.project}_task_${n}`,p=`${h?.accountId||s.ecr_account_id||"<ACCOUNT_ID>"}.dkr.ecr.${s.region}.amazonaws.com/${f}`,m=d2(()=>{console.log(` [ECRConfigEditor] Recalculating availableSources (deep compare) for ${n}`);const j=[];return s.services?.forEach(S=>{!(i==="services"&&S.name===n)&&(!S.ecr_config||S.ecr_config.mode==="create_ecr")&&j.push({name:S.name,type:"services",displayType:"Service"})}),s.event_processor_tasks?.forEach(S=>{!(i==="event_processor_tasks"&&S.name===n)&&(!S.ecr_config||S.ecr_config.mode==="create_ecr")&&j.push({name:S.name,type:"event_processor_tasks",displayType:"Event Processor"})}),s.scheduled_tasks?.forEach(S=>{!(i==="scheduled_tasks"&&S.name===n)&&(!S.ecr_config||S.ecr_config.mode==="create_ecr")&&j.push({name:S.name,type:"scheduled_tasks",displayType:"Cron Job"})}),console.log(" [ECRConfigEditor] availableSources calculated:",j),j},[s.services,s.event_processor_tasks,s.scheduled_tasks,i,n]),y=o||{mode:"create_ecr"};return console.log(" [ECRConfigEditor] Using currentConfig:",y),e.jsxs("div",{className:"space-y-4",children:[o&&e.jsx("div",{className:"p-3 bg-gray-900/50 border border-gray-700 rounded-lg space-y-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fr,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"text-xs text-gray-300",children:"ECR Configuration:"}),o.mode==="create_ecr"&&e.jsx(Te,{variant:"default",className:"text-xs",children:"Dedicated Repository"}),o.mode==="manual_repo"&&e.jsxs(Te,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[e.jsx(Xr,{className:"w-3 h-3"}),"Manual Repository"]}),o.mode==="use_existing"&&e.jsxs(Te,{variant:"outline",className:"text-xs flex items-center gap-1",children:[e.jsx(_w,{className:"w-3 h-3"}),"Shared Repository"]})]}),o.mode==="create_ecr"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 font-mono break-all",children:p}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A dedicated ECR repository will be created"})]}),o.mode==="manual_repo"&&o.repository_uri&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 font-mono break-all",children:o.repository_uri}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Using manually specified ECR repository"})]}),o.mode==="use_existing"&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-300",children:["Source: ",e.jsxs("span",{className:"font-mono text-gray-400",children:[o.source_service_type?.replace("_"," ")," / ",o.source_service_name]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sharing ECR repository from another service"})]})]})]})}),!o&&e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 h-4"}),e.jsxs(Fe,{className:"text-xs",children:["Default ECR: ",e.jsx("code",{className:"text-blue-400",children:p})]})]}),e.jsx(Yr,{}),e.jsx(yg,{config:y,onChange:u,availableSources:m,currentServiceName:n})]})});function cH({config:t,onConfigChange:s,accountInfo:n,node:i}){const o=i.id.replace("event-","");console.log("[EventTaskProperties] RENDER",{taskName:o,timestamp:Date.now()});const u=t.event_processor_tasks?.find(F=>F.name===o),[h,l]=E.useState(()=>u?.rule_name||""),[d,f]=E.useState(()=>u?.sources||[]),[p,m]=E.useState(()=>u?.detail_types||[]),[y,j]=E.useState(()=>u?.docker_image||""),[S,w]=E.useState(()=>u?.ecr_config||{mode:"create_ecr"}),[g,v]=E.useState(""),[b,_]=E.useState(""),C=`${t.project}_task_${o}`,A=`${n?.accountId||t.ecr_account_id||"<ACCOUNT_ID>"}.dkr.ecr.${t.region}.amazonaws.com/${C}`,D=()=>{if(g&&!d.includes(g)){const F=[...d,g];f(F),v(""),I(F,p)}},R=F=>{const B=d.filter(V=>V!==F);f(B),I(B,p)},k=()=>{if(b&&!p.includes(b)){const F=[...p,b];m(F),_(""),I(d,F)}},M=F=>{const B=p.filter(V=>V!==F);m(B),I(d,B)},I=E.useCallback((F,B)=>{if(!t.event_processor_tasks)return;const V=t.event_processor_tasks.map(O=>O.name===o?{...O,sources:F,detail_types:B}:O);s({event_processor_tasks:V})},[t.event_processor_tasks,o,s]),q=E.useCallback(F=>{if(!t.event_processor_tasks)return;const B=t.event_processor_tasks.map(V=>V.name===o?{...V,...F}:V);s({event_processor_tasks:B})},[t.event_processor_tasks,o,s,u]),W=E.useCallback(F=>{console.log("[EventTaskProperties] handleEcrConfigChange",{taskName:o,oldMode:S?.mode,newMode:F?.mode,timestamp:Date.now()}),w(F),q({ecr_config:F})},[o,S?.mode,q]),G=[{value:"aws.s3",description:"S3 bucket events"},{value:"aws.sns",description:"SNS topic messages"},{value:"aws.apigateway",description:"API Gateway requests"},{value:"aws.dynamodb",description:"DynamoDB stream events"},{value:"aws.kinesis",description:"Kinesis stream events"},{value:"custom.app",description:"Your application events"}],$=[{value:"Object Created",description:"S3 object uploads"},{value:"Object Deleted",description:"S3 object deletions"},{value:"API Request",description:"API Gateway calls"},{value:"Record Insert",description:"Database insertions"},{value:"Record Update",description:"Database updates"},{value:"Record Delete",description:"Database deletions"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Rc,{className:"w-5 h-5"}),"Event Rule Configuration"]}),e.jsx(we,{children:"Configure the EventBridge rule that triggers this task"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"rule-name",children:"Rule Name"}),e.jsx(je,{id:"rule-name",value:h,onChange:F=>{l(F.target.value),q({rule_name:F.target.value})},placeholder:"order-processing-rule",className:"font-mono"}),e.jsx("p",{className:"text-xs text-gray-500",children:"EventBridge rule name for processing specific events"})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5"}),"Event Pattern Settings"]}),e.jsx(we,{children:"Define which events will trigger this task"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Event Sources"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{value:g,onChange:F=>v(F.target.value),placeholder:"e.g., order.service",onKeyPress:F=>F.key==="Enter"&&D()}),e.jsx(ie,{size:"sm",onClick:D,disabled:!g,children:e.jsx(ws,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.map((F,B)=>e.jsxs(Te,{variant:"secondary",className:"flex items-center gap-1 pr-1",children:[e.jsx("span",{children:F}),e.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),V.stopPropagation(),R(F)},className:"ml-1 rounded-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-0",children:e.jsx(ds,{className:"w-3 h-3"})})]},B))}),e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-gray-400 cursor-pointer",children:"Common sources"}),e.jsx("div",{className:"mt-2 space-y-1",children:G.map(F=>e.jsxs("div",{className:"text-xs text-gray-500 hover:text-gray-300 cursor-pointer",onClick:()=>v(F.value),children:[e.jsx("code",{className:"text-blue-400",children:F.value})," -"," ",F.description]},F.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Event Detail Types"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{value:b,onChange:F=>_(F.target.value),placeholder:"e.g., Order Created",onKeyPress:F=>F.key==="Enter"&&k()}),e.jsx(ie,{size:"sm",onClick:k,disabled:!b,children:e.jsx(ws,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:p.map((F,B)=>e.jsxs(Te,{variant:"secondary",className:"flex items-center gap-1 pr-1",children:[e.jsx("span",{children:F}),e.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),V.stopPropagation(),M(F)},className:"ml-1 rounded-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-0",children:e.jsx(ds,{className:"w-3 h-3"})})]},B))}),e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-gray-400 cursor-pointer",children:"Common detail types"}),e.jsx("div",{className:"mt-2 space-y-1",children:$.map(F=>e.jsxs("div",{className:"text-xs text-gray-500 hover:text-gray-300 cursor-pointer",onClick:()=>_(F.value),children:[e.jsx("code",{className:"text-blue-400",children:F.value})," -"," ",F.description]},F.value))})]})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(yw,{className:"w-5 h-5"}),"Container Settings"]}),e.jsx(we,{children:"Docker image and network configuration"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx(u2,{config:t,currentServiceName:o,currentServiceType:"event_processor_tasks",ecrConfig:S,onEcrConfigChange:W,accountInfo:n}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{htmlFor:"docker-image",className:"text-sm font-medium",children:["Image Tag ",u?.ecr_config?"(Optional)":""]}),e.jsx("span",{className:"text-xs text-gray-500",children:u?.ecr_config?"e.g., latest, v1.2.3, nginx.1":"Full image or tag"})]}),e.jsx(je,{id:"docker-image",value:y,onChange:F=>{j(F.target.value),q({docker_image:F.target.value})},placeholder:u?.ecr_config?"latest":"nginx:latest or just latest",className:"font-mono text-sm"}),u?.ecr_config&&e.jsx("div",{className:"mt-2 p-2 bg-blue-950/30 border border-blue-900/50 rounded",children:e.jsxs("p",{className:"text-xs text-gray-400",children:[e.jsx("span",{className:"text-gray-500",children:"Full image:"})," ",e.jsxs("code",{className:"text-blue-400",children:[A,":",y||"latest"]})]})})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"w-5 h-5"}),"Environment Variables"]}),e.jsx(we,{children:"Managed via AWS Systems Manager Parameter Store"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Environment variables are managed in Parameter Store"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("code",{className:"text-xs text-blue-400",children:["/",t.env,"/",t.project,"/task/",o,"/"]}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>{const F=t.region,B=`/${t.env}/${t.project}/task/${o}/`;window.open(`https://${F}.console.aws.amazon.com/systems-manager/parameters?region=${F}&tab=Table&path=${encodeURIComponent(B)}`,"_blank")},children:[e.jsx(zu,{className:"w-3 h-3 mr-1"}),"Open in AWS Console"]})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qn,{className:"w-5 h-5"}),"Resource Information"]}),e.jsx(we,{children:"AWS resources created for this event task"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"ECR Repository"}),e.jsx("code",{className:"text-sm text-gray-300",children:C})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Log Group"}),e.jsxs("code",{className:"text-sm text-gray-300",children:[t.project,"_task_",o,"_",t.env]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Task Definition"}),e.jsxs("code",{className:"text-sm text-gray-300",children:[t.project,"_task_",o,"_",t.env]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Memory"}),e.jsx("span",{className:"text-sm text-gray-300",children:"512 MB"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"CPU"}),e.jsx("span",{className:"text-sm text-gray-300",children:"256 units (0.25 vCPU)"})]})]})})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Event Pattern Preview"]}),e.jsx(we,{children:"The EventBridge rule pattern that will be created"})]}),e.jsxs(pe,{children:[e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:JSON.stringify({source:d.length>0?d:["<add sources>"],"detail-type":p.length>0?p:["<add detail types>"]},null,2)})}),(d.length===0||p.length===0)&&e.jsxs(ze,{className:"mt-3",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Add at least one event source and detail type to create a valid event pattern"})]})]})]})]})}function dH({config:t,node:s}){const n=s.id.replace("event-",""),i=t.event_processor_tasks?.find(g=>g.name===n),[o,u]=E.useState({source:"meroku.test",detailType:i?.detail_types?.[0]||"",detail:{}}),[h,l]=E.useState(`{
  "test": true,
  "timestamp": "${new Date().toISOString()}"
}`),[d,f]=E.useState(!1),[p,m]=E.useState(null),[y,j]=E.useState(null);E.useEffect(()=>{i&&u(g=>({...g,detailType:i.detail_types?.[0]||g.detailType}))},[i]);const S=g=>{l(g);try{const v=JSON.parse(g);u(b=>({...b,detail:v})),j(null)}catch{j("Invalid JSON format")}},w=async()=>{if(!o.source||!o.detailType){m({success:!1,message:"Source and Detail Type are required"});return}f(!0),m(null);try{const g=await Be.sendTestEvent(o);m(g)}catch(g){m({success:!1,message:g instanceof Error?g.message:"Failed to send test event"})}finally{f(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Send test events to EventBridge to trigger this task. The event must match the configured sources and detail types for the rule to trigger."})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"w-5 h-5"}),"Test Event Configuration"]}),e.jsx(we,{children:"Configure and send a test event to EventBridge"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"test-source",children:"Event Source"}),e.jsx(je,{id:"test-source",value:o.source,onChange:g=>u(v=>({...v,source:g.target.value})),placeholder:"e.g., meroku.test",className:"font-mono"}),i?.sources&&i.sources.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Configured sources: ",i.sources.join(", ")]}),!i.sources.includes(o.source)&&o.source&&e.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"}),"This source doesn't match any configured sources - the event won't trigger this task"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"test-detail-type",children:"Detail Type"}),e.jsx(je,{id:"test-detail-type",value:o.detailType,onChange:g=>u(v=>({...v,detailType:g.target.value})),placeholder:"e.g., Test Event"}),i?.detail_types&&i.detail_types.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Configured detail types: ",i.detail_types.join(", ")]}),!i.detail_types.includes(o.detailType)&&o.detailType&&e.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"}),"This detail type doesn't match any configured types - the event won't trigger this task"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"test-detail",children:"Event Detail (JSON)"}),e.jsx(Qt,{id:"test-detail",value:h,onChange:g=>S(g.target.value),placeholder:'{"orderId": "123", "amount": 99.99}',className:"font-mono text-sm min-h-[200px]",rows:10}),y&&e.jsx("p",{className:"text-xs text-red-400",children:y})]}),e.jsx(ie,{onClick:w,disabled:d||!!y||!o.source||!o.detailType,className:"w-full",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Send Test Event"]})}),p&&e.jsxs(ze,{className:p.success?"border-green-600":"border-red-600",children:[p.success?e.jsx(vt,{className:"h-4 w-4 text-green-600"}):e.jsx(Ci,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{children:[p.message,p.eventId&&e.jsxs("div",{className:"text-xs mt-1 font-mono",children:["Event ID: ",p.eventId]})]})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5"}),"Example Test Events"]}),e.jsx(we,{children:"Common test event patterns for different scenarios"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Basic Test Event"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "test": true,
  "timestamp": "${new Date().toISOString()}",
  "message": "This is a test event"
}`})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Order Processing Event"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "orderId": "ORD-123456",
  "customerId": "CUST-789",
  "amount": 99.99,
  "currency": "USD",
  "items": [
    {
      "sku": "PROD-001",
      "quantity": 2,
      "price": 49.99
    }
  ]
}`})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"User Action Event"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "userId": "user-123",
  "action": "profile_updated",
  "changes": {
    "email": "new@example.com",
    "name": "John Doe"
  },
  "timestamp": "${new Date().toISOString()}"
}`})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Testing Tips"}),e.jsx(we,{children:"Best practices for testing event-driven tasks"})]}),e.jsx(pe,{children:e.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsxs("span",{children:["Use ",e.jsx("code",{className:"text-blue-400 text-xs",children:"meroku.test"})," ","as the source for test events to easily identify them in logs"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsxs("span",{children:["Include a"," ",e.jsx("code",{className:"text-blue-400 text-xs",children:"test: true"})," field in your event detail for easy filtering"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Always include timestamps in your test events for debugging"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Check CloudWatch Logs immediately after sending to see task execution"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Events that don't match the configured pattern won't trigger the task"})]})]})})]})]})}function uH({config:t,onConfigChange:s}){const n=t.workload?.enable_github_oidc??!1,i=t.workload?.github_oidc_subjects||[],o=d=>{s({workload:{...t.workload,enable_github_oidc:d,github_oidc_subjects:d&&i.length===0?["repo:Owner/Repo:ref:refs/heads/main"]:i}})},u=()=>{const d=[...i,"repo:Owner/Repo:ref:refs/heads/main"];s({workload:{...t.workload,github_oidc_subjects:d}})},h=d=>{const f=i.filter((p,m)=>m!==d);s({workload:{...t.workload,github_oidc_subjects:f}})},l=(d,f)=>{const p=[...i];p[d]=f,s({workload:{...t.workload,github_oidc_subjects:p}})};return e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"GitHub Actions Configuration"}),e.jsx(we,{children:"Configure GitHub OIDC for passwordless deployments"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{htmlFor:"github-oidc",children:"Enable GitHub OIDC"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Allow GitHub Actions to deploy without credentials"})]}),e.jsx(ct,{id:"github-oidc",checked:n,onCheckedChange:o})]}),n&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(re,{children:"OIDC Subjects"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:u,className:"h-7 text-xs",children:[e.jsx(ws,{className:"w-3 h-3 mr-1"}),"Add Subject"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Define which GitHub repositories and branches can deploy"}),i.length===0?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No subjects configured. Add one to enable deployments."}):e.jsx("div",{className:"space-y-2",children:i.map((d,f)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{value:d,onChange:p=>l(f,p.target.value),placeholder:"repo:Owner/Repo:ref:refs/heads/main",className:"flex-1 bg-gray-800 border-gray-600 text-white text-sm"}),e.jsx(ie,{size:"icon",variant:"ghost",onClick:()=>h(f),className:"h-8 w-8 text-gray-400 hover:text-red-400",children:e.jsx(ds,{className:"w-4 h-4"})})]},`subject-${f}-${d}`))})]}),e.jsxs("div",{className:"rounded-lg bg-gray-800 p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Subject Format Examples:"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("li",{children:[""," ",e.jsx("code",{className:"text-blue-400",children:"repo:Owner/Repo:ref:refs/heads/main"})," ","- Main branch only"]}),e.jsxs("li",{children:[""," ",e.jsx("code",{className:"text-blue-400",children:"repo:Owner/Repo:ref:refs/heads/*"})," ","- All branches"]}),e.jsxs("li",{children:[""," ",e.jsx("code",{className:"text-blue-400",children:"repo:Owner/Repo:ref:refs/tags/*"})," ","- All tags"]}),e.jsxs("li",{children:[""," ",e.jsx("code",{className:"text-blue-400",children:"repo:Owner/Repo:environment:production"})," ","- Specific environment"]})]})]})]})]})]})})}function hH({node:t}){const{configProperties:s}=t;if(!s||Object.keys(s).length===0)return e.jsx(fe,{children:e.jsxs(xe,{children:[e.jsx(ge,{children:"Configuration"}),e.jsx(we,{children:"No configuration properties available"})]})});const n=o=>typeof o=="boolean"?e.jsx(Te,{variant:o?"default":"secondary",children:o?"Enabled":"Disabled"}):Array.isArray(o)?o.length===0?e.jsx("span",{className:"text-gray-500",children:"None"}):e.jsx("div",{className:"space-y-1",children:o.map((u,h)=>e.jsx("div",{className:"text-sm",children:typeof u=="object"?JSON.stringify(u,null,2):u},h))}):typeof o=="object"&&o!==null?e.jsx("pre",{className:"text-xs bg-gray-800 p-2 rounded",children:JSON.stringify(o,null,2)}):o?.toString()||e.jsx("span",{className:"text-gray-500",children:"Not set"}),i=o=>o.split(/(?=[A-Z])/).join(" ").replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase());return e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Configuration Properties"}),e.jsx(we,{children:"Based on YAML configuration"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(s).map(([o,u])=>e.jsxs("div",{className:"border-b border-gray-800 pb-2 last:border-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-400 mb-1",children:i(o)}),e.jsx("div",{className:"text-sm text-white",children:n(u)})]},o))})})]})}function mH({config:t}){return e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"How Auto-Discovery Works"}),e.jsx(we,{children:"Understanding the Parameter Store auto-discovery mechanism"})]}),e.jsxs(pe,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(PT,{className:"w-4 h-4 text-yellow-400"}),"What This Means in Practice"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-300 mb-3",children:"Example Scenario:"}),e.jsxs("ol",{className:"space-y-3 text-xs text-gray-400",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"1."}),e.jsxs("span",{children:["Your backend service runs with path"," ",e.jsxs("code",{className:"text-blue-300",children:["/",t.env,"/",t.project,"/backend/"]})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"2."}),e.jsxs("span",{children:["You manually add a parameter:"," ",e.jsxs("code",{className:"text-blue-300",children:["/",t.env,"/",t.project,"/backend/stripe_api_key"]})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"3."}),e.jsxs("div",{children:[e.jsx("span",{children:"Auto-discovery happens:"}),e.jsxs("ul",{className:"mt-2 ml-4 space-y-1",children:[e.jsxs("li",{children:[" Terraform queries all parameters under"," ",e.jsxs("code",{className:"text-blue-300",children:["/",t.env,"/",t.project,"/backend/"]})]}),e.jsxs("li",{children:[" Finds: ",e.jsx("code",{children:"env"}),","," ",e.jsx("code",{children:"pg_database_password"}),","," ",e.jsx("code",{children:"gcm-server-key"}),","," ",e.jsx("code",{children:"stripe_api_key"})]}),e.jsxs("li",{children:[" Transforms names: ",e.jsx("code",{children:"ENV"}),","," ",e.jsx("code",{children:"PG_DATABASE_PASSWORD"}),","," ",e.jsx("code",{children:"GCM_SERVER_KEY"}),","," ",e.jsx("code",{children:"STRIPE_API_KEY"})]})]})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"4."}),e.jsx("span",{children:"ECS Container gets environment variables:"})]})]}),e.jsx("pre",{className:"mt-3 text-xs text-gray-300 bg-gray-900 p-3 rounded overflow-x-auto",children:`# Inside your backend container:
echo $PG_DATABASE_PASSWORD  #  actual database password
echo $STRIPE_API_KEY        #  your manually added key
echo $GCM_SERVER_KEY        #  FCM key (if enabled)`})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4 text-green-400"}),"Key Benefits"]}),e.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:e.jsxs("ol",{className:"space-y-2 text-xs text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 font-medium",children:"1."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Zero Code Changes:"})," Add new secrets without modifying Terraform"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 font-medium",children:"2."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Automatic Injection:"})," All parameters in the namespace become environment variables"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 font-medium",children:"3."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Consistent Naming:"})," Path  Environment variable name transformation"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 font-medium",children:"4."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Security:"})," Uses ECS secrets field (encrypted in transit/rest)"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 font-medium",children:"5."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Flexibility:"})," Each service gets its own parameter namespace"]})]})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(Wp,{className:"w-4 h-4 text-purple-400"}),"Real Example"]}),e.jsxs("div",{className:"bg-purple-900/20 border border-purple-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-gray-300 mb-3",children:"If you have these parameters:"}),e.jsx("div",{className:"bg-gray-800 rounded p-3 mb-3",children:e.jsx("code",{className:"text-xs text-purple-300 whitespace-pre",children:`/${t.env}/${t.project}/backend/env
/${t.env}/${t.project}/backend/pg_database_password
/${t.env}/${t.project}/backend/jwt_secret
/${t.env}/${t.project}/backend/redis_url`})}),e.jsx("p",{className:"text-xs text-gray-300 mb-3",children:"Your backend container automatically gets:"}),e.jsx("div",{className:"bg-gray-800 rounded p-3",children:e.jsx("code",{className:"text-xs text-green-300 whitespace-pre",children:`ENV=...
PG_DATABASE_PASSWORD=...
JWT_SECRET=...
REDIS_URL=...`})})]})]}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-xs text-gray-300",children:["This is why it's called ",e.jsx("strong",{children:'"auto-discovery"'})," - the system automatically discovers and injects ALL parameters in the service's namespace without requiring code changes!"]})})]})}),e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(zt,{className:"w-4 h-4 text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Service-Specific Management"}),e.jsx("p",{className:"text-xs text-gray-300",children:"You can manage parameters in detail for each service by clicking on the service node in the infrastructure diagram. Each service (Backend, Additional Services, Tasks) has its own parameter namespace where you can add, update, or remove configuration values."})]})]})})]})]})})}function fH({config:t}){const s=[];return s.push({name:`/${t.env}/${t.project}/backend/env`,description:"Main environment configuration placeholder",type:"SecureString",icon:_s,color:"text-blue-400",note:"Initially blank"}),t.postgres?.enabled&&(s.push({name:`/${t.env}/${t.project}/backend/pg_database_password`,description:"PostgreSQL password for backend access",type:"SecureString",icon:yt,color:"text-green-400"}),s.push({name:`/${t.env}/${t.project}/postgres_password`,description:"Main PostgreSQL database password",type:"SecureString",icon:yt,color:"text-green-400",note:"Auto-generated random password"}),t.workload?.install_pg_admin&&s.push({name:`/${t.env}/${t.project}/pgadmin_password`,description:"PgAdmin access password",type:"SecureString",icon:yt,color:"text-green-400",note:"Auto-generated random password"})),t.workload?.setup_fcnsns&&s.push({name:`/${t.env}/${t.project}/backend/gcm-server-key`,description:"Google Cloud Messaging server key for push notifications",type:"SecureString",icon:yt,color:"text-yellow-400"}),t.services&&t.services.length>0&&t.services.forEach(n=>{s.push({name:`/${t.env}/${t.project}/${n.name}/env`,description:`Service-specific environment configuration for ${n.name}`,type:"SecureString",icon:Eu,color:"text-indigo-400",note:"Initially blank"})}),t.scheduled_tasks&&t.scheduled_tasks.length>0&&t.scheduled_tasks.forEach(n=>{s.push({name:`/${t.env}/${t.project}/task/${n.name}/env`,description:`Task-specific environment configuration for ${n.name}`,type:"SecureString",icon:Ms,color:"text-orange-400",note:"Initially blank"})}),t.event_processor_tasks&&t.event_processor_tasks.length>0&&t.event_processor_tasks.forEach(n=>{s.push({name:`/${t.env}/${t.project}/task/${n.name}/env`,description:`Task-specific environment configuration for ${n.name}`,type:"SecureString",icon:Ms,color:"text-pink-400",note:"Initially blank"})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"AWS Systems Manager Parameter Store"}),e.jsx(we,{children:"Secure storage for configuration data and secrets"})]}),e.jsxs(pe,{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Key Design Patterns"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Hierarchical Organization:"})," Parameters organized by /",t.env,"/",t.project,"/","{component}","/"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"SecureString Encryption:"})," All sensitive data encrypted using KMS"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Lifecycle Management:"})," Parameters have"," ",e.jsx("code",{className:"text-blue-300",children:"ignore_changes = [value]"})," ","to prevent Terraform overwriting manual updates"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Auto-Discovery:"})," Services use"," ",e.jsx("code",{className:"text-blue-300",children:"aws_ssm_parameters_by_path"})," ","to automatically load all parameters in their namespace"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Tagging:"})," All parameters tagged with Environment, Project, ManagedBy, and Application"]})]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Parameters Created"}),e.jsx("div",{className:"space-y-2",children:s.map((n,i)=>{const o=n.icon;return e.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(o,{className:`w-4 h-4 ${n.color} mt-0.5`}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("code",{className:"text-xs text-gray-300 font-mono",children:n.name}),e.jsx("p",{className:"text-xs text-gray-500",children:n.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs ${n.type==="SecureString"?"text-green-400":"text-blue-400"}`,children:["Type: ",n.type]}),n.note&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-600",children:""}),e.jsx("span",{className:"text-xs text-gray-400",children:n.note})]})]})]})]})},i)})})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Total Parameters:"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:s.length})]})}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Auto-Discovery in ECS Tasks"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`# ECS tasks automatically load all parameters from their path
# Example for backend service:
aws ssm get-parameters-by-path \\
  --path "/${t.env}/${t.project}/backend/" \\
  --recursive \\
  --with-decryption

# This loads all parameters:
# - /${t.env}/${t.project}/backend/env
# - /${t.env}/${t.project}/backend/pg_database_password
# - /${t.env}/${t.project}/backend/gcm-server-key (if enabled)`})]}),e.jsxs("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-2",children:"Why This Approach?"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Security:"})," Sensitive data like passwords and API keys are encrypted"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Flexibility:"})," Operators can manually add/update parameters without modifying Terraform"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Separation:"})," Each service has its own parameter namespace"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Integration:"})," ECS tasks automatically inject these as environment variables"]})]})]})]})]})})}function pH({config:t}){const s=t.postgres||{enabled:!1},n=s.dbname||t.project,i=s.username||"postgres",[o,u]=E.useState(!1),[h,l]=E.useState(!1),[d,f]=E.useState(null),[p,m]=E.useState(null),[y,j]=E.useState(null),[S,w]=E.useState(!1),[g,v]=E.useState(null),[b,_]=E.useState(!1),C=async()=>{l(!0),m(null);try{const k=await Be.getSSMParameter(`/${t.env}/${t.project}/postgres_password`);f(k.value)}catch(k){m(k.message||"Failed to fetch password")}finally{l(!1)}},A=async()=>{w(!0),v(null);try{const k=await Be.getDatabaseInfo(t.project,t.env);if(k.endpoint)j(k.endpoint),k.port&&k.port!==5432&&j(`${k.endpoint}:${k.port}`);else throw new Error("No endpoint found in database info")}catch(k){v(k.message||"Failed to fetch database endpoint");const M=s.aurora?`${t.project}-aurora-${t.env}.cluster-xxxxx.${t.region}.rds.amazonaws.com`:`${t.project}-postgres-${t.env}.xxxxx.${t.region}.rds.amazonaws.com`;j(M)}finally{w(!1)}},D=()=>{if(d&&y){const M=y.includes(":")?y:`${y}:5432`;return`postgresql://${i}:${d}@${M}/${n}`}return null},R=k=>{navigator.clipboard.writeText(k)};return s.enabled?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Database Connection Overview"]}),e.jsxs(we,{children:["How your backend service connects to"," ",s.aurora?"Aurora Serverless v2":"RDS PostgreSQL"]})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-200 mb-3 flex items-center gap-2",children:[e.jsx(_s,{className:"w-4 h-4"}),"Connection Architecture"]}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[e.jsx("p",{children:" Backend ECS tasks connect directly to the database endpoint"}),e.jsx("p",{children:" Connection is secured within VPC using security groups"}),e.jsxs("p",{children:[""," ",s.aurora?"Aurora endpoint automatically handles failover":"RDS provides a single stable endpoint"]}),e.jsx("p",{children:" Port 5432 (PostgreSQL standard port)"})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"w-5 h-5"}),"Environment Variables"]}),e.jsx(we,{children:"Variables automatically injected into your backend container"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("code",{className:"text-sm font-mono text-blue-400",children:"PG_DATABASE_HOST"}),e.jsx(Te,{variant:"outline",className:"text-xs",children:"Plaintext"})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Database endpoint from ",e.jsx("code",{children:"module.postgres.endpoint"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.aurora?"Aurora cluster endpoint":"RDS instance address"}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:A,disabled:S,className:"text-xs",children:S?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-3 h-3 mr-1 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"w-3 h-3 mr-1"}),"Get Host"]})}),y&&e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>R(y),className:"text-xs",children:e.jsx(ut,{className:"w-3 h-3"})})]}),g&&e.jsx("div",{className:"text-xs text-yellow-400 bg-yellow-900/20 border border-yellow-700 rounded p-2 mb-2",children:g}),y&&e.jsx("div",{className:"text-xs bg-gray-900 p-2 rounded border",children:e.jsx("span",{className:"font-mono text-green-400 break-all",children:y})})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("code",{className:"text-sm font-mono text-blue-400",children:"PG_DATABASE_USERNAME"}),e.jsx(Te,{variant:"outline",className:"text-xs",children:"Plaintext"})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Value: ",e.jsx("code",{className:"text-green-400",children:i})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("code",{className:"text-sm font-mono text-blue-400",children:"PG_DATABASE_NAME"}),e.jsx(Te,{variant:"outline",className:"text-xs",children:"Plaintext"})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Value: ",e.jsx("code",{className:"text-green-400",children:n})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("code",{className:"text-sm font-mono text-blue-400",children:"PG_DATABASE_PASSWORD"}),e.jsxs(Te,{variant:"secondary",className:"text-xs bg-yellow-600/20 text-yellow-400 border-yellow-600/30",children:[e.jsx(Ei,{className:"w-3 h-3 mr-1"}),"Secure"]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Retrieved from SSM Parameter Store at runtime"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Path:"," ",e.jsxs("code",{children:["/",t.env,"/",t.project,"/backend/pg_database_password"]})]})]})]}),e.jsx("div",{className:"bg-yellow-900/10 border border-yellow-600/30 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-gray-300",children:["The password is injected securely using ECS secrets configuration with"," ",e.jsx("code",{className:"text-yellow-500",children:"valueFrom"})," pointing to the SSM parameter. It never appears in logs or task definitions."]})]})})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-5 h-5"}),"Password Management"]}),e.jsx(we,{children:"How database passwords are generated and stored"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"Password Generation"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("li",{children:[" Automatically generated using Terraform's"," ",e.jsx("code",{children:"random_password"})," resource"]}),e.jsx("li",{children:" 16 characters with special characters"}),e.jsx("li",{children:" Generated once during infrastructure creation"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"SSM Parameter Store Locations"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("code",{className:"text-xs text-blue-400",children:["/",t.env,"/",t.project,"/postgres_password"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Main password parameter"})]}),e.jsxs("div",{children:[e.jsxs("code",{className:"text-xs text-blue-400",children:["/",t.env,"/",t.project,"/backend/pg_database_password"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Backend service copy (used by ECS)"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:C,disabled:h,className:"text-xs",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-3 h-3 mr-1 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"w-3 h-3 mr-1"}),"Fetch Password"]})}),d&&e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>u(!o),className:"text-xs",children:o?e.jsx(Ho,{className:"w-3 h-3"}):e.jsx(Lr,{className:"w-3 h-3"})}),d&&e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>R(d),className:"text-xs",children:e.jsx(ut,{className:"w-3 h-3"})})]}),p&&e.jsx("div",{className:"text-xs text-red-400 bg-red-900/20 border border-red-700 rounded p-2 mb-2",children:p}),d&&e.jsx("div",{className:"text-xs bg-gray-900 p-2 rounded border",children:o?e.jsx("span",{className:"font-mono text-green-400",children:d}):e.jsx("span",{className:"font-mono text-gray-400",children:"".repeat(20)})})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-200 mb-2 flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4 text-green-400"}),"Security Features"]}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-400",children:[e.jsx("li",{children:" Encrypted at rest using AWS KMS (SecureString type)"}),e.jsx("li",{children:" ECS task execution role has permission to decrypt"}),e.jsx("li",{children:" Password never appears in CloudWatch logs"}),e.jsx("li",{children:" Not stored in Terraform state"})]})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(gT,{className:"w-5 h-5"}),"Connection String Construction"]}),e.jsx(we,{children:"How to build the database connection URL in your application"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-3",children:"Connection String Format"}),e.jsx("div",{className:"bg-gray-900 rounded p-3 overflow-x-auto",children:e.jsx("code",{className:"text-xs text-green-400 whitespace-pre",children:"postgresql://${PG_DATABASE_USERNAME}:${PG_DATABASE_PASSWORD}@${PG_DATABASE_HOST}:5432/${PG_DATABASE_NAME}"})}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-xs font-medium text-gray-300",children:"Build Full Connection String"}),(!y||!d)&&e.jsx(ie,{size:"sm",variant:"outline",onClick:async()=>{y||await A(),d||await C()},disabled:S||h,className:"text-xs",children:S||h?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-3 h-3 mr-1 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fr,{className:"w-3 h-3 mr-1"}),"Get Connection Details"]})})]}),(p||g)&&e.jsxs("div",{className:"mb-2",children:[p&&e.jsxs("div",{className:"text-xs text-red-400 bg-red-900/20 border border-red-700 rounded p-2 mb-2",children:[e.jsx("strong",{children:"Password Error:"})," ",p]}),g&&y&&e.jsxs("div",{className:"text-xs text-yellow-400 bg-yellow-900/20 border border-yellow-700 rounded p-2",children:[e.jsx("strong",{children:"Host Notice:"})," ",g]})]}),y&&d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:()=>_(!b),className:"text-xs",children:b?e.jsxs(e.Fragment,{children:[e.jsx(Ho,{className:"w-3 h-3 mr-1"})," Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(Lr,{className:"w-3 h-3 mr-1"})," Show"]})}),e.jsxs(ie,{size:"sm",variant:"ghost",onClick:()=>{const k=D();k&&R(k)},className:"text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Copy"]})]}),b&&e.jsx("div",{className:"bg-gray-900 rounded p-3 overflow-x-auto",children:e.jsx("code",{className:"text-xs text-green-400 break-all",children:D()})})]}),(!y||!d)&&!S&&!h&&e.jsx("div",{className:"text-xs text-gray-500",children:'Click "Get Connection Details" to build the connection string'})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-3",children:"Example in Node.js"}),e.jsx("div",{className:"bg-gray-900 rounded p-3 overflow-x-auto",children:e.jsx("pre",{className:"text-xs text-gray-300",children:`const dbConfig = {
  host: process.env.PG_DATABASE_HOST,
  port: 5432,
  database: process.env.PG_DATABASE_NAME,
  user: process.env.PG_DATABASE_USERNAME,
  password: process.env.PG_DATABASE_PASSWORD
};

// Or as a connection string
const connectionString = \`postgresql://\${process.env.PG_DATABASE_USERNAME}:\${process.env.PG_DATABASE_PASSWORD}@\${process.env.PG_DATABASE_HOST}:5432/\${process.env.PG_DATABASE_NAME}\`;`})})]}),e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs(Fe,{className:"text-xs",children:[e.jsx("strong",{children:"Note:"})," While the UI mentions"," ",e.jsx("code",{children:"DATABASE_URL"}),", the actual implementation provides separate environment variables. Your application needs to construct the connection string from these individual components."]})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Network Security"]}),e.jsx(we,{children:"How database access is secured"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"Security Group Configuration"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-400",children:[e.jsx("li",{children:" Database has its own security group"}),e.jsx("li",{children:" Only allows inbound traffic on port 5432"}),e.jsx("li",{children:" Backend service security group is authorized"}),e.jsxs("li",{children:[""," ",s.public_access?e.jsx("span",{className:"text-yellow-400",children:" Public access is enabled - database is accessible from internet"}):e.jsx("span",{className:"text-green-400",children:" No public access - only VPC internal traffic"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"Additional Security"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-400",children:[e.jsx("li",{children:" SSL/TLS encryption for connections"}),e.jsxs("li",{children:[""," ",s.aurora?"Aurora encryption at rest":"RDS encryption at rest"]}),e.jsx("li",{children:" Automated backups with encryption"}),e.jsx("li",{children:" IAM role-based access for ECS tasks"})]})]})]})})]})]}):e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Database Connection"]})}),e.jsx(pe,{children:e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Fe,{children:"PostgreSQL is not enabled. Enable it in the Settings tab to see connection information."})]})})]})}function xH({config:t,onConfigChange:s}){const n=t.postgres||{enabled:!1},i=t.workload||{},[o,u]=E.useState(null),h=(A,D)=>D<1?"Maximum capacity must be at least 1 ACU (AWS requirement)":A===.5&&D===.5?"Minimum and maximum cannot both be 0.5 ACU. Set maximum to 1 or higher.":D<A?"Maximum capacity must be greater than or equal to minimum capacity":null,l=A=>{s({postgres:{...n,enabled:A}})},d=A=>{s({postgres:{...n,...A}})},f=A=>{s({workload:{...i,install_pg_admin:A}})},p=A=>{s({workload:{...i,pg_admin_email:A}})},[m,y]=E.useState(!1),[j,S]=E.useState(!1),[w,g]=E.useState(null),[v,b]=E.useState(null),_=async()=>{S(!0),b(null);try{const A=await Be.getSSMParameter(`/${t.env}/${t.project}/pgadmin_password`);g(A.value)}catch(A){b(A.message||"Failed to fetch pgAdmin password")}finally{S(!1)}},C=A=>{navigator.clipboard.writeText(A)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"PostgreSQL Database"]}),e.jsx(we,{children:n.aurora?"AWS Aurora PostgreSQL Serverless v2 cluster":"AWS RDS PostgreSQL database instance"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{htmlFor:"postgres-enabled",className:"text-base",children:"Enable PostgreSQL"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create a managed PostgreSQL database cluster"})]}),e.jsx(ct,{id:"postgres-enabled",checked:n.enabled,onCheckedChange:l})]})})]}),n.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5"}),"Database Configuration"]}),e.jsx(we,{children:"Configure your PostgreSQL database settings"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400"}),"Aurora Serverless v2"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Use auto-scaling Aurora Serverless v2 instead of standard RDS"})]}),e.jsx(ct,{checked:n.aurora||!1,onCheckedChange:A=>d({aurora:A})})]}),n.aurora&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"min-capacity",children:"Min Capacity (ACUs)"}),e.jsx(je,{id:"min-capacity",type:"number",step:"0.5",min:"0",max:"128",value:n.min_capacity??0,onChange:A=>{const D=parseFloat(A.target.value),R=n.max_capacity||1,k=D===.5&&R===.5?1:R;d({min_capacity:D,...k!==R&&{max_capacity:k}}),u(h(D,k))}}),e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum: 0 ACU (enables automatic pause when idle)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"max-capacity",children:"Max Capacity (ACUs)"}),e.jsx(je,{id:"max-capacity",type:"number",step:"0.5",min:"1",max:"128",value:n.max_capacity||1,onChange:A=>{const D=Math.max(1,parseFloat(A.target.value)),R=n.min_capacity??0;d({max_capacity:D}),u(h(R,D))}}),e.jsx("p",{className:"text-xs text-gray-500",children:"Minimum: 1 ACU (AWS requirement), Maximum: 128 ACUs"})]}),o&&e.jsx("div",{className:"col-span-2",children:e.jsxs(ze,{className:"border-yellow-600 bg-yellow-900/20",children:[e.jsx(Ye,{className:"h-4 w-4 text-yellow-400"}),e.jsx(Fe,{className:"text-yellow-200",children:o})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs(Fe,{children:[e.jsx("strong",{children:"ACU (Aurora Capacity Unit):"})," Each ACU provides 2 GiB of memory and corresponding compute. Aurora Serverless v2 automatically scales between your min and max capacity based on workload. Setting min capacity to 0 allows the database to pause when idle, significantly reducing costs."]})]})})]}),!n.aurora&&e.jsxs("div",{className:"space-y-4 p-3 bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"RDS Instance Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"instance-class",children:"Instance Class"}),e.jsxs("select",{id:"instance-class",value:n.instance_class||"db.t4g.micro",onChange:A=>d({instance_class:A.target.value}),className:"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxs("optgroup",{label:"T4g - Burstable (ARM, Cost-effective)",children:[e.jsx("option",{value:"db.t4g.micro",children:"db.t4g.micro (2 vCPU, 1GB) - ~$12/mo"}),e.jsx("option",{value:"db.t4g.small",children:"db.t4g.small (2 vCPU, 2GB) - ~$23/mo"}),e.jsx("option",{value:"db.t4g.medium",children:"db.t4g.medium (2 vCPU, 4GB) - ~$47/mo"}),e.jsx("option",{value:"db.t4g.large",children:"db.t4g.large (2 vCPU, 8GB) - ~$94/mo"})]}),e.jsxs("optgroup",{label:"M6i - Balanced Production",children:[e.jsx("option",{value:"db.m6i.large",children:"db.m6i.large (2 vCPU, 8GB) - ~$130/mo"}),e.jsx("option",{value:"db.m6i.xlarge",children:"db.m6i.xlarge (4 vCPU, 16GB) - ~$260/mo"}),e.jsx("option",{value:"db.m6i.2xlarge",children:"db.m6i.2xlarge (8 vCPU, 32GB) - ~$520/mo"})]}),e.jsxs("optgroup",{label:"R6i - Memory-Optimized",children:[e.jsx("option",{value:"db.r6i.large",children:"db.r6i.large (2 vCPU, 16GB) - ~$175/mo"}),e.jsx("option",{value:"db.r6i.xlarge",children:"db.r6i.xlarge (4 vCPU, 32GB) - ~$350/mo"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Choose instance size based on your workload requirements"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"allocated-storage",children:"Allocated Storage (GB)"}),e.jsx(je,{id:"allocated-storage",type:"number",min:20,max:65536,value:n.allocated_storage||20,onChange:A=>d({allocated_storage:Number(A.target.value)})}),e.jsx("p",{className:"text-xs text-gray-500",children:"gp3 SSD - $0.115/GB/month (20 GB minimum, 65,536 GB maximum)"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Multi-AZ Deployment"}),e.jsx("p",{className:"text-xs text-gray-400",children:"High availability with automatic failover (doubles instance cost)"})]}),e.jsx(ct,{checked:n.multi_az||!1,onCheckedChange:A=>d({multi_az:A})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Storage Encryption"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Encrypt data at rest (recommended)"})]}),e.jsx(ct,{checked:n.storage_encrypted!==!1,onCheckedChange:A=>d({storage_encrypted:A})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Deletion Protection"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Prevent accidental database deletion"})]}),e.jsx(ct,{checked:n.deletion_protection||!1,onCheckedChange:A=>d({deletion_protection:A})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Skip Final Snapshot"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Skip creating snapshot when deleting (not recommended for production)"})]}),e.jsx(ct,{checked:n.skip_final_snapshot!==!1,onCheckedChange:A=>d({skip_final_snapshot:A})})]}),e.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-300 mb-2",children:" Estimated Monthly Cost"}),e.jsxs("p",{className:"text-2xl font-bold text-white mb-2",children:["$",(()=>{const A={"db.t4g.micro":11.68,"db.t4g.small":23.36,"db.t4g.medium":47.45,"db.t4g.large":94.17,"db.m6i.large":129.94,"db.m6i.xlarge":259.88,"db.m6i.2xlarge":519.76,"db.r6i.large":175.2,"db.r6i.xlarge":350.4},D=n.instance_class||"db.t4g.micro";let R=A[D]||23.36;n.multi_az&&(R*=2);const M=(n.allocated_storage||20)*.115;return(R+M).toFixed(2)})(),"/month"]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Instance:"," ",n.instance_class||"db.t4g.micro"," ",n.multi_az&&"(Multi-AZ)"," - $",(()=>{const A={"db.t4g.micro":11.68,"db.t4g.small":23.36,"db.t4g.medium":47.45,"db.t4g.large":94.17,"db.m6i.large":129.94,"db.m6i.xlarge":259.88,"db.m6i.2xlarge":519.76,"db.r6i.large":175.2,"db.r6i.xlarge":350.4},D=n.instance_class||"db.t4g.micro";let R=A[D]||23.36;return n.multi_az&&(R*=2),R.toFixed(2)})(),"/mo"]}),e.jsxs("div",{children:["Storage: ",n.allocated_storage||20,"GB gp3 - $",((n.allocated_storage||20)*.115).toFixed(2),"/mo"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"db-name",children:"Database Name"}),e.jsx(je,{id:"db-name",value:n.dbname||"",onChange:A=>d({dbname:A.target.value}),placeholder:t.project}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Default: ",t.project]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"db-username",children:"Master Username"}),e.jsx(je,{id:"db-username",value:n.username||"",onChange:A=>d({username:A.target.value}),placeholder:"postgres"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Default: postgres"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"engine-version",children:"PostgreSQL Version"}),e.jsxs("select",{id:"engine-version",value:n.engine_version||"16",onChange:A=>d({engine_version:A.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"17",children:"PostgreSQL 17.x (Latest)"}),e.jsx("option",{value:"16",children:"PostgreSQL 16.x"}),e.jsx("option",{value:"15",children:"PostgreSQL 15.x"}),e.jsx("option",{value:"14",children:"PostgreSQL 14.x"}),e.jsx("option",{value:"13",children:"PostgreSQL 13.x"})]}),n.aurora&&e.jsx("p",{className:"text-xs text-gray-500",children:"Aurora Serverless v2 supports PostgreSQL 13.x through 17.x"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Public Access"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Allow connections from outside VPC"})]}),e.jsx(ct,{checked:n.public_access||!1,onCheckedChange:A=>d({public_access:A})})]}),n.public_access&&e.jsxs(ze,{className:"border-yellow-600 bg-yellow-900/20",children:[e.jsx(Ye,{className:"h-4 w-4 text-yellow-400"}),e.jsxs(Fe,{className:"text-yellow-200",children:[e.jsx("strong",{children:"Warning:"})," Enabling public access exposes your database to the internet. Ensure proper security groups and strong passwords."]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(re,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4 text-blue-400"}),"IAM Database Authentication"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Use IAM roles for database authentication instead of passwords"})]}),e.jsx(ct,{checked:n.iam_database_authentication_enabled||!1,onCheckedChange:A=>d({iam_database_authentication_enabled:A})})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"pgAdmin Interface"]}),e.jsx(we,{children:"Web-based PostgreSQL administration tool"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Enable pgAdmin"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Deploy pgAdmin container in ECS"})]}),e.jsx(ct,{checked:i.install_pg_admin||!1,onCheckedChange:f})]}),i.install_pg_admin&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"pgadmin-email",children:"pgAdmin Login Email"}),e.jsx(je,{id:"pgadmin-email",type:"email",value:i.pg_admin_email||"",onChange:A=>p(A.target.value),placeholder:"admin@example.com"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Default: admin@madappgang.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"pgAdmin Password"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Stored in Parameter Store:"," ",e.jsxs("code",{children:["/",t.env,"/",t.project,"/pgadmin_password"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:_,disabled:j,className:"text-xs",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-3 h-3 mr-1 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"w-3 h-3 mr-1"}),"Fetch Password"]})}),w&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>y(!m),className:"text-xs",children:m?e.jsx(Ho,{className:"w-3 h-3"}):e.jsx(Lr,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>C(w),className:"text-xs",children:e.jsx(ut,{className:"w-3 h-3"})})]})]}),v&&e.jsx("div",{className:"text-xs text-red-400 bg-red-900/20 border border-red-700 rounded p-2 mb-2",children:v}),w&&e.jsx("div",{className:"text-xs bg-gray-900 p-2 rounded border",children:m?e.jsx("span",{className:"font-mono text-green-400",children:w}):e.jsx("span",{className:"font-mono text-gray-400",children:"".repeat(20)})})]})]})]})]})]})]})]})}function gH({config:t}){if(!t.domain?.enabled||!t.domain?.domain_name)return e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(Ye,{className:"w-8 h-8 text-gray-500 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Domain configuration is not enabled"})]})});const s=t.domain.domain_name,n=t.domain.api_domain_prefix||"api",o=(t.domain.add_env_domain_prefix??!0)&&!t.is_prod?`${t.env}.${s}`:s,u=t.alb?.enabled!==!1,h=t.ses?.enabled===!0,l=t.ses?.domain_name||`mail.${s}`,d=[];return u&&d.push({type:"A",name:o,value:"Application Load Balancer (ALB)",icon:_s,description:"Routes traffic to your application load balancer",color:"text-blue-400",bgColor:"bg-blue-900/20",borderColor:"border-blue-700"}),d.push({type:"CNAME",name:`${n}.${o}`,value:"API Gateway endpoint",icon:js,description:"Routes API traffic to AWS API Gateway",color:"text-purple-400",bgColor:"bg-purple-900/20",borderColor:"border-purple-700"}),h&&d.push({type:"MX",name:l,value:"AWS SES mail servers",icon:zo,description:"Email routing for AWS Simple Email Service",color:"text-green-400",bgColor:"bg-green-900/20",borderColor:"border-green-700"}),d.push({type:"CNAME",name:`_acme-challenge.${o}`,value:"ACM certificate validation",icon:Kt,description:"SSL/TLS certificate validation records",color:"text-yellow-400",bgColor:"bg-yellow-900/20",borderColor:"border-yellow-700"}),e.jsx("div",{className:"space-y-4",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"DNS Records"}),e.jsx(we,{children:"DNS records that will be created in Route 53 based on your configuration"})]}),e.jsxs(pe,{className:"space-y-4",children:[d.map((f,p)=>{const m=f.icon;return e.jsx("div",{className:`${f.bgColor} border ${f.borderColor} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(m,{className:`w-5 h-5 ${f.color} mt-0.5`}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm font-medium ${f.color}`,children:[f.type," Record"]}),e.jsx("span",{className:"text-xs text-gray-500",children:""}),e.jsx("code",{className:"text-xs text-gray-300",children:f.name})]}),e.jsx("p",{className:"text-xs text-gray-400",children:f.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Points to:"," ",e.jsx("span",{className:"text-gray-300",children:f.value})]})]})]})},p)}),e.jsxs("div",{className:"mt-6 bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Hosted Zone Details"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Zone Name:"}),e.jsx("code",{className:"text-gray-300",children:s})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-gray-300",children:"Public Hosted Zone"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Record Count:"}),e.jsxs("span",{className:"text-gray-300",children:[d.length," records"]})]})]})]}),t.domain.create_domain_zone&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Action Required"}),e.jsx("p",{className:"text-xs text-gray-300",children:"After creating the hosted zone, update your domain registrar's nameservers to point to the Route 53 nameservers. This is required for DNS resolution to work."})]})]})})]})]})})}function vH({config:t,onConfigChange:s}){const n=S=>{s({...t,domain:{...t.domain,enabled:S,domain_name:S&&t.domain?.domain_name||""}})},i=S=>{s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,domain_name:S}})},o=S=>{s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,create_domain_zone:S}})},u=S=>{s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,api_domain_prefix:S}})},h=S=>{s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,add_env_domain_prefix:S}})},l=S=>{s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,api_domain_prefix:S?"api":""}})},d=S=>{s({...t,domain:{enabled:t.domain?.enabled??!1,...t.domain,zone_id:S}})},f=t.domain?.enabled??!1,p=t.domain?.domain_name||"",m=t.domain?.api_domain_prefix||"api",y=t.domain?.add_env_domain_prefix??!0,j=y&&!t.is_prod?`${t.env}.${p}`:p;return e.jsx("div",{className:"space-y-6",children:e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Route 53 Configuration"}),e.jsx(we,{children:"Configure DNS and domain settings for your infrastructure"})]}),e.jsxs(pe,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(re,{htmlFor:"domain-enabled",children:"Enable Domain"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Enable Route 53 domain configuration"})]}),e.jsx(ct,{id:"domain-enabled",checked:f,onCheckedChange:n})]}),!f&&p&&e.jsxs(ze,{className:"border-yellow-600 bg-yellow-900/20",children:[e.jsx(Le,{className:"h-4 w-4 text-yellow-400"}),e.jsx(Fe,{className:"text-yellow-200 text-sm",children:"Domain name will be cleared when domain module is disabled to prevent API Gateway domain creation without certificate."})]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"domain-name",children:"Domain Name"}),e.jsx(je,{id:"domain-name",value:p,onChange:S=>i(S.target.value),placeholder:"example.com",className:"mt-1 bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your base domain name (without www)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(re,{htmlFor:"create-zone",children:"Create Domain Zone"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Create a new Route 53 hosted zone"})]}),e.jsx(ct,{id:"create-zone",checked:t.domain?.create_domain_zone??!0,onCheckedChange:o})]}),!(t.domain?.create_domain_zone??!0)&&e.jsxs("div",{children:[e.jsx(re,{htmlFor:"zone-id",children:"Zone ID (Optional)"}),e.jsx(je,{id:"zone-id",value:t.domain?.zone_id||"",onChange:S=>d(S.target.value),placeholder:"Z1234567890ABC",className:"mt-1 bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Route 53 zone ID for existing hosted zone (leave empty to lookup by name)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(re,{htmlFor:"add-prefix",children:"Add Environment Prefix"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Add environment prefix to domain (disabled for production)"})]}),e.jsx(ct,{id:"add-prefix",checked:y,onCheckedChange:h,disabled:t.is_prod})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(re,{htmlFor:"create-api-domain",children:"Create API Gateway Custom Domain"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Create API Gateway custom domain and Route53 A record for backend API"})]}),e.jsx(ct,{id:"create-api-domain",checked:t.domain?.api_domain_prefix!==void 0&&t.domain?.api_domain_prefix!==null&&t.domain?.api_domain_prefix!=="",onCheckedChange:l})]}),t.domain?.api_domain_prefix&&t.domain.api_domain_prefix!==""&&e.jsxs("div",{className:"space-y-2 ml-4",children:[e.jsx(re,{htmlFor:"api-prefix",children:"API Domain Prefix"}),e.jsx(je,{id:"api-prefix",value:m,onChange:S=>u(S.target.value),placeholder:"api",className:"bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-400",children:'Subdomain prefix for API Gateway (e.g., "api" creates api.yourdomain.com)'})]}),t.services&&t.services.length>0&&e.jsxs("div",{className:"space-y-3 mt-4 p-4 bg-gray-900/50 border border-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Additional Services API Domains"}),t.services.map((S,w)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:`create-api-domain-${S.name}`,children:S.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"API Gateway custom domain for this service"})]}),e.jsx(ct,{id:`create-api-domain-${S.name}`,checked:S.api_domain_prefix!==void 0&&S.api_domain_prefix!==null&&S.api_domain_prefix!=="",onCheckedChange:g=>{const v=[...t.services||[]];v[w]={...S,api_domain_prefix:g?S.name:""},s({services:v})}})]}),S.api_domain_prefix&&S.api_domain_prefix!==""&&e.jsxs("div",{className:"space-y-2 ml-4",children:[e.jsx(re,{htmlFor:`api-prefix-${S.name}`,children:"API Domain Prefix"}),e.jsx(je,{id:`api-prefix-${S.name}`,value:S.api_domain_prefix,onChange:g=>{const v=[...t.services||[]];v[w]={...S,api_domain_prefix:g.target.value||S.name},s({services:v})},placeholder:S.name,className:"bg-gray-800 border-gray-600 text-white"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Subdomain prefix for this service (default: ",S.name,")"]})]})]},S.name))]}),p&&e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(js,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400",children:"Domain Configuration"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400",children:"Main Domain:"}),e.jsx("code",{className:"text-blue-300",children:j})]}),t.domain?.create_domain_zone&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Le,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"A new Route 53 hosted zone will be created"})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-700/30",children:[e.jsx("p",{className:"text-gray-400 font-medium mb-2",children:"API Gateway Custom Domains:"}),t.domain?.api_domain_prefix&&t.domain.api_domain_prefix!==""?e.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[e.jsx(Le,{className:"w-3 h-3 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("code",{className:"text-green-300",children:[t.domain.api_domain_prefix,".",j]}),e.jsx("span",{className:"text-gray-500 ml-2",children:"(backend)"})]})]}):e.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[e.jsx(Le,{className:"w-3 h-3 text-yellow-400 mt-0.5"}),e.jsxs("span",{className:"text-gray-400",children:["Backend: ",e.jsx("span",{className:"text-yellow-400",children:"disabled"})]})]}),t.services?.filter(S=>S.api_domain_prefix&&S.api_domain_prefix!=="").map(S=>e.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[e.jsx(Le,{className:"w-3 h-3 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("code",{className:"text-green-300",children:[S.api_domain_prefix,".",j]}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",S.name,")"]})]})]},S.name)),(!t.domain?.api_domain_prefix||t.domain.api_domain_prefix==="")&&!t.services?.some(S=>S.api_domain_prefix&&S.api_domain_prefix!=="")&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-3 h-3 text-yellow-400 mt-0.5"}),e.jsx("span",{className:"text-gray-400",children:"No API Gateway custom domains configured"})]})]})]})]})]})}),e.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"w-4 h-4 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-2",children:"SSL/TLS Certificates"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("li",{children:" ACM certificates will be automatically created"}),e.jsxs("li",{children:[" Wildcard certificate for"," ",e.jsxs("code",{className:"text-green-300",children:["*.",j]})]}),e.jsx("li",{children:" DNS validation will be configured in Route 53"}),e.jsx("li",{children:" HTTPS enforced on all endpoints"})]})]})]})}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("li",{children:" Domain registration is not handled - register separately"}),e.jsx("li",{children:" Update nameservers to Route 53 after zone creation"}),e.jsx("li",{children:" DNS propagation may take up to 48 hours"}),e.jsx("li",{children:" Environment prefix helps prevent conflicts (dev.example.com)"})]})]})]})]})]})})}function yH({config:t,onConfigChange:s}){const[n,i]=E.useState(!1),[o,u]=E.useState(""),[h,l]=E.useState(!1),[d,f]=E.useState(!0),[p,m]=E.useState(""),[y,j]=E.useState(null),[S,w]=E.useState({name:""}),[g,v]=E.useState(""),b={allowed_origins:["*"],allowed_methods:["GET","HEAD"],allowed_headers:["*"],expose_headers:["ETag"],max_age_seconds:3600},_=t.buckets||[],C=()=>{if(!o)return;const R={name:o,public:h,versioning:d};if(p.trim())try{const k=JSON.parse(p);R.cors_rules=Array.isArray(k)?k:[k]}catch{}else h&&(R.cors_rules=[b]);s({buckets:[..._,R]}),u(""),l(!1),f(!0),m(""),i(!1)},A=R=>{const k=[..._];if(g.trim())try{const M=JSON.parse(g);S.cors_rules=Array.isArray(M)?M:[M]}catch{}else delete S.cors_rules;k[R]=S,s({buckets:k}),j(null),v("")},D=R=>{const k=_.filter((M,I)=>I!==R);s({buckets:k})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Wr,{className:"w-5 h-5"}),"Primary Backend Bucket"]}),e.jsx(we,{children:"Main S3 bucket for backend file storage"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wr,{className:"w-4 h-4 text-green-400"}),e.jsxs("code",{className:"text-sm font-mono text-green-400",children:[t.project,"-backend-",t.env,t.workload?.bucket_postfix||""]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.workload?.bucket_public?e.jsx(js,{className:"w-3 h-3 text-yellow-400"}):e.jsx(Ei,{className:"w-3 h-3 text-gray-400"}),e.jsx(Te,{variant:t.workload?.bucket_public?"outline":"secondary",className:"text-xs",children:t.workload?.bucket_public?"Public Access":"Private"})]}),e.jsx(Te,{variant:"outline",className:"text-xs",children:"Primary"})]})]}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>window.open(`https://s3.console.aws.amazon.com/s3/buckets/${t.project}-backend-${t.env}${t.workload?.bucket_postfix||""}?region=${t.region}`,"_blank"),children:e.jsx(Xr,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Environment Variable:"}),e.jsx("code",{className:"font-mono text-blue-400",children:"AWS_S3_BUCKET"})]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"Purpose:"}),e.jsx("span",{children:"File uploads, static assets, temporary storage"})]})]})]})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Wr,{className:"w-5 h-5"}),"Additional Buckets"]}),e.jsx(we,{children:"Configure additional S3 buckets for your application"})]}),e.jsxs(ie,{size:"sm",onClick:()=>i(!0),disabled:n,children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Bucket"]})]})}),e.jsxs(pe,{className:"space-y-3",children:[n&&e.jsxs("div",{className:"border border-blue-700 bg-blue-900/10 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"bucket-name",children:"Bucket Name Suffix"}),e.jsx(je,{id:"bucket-name",value:o,onChange:R=>u(R.target.value),placeholder:"uploads",className:"mt-1"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Final name: ",t.project,"-",o||"name","-",t.env]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{htmlFor:"bucket-public",className:"text-sm font-medium",children:"Public Access"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Allow unauthenticated access to objects"})]}),e.jsx(ct,{id:"bucket-public",checked:h,onCheckedChange:R=>{l(R),R&&!p.trim()&&m(JSON.stringify(b,null,2))}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{htmlFor:"bucket-versioning",className:"text-sm font-medium",children:"Versioning"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Keep history of object changes"})]}),e.jsx(ct,{id:"bucket-versioning",checked:d,onCheckedChange:f})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"bucket-cors",children:"CORS Rules (JSON, optional)"}),e.jsx(Qt,{id:"bucket-cors",value:p,onChange:R=>m(R.target.value),placeholder:h?"Default CORS for public access will be applied":`{
  "allowed_origins": ["https://app.example.com"],
  "allowed_methods": ["GET", "PUT"],
  "max_age_seconds": 7200
}`,className:"mt-1 font-mono text-xs h-24"}),h&&!p.trim()&&e.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Default CORS will be applied: GET/HEAD from all origins"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{i(!1),u(""),l(!1),f(!0),m("")},children:"Cancel"}),e.jsxs(ie,{size:"sm",onClick:C,disabled:!o,children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Add Bucket"]})]})]}),_.map((R,k)=>{const M=y===k,I=`${t.project}-${R.name}-${t.env}`;return e.jsx("div",{className:"border border-gray-700 rounded-lg p-3",children:M?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-xs text-gray-400 mb-1",children:"Bucket Name Suffix"}),e.jsx(je,{value:S.name,onChange:q=>w({...S,name:q.target.value}),className:"font-mono text-sm"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Full name: ",t.project,"-",S.name||"name","-",t.env]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Public Access"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Allow unauthenticated access to objects"})]}),e.jsx(ct,{checked:S.public||!1,onCheckedChange:q=>{w({...S,public:q}),q&&!g&&v(JSON.stringify(b,null,2))}})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{className:"text-sm font-medium",children:"Versioning"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Keep history of object changes"})]}),e.jsx(ct,{checked:S.versioning!==!1,onCheckedChange:q=>w({...S,versioning:q})})]})]}),e.jsxs("div",{children:[e.jsx(re,{className:"text-xs text-gray-400 mb-1",children:"CORS Configuration (JSON)"}),e.jsx(Qt,{value:g,onChange:q=>v(q.target.value),placeholder:S.public?"Default CORS for public access will be applied if empty":"Optional CORS rules in JSON format",className:"font-mono text-xs h-32"}),S.public&&!g.trim()&&e.jsx("p",{className:"text-xs text-blue-400 mt-1",children:"Default: GET/HEAD from all origins"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{j(null),v("")},children:"Cancel"}),e.jsxs(ie,{size:"sm",onClick:()=>A(k),children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Save Changes"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wr,{className:"w-4 h-4 text-blue-400"}),e.jsx("code",{className:"text-sm font-mono text-blue-400",children:I})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[R.public?e.jsx(js,{className:"w-3 h-3 text-yellow-400"}):e.jsx(Ei,{className:"w-3 h-3 text-green-400"}),e.jsx("span",{className:"text-gray-400",children:R.public?"Public":"Private"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(RT,{className:"w-3 h-3 text-blue-400"}),e.jsxs("span",{className:"text-gray-400",children:["Versioning"," ",R.versioning===!1?"Off":"On"]})]}),R.cors_rules&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Kt,{className:"w-3 h-3 text-purple-400"}),e.jsx("span",{className:"text-gray-400",children:"CORS"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>window.open(`https://s3.console.aws.amazon.com/s3/buckets/${I}?region=${t.region}`,"_blank"),className:"h-7 w-7 p-0",children:e.jsx(Xr,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{j(k),w(R),R.cors_rules&&R.cors_rules.length>0?v(JSON.stringify(R.cors_rules.length===1?R.cors_rules[0]:R.cors_rules,null,2)):v("")},className:"h-7 w-7 p-0",children:e.jsx(Fo,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>D(k),className:"h-7 w-7 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]})},k)}),_.length===0&&!n&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Wr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No additional buckets configured"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add Bucket" to create a new S3 bucket'})]})]})]})]})}function Dj({config:t,node:s}){const[n,i]=E.useState(null),o=s.id.replace(/^(scheduled|event)-/,""),u={name:`${t.project}_task_${o}_${t.env}`,description:`Task logs for ${o}`,service:s.type==="scheduled-task"?"ECS Scheduled Task":"ECS Event Task",retention:"7 days"},h=(j,S)=>{navigator.clipboard.writeText(j),i(S),setTimeout(()=>i(null),2e3)},l=j=>`aws logs tail ${j} --follow`,d=j=>`aws logs filter-log-events \\
  --log-group-name "${j}" \\
  --start-time $(date -d '24 hours ago' +%s)000`,f=j=>`aws logs describe-log-streams \\
  --log-group-name "${j}" \\
  --order-by LastEventTime \\
  --descending \\
  --limit 1`,p=j=>`aws logs filter-log-events \\
  --log-group-name "${j}" \\
  --filter-pattern "[ERROR]" \\
  --start-time $(date -d '7 days ago' +%s)000`,m=()=>`fields @timestamp, @message
| filter @message like /ERROR/
| sort @timestamp desc
| limit 100`,y=()=>`fields @timestamp, @message
| filter @message like /Task started/ or @message like /Task completed/
| stats count() by bin(1d)`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(qn,{className:"w-5 h-5"}),"CloudWatch Log Group"]}),e.jsxs(we,{children:["Log configuration for scheduled task: ",o]})]}),e.jsxs(pe,{children:[e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-200 flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4 text-blue-400"}),u.name]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:u.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(Te,{variant:"outline",className:"text-xs",children:u.service}),e.jsxs(Te,{variant:"secondary",className:"text-xs",children:[e.jsx(Ms,{className:"w-3 h-3 mr-1"}),u.retention]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Task Name:"}),e.jsx("code",{className:"text-blue-400",children:o})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Log Path:"}),e.jsx("code",{className:"text-green-400",children:u.name})]})]})]}),e.jsxs(ze,{className:"mt-4",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Each task execution creates a new log stream. Logs are retained for 7 days. Task runs are triggered based on the schedule expression."})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"w-5 h-5"}),"CloudWatch CLI Commands"]}),e.jsx(we,{children:"Commands for viewing and analyzing task logs"})]}),e.jsxs(pe,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"Get last execution info"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>h(f(u.name),"last-exec"),className:"h-6 px-2 text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),n==="last-exec"?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:f(u.name)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"Tail logs (real-time)"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>h(l(u.name),"tail"),className:"h-6 px-2 text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),n==="tail"?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:l(u.name)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"View logs from last 24 hours"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>h(d(u.name),"filter"),className:"h-6 px-2 text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),n==="filter"?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:d(u.name)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"Find ERROR logs (last 7 days)"}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>h(p(u.name),"error"),className:"h-6 px-2 text-xs",children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),n==="error"?"Copied!":"Copy"]})]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:p(u.name)})})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"CloudWatch Insights"}),e.jsx(we,{children:"Queries for analyzing scheduled task execution patterns"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsx("p",{className:"text-xs text-gray-300 mb-3",children:"Use CloudWatch Insights to analyze task execution patterns, errors, and performance."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"Find all task errors"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:m()})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"Task execution statistics"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:y()})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"Task duration analysis"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`fields @timestamp, @message
| filter @message like /Task completed in/
| parse @message /Task completed in (?<duration>\\d+)ms/
| stats avg(duration), max(duration), min(duration) by bin(1d)`})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ba,{className:"text-xs font-medium text-gray-400",children:"Failed executions"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`fields @timestamp, @message
| filter @message like /Task failed/ or @message like /ERROR/
| sort @timestamp desc
| limit 50`})})]})]}),e.jsxs(ze,{children:[e.jsx(Vs,{className:"h-4 w-4"}),e.jsxs(Fe,{children:["Run these queries in AWS Console  CloudWatch  Logs  Insights. Select log group ",e.jsx("code",{className:"text-xs",children:u.name})," ","and paste the query."]})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Scheduled Task Monitoring Tips"}),e.jsx(we,{children:"Best practices for monitoring scheduled tasks"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Monitoring Task Executions"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 ml-4",children:[e.jsx("li",{children:" Check CloudWatch Events for task trigger history"}),e.jsx("li",{children:" Monitor task execution duration trends"}),e.jsx("li",{children:" Set up alarms for failed executions"}),e.jsx("li",{children:" Track resource usage (CPU/Memory) per execution"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"View Recent Executions"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`# List all log streams (executions) from last 7 days
aws logs describe-log-streams \\
  --log-group-name "${u.name}" \\
  --order-by LastEventTime \\
  --descending \\
  --limit 10 \\
  --query 'logStreams[*].[logStreamName,lastEventTime]' \\
  --output table`})})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Export Task Logs"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300",children:e.jsx("pre",{children:`# Export task logs to S3
aws logs create-export-task \\
  --log-group-name "${u.name}" \\
  --from $(date -d '30 days ago' +%s)000 \\
  --to $(date +%s)000 \\
  --destination "${t.project}-logs-export" \\
  --destination-prefix "scheduled-tasks/${o}/"`})})]})]})})]})]})}function Ba({children:t,className:s=""}){return e.jsx("div",{className:`text-sm font-medium ${s}`,children:t})}function Mj({config:t,node:s}){const n=s.id.replace(/^(scheduled|event)-/,""),i=t.scheduled_tasks?.find(d=>d.name===n),o=t.event_processor_tasks?.find(d=>d.name===n),h=(i||o)?.sqs_enable||!1,l=[{name:`${t.project}_${n}_task_${t.env}`,type:"Task Role",icon:yw,purpose:"Used by the running container",permissions:[{name:"CloudWatchFullAccess",description:"Write logs and metrics",managed:!0},{name:"SSM Parameter Access",description:`Read parameters from /${t.env}/${t.project}/task/${n}/*`,managed:!1,resource:`arn:aws:ssm:${t.region}:*:parameter/${t.env}/${t.project}/task/${n}/*`},...h?[{name:"SQS Access",description:"Access to SQS queue (when sqs_enable is true)",managed:!1,policyArn:t.sqs?.policy_arn||"Configured via sqs_policy_arn"}]:[]]},{name:`${t.project}_scheduler_${n}_task_execution_${t.env}`,type:"Task Execution Role",icon:qn,purpose:"Used by ECS to pull images and start containers",permissions:[{name:"AmazonECSTaskExecutionRolePolicy",description:"Pull ECR images, write logs",managed:!0},{name:"CloudWatchFullAccess",description:"Create log streams",managed:!0},{name:"SSM Parameter Access",description:"Read secrets for environment variables",managed:!1,resource:`arn:aws:ssm:${t.region}:*:parameter/${t.env}/${t.project}/task/${n}/*`}]},{name:`${t.project}_scheduler_${n}_role_${t.env}`,type:"Scheduler Role",icon:Rc,purpose:"Used by EventBridge Scheduler to trigger the task",permissions:[{name:"AmazonEventBridgeFullAccess",description:"Manage schedules",managed:!0},{name:"AmazonECS_FullAccess",description:"Run ECS tasks",managed:!0}]}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"IAM Roles Overview"]}),e.jsx(we,{children:"Three separate roles with specific permissions for scheduled task execution"})]}),e.jsx(pe,{children:e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Each task uses three IAM roles following the principle of least privilege. Roles are automatically created by Terraform with task-specific permissions."})]})})]}),l.map((d,f)=>e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[e.jsx(d.icon,{className:"w-4 h-4"}),d.type]}),e.jsx("code",{className:"text-xs text-gray-400 font-mono",children:d.name})]}),e.jsx(Te,{variant:"outline",children:"IAM Role"})]}),e.jsx(we,{children:d.purpose})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Permissions"}),e.jsx("div",{className:"space-y-2",children:d.permissions.map((p,m)=>e.jsxs("div",{className:"border border-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-200",children:p.name})]}),p.managed&&e.jsx(Te,{variant:"secondary",className:"text-xs",children:"AWS Managed"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:p.description}),p.resource&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-800 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Resource ARN:"}),e.jsx("code",{className:"text-xs text-gray-300 break-all",children:p.resource})]}),p.policyArn&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-800 rounded",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Policy ARN:"}),e.jsx("code",{className:"text-xs text-gray-300",children:p.policyArn})]})]},m))})]})})]},f)),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ei,{className:"w-5 h-5"}),"Security Configuration"]}),e.jsx(we,{children:"Important security considerations for scheduled tasks"})]}),e.jsx(pe,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Least Privilege Access"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 ml-4",children:[e.jsx("li",{children:" Roles follow least-privilege principle"}),e.jsx("li",{children:" SSM access is scoped to task-specific paths only"}),e.jsx("li",{children:" No cross-task parameter access"}),e.jsx("li",{children:" Tasks cannot access other services' parameters or resources"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Parameter Store Access Pattern"}),e.jsx("div",{className:"bg-gray-900 rounded p-2 mt-2",children:e.jsxs("code",{className:"text-xs text-gray-300",children:["/",t.env,"/",t.project,"/task/",n,"/*"]})}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Tasks can only read/write parameters under their designated namespace"})]}),h&&e.jsxs("div",{className:"p-3 bg-blue-900/20 border border-blue-700 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-400 mb-2 flex items-center gap-2",children:[e.jsx(Le,{className:"w-3 h-3"}),"SQS Access Enabled"]}),e.jsx("p",{className:"text-xs text-gray-300",children:"This task has SQS access enabled. The task role includes the SQS policy specified in your configuration."})]}),e.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-700 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-yellow-400 mb-2 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-3 h-3"}),"CloudWatch Permissions Note"]}),e.jsx("p",{className:"text-xs text-gray-300",children:"CloudWatch permissions are quite broad to ensure proper logging and monitoring. Consider using more restrictive policies in production if needed."})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Trust Relationships"}),e.jsx(we,{children:"Services that can assume these roles"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Task & Execution Roles"}),e.jsx("code",{className:"text-xs text-gray-400",children:"ecs-tasks.amazonaws.com"})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Scheduler Role"}),e.jsx("code",{className:"text-xs text-gray-400",children:"scheduler.amazonaws.com"})]})]})})]})]})}function Oj({config:t,node:s}){const n=s.id.replace(/^(scheduled|event)-/,""),i=`/${t.env}/${t.project}/task/${n}`,[o,u]=E.useState([]),[h,l]=E.useState(!0),[d,f]=E.useState(null),[p,m]=E.useState(null),[y,j]=E.useState(""),[S,w]=E.useState(""),[g,v]=E.useState(!1),[b,_]=E.useState(!1),[C,A]=E.useState(!1),[D,R]=E.useState(!1),[k,M]=E.useState(""),[I,q]=E.useState(""),[W,G]=E.useState("SecureString"),[$,F]=E.useState(""),[B,V]=E.useState(!1),O=E.useCallback(async()=>{try{l(!0),f(null);const K=await Be.listSSMParameters(i);u(K||[])}catch(K){const Z=K instanceof Error?K.message:"Failed to load parameters";Z.includes("not found")||Z.includes("not deployed")||Z.includes("does not exist")?(u([]),f(null)):f(Z)}finally{l(!1)}},[i]);E.useEffect(()=>{O()},[O]);const H=async K=>{try{m(K),v(!0),A(!0);const Z=await Be.getSSMParameter(K.name);w(Z.value),j(Z.value)}catch(Z){f(Z instanceof Error?Z.message:"Failed to load parameter value"),A(!1)}finally{v(!1)}},U=async()=>{if(p)try{_(!0),await Be.createOrUpdateSSMParameter({name:p.name,value:y,type:p.type,description:p.description,overwrite:!0}),w(y),await O(),A(!1)}catch(K){f(K instanceof Error?K.message:"Failed to update parameter")}finally{_(!1)}},L=async K=>{if(confirm(`Are you sure you want to delete parameter ${K}?`))try{await Be.deleteSSMParameter(K),await O()}catch(Z){f(Z instanceof Error?Z.message:"Failed to delete parameter")}},Y=async()=>{try{V(!0);const K=`${i}/${k}`;await Be.createOrUpdateSSMParameter({name:K,value:I,type:W,description:$,overwrite:!1}),R(!1),M(""),q(""),F(""),await O()}catch(K){f(K instanceof Error?K.message:"Failed to create parameter")}finally{V(!1)}},J=K=>K.replace(`${i}/`,"");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Px,{className:"w-5 h-5"}),"Parameter Namespace"]}),e.jsx(we,{children:e.jsxs("code",{className:"font-mono text-sm",children:[i,"/*"]})})]}),e.jsx(pe,{children:e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"All parameters in this namespace are automatically:"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1 ml-4",children:[e.jsx("li",{children:" Discovered at runtime when the task executes"}),e.jsx("li",{children:" Transformed to uppercase environment variables"}),e.jsx("li",{children:" Injected into the ECS task container as secrets"}),e.jsx("li",{children:" Encrypted using AWS KMS"})]})]})})]}),d&&e.jsxs(ze,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:d})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Task Parameters"}),e.jsxs(we,{children:["SSM parameters for task: ",n]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:O,disabled:h,children:e.jsx(Wt,{className:`w-4 h-4 ${h?"animate-spin":""}`})}),e.jsxs(ie,{size:"sm",onClick:()=>R(!0),disabled:D,children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Parameter"]})]})]})}),e.jsx(pe,{children:h&&!o.length?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[D&&e.jsxs("div",{className:"border border-blue-700 bg-blue-900/10 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400",children:"Add New Parameter"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-name",className:"text-xs",children:"Parameter Name"}),e.jsx(je,{id:"new-param-name",placeholder:"parameter_name",value:k,onChange:K=>M(K.target.value),className:"mt-1 h-8 text-sm"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i,"/",k]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-type",className:"text-xs",children:"Type"}),e.jsxs(Zt,{value:W,onValueChange:K=>G(K),children:[e.jsx(es,{className:"mt-1 h-8 text-sm",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"String",children:"String"}),e.jsx(Ee,{value:"StringList",children:"StringList"}),e.jsx(Ee,{value:"SecureString",children:"SecureString"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-value",className:"text-xs",children:"Value"}),e.jsx(Qt,{id:"new-param-value",placeholder:"Parameter value...",value:I,onChange:K=>q(K.target.value),className:"mt-1 h-20 text-sm"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-desc",className:"text-xs",children:"Description (optional)"}),e.jsx(je,{id:"new-param-desc",placeholder:"What is this parameter for?",value:$,onChange:K=>F(K.target.value),className:"mt-1 h-8 text-sm"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{R(!1),M(""),q(""),F("")},disabled:B,children:"Cancel"}),e.jsxs(ie,{size:"sm",onClick:Y,disabled:!k||!I||B,children:[B?e.jsx(st,{className:"w-4 h-4 animate-spin mr-1"}):e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Create"]})]})]}),o.map(K=>{const Z=J(K.name);return e.jsxs("div",{className:"border border-gray-700 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4 text-blue-400"}),e.jsx("code",{className:"text-sm font-mono text-blue-400",children:Z.toUpperCase().replace(/-/g,"_")})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Te,{variant:"outline",className:"text-xs",children:K.type})})]}),K.description&&e.jsx("p",{className:"text-xs text-gray-400",children:K.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(xs,{className:"w-3 h-3 text-gray-500"}),e.jsx("code",{className:"text-gray-500",children:K.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(ie,{size:"sm",variant:"ghost",onClick:()=>H(K),className:"h-6 px-2 text-xs",children:[e.jsx(Lr,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>L(K.name),className:"h-6 w-6 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]})]},K.name)}),!h&&o.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(yt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No parameters found for this task"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add Parameter" to create one'}),!d&&e.jsx("p",{className:"text-xs mt-2 text-gray-500",children:"If the task is not deployed yet, parameters will be available after deployment"})]})]})})]}),e.jsx(sa,{open:C,onOpenChange:A,children:e.jsxs(ra,{className:"max-w-4xl w-[90vw] max-h-[85vh]",children:[e.jsxs(na,{children:[e.jsxs(ia,{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4"}),p&&J(p.name).toUpperCase().replace(/-/g,"_")]}),e.jsx(el,{children:p?.description||"SSM Parameter"})]}),e.jsx("div",{className:"space-y-4 py-4",children:g?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Parameter Path"}),e.jsx("code",{className:"text-sm text-gray-400 block p-2 bg-gray-800 rounded",children:p?.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{children:"Value"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(Te,{variant:"outline",children:p?.type}),p&&e.jsxs("span",{children:["Version: ",p.version]})]})]}),e.jsx(Qt,{value:y,onChange:K=>j(K.target.value),className:"font-mono text-sm min-h-[400px] resize-y",placeholder:"Enter parameter value..."})]}),p?.lastModifiedDate&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Last modified:"," ",new Date(p.lastModifiedDate).toLocaleString()]})]})}),e.jsxs(aa,{children:[e.jsx(ie,{variant:"outline",onClick:()=>A(!1),disabled:b,children:"Cancel"}),e.jsx(ie,{onClick:U,disabled:b||g||y===S,children:b?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})})]})}function Lp({value:t,onChange:s,options:n,placeholder:i}){const[o,u]=E.useState(!1),[h,l]=E.useState(t),d=ae.useRef(null),f=t==="*"||t==="?"?[]:t.split(",");E.useEffect(()=>{const y=j=>{d.current&&!d.current.contains(j.target)&&u(!1)};if(o)return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[o]);const p=y=>{if(y==="*"||y==="?"){s(y),l(y);return}const j=[...f],S=j.indexOf(y);S>-1?j.splice(S,1):j.push(y);const w=j.length===0?"*":j.join(",");s(w),l(w)},m=y=>{l(y.target.value),s(y.target.value)};return e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(je,{value:h,onChange:m,placeholder:i,className:"bg-gray-800 border-gray-600 flex-1"}),e.jsx(ie,{type:"button",variant:"outline",size:"sm",onClick:()=>u(!o),className:"px-2",children:e.jsx(Rc,{className:"w-4 h-4"})})]}),o&&e.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-gray-800 border border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto",children:[e.jsxs("div",{className:"p-2",children:[e.jsx(ie,{type:"button",variant:"ghost",size:"sm",className:"w-full justify-start text-xs",onClick:()=>{p("*"),u(!1)},children:"Any/All (*)"}),n.map(y=>e.jsxs(ie,{type:"button",variant:"ghost",size:"sm",className:`w-full justify-start text-xs ${f.includes(y.value)?"bg-blue-900/30":""}`,onClick:()=>p(y.value),children:[y.label,f.includes(y.value)&&e.jsx(ds,{className:"w-3 h-3 ml-auto"})]},y.value))]}),e.jsxs("div",{className:"border-t border-gray-700 p-2",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Examples:"}),e.jsx("p",{className:"text-xs text-gray-500",children:" 1,15,30 (specific days)"}),e.jsx("p",{className:"text-xs text-gray-500",children:" 1-5 (range)"}),e.jsx("p",{className:"text-xs text-gray-500",children:" MON,WED,FRI"}),e.jsx("p",{className:"text-xs text-gray-500",children:" MON-FRI"})]})]})]})}function bH({value:t,onChange:s}){const n=E.useRef(s);E.useEffect(()=>{n.current=s},[s]);const i=t.startsWith("rate("),o=t.startsWith("cron("),[u,h]=E.useState(i?"rate":"cron"),[l,d]=E.useState("1"),[f,p]=E.useState("day"),[m,y]=E.useState("0"),[j,S]=E.useState("12"),[w,g]=E.useState("*"),[v,b]=E.useState("*"),[_,C]=E.useState("?"),[A,D]=E.useState("*"),[R,k]=E.useState(""),M=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],I=[{value:"MON",label:"Monday"},{value:"TUE",label:"Tuesday"},{value:"WED",label:"Wednesday"},{value:"THU",label:"Thursday"},{value:"FRI",label:"Friday"},{value:"SAT",label:"Saturday"},{value:"SUN",label:"Sunday"}],q=Array.from({length:31},(F,B)=>({value:String(B+1),label:String(B+1)}));E.useEffect(()=>{if(i){const F=t.match(/rate\((\d+)\s+(minute|hour|day)s?\)/);F&&(d(F[1]),p(F[2]))}else if(o){const F=t.match(/cron\((.*?)\s+(.*?)\s+(.*?)\s+(.*?)\s+(.*?)\s+(.*?)\)/);F&&(y(F[1]),S(F[2]),g(F[3]),b(F[4]),C(F[5]),D(F[6]))}},[t,i,o]);const W=()=>{const F=parseInt(l)===1?f:`${f}s`;return`rate(${l} ${F})`},G=()=>`cron(${m} ${j} ${w} ${v} ${_} ${A})`;E.useEffect(()=>{if(u==="rate"){const F=parseInt(l)===1?f:`${f}s`;n.current(`rate(${l} ${F})`)}else n.current(`cron(${m} ${j} ${w} ${v} ${_} ${A})`)},[u,l,f,m,j,w,v,_,A]);const $=F=>{switch(k(F),F){case"every-5-minutes":h("rate"),d("5"),p("minute");break;case"every-hour":h("rate"),d("1"),p("hour");break;case"daily":h("rate"),d("1"),p("day");break;case"daily-noon":h("cron"),y("0"),S("12"),g("*"),b("*"),C("?"),D("*");break;case"weekdays-9am":h("cron"),y("0"),S("9"),g("?"),b("*"),C("MON-FRI"),D("*");break;case"first-monday":h("cron"),y("0"),S("9"),g("?"),b("*"),C("2#1"),D("*");break}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Quick Presets"}),e.jsxs(Zt,{value:R,onValueChange:$,children:[e.jsx(es,{className:"bg-gray-800 border-gray-600",children:e.jsx(Jt,{placeholder:"Select a preset schedule"})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"every-5-minutes",children:"Every 5 minutes"}),e.jsx(Ee,{value:"every-hour",children:"Every hour"}),e.jsx(Ee,{value:"daily",children:"Daily"}),e.jsx(Ee,{value:"daily-noon",children:"Daily at noon UTC"}),e.jsx(Ee,{value:"weekdays-9am",children:"Weekdays at 9 AM UTC"}),e.jsx(Ee,{value:"first-monday",children:"First Monday of month at 9 AM UTC"})]})]})]}),e.jsxs(qC,{value:u,onValueChange:F=>h(F),children:[e.jsxs(GC,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ro,{value:"rate",className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Rate-based"]}),e.jsxs(Ro,{value:"cron",className:"flex items-center gap-2",children:[e.jsx(Rc,{className:"w-4 h-4"}),"Cron-based"]})]}),e.jsxs(Do,{value:"rate",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Value"}),e.jsx(je,{type:"number",min:"1",value:l,onChange:F=>d(F.target.value),className:"bg-gray-800 border-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Unit"}),e.jsxs(Zt,{value:f,onValueChange:F=>p(F),children:[e.jsx(es,{className:"bg-gray-800 border-gray-600",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"minute",children:"Minute(s)"}),e.jsx(Ee,{value:"hour",children:"Hour(s)"}),e.jsx(Ee,{value:"day",children:"Day(s)"})]})]})]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Runs every ",l," ",f,parseInt(l)!==1?"s":""]})]}),e.jsxs(Do,{value:"cron",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Minute (0-59)"}),e.jsx(je,{value:m,onChange:F=>y(F.target.value),placeholder:"0",className:"bg-gray-800 border-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Hour (0-23)"}),e.jsx(je,{value:j,onChange:F=>S(F.target.value),placeholder:"12",className:"bg-gray-800 border-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Day of Month"}),e.jsx(Lp,{value:w,onChange:g,options:q,placeholder:"* or 1,15,30 or 1-5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Month"}),e.jsx(Lp,{value:v,onChange:b,options:M,placeholder:"* or 1,6,12 or 3-5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Day of Week"}),e.jsx(Lp,{value:_,onChange:C,options:[{value:"?",label:"Any day (?)"},...I],placeholder:"? or MON,WED,FRI or MON-FRI"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Year"}),e.jsx(je,{value:A,onChange:F=>D(F.target.value),placeholder:"* or 2024-2030",className:"bg-gray-800 border-gray-600"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:e.jsx("strong",{children:"Special characters:"})}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("code",{children:"*"})," - Any value"]}),e.jsxs("li",{children:[" ",e.jsx("code",{children:"?"})," - No specific value (day of month/week)"]}),e.jsxs("li",{children:[" ",e.jsx("code",{children:"-"})," - Range (e.g., MON-FRI)"]}),e.jsxs("li",{children:[" ",e.jsx("code",{children:","})," - List (e.g., MON,WED,FRI)"]}),e.jsxs("li",{children:[" ",e.jsx("code",{children:"#"})," - Nth occurrence (e.g., 2#1 = first Monday)"]})]})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Generated expression:"}),e.jsx("code",{className:"text-sm text-blue-300 font-mono",children:u==="rate"?W():G()})]})]})}function _H({config:t,onConfigChange:s,accountInfo:n,node:i}){const o=i.id.replace("scheduled-",""),u=E.useRef(0),h=E.useRef(!1);u.current++,E.useEffect(()=>(h.current||(console.log(` [ScheduledTaskProperties] MOUNTED for task: ${o}`),h.current=!0),()=>{console.log(` [ScheduledTaskProperties] UNMOUNTED for task: ${o}`)}),[o]);const l=E.useRef({config:t,accountInfo:n,node:i});E.useEffect(()=>{const S=l.current,w=[];S.config!==t&&w.push("config"),S.accountInfo!==n&&w.push("accountInfo"),S.node!==i&&w.push("node"),w.length>0&&console.log(` [ScheduledTaskProperties] Props changed: ${w.join(", ")}`,{renderCount:u.current,scheduled_tasks_changed:S.config.scheduled_tasks!==t.scheduled_tasks}),l.current={config:t,accountInfo:n,node:i}},[t,n,i]),console.log(` [ScheduledTaskProperties] Render #${u.current} for task: ${o} [${h.current?"MOUNTED":"MOUNTING"}]`),u.current>50&&(console.error(" [ScheduledTaskProperties] INFINITE LOOP DETECTED - More than 50 renders!"),console.trace("Stack trace at 50th render"));const d=E.useRef(t);E.useEffect(()=>{console.log(` [ScheduledTaskProperties] Config updated for ${o}`,{scheduled_tasks_count:t.scheduled_tasks?.length,current_task_exists:!!t.scheduled_tasks?.find(S=>S.name===o)}),d.current=t},[t,o]);const f=d2(()=>{const S=t.scheduled_tasks?.find(w=>w.name===o);return console.log(` [ScheduledTaskProperties] currentTask recalculated (DEEP COMPARE) for ${o}:`,S),S},[t.scheduled_tasks,o]),p=f?.ecr_config||{mode:"create_ecr"};console.log(" [ScheduledTaskProperties] ecrConfig derived from currentTask:",p);const m=E.useCallback(S=>{console.log(` [handleTaskChange] Called for ${o} with updates:`,S);const w=d.current.scheduled_tasks||[],g=w.find(v=>v.name===o);if(g){const v={...g,...S};if(JSON.stringify(g)===JSON.stringify(v)){console.log(` [handleTaskChange] No changes detected for ${o}, skipping update.`);return}const b=w.map(_=>_.name===o?v:_);console.log(" [handleTaskChange] Updating existing task:",v),s({scheduled_tasks:b})}else{const v={name:o,schedule:"rate(1 day)",...S};console.log(" [handleTaskChange] Creating new task:",v),s({scheduled_tasks:[...w,v]})}},[o,s]),y=E.useCallback(S=>{console.log(` [handleEcrConfigChange] Called for ${o} with newConfig:`,S,{renderCount:u.current,isMounted:h.current}),m({ecr_config:S})},[m]),j=f||{schedule:"rate(1 day)",container_command:""};return e.jsxs(fe,{className:"w-full",children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Scheduled Task Configuration"}),e.jsxs(we,{children:["Configure settings for scheduled task: ",o]})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Schedule Expression"}),e.jsx(bH,{value:j.schedule||"rate(1 day)",onChange:S=>m({schedule:S})})]}),e.jsx(Yr,{}),e.jsx(u2,{config:t,currentServiceName:o,currentServiceType:"scheduled_tasks",ecrConfig:p,onEcrConfigChange:y,accountInfo:n}),e.jsx(Yr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"container_command",children:"Container Command Override"}),e.jsx(je,{id:"container_command",value:j.container_command||"",onChange:S=>m({container_command:S.target.value}),placeholder:'["npm", "run", "report"]',className:"bg-gray-800 border-gray-600 text-white font-mono"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Override container startup command (JSON array as string)"})]})]})]})}function jH({config:t,onConfigChange:s}){const[n,i]=E.useState(""),o=t.ses||{enabled:!1},u=o.test_emails||[],h=t.domain?.enabled,l=t.domain?.domain_name,d=t.env==="prod"||t.env==="production",f=l?d?`mail.${l}`:`mail.${t.env}.${l}`:"",p=o.domain_name||f,m=w=>{s({ses:{...o,enabled:w}})},y=w=>{s({ses:{...o,domain_name:w}})},j=()=>{n&&!u.includes(n)&&(s({ses:{...o,test_emails:[...u,n]}}),i(""))},S=w=>{s({ses:{...o,test_emails:u.filter(g=>g!==w)}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zo,{className:"w-5 h-5"}),"Simple Email Service (SES)"]}),e.jsx(we,{children:"Configure AWS SES for sending transactional and marketing emails"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{htmlFor:"ses-enabled",className:"text-base",children:"Enable SES"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set up email sending infrastructure with domain verification"})]}),e.jsx(ct,{id:"ses-enabled",checked:o.enabled,onCheckedChange:m})]})})]}),o.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5"}),"Domain Configuration"]}),e.jsx(we,{children:"Configure the domain for sending emails (uses mail subdomain by default)"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"domain-name",children:"Email Domain (Optional)"}),e.jsx(je,{id:"domain-name",value:o.domain_name||"",onChange:w=>y(w.target.value),placeholder:f||"example.com"}),e.jsx("p",{className:"text-xs text-gray-500",children:h&&l&&!o.domain_name?e.jsxs(e.Fragment,{children:["Default:"," ",e.jsx("code",{className:"text-blue-400",children:f})," (",d?"mail":`mail.${t.env}`," subdomain)"]}):"The domain you'll use for sending emails (must have Route53 zone)"})]}),p&&e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Fe,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["SES will use:"," ",e.jsx("strong",{className:"text-blue-400",children:p})]}),e.jsx("p",{className:"text-xs",children:"DNS records will be automatically created in Route53 for domain verification and DKIM authentication"})]})})]}),!h&&!o.domain_name&&e.jsxs(ze,{className:"border-yellow-600 bg-yellow-50",children:[e.jsx(Ye,{className:"h-4 w-4 text-yellow-600"}),e.jsx(Fe,{children:"Domain module is not enabled. You must specify a domain name or enable the domain module to use the default mail subdomain."})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"Test Email Addresses"]}),e.jsx(we,{children:"Email addresses to verify for testing (useful in SES sandbox mode)"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{value:n,onChange:w=>i(w.target.value),placeholder:"test@example.com",type:"email",onKeyPress:w=>w.key==="Enter"&&j()}),e.jsx(ie,{size:"sm",onClick:j,disabled:!n,children:e.jsx(ws,{className:"w-4 h-4"})})]}),u.length>0&&e.jsx("div",{className:"space-y-2",children:u.map((w,g)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded",children:[e.jsx("span",{className:"text-sm font-mono",children:w}),e.jsx("button",{onClick:()=>S(w),className:"text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(ds,{className:"w-4 h-4"})})]},g))}),e.jsxs(ze,{children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Test emails are useful when SES is in sandbox mode. Each email address will be verified individually."})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"AWS Resources Created"]}),e.jsx(we,{children:"Resources that will be created when SES is enabled"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Domain Identity"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Verifies ownership of ",p||"your domain"," ","for sending emails"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"DKIM Configuration"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Sets up DomainKeys Identified Mail for email authentication"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"DNS Records in Route53"}),e.jsxs("ul",{className:"text-xs text-gray-400 mt-1 ml-4 space-y-1",children:[e.jsx("li",{children:" Domain verification TXT record"}),e.jsx("li",{children:" 3 DKIM CNAME records for authentication"}),e.jsx("li",{children:" DMARC record for email policy"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Email Identities"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Verifies ",u.length," test email"," ",u.length===1?"address":"addresses"]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"ACM Certificate"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"SSL certificate for the email domain"})]})]})]})})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Important Notes"]}),e.jsx(we,{children:"Key information about using SES"})]}),e.jsxs(pe,{className:"space-y-3",children:[e.jsxs(ze,{children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsxs(Fe,{children:[e.jsx("strong",{children:"Sandbox Mode:"})," SES starts in sandbox mode with sending restrictions. You need to request production access from AWS to send to unverified addresses."]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("p",{children:" The domain must be one you own and have a Route53 hosted zone for"}),h&&l&&e.jsxs("p",{children:[" Default domain:"," ",e.jsx("code",{className:"text-blue-400",children:f})," ",!d&&"(includes environment prefix for non-prod)"]}),e.jsx("p",{children:" Domain verification happens automatically via Route53"}),e.jsx("p",{children:" DMARC policy is set to quarantine unauthorized emails"}),e.jsx("p",{children:" Email authentication improves deliverability rates"})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>window.open("https://console.aws.amazon.com/ses/home","_blank"),children:[e.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Open SES Console"]})})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-5 h-5"}),"Configuration Preview"]}),e.jsx(we,{children:"YAML configuration that will be generated"})]}),e.jsx(pe,{children:e.jsx("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 overflow-x-auto",children:e.jsx("pre",{children:`ses:
  enabled: ${o.enabled}${o.domain_name?`
  domain_name: "${o.domain_name}"`:h&&l?`
  # domain_name not specified - will use default: ${f}`:`
  domain_name: "example.com" # Required - domain module not enabled`}${u.length>0?`
  test_emails:${u.map(w=>`
    - "${w}"`).join("")}`:""}`})})})]})]})]})}function wH({config:t}){const[s,n]=E.useState(""),[i,o]=E.useState("Test Email from SES"),[u,h]=E.useState(`This is a test email sent from AWS SES.

Environment: ${t.env}
Project: ${t.project}
Region: ${t.region}

This email confirms that your SES configuration is working correctly.`),[l,d]=E.useState(!1),[f,p]=E.useState(null),m=t.ses||{enabled:!1},y=t.domain?.domain_name,j=t.env==="prod"||t.env==="production",S=y?j?`mail.${y}`:`mail.${t.env}.${y}`:"",w=m.domain_name||S||"example.com",g=`noreply@${w}`,v=async()=>{if(!s||!i||!u){p({success:!1,message:"Please fill in all fields"});return}d(!0),p(null);try{const C=await Be.sendTestEmail(t.env||"dev",s,i,u);p({success:!0,message:"Test email sent successfully!",messageId:C.messageId})}catch(C){p({success:!1,message:C instanceof Error?C.message:"Failed to send test email"})}finally{d(!1)}},b=C=>{navigator.clipboard.writeText(C)},_=[{name:"Simple Test",subject:"Test Email from SES",body:`This is a test email sent from AWS SES.

Environment: ${t.env}
Project: ${t.project}
Region: ${t.region}

This email confirms that your SES configuration is working correctly.`},{name:"HTML Test",subject:"HTML Test Email",body:`<html>
<body style="font-family: Arial, sans-serif; padding: 20px;">
  <h2>Test Email from AWS SES</h2>
  <p>This is a <strong>test email</strong> with HTML content.</p>
  <ul>
    <li>Environment: <code>${t.env}</code></li>
    <li>Project: <code>${t.project}</code></li>
    <li>Region: <code>${t.region}</code></li>
  </ul>
  <p style="color: #666; font-size: 12px;">
    Sent from AWS SES via ${t.project} infrastructure
  </p>
</body>
</html>`},{name:"Welcome Email",subject:"Welcome to ${project}!",body:`Hello,

Welcome to ${t.project}! We're excited to have you on board.

This is a test of our transactional email system powered by AWS SES.

If you're receiving this email, it means our email infrastructure is working correctly.

Best regards,
The ${t.project} Team

--
This is an automated message from ${w}`}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs(Fe,{children:["Test emails will be sent from"," ",e.jsx("code",{className:"text-blue-400",children:g}),m.enabled?"":" (SES must be enabled and deployed first)"]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zo,{className:"w-5 h-5"}),"Compose Test Email"]}),e.jsx(we,{children:"Send a test email to verify your SES configuration"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"to-email",children:"To Email Address"}),e.jsx(je,{id:"to-email",type:"email",value:s,onChange:C=>n(C.target.value),placeholder:"recipient@example.com",disabled:l}),e.jsx("p",{className:"text-xs text-gray-500",children:"In sandbox mode, this must be a verified email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"subject",children:"Subject"}),e.jsx(je,{id:"subject",value:i,onChange:C=>o(C.target.value),placeholder:"Test Email Subject",disabled:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{htmlFor:"body",children:"Email Body"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Plain text or HTML"})]}),e.jsx(Qt,{id:"body",value:u,onChange:C=>h(C.target.value),placeholder:"Email content...",className:"min-h-[200px] font-mono text-sm",disabled:l})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(ie,{onClick:v,disabled:l||!s||!i||!u,className:"flex-1",children:l?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Send Test Email"]})})}),f&&e.jsxs(ze,{className:f.success?"border-green-600":"border-red-600",children:[f.success?e.jsx(vt,{className:"h-4 w-4 text-green-600"}):e.jsx(Ye,{className:"h-4 w-4 text-red-600"}),e.jsx(Fe,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{children:f.message}),f.messageId&&e.jsxs("p",{className:"text-xs font-mono",children:["Message ID: ",f.messageId]})]})})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"Email Templates"]}),e.jsx(we,{children:"Quick templates for testing different email scenarios"})]}),e.jsx(pe,{className:"space-y-3",children:_.map((C,A)=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:C.name}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{o(C.subject),h(C.body)},children:"Use Template"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mb-1",children:["Subject: ",C.subject]}),e.jsx("div",{className:"bg-gray-900 rounded p-2 max-h-20 overflow-hidden",children:e.jsxs("pre",{className:"text-xs text-gray-500 whitespace-pre-wrap",children:[C.body.substring(0,150),"..."]})})]},A))})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Testing Tips"}),e.jsx(we,{children:"Best practices for testing email delivery"})]}),e.jsx(pe,{children:e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"In sandbox mode, you can only send to verified email addresses"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Check your spam folder if the email doesn't arrive"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Test both plain text and HTML formats"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Verify SPF, DKIM, and DMARC are properly configured"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400",children:""}),e.jsx("span",{children:"Monitor CloudWatch for bounce and complaint metrics"})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsx(ge,{children:"Email Headers Preview"}),e.jsx(we,{children:"Headers that will be included in your test email"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-3 font-mono text-xs text-gray-300 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-500",children:"From:"})," ",g]}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>b(g),children:e.jsx(ut,{className:"w-3 h-3"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"To:"})," ",s||"recipient@example.com"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Subject:"})," ",i||"Test Email Subject"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"X-SES-Configuration-Set:"})," ",t.project,"-",t.env]})]})})]})]})}function SH({config:t}){const[s,n]=E.useState(null),[i,o]=E.useState(null),[u,h]=E.useState(!0),[l,d]=E.useState(null),f=E.useCallback(async()=>{try{h(!0),d(null);const[p,m]=await Promise.all([Be.getSESStatus(),Be.getSESSandboxInfo()]);n(p),o(m)}catch(p){d(p instanceof Error?p.message:"Failed to load SES status")}finally{h(!1)}},[]);return E.useEffect(()=>{f()},[f]),u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Wt,{className:"w-6 h-6 animate-spin text-gray-400"})}):l?e.jsxs(ze,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:l})]}):s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5"}),"Account Status"]}),e.jsx(we,{children:"Current SES account status and sending capabilities"})]}),e.jsx(ie,{size:"sm",variant:"outline",onClick:f,disabled:u,children:e.jsx(Wt,{className:`w-4 h-4 ${u?"animate-spin":""}`})})]})}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:`w-5 h-5 ${s.inSandbox?"text-yellow-400":"text-green-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Environment Mode"}),e.jsx("p",{className:"text-xs text-gray-400",children:s.inSandbox?"Sandbox (Limited)":"Production (Full Access)"})]})]}),e.jsx(Te,{variant:s.inSandbox?"outline":"default",children:s.inSandbox?"Sandbox":"Production"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.sendingEnabled?e.jsx(vt,{className:"w-5 h-5 text-green-400"}):e.jsx(Ci,{className:"w-5 h-5 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Sending Status"}),e.jsx("p",{className:"text-xs text-gray-400",children:s.sendingEnabled?"Email sending is enabled":"Email sending is disabled"})]})]}),e.jsx(Te,{variant:s.sendingEnabled?"default":"destructive",children:s.sendingEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(zo,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Daily Quota"})]}),e.jsx("p",{className:"text-lg font-medium",children:s.dailyQuota.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500",children:"emails per day"})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Vp,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Send Rate"})]}),e.jsx("p",{className:"text-lg font-medium",children:s.maxSendRate}),e.jsx("p",{className:"text-xs text-gray-500",children:"emails per second"})]})]}),e.jsx("div",{className:"p-3 bg-gray-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ms,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Last 24 Hours"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Emails sent"})]})]}),e.jsx("p",{className:"text-2xl font-medium",children:s.sentLast24Hours})]})}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Reputation Status"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Sender reputation health"})]})]}),e.jsx(Te,{variant:s.reputationStatus==="Healthy"?"default":s.reputationStatus==="Default"?"secondary":"outline",children:s.reputationStatus})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"AWS Region"}),e.jsx("span",{className:"font-mono text-gray-300",children:s.region})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zo,{className:"w-5 h-5"}),"Verified Identities"]}),e.jsx(we,{children:"Domains and email addresses verified for sending"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[s.verifiedDomains.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Verified Domains"}),e.jsx("div",{className:"space-y-2",children:s.verifiedDomains.map((p,m)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-800 rounded",children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm font-mono",children:p})]},m))})]}),s.verifiedEmails.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Verified Email Addresses"}),e.jsx("div",{className:"space-y-2",children:s.verifiedEmails.map((p,m)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-800 rounded",children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm font-mono",children:p})]},m))})]}),s.verifiedDomains.length===0&&s.verifiedEmails.length===0&&e.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No verified identities found"})]})})]}),s.inSandbox&&i&&e.jsxs(fe,{className:"border-yellow-600/50",children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-yellow-500"}),"Sandbox Mode - Request Production Access"]}),e.jsx(we,{children:"Your account is currently limited. Request production access to send emails without restrictions."})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ie,{variant:"default",onClick:()=>window.open("https://console.aws.amazon.com/ses/home#/account","_blank"),children:[e.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Request Production Access"]}),e.jsxs(ie,{variant:"outline",onClick:()=>window.open("https://docs.aws.amazon.com/ses/latest/dg/request-production-access.html","_blank"),children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"View Guide"]})]}),e.jsxs(ze,{className:"border-yellow-600 bg-yellow-50",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsxs(Fe,{children:[e.jsx("p",{className:"font-medium mb-2",children:"Current Sandbox Limitations:"}),e.jsx("ul",{className:"space-y-1 text-sm",children:i.limitations.map((p,m)=>e.jsxs("li",{children:[" ",p]},m))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Production Access Request Template"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Use this template when submitting your production access request:"}),e.jsxs("div",{className:"bg-gray-900 rounded p-3 font-mono text-xs text-gray-300 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"Use Case Description:"})}),e.jsxs("p",{children:["We are using AWS SES to send transactional emails for our"," ",t.project||"[PROJECT NAME]"," application. Our emails include:"]}),e.jsx("p",{children:"- User registration confirmations"}),e.jsx("p",{children:"- Password reset notifications"}),e.jsx("p",{children:"- Order confirmations and updates"}),e.jsx("p",{children:"- System alerts and notifications"}),e.jsx("p",{}),e.jsx("p",{children:e.jsx("strong",{children:"Email Volume:"})}),e.jsx("p",{children:"Expected daily volume: [SPECIFY YOUR EXPECTED VOLUME]"}),e.jsx("p",{children:"Peak sending rate: [SPECIFY EMAILS PER SECOND]"}),e.jsx("p",{}),e.jsx("p",{children:e.jsx("strong",{children:"Recipient Management:"})}),e.jsx("p",{children:"- All recipients have explicitly opted in to receive emails"}),e.jsx("p",{children:"- We maintain unsubscribe links in all marketing emails"}),e.jsx("p",{children:"- We immediately process bounce and complaint notifications"}),e.jsx("p",{children:"- We maintain a suppression list for opted-out addresses"}),e.jsx("p",{}),e.jsx("p",{children:e.jsx("strong",{children:"Content Type:"})}),e.jsx("p",{children:"Transactional emails only - no marketing or promotional content without explicit consent"}),e.jsx("p",{}),e.jsx("p",{children:e.jsx("strong",{children:"Compliance:"})}),e.jsx("p",{children:"We comply with CAN-SPAM Act, GDPR, and all applicable email regulations"})]}),e.jsxs(ie,{size:"sm",variant:"ghost",onClick:()=>{const p=`Use Case Description:
We are using AWS SES to send transactional emails for our ${t.project||"[PROJECT NAME]"} application. Our emails include:
- User registration confirmations
- Password reset notifications
- Order confirmations and updates
- System alerts and notifications

Email Volume:
Expected daily volume: [SPECIFY YOUR EXPECTED VOLUME]
Peak sending rate: [SPECIFY EMAILS PER SECOND]

Recipient Management:
- All recipients have explicitly opted in to receive emails
- We maintain unsubscribe links in all marketing emails
- We immediately process bounce and complaint notifications
- We maintain a suppression list for opted-out addresses

Content Type:
Transactional emails only - no marketing or promotional content without explicit consent

Compliance:
We comply with CAN-SPAM Act, GDPR, and all applicable email regulations`;navigator.clipboard.writeText(p)},children:[e.jsx(ut,{className:"w-3 h-3 mr-1"}),"Copy Template"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"How to Request Production Access"}),e.jsxs("ol",{className:"space-y-2 text-sm text-gray-400",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"1."}),e.jsxs("div",{children:[e.jsx("p",{children:"Go to the AWS Support Center"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Request Production Access" button above'})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"2."}),e.jsxs("div",{children:[e.jsx("p",{children:"Create a new case with:"}),e.jsxs("ul",{className:"text-xs mt-1 ml-4 space-y-1",children:[e.jsx("li",{children:" Service: Service Limit Increase"}),e.jsx("li",{children:" Limit Type: SES Sending Limits"}),e.jsxs("li",{children:[" Region: ",s.region]})]})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"3."}),e.jsxs("div",{children:[e.jsx("p",{children:"Fill in the request details:"}),e.jsxs("ul",{className:"text-xs mt-1 ml-4 space-y-1",children:[e.jsx("li",{children:" Use the template above"}),e.jsx("li",{children:" Be specific about your use case"}),e.jsx("li",{children:" Include your website URL"})]})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 font-medium",children:"4."}),e.jsx("span",{children:"Submit and wait 24-48 hours for approval"})]})]})]}),e.jsxs(ze,{children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs(Fe,{children:[e.jsx("p",{className:"font-medium mb-1",children:"Tips for Approval:"}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:" Clearly explain your business use case"}),e.jsx("li",{children:" Demonstrate you have bounce/complaint handling"}),e.jsx("li",{children:" Show you maintain opt-in/opt-out mechanisms"}),e.jsx("li",{children:" Include your privacy policy URL"})]})]})]})]})]}),!s.inSandbox&&e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Vp,{className:"w-5 h-5"}),"Production Best Practices"]})}),e.jsx(pe,{children:e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:" Monitor your bounce and complaint rates to maintain good sender reputation"}),e.jsx("li",{children:" Use configuration sets to track email metrics"}),e.jsx("li",{children:" Implement proper email authentication (SPF, DKIM, DMARC)"}),e.jsx("li",{children:" Handle bounces and complaints programmatically"}),e.jsx("li",{children:" Warm up your sending gradually to build reputation"})]})})]})]}):null}function NH({config:t,accountInfo:s,node:n,onConfigChange:i}){const o=n.id.replace("service-",""),u=t.services?.find(A=>A.name===o),[h,l]=E.useState(u?.env_vars||{}),[d,f]=E.useState(""),[p,m]=E.useState(""),[y,j]=E.useState(null),[S,w]=E.useState("");if(!u)return e.jsxs(ze,{className:"border-red-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{children:['Service "',o,'" not found in configuration.']})]});const g=[{name:"PG_DATABASE_HOST",value:t.postgres?.enabled?`${t.project}-${t.env}-rds.${t.region}.rds.amazonaws.com`:"Not available (PostgreSQL disabled)",description:"PostgreSQL endpoint",enabled:t.postgres?.enabled},{name:"PG_DATABASE_USERNAME",value:t.postgres?.enabled?t.postgres?.username||"postgres":"Not available (PostgreSQL disabled)",description:"PostgreSQL username",enabled:t.postgres?.enabled},{name:"PG_DATABASE_NAME",value:t.postgres?.enabled?t.postgres?.dbname||"database":"Not available (PostgreSQL disabled)",description:"PostgreSQL database name",enabled:t.postgres?.enabled},{name:"AWS_REGION",value:t.region,description:"Current AWS region",enabled:!0},{name:"URL",value:t.workload?.backend_alb_domain_name||`api.${t.domain?.domain_name||""}`,description:"API domain URL",enabled:!0},{name:"SQS_QUEUE_URL",value:t.sqs?.enabled?`https://sqs.${t.region}.amazonaws.com/${s?.accountId||t.ecr_account_id||"<ACCOUNT_ID>"}/${t.project}-${t.env}-${t.sqs.name||"queue"}`:"Not available (SQS disabled)",description:"SQS Queue URL",enabled:t.sqs?.enabled},{name:"AWS_QUEUE_URL",value:t.sqs?.enabled?`https://sqs.${t.region}.amazonaws.com/${s?.accountId||t.ecr_account_id||"<ACCOUNT_ID>"}/${t.project}-${t.env}-${t.sqs.name||"queue"}`:"Not available (SQS disabled)",description:"SQS Queue URL (duplicate)",enabled:t.sqs?.enabled},{name:"ADOT_COLLECTOR_URL",value:u.xray_enabled?"localhost:2000":"Not available (X-Ray disabled)",description:"X-Ray collector URL",enabled:u.xray_enabled}],v=`/${t.env}/${t.project}/${o}`,b=()=>{if(d&&p){const A={...h,[d]:p};if(l(A),f(""),m(""),i&&t.services){const D=t.services.map(R=>R.name===o?{...R,env_vars:A}:R);i({services:D})}}},_=A=>{const D={...h};if(delete D[A],l(D),i&&t.services){const R=t.services.map(k=>k.name===o?{...k,env_vars:D}:k);i({services:R})}},C=(A,D)=>{const R={...h,[A]:D};if(l(R),j(null),i&&t.services){const k=t.services.map(M=>M.name===o?{...M,env_vars:R}:M);i({services:k})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ei,{className:"w-4 h-4"}),"Preconfigured Environment Variables"]}),e.jsx(we,{children:"Variables automatically set for all services"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-2",children:g.map(A=>e.jsxs("div",{className:`p-2 rounded-lg ${A.enabled?"bg-gray-800":"bg-gray-800/50"}`,children:[e.jsx("code",{className:`text-xs font-mono ${A.enabled?"text-blue-400":"text-gray-500"}`,children:A.name}),e.jsx("div",{className:`text-xs font-mono break-all mt-1 ${A.enabled?"text-gray-300":"text-gray-500"}`,children:A.value}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.description})]},A.name))})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"w-4 h-4"}),"Custom Environment Variables"]}),e.jsxs(we,{children:["Add your own environment variables for ",o]})]}),e.jsxs(pe,{children:[e.jsxs("div",{className:"space-y-3",children:[Object.entries(h).map(([A,D])=>e.jsxs("div",{className:"p-2 bg-gray-800 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-xs font-mono text-green-400",children:A}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{j(A),w(D)},className:"h-5 w-5 p-0",children:e.jsx(Fo,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>_(A),className:"h-5 w-5 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]}),y===A?e.jsxs("div",{className:"mt-1",children:[e.jsx(je,{type:"text",value:S,onChange:R=>w(R.target.value),className:"w-full h-6 text-xs"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>C(A,S),className:"h-5 w-5 p-0",children:e.jsx(tt,{className:"w-3 h-3"})}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>j(null),className:"h-5 w-5 p-0",children:e.jsx(ds,{className:"w-3 h-3"})})]})]}):e.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:D})]},A)),e.jsxs("div",{className:"border-t border-gray-700 pt-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-var-name",className:"text-xs text-gray-400",children:"Variable Name"}),e.jsx(je,{id:"new-var-name",type:"text",placeholder:"VARIABLE_NAME",value:d,onChange:A=>f(A.target.value.toUpperCase().replace(/[^A-Z0-9_]/g,"_")),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-var-value",className:"text-xs text-gray-400",children:"Value"}),e.jsx(je,{id:"new-var-value",type:"text",placeholder:"value",value:p,onChange:A=>m(A.target.value),className:"mt-1"})]})]}),e.jsxs(ie,{onClick:b,disabled:!d||!p,className:"mt-2 w-full",size:"sm",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Add Variable"]})]})]}),e.jsxs(ze,{className:"mt-4",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs(Fe,{className:"text-xs",children:["These variables are defined in the YAML configuration. For secrets, use Parameter Store at"," ",e.jsxs("code",{children:[v,"/*"]})]})]})]})]})]})}const h2=6048e5,CH=864e5,m2=6e4,f2=36e5,Pj=Symbol.for("constructDateFrom");function ta(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&Pj in t?t[Pj](s):t instanceof Date?new t.constructor(s):new Date(s)}function vr(t,s){return ta(s||t,t)}let EH={};function Bh(){return EH}function Ac(t,s){const n=Bh(),i=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=vr(t,s?.in),u=o.getDay(),h=(u<i?7:0)+u-i;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function rh(t,s){return Ac(t,{...s,weekStartsOn:1})}function p2(t,s){const n=vr(t,s?.in),i=n.getFullYear(),o=ta(n,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const u=rh(o),h=ta(n,0);h.setFullYear(i,0,4),h.setHours(0,0,0,0);const l=rh(h);return n.getTime()>=u.getTime()?i+1:n.getTime()>=l.getTime()?i:i-1}function Lj(t){const s=vr(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function kH(t,...s){const n=ta.bind(null,s.find(i=>typeof i=="object"));return s.map(n)}function Bj(t,s){const n=vr(t,s?.in);return n.setHours(0,0,0,0),n}function AH(t,s,n){const[i,o]=kH(n?.in,t,s),u=Bj(i),h=Bj(o),l=+u-Lj(u),d=+h-Lj(h);return Math.round((l-d)/CH)}function TH(t,s){const n=p2(t,s),i=ta(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),rh(i)}function RH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function DH(t){return!(!RH(t)&&typeof t!="number"||isNaN(+vr(t)))}function MH(t,s){const n=vr(t,s?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const OH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},PH=(t,s,n)=>{let i;const o=OH[t];return typeof o=="string"?i=o:s===1?i=o.one:i=o.other.replace("{{count}}",s.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Bp(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const LH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},IH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$H={date:Bp({formats:LH,defaultWidth:"full"}),time:Bp({formats:BH,defaultWidth:"full"}),dateTime:Bp({formats:IH,defaultWidth:"full"})},HH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zH=(t,s,n,i)=>HH[t];function ac(t){return(s,n)=>{const i=n?.context?String(n.context):"standalone";let o;if(i==="formatting"&&t.formattingValues){const h=t.defaultFormattingWidth||t.defaultWidth,l=n?.width?String(n.width):h;o=t.formattingValues[l]||t.formattingValues[h]}else{const h=t.defaultWidth,l=n?.width?String(n.width):t.defaultWidth;o=t.values[l]||t.values[h]}const u=t.argumentCallback?t.argumentCallback(s):s;return o[u]}}const FH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},UH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},VH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YH=(t,s)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},XH={ordinalNumber:YH,era:ac({values:FH,defaultWidth:"wide"}),quarter:ac({values:UH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ac({values:WH,defaultWidth:"wide"}),day:ac({values:VH,defaultWidth:"wide"}),dayPeriod:ac({values:qH,defaultWidth:"wide",formattingValues:GH,defaultFormattingWidth:"wide"})};function ic(t){return(s,n={})=>{const i=n.width,o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],u=s.match(o);if(!u)return null;const h=u[0],l=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(l)?QH(l,m=>m.test(h)):KH(l,m=>m.test(h));let f;f=t.valueCallback?t.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const p=s.slice(h.length);return{value:f,rest:p}}}function KH(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function QH(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function ZH(t){return(s,n={})=>{const i=s.match(t.matchPattern);if(!i)return null;const o=i[0],u=s.match(t.parsePattern);if(!u)return null;let h=t.valueCallback?t.valueCallback(u[0]):u[0];h=n.valueCallback?n.valueCallback(h):h;const l=s.slice(o.length);return{value:h,rest:l}}}const JH=/^(\d+)(th|st|nd|rd)?/i,ez=/\d+/i,tz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sz={any:[/^b/i,/^(a|c)/i]},rz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nz={any:[/1/i,/2/i,/3/i,/4/i]},az={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uz={ordinalNumber:ZH({matchPattern:JH,parsePattern:ez,valueCallback:t=>parseInt(t,10)}),era:ic({matchPatterns:tz,defaultMatchWidth:"wide",parsePatterns:sz,defaultParseWidth:"any"}),quarter:ic({matchPatterns:rz,defaultMatchWidth:"wide",parsePatterns:nz,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ic({matchPatterns:az,defaultMatchWidth:"wide",parsePatterns:iz,defaultParseWidth:"any"}),day:ic({matchPatterns:oz,defaultMatchWidth:"wide",parsePatterns:lz,defaultParseWidth:"any"}),dayPeriod:ic({matchPatterns:cz,defaultMatchWidth:"any",parsePatterns:dz,defaultParseWidth:"any"})},hz={code:"en-US",formatDistance:PH,formatLong:$H,formatRelative:zH,localize:XH,match:uz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mz(t,s){const n=vr(t,s?.in);return AH(n,MH(n))+1}function fz(t,s){const n=vr(t,s?.in),i=+rh(n)-+TH(n);return Math.round(i/h2)+1}function x2(t,s){const n=vr(t,s?.in),i=n.getFullYear(),o=Bh(),u=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=ta(s?.in||t,0);h.setFullYear(i+1,0,u),h.setHours(0,0,0,0);const l=Ac(h,s),d=ta(s?.in||t,0);d.setFullYear(i,0,u),d.setHours(0,0,0,0);const f=Ac(d,s);return+n>=+l?i+1:+n>=+f?i:i-1}function pz(t,s){const n=Bh(),i=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=x2(t,s),u=ta(s?.in||t,0);return u.setFullYear(o,0,i),u.setHours(0,0,0,0),Ac(u,s)}function xz(t,s){const n=vr(t,s?.in),i=+Ac(n,s)-+pz(n,s);return Math.round(i/h2)+1}function jt(t,s){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(s,"0");return n+i}const Ia={y(t,s){const n=t.getFullYear(),i=n>0?n:1-n;return jt(s==="yy"?i%100:i,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):jt(n+1,2)},d(t,s){return jt(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return jt(t.getHours()%12||12,s.length)},H(t,s){return jt(t.getHours(),s.length)},m(t,s){return jt(t.getMinutes(),s.length)},s(t,s){return jt(t.getSeconds(),s.length)},S(t,s){const n=s.length,i=t.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return jt(o,s.length)}},So={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ij={G:function(t,s,n){const i=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const i=t.getFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return Ia.y(t,s)},Y:function(t,s,n,i){const o=x2(t,i),u=o>0?o:1-o;if(s==="YY"){const h=u%100;return jt(h,2)}return s==="Yo"?n.ordinalNumber(u,{unit:"year"}):jt(u,s.length)},R:function(t,s){const n=p2(t);return jt(n,s.length)},u:function(t,s){const n=t.getFullYear();return jt(n,s.length)},Q:function(t,s,n){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(i);case"QQ":return jt(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,s,n){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(i);case"qq":return jt(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,s,n){const i=t.getMonth();switch(s){case"M":case"MM":return Ia.M(t,s);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,s,n){const i=t.getMonth();switch(s){case"L":return String(i+1);case"LL":return jt(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,s,n,i){const o=xz(t,i);return s==="wo"?n.ordinalNumber(o,{unit:"week"}):jt(o,s.length)},I:function(t,s,n){const i=fz(t);return s==="Io"?n.ordinalNumber(i,{unit:"week"}):jt(i,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ia.d(t,s)},D:function(t,s,n){const i=mz(t);return s==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):jt(i,s.length)},E:function(t,s,n){const i=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,s,n,i){const o=t.getDay(),u=(o-i.weekStartsOn+8)%7||7;switch(s){case"e":return String(u);case"ee":return jt(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,s,n,i){const o=t.getDay(),u=(o-i.weekStartsOn+8)%7||7;switch(s){case"c":return String(u);case"cc":return jt(u,s.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,s,n){const i=t.getDay(),o=i===0?7:i;switch(s){case"i":return String(o);case"ii":return jt(o,s.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,s,n){const o=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,s,n){const i=t.getHours();let o;switch(i===12?o=So.noon:i===0?o=So.midnight:o=i/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,s,n){const i=t.getHours();let o;switch(i>=17?o=So.evening:i>=12?o=So.afternoon:i>=4?o=So.morning:o=So.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Ia.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ia.H(t,s)},K:function(t,s,n){const i=t.getHours()%12;return s==="Ko"?n.ordinalNumber(i,{unit:"hour"}):jt(i,s.length)},k:function(t,s,n){let i=t.getHours();return i===0&&(i=24),s==="ko"?n.ordinalNumber(i,{unit:"hour"}):jt(i,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ia.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ia.s(t,s)},S:function(t,s){return Ia.S(t,s)},X:function(t,s,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(s){case"X":return Hj(i);case"XXXX":case"XX":return vi(i);case"XXXXX":case"XXX":default:return vi(i,":")}},x:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"x":return Hj(i);case"xxxx":case"xx":return vi(i);case"xxxxx":case"xxx":default:return vi(i,":")}},O:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+$j(i,":");case"OOOO":default:return"GMT"+vi(i,":")}},z:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+$j(i,":");case"zzzz":default:return"GMT"+vi(i,":")}},t:function(t,s,n){const i=Math.trunc(+t/1e3);return jt(i,s.length)},T:function(t,s,n){return jt(+t,s.length)}};function $j(t,s=""){const n=t>0?"-":"+",i=Math.abs(t),o=Math.trunc(i/60),u=i%60;return u===0?n+String(o):n+String(o)+s+jt(u,2)}function Hj(t,s){return t%60===0?(t>0?"-":"+")+jt(Math.abs(t)/60,2):vi(t,s)}function vi(t,s=""){const n=t>0?"-":"+",i=Math.abs(t),o=jt(Math.trunc(i/60),2),u=jt(i%60,2);return n+o+s+u}const zj=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},g2=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},gz=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return zj(t,s);let u;switch(i){case"P":u=s.dateTime({width:"short"});break;case"PP":u=s.dateTime({width:"medium"});break;case"PPP":u=s.dateTime({width:"long"});break;case"PPPP":default:u=s.dateTime({width:"full"});break}return u.replace("{{date}}",zj(i,s)).replace("{{time}}",g2(o,s))},vz={p:g2,P:gz},yz=/^D+$/,bz=/^Y+$/,_z=["D","DD","YY","YYYY"];function jz(t){return yz.test(t)}function wz(t){return bz.test(t)}function Sz(t,s,n){const i=Nz(t,s,n);if(console.warn(i),_z.includes(t))throw new RangeError(i)}function Nz(t,s,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Cz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ez=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kz=/^'([^]*?)'?$/,Az=/''/g,Tz=/[a-zA-Z]/;function Rz(t,s,n){const i=Bh(),o=i.locale??hz,u=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,h=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,l=vr(t,n?.in);if(!DH(l))throw new RangeError("Invalid time value");let d=s.match(Ez).map(p=>{const m=p[0];if(m==="p"||m==="P"){const y=vz[m];return y(p,o.formatLong)}return p}).join("").match(Cz).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const m=p[0];if(m==="'")return{isToken:!1,value:Dz(p)};if(Ij[m])return{isToken:!0,value:p};if(m.match(Tz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});o.localize.preprocessor&&(d=o.localize.preprocessor(l,d));const f={firstWeekContainsDate:u,weekStartsOn:h,locale:o};return d.map(p=>{if(!p.isToken)return p.value;const m=p.value;(wz(m)||jz(m))&&Sz(m,s,String(t));const y=Ij[m[0]];return y(l,m,o.localize,f)}).join("")}function Dz(t){const s=t.match(kz);return s?s[1].replace(Az,"'"):t}function Mz(t,s){const n=()=>ta(s?.in,NaN),o=Bz(t);let u;if(o.date){const f=Iz(o.date,2);u=$z(f.restDateString,f.year)}if(!u||isNaN(+u))return n();const h=+u;let l=0,d;if(o.time&&(l=Hz(o.time),isNaN(l)))return n();if(o.timezone){if(d=zz(o.timezone),isNaN(d))return n()}else{const f=new Date(h+l),p=vr(0,s?.in);return p.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),p.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),p}return vr(h+l+d,s?.in)}const Su={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Oz=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Pz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Lz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Bz(t){const s={},n=t.split(Su.dateTimeDelimiter);let i;if(n.length>2)return s;if(/:/.test(n[0])?i=n[0]:(s.date=n[0],i=n[1],Su.timeZoneDelimiter.test(s.date)&&(s.date=t.split(Su.timeZoneDelimiter)[0],i=t.substr(s.date.length,t.length))),i){const o=Su.timezone.exec(i);o?(s.time=i.replace(o[1],""),s.timezone=o[1]):s.time=i}return s}function Iz(t,s){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const o=i[1]?parseInt(i[1]):null,u=i[2]?parseInt(i[2]):null;return{year:u===null?o:u*100,restDateString:t.slice((i[1]||i[2]).length)}}function $z(t,s){if(s===null)return new Date(NaN);const n=t.match(Oz);if(!n)return new Date(NaN);const i=!!n[4],o=oc(n[1]),u=oc(n[2])-1,h=oc(n[3]),l=oc(n[4]),d=oc(n[5])-1;if(i)return qz(s,l,d)?Fz(s,l,d):new Date(NaN);{const f=new Date(0);return!Wz(s,u,h)||!Vz(s,o)?new Date(NaN):(f.setUTCFullYear(s,u,Math.max(o,h)),f)}}function oc(t){return t?parseInt(t):1}function Hz(t){const s=t.match(Pz);if(!s)return NaN;const n=Ip(s[1]),i=Ip(s[2]),o=Ip(s[3]);return Gz(n,i,o)?n*f2+i*m2+o*1e3:NaN}function Ip(t){return t&&parseFloat(t.replace(",","."))||0}function zz(t){if(t==="Z")return 0;const s=t.match(Lz);if(!s)return 0;const n=s[1]==="+"?-1:1,i=parseInt(s[2]),o=s[3]&&parseInt(s[3])||0;return Yz(i,o)?n*(i*f2+o*m2):NaN}function Fz(t,s,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const o=i.getUTCDay()||7,u=(s-1)*7+n+1-o;return i.setUTCDate(i.getUTCDate()+u),i}const Uz=[31,null,31,30,31,30,31,31,30,31,30,31];function v2(t){return t%400===0||t%4===0&&t%100!==0}function Wz(t,s,n){return s>=0&&s<=11&&n>=1&&n<=(Uz[s]||(v2(t)?29:28))}function Vz(t,s){return s>=1&&s<=(v2(t)?366:365)}function qz(t,s,n){return s>=1&&s<=53&&n>=0&&n<=6}function Gz(t,s,n){return t===24?s===0&&n===0:n>=0&&n<60&&s>=0&&s<60&&t>=0&&t<25}function Yz(t,s){return s>=0&&s<=59}function Xz(t,s){return E.useReducer((n,i)=>s[n][i]??n,t)}var Cg="ScrollArea",[y2]=yr(Cg),[Kz,Br]=y2(Cg),b2=E.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:i="hover",dir:o,scrollHideDelay:u=600,...h}=t,[l,d]=E.useState(null),[f,p]=E.useState(null),[m,y]=E.useState(null),[j,S]=E.useState(null),[w,g]=E.useState(null),[v,b]=E.useState(0),[_,C]=E.useState(0),[A,D]=E.useState(!1),[R,k]=E.useState(!1),M=Qe(s,q=>d(q)),I=tl(o);return e.jsx(Kz,{scope:n,type:i,dir:I,scrollHideDelay:u,scrollArea:l,viewport:f,onViewportChange:p,content:m,onContentChange:y,scrollbarX:j,onScrollbarXChange:S,scrollbarXEnabled:A,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:g,scrollbarYEnabled:R,onScrollbarYEnabledChange:k,onCornerWidthChange:b,onCornerHeightChange:C,children:e.jsx(We.div,{dir:I,...h,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});b2.displayName=Cg;var _2="ScrollAreaViewport",j2=E.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:i,nonce:o,...u}=t,h=Br(_2,n),l=E.useRef(null),d=Qe(s,l,h.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(We.div,{"data-radix-scroll-area-viewport":"",...u,ref:d,style:{overflowX:h.scrollbarXEnabled?"scroll":"hidden",overflowY:h.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:h.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});j2.displayName=_2;var bn="ScrollAreaScrollbar",w2=E.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=Br(bn,t.__scopeScrollArea),{onScrollbarXEnabledChange:u,onScrollbarYEnabledChange:h}=o,l=t.orientation==="horizontal";return E.useEffect(()=>(l?u(!0):h(!0),()=>{l?u(!1):h(!1)}),[l,u,h]),o.type==="hover"?e.jsx(Qz,{...i,ref:s,forceMount:n}):o.type==="scroll"?e.jsx(Zz,{...i,ref:s,forceMount:n}):o.type==="auto"?e.jsx(S2,{...i,ref:s,forceMount:n}):o.type==="always"?e.jsx(Eg,{...i,ref:s}):null});w2.displayName=bn;var Qz=E.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=Br(bn,t.__scopeScrollArea),[u,h]=E.useState(!1);return E.useEffect(()=>{const l=o.scrollArea;let d=0;if(l){const f=()=>{window.clearTimeout(d),h(!0)},p=()=>{d=window.setTimeout(()=>h(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",f),l.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",f),l.removeEventListener("pointerleave",p)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(br,{present:n||u,children:e.jsx(S2,{"data-state":u?"visible":"hidden",...i,ref:s})})}),Zz=E.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=Br(bn,t.__scopeScrollArea),u=t.orientation==="horizontal",h=$h(()=>d("SCROLL_END"),100),[l,d]=Xz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return E.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,o.scrollHideDelay,d]),E.useEffect(()=>{const f=o.viewport,p=u?"scrollLeft":"scrollTop";if(f){let m=f[p];const y=()=>{const j=f[p];m!==j&&(d("SCROLL"),h()),m=j};return f.addEventListener("scroll",y),()=>f.removeEventListener("scroll",y)}},[o.viewport,u,d,h]),e.jsx(br,{present:n||l!=="hidden",children:e.jsx(Eg,{"data-state":l==="hidden"?"hidden":"visible",...i,ref:s,onPointerEnter:Pe(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Pe(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),S2=E.forwardRef((t,s)=>{const n=Br(bn,t.__scopeScrollArea),{forceMount:i,...o}=t,[u,h]=E.useState(!1),l=t.orientation==="horizontal",d=$h(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;h(l?f:p)}},10);return Xo(n.viewport,d),Xo(n.content,d),e.jsx(br,{present:i||u,children:e.jsx(Eg,{"data-state":u?"visible":"hidden",...o,ref:s})})}),Eg=E.forwardRef((t,s)=>{const{orientation:n="vertical",...i}=t,o=Br(bn,t.__scopeScrollArea),u=E.useRef(null),h=E.useRef(0),[l,d]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=A2(l.viewport,l.content),p={...i,sizes:l,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:y=>u.current=y,onThumbPointerUp:()=>h.current=0,onThumbPointerDown:y=>h.current=y};function m(y,j){return nF(y,h.current,l,j)}return n==="horizontal"?e.jsx(Jz,{...p,ref:s,onThumbPositionChange:()=>{if(o.viewport&&u.current){const y=o.viewport.scrollLeft,j=Fj(y,l,o.dir);u.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:y=>{o.viewport&&(o.viewport.scrollLeft=y)},onDragScroll:y=>{o.viewport&&(o.viewport.scrollLeft=m(y,o.dir))}}):n==="vertical"?e.jsx(eF,{...p,ref:s,onThumbPositionChange:()=>{if(o.viewport&&u.current){const y=o.viewport.scrollTop,j=Fj(y,l);u.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:y=>{o.viewport&&(o.viewport.scrollTop=y)},onDragScroll:y=>{o.viewport&&(o.viewport.scrollTop=m(y))}}):null}),Jz=E.forwardRef((t,s)=>{const{sizes:n,onSizesChange:i,...o}=t,u=Br(bn,t.__scopeScrollArea),[h,l]=E.useState(),d=E.useRef(null),f=Qe(s,d,u.onScrollbarXChange);return E.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),e.jsx(C2,{"data-orientation":"horizontal",...o,ref:f,sizes:n,style:{bottom:0,left:u.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:u.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ih(n)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.x),onDragScroll:p=>t.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(u.viewport){const y=u.viewport.scrollLeft+p.deltaX;t.onWheelScroll(y),R2(y,m)&&p.preventDefault()}},onResize:()=>{d.current&&u.viewport&&h&&i({content:u.viewport.scrollWidth,viewport:u.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ah(h.paddingLeft),paddingEnd:ah(h.paddingRight)}})}})}),eF=E.forwardRef((t,s)=>{const{sizes:n,onSizesChange:i,...o}=t,u=Br(bn,t.__scopeScrollArea),[h,l]=E.useState(),d=E.useRef(null),f=Qe(s,d,u.onScrollbarYChange);return E.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),e.jsx(C2,{"data-orientation":"vertical",...o,ref:f,sizes:n,style:{top:0,right:u.dir==="ltr"?0:void 0,left:u.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ih(n)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.y),onDragScroll:p=>t.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(u.viewport){const y=u.viewport.scrollTop+p.deltaY;t.onWheelScroll(y),R2(y,m)&&p.preventDefault()}},onResize:()=>{d.current&&u.viewport&&h&&i({content:u.viewport.scrollHeight,viewport:u.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ah(h.paddingTop),paddingEnd:ah(h.paddingBottom)}})}})}),[tF,N2]=y2(bn),C2=E.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:i,hasThumb:o,onThumbChange:u,onThumbPointerUp:h,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:p,onResize:m,...y}=t,j=Br(bn,n),[S,w]=E.useState(null),g=Qe(s,M=>w(M)),v=E.useRef(null),b=E.useRef(""),_=j.viewport,C=i.content-i.viewport,A=qs(p),D=qs(d),R=$h(m,10);function k(M){if(v.current){const I=M.clientX-v.current.left,q=M.clientY-v.current.top;f({x:I,y:q})}}return E.useEffect(()=>{const M=I=>{const q=I.target;S?.contains(q)&&A(I,C)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[_,S,C,A]),E.useEffect(D,[i,D]),Xo(S,R),Xo(j.content,R),e.jsx(tF,{scope:n,scrollbar:S,hasThumb:o,onThumbChange:qs(u),onThumbPointerUp:qs(h),onThumbPositionChange:D,onThumbPointerDown:qs(l),children:e.jsx(We.div,{...y,ref:g,style:{position:"absolute",...y.style},onPointerDown:Pe(t.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),v.current=S.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),k(M))}),onPointerMove:Pe(t.onPointerMove,k),onPointerUp:Pe(t.onPointerUp,M=>{const I=M.target;I.hasPointerCapture(M.pointerId)&&I.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=b.current,j.viewport&&(j.viewport.style.scrollBehavior=""),v.current=null})})})}),nh="ScrollAreaThumb",E2=E.forwardRef((t,s)=>{const{forceMount:n,...i}=t,o=N2(nh,t.__scopeScrollArea);return e.jsx(br,{present:n||o.hasThumb,children:e.jsx(sF,{ref:s,...i})})}),sF=E.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:i,...o}=t,u=Br(nh,n),h=N2(nh,n),{onThumbPositionChange:l}=h,d=Qe(s,m=>h.onThumbChange(m)),f=E.useRef(void 0),p=$h(()=>{f.current&&(f.current(),f.current=void 0)},100);return E.useEffect(()=>{const m=u.viewport;if(m){const y=()=>{if(p(),!f.current){const j=aF(m,l);f.current=j,l()}};return l(),m.addEventListener("scroll",y),()=>m.removeEventListener("scroll",y)}},[u.viewport,p,l]),e.jsx(We.div,{"data-state":h.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Pe(t.onPointerDownCapture,m=>{const j=m.target.getBoundingClientRect(),S=m.clientX-j.left,w=m.clientY-j.top;h.onThumbPointerDown({x:S,y:w})}),onPointerUp:Pe(t.onPointerUp,h.onThumbPointerUp)})});E2.displayName=nh;var kg="ScrollAreaCorner",k2=E.forwardRef((t,s)=>{const n=Br(kg,t.__scopeScrollArea),i=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&i?e.jsx(rF,{...t,ref:s}):null});k2.displayName=kg;var rF=E.forwardRef((t,s)=>{const{__scopeScrollArea:n,...i}=t,o=Br(kg,n),[u,h]=E.useState(0),[l,d]=E.useState(0),f=!!(u&&l);return Xo(o.scrollbarX,()=>{const p=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(p),d(p)}),Xo(o.scrollbarY,()=>{const p=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(p),h(p)}),f?e.jsx(We.div,{...i,ref:s,style:{width:u,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function ah(t){return t?parseInt(t,10):0}function A2(t,s){const n=t/s;return isNaN(n)?0:n}function Ih(t){const s=A2(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-n)*s;return Math.max(i,18)}function nF(t,s,n,i="ltr"){const o=Ih(n),u=o/2,h=s||u,l=o-h,d=n.scrollbar.paddingStart+h,f=n.scrollbar.size-n.scrollbar.paddingEnd-l,p=n.content-n.viewport,m=i==="ltr"?[0,p]:[p*-1,0];return T2([d,f],m)(t)}function Fj(t,s,n="ltr"){const i=Ih(s),o=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,u=s.scrollbar.size-o,h=s.content-s.viewport,l=u-i,d=n==="ltr"?[0,h]:[h*-1,0],f=Nc(t,d);return T2([0,h],[0,l])(f)}function T2(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const i=(s[1]-s[0])/(t[1]-t[0]);return s[0]+i*(n-t[0])}}function R2(t,s){return t>0&&t<s}var aF=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},i=0;return(function o(){const u={left:t.scrollLeft,top:t.scrollTop},h=n.left!==u.left,l=n.top!==u.top;(h||l)&&s(),n=u,i=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(i)};function $h(t,s){const n=qs(t),i=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(i.current),[]),E.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(n,s)},[n,s])}function Xo(t,s){const n=qs(s);Os(()=>{let i=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(i),o.unobserve(t)}}},[t,n])}var iF=b2,oF=j2,lF=k2;function Uj({className:t,children:s,...n}){return e.jsxs(iF,{"data-slot":"scroll-area",className:Ie("relative",t),...n,children:[e.jsx(oF,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(cF,{}),e.jsx(lF,{})]})}function cF({className:t,orientation:s="vertical",...n}){return e.jsx(w2,{"data-slot":"scroll-area-scrollbar",orientation:s,className:Ie("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:e.jsx(E2,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Nu({environment:t,serviceName:s}){const[n,i]=E.useState([]),[o,u]=E.useState(!0),[h,l]=E.useState(null),[d,f]=E.useState(""),[p,m]=E.useState("all"),[y,j]=E.useState(!0),[S,w]=E.useState(!1),[g,v]=E.useState(),[b,_]=E.useState(!1),C=E.useRef(null),A=E.useRef(null),D=E.useId(),R=`${D}-auto-scroll`,k=`${D}-auto-scroll-fullscreen`,M=F=>{try{return Rz(Mz(F),"MMM dd HH:mm:ss.SSS")}catch{return F}},I=E.useCallback(async(F=!1)=>{try{u(!0),l(null);const B=await Be.getServiceLogs(t,s,100,F?g:void 0);i(V=>F?[...V,...B.logs]:B.logs),v(B.nextToken)}catch(B){l(B instanceof Error?B.message:"Failed to fetch logs")}finally{u(!1)}},[t,s,g]),q=E.useCallback(()=>{S&&A.current?(A.current.close(),A.current=null,w(!1)):(w(!0),A.current=Be.connectToLogStream(t,s,F=>{i(B=>[...F,...B].slice(0,1e3)),y&&C.current&&(C.current.scrollTop=0)},F=>{console.error("WebSocket error:",F),l("Lost connection to log stream"),w(!1)},()=>{l(null)}))},[t,s,S,y]);E.useEffect(()=>{I()},[I]),E.useEffect(()=>()=>{A.current&&A.current.close()},[]);const W=n.filter(F=>{const B=d===""||F.message.toLowerCase().includes(d.toLowerCase())||F.stream.toLowerCase().includes(d.toLowerCase()),V=p==="all"||F.level===p;return B&&V}),G=()=>{const F=W.map(H=>`[${H.timestamp}] [${H.level.toUpperCase()}] [${H.stream}] ${H.message}`).join(`
`),B=new Blob([F],{type:"text/plain"}),V=URL.createObjectURL(B),O=document.createElement("a");O.href=V,O.download=`${s}-logs-${new Date().toISOString()}.txt`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(V)},$=F=>{switch(F){case"error":return"destructive";case"warning":return"outline";case"debug":return"secondary";default:return"default"}};return e.jsxs("div",{className:"flex flex-col h-full space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:"sm",variant:S?"destructive":"default",onClick:q,title:S?"Stop real-time log streaming":"Stream logs from last 24 hours + new logs",children:S?e.jsxs(e.Fragment,{children:[e.jsx(Wb,{className:"w-4 h-4 mr-2"}),"Stop Streaming"]}):e.jsxs(e.Fragment,{children:[e.jsx(Vb,{className:"w-4 h-4 mr-2"}),"Start Streaming"]})}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>I(!1),disabled:o||S,title:"Fetch latest 100 logs across all time",children:[e.jsx(Wt,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]}),S&&e.jsxs(Te,{variant:"default",className:"animate-pulse",children:[e.jsx(Gb,{className:"w-3 h-3 mr-1"}),"Live"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>_(!0),children:[e.jsx(bw,{className:"w-4 h-4 mr-2"}),"Full Screen"]}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>i([]),children:[e.jsx(xr,{className:"w-4 h-4 mr-2"}),"Clear"]}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:G,disabled:W.length===0,children:[e.jsx(zb,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(qb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(je,{placeholder:"Search logs...",value:d,onChange:F=>f(F.target.value),className:"pl-10 bg-gray-800 border-gray-600"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fb,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:p,onChange:F=>m(F.target.value),className:"px-3 py-1 bg-gray-800 border border-gray-600 rounded-md text-sm text-white",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"debug",children:"Debug"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{id:R,checked:y,onCheckedChange:j}),e.jsx(re,{htmlFor:R,className:"text-sm",children:"Auto-scroll"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["Total: ",n.length]}),e.jsxs("span",{children:["Filtered: ",W.length]}),e.jsxs("span",{children:["Errors: ",n.filter(F=>F.level==="error").length]}),e.jsxs("span",{children:["Warnings: ",n.filter(F=>F.level==="warning").length]})]})]}),h&&e.jsxs(ze,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:h})]}),e.jsx("div",{className:"flex-1 min-h-0 bg-gray-900 rounded-lg border border-gray-700",children:e.jsx(Uj,{className:"h-full",ref:C,children:e.jsxs("div",{className:"p-4 space-y-1",children:[o&&n.length===0?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Wt,{className:"w-8 h-8 animate-spin text-gray-400"})}):W.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[d||p!=="all"?"No logs match your filters":"No logs available",!S&&n.length===0&&!d&&p==="all"&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-xs",children:"Try one of these options:"}),e.jsx("p",{className:"text-xs",children:' Click "Start Streaming" to see logs from the last 24 hours'}),e.jsx("p",{className:"text-xs",children:" Check if the service is running and generating logs"})]})]}):W.map((F,B)=>e.jsxs("div",{className:`
                    font-mono text-xs p-2 rounded border-l-4 
                    ${F.level==="error"?"bg-red-900/20 border-red-500":F.level==="warning"?"bg-yellow-900/20 border-yellow-500":F.level==="debug"?"bg-gray-800 border-gray-600":"bg-gray-800 border-blue-500"}
                    hover:bg-gray-700/50 transition-colors
                  `,children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:M(F.timestamp)}),e.jsx(Te,{variant:$(F.level),className:"text-xs px-1 py-0",children:F.level.toUpperCase()}),e.jsxs("span",{className:"text-gray-500 text-xs truncate max-w-[200px]",title:F.stream,children:["[",F.stream,"]"]})]}),e.jsx("div",{className:"mt-1 text-gray-300 whitespace-pre-wrap break-all",children:F.message})]},`${F.timestamp}-${B}`)),!o&&g&&!S&&e.jsx("div",{className:"text-center pt-4",children:e.jsx(ie,{size:"sm",variant:"outline",onClick:()=>I(!0),children:"Load More"})})]})})}),b&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-950 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white",children:[s," Logs - ",t]}),S&&e.jsxs(Te,{variant:"default",className:"animate-pulse",children:[e.jsx(Gb,{className:"w-3 h-3 mr-1"}),"Live"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:"sm",variant:S?"destructive":"default",onClick:q,title:S?"Stop real-time log streaming":"Stream logs from last 24 hours + new logs",children:S?e.jsxs(e.Fragment,{children:[e.jsx(Wb,{className:"w-4 h-4 mr-2"}),"Stop Streaming"]}):e.jsxs(e.Fragment,{children:[e.jsx(Vb,{className:"w-4 h-4 mr-2"}),"Start Streaming"]})}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>I(!1),disabled:o||S,title:"Fetch latest 100 logs across all time",children:[e.jsx(Wt,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>i([]),children:[e.jsx(xr,{className:"w-4 h-4 mr-2"}),"Clear"]}),e.jsxs(ie,{size:"sm",variant:"outline",onClick:G,disabled:W.length===0,children:[e.jsx(zb,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>_(!1),children:e.jsx(ds,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-900",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(qb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(je,{placeholder:"Search logs...",value:d,onChange:F=>f(F.target.value),className:"pl-10 bg-gray-800 border-gray-600"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fb,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:p,onChange:F=>m(F.target.value),className:"px-3 py-1 bg-gray-800 border border-gray-600 rounded-md text-sm text-white",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"debug",children:"Debug"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{id:k,checked:y,onCheckedChange:j}),e.jsx(re,{htmlFor:k,className:"text-sm",children:"Auto-scroll"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["Total: ",n.length]}),e.jsxs("span",{children:["Filtered: ",W.length]}),e.jsxs("span",{children:["Errors: ",n.filter(F=>F.level==="error").length]}),e.jsxs("span",{children:["Warnings: ",n.filter(F=>F.level==="warning").length]})]})]})}),h&&e.jsx("div",{className:"p-4 bg-gray-900 border-b border-gray-700",children:e.jsxs(ze,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:h})]})}),e.jsx("div",{className:"flex-1 min-h-0 bg-gray-950 overflow-hidden",children:e.jsx(Uj,{className:"h-full",ref:C,children:e.jsxs("div",{className:"p-6 space-y-2",children:[o&&n.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Wt,{className:"w-12 h-12 animate-spin text-gray-400"})}):W.length===0?e.jsx("div",{className:"text-center text-gray-500 py-32 text-lg",children:d||p!=="all"?"No logs match your filters":"No logs available"}):W.map((F,B)=>e.jsxs("div",{className:`
                        font-mono text-sm p-4 rounded-lg border-l-4 
                        ${F.level==="error"?"bg-red-900/20 border-red-500":F.level==="warning"?"bg-yellow-900/20 border-yellow-500":F.level==="debug"?"bg-gray-800 border-gray-600":"bg-gray-800 border-blue-500"}
                        hover:bg-gray-700/50 transition-colors
                      `,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("span",{className:"text-gray-400 whitespace-nowrap font-medium",children:M(F.timestamp)}),e.jsx(Te,{variant:$(F.level),className:"text-xs px-2 py-1",children:F.level.toUpperCase()}),e.jsxs("span",{className:"text-gray-400 text-sm truncate max-w-[300px]",title:F.stream,children:["[",F.stream,"]"]})]}),e.jsx("div",{className:"text-gray-200 whitespace-pre-wrap break-all leading-relaxed",children:F.message})]},`${F.timestamp}-${B}`)),!o&&g&&!S&&e.jsx("div",{className:"text-center pt-6",children:e.jsx(ie,{size:"default",variant:"outline",onClick:()=>I(!0),children:"Load More Logs"})})]})})})]})]})}function dF({config:t,node:s}){const n=s.id.replace("service-",""),i=`/${t.env}/${t.project}/${n}`,[o,u]=E.useState([]),[h,l]=E.useState(!0),[d,f]=E.useState(null),[p,m]=E.useState(null),[y,j]=E.useState(""),[S,w]=E.useState(""),[g,v]=E.useState(!1),[b,_]=E.useState(!1),[C,A]=E.useState(!1),[D,R]=E.useState(!1),[k,M]=E.useState(""),[I,q]=E.useState(""),[W,G]=E.useState("SecureString"),[$,F]=E.useState(""),[B,V]=E.useState(!1),O=["env"],H=E.useCallback(async()=>{try{l(!0),f(null);const P=await Be.listSSMParameters(i);u(P||[])}catch(P){const Q=P instanceof Error?P.message:"Failed to load parameters";Q.includes("not found")||Q.includes("not deployed")||Q.includes("does not exist")?(u([]),f(null)):f(Q)}finally{l(!1)}},[i]);E.useEffect(()=>{H()},[H]);const U=async P=>{try{m(P),v(!0),A(!0);const Q=await Be.getSSMParameter(P.name);w(Q.value),j(Q.value)}catch(Q){f(Q instanceof Error?Q.message:"Failed to load parameter value"),A(!1)}finally{v(!1)}},L=async()=>{if(p)try{_(!0),await Be.createOrUpdateSSMParameter({name:p.name,value:y,type:p.type,description:p.description,overwrite:!0}),w(y),await H(),A(!1)}catch(P){f(P instanceof Error?P.message:"Failed to update parameter")}finally{_(!1)}},Y=async P=>{if(confirm(`Are you sure you want to delete parameter ${P}?`))try{await Be.deleteSSMParameter(P),await H()}catch(Q){f(Q instanceof Error?Q.message:"Failed to delete parameter")}},J=async()=>{try{V(!0);const P=`${i}/${k}`;await Be.createOrUpdateSSMParameter({name:P,value:I,type:W,description:$,overwrite:!1}),R(!1),M(""),q(""),F(""),await H()}catch(P){f(P instanceof Error?P.message:"Failed to create parameter")}finally{V(!1)}},K=P=>P.replace(`${i}/`,""),Z=P=>{const Q=K(P);return O.includes(Q)};return t.services?.find(P=>P.name===n)?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Px,{className:"w-5 h-5"}),"Parameter Namespace for ",n]}),e.jsx(we,{children:e.jsxs("code",{className:"font-mono text-sm",children:[i,"/*"]})})]}),e.jsxs(pe,{children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"All parameters in this namespace are automatically:"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1 ml-4",children:[e.jsxs("li",{children:[" Discovered at runtime using"," ",e.jsx("code",{className:"font-mono text-xs",children:"aws_ssm_parameters_by_path"})]}),e.jsx("li",{children:" Transformed to uppercase environment variables"}),e.jsx("li",{children:" Injected into the ECS container as secrets"}),e.jsx("li",{children:" Encrypted using AWS KMS"})]})]}),e.jsxs(ze,{className:"mt-3",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs(Fe,{className:"text-xs",children:["This is a service-specific namespace. Backend parameters are at"," ",e.jsxs("code",{children:["/",t.env,"/",t.project,"/backend/*"]})]})]})]})]}),d&&e.jsxs(ze,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Fe,{children:d})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ge,{children:"Parameters"}),e.jsxs(we,{children:["Current SSM parameters for ",n," service"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:"sm",variant:"outline",onClick:H,disabled:h,children:e.jsx(Wt,{className:`w-4 h-4 ${h?"animate-spin":""}`})}),e.jsxs(ie,{size:"sm",onClick:()=>R(!0),disabled:D,children:[e.jsx(ws,{className:"w-4 h-4 mr-1"}),"Add Parameter"]})]})]})}),e.jsx(pe,{children:h&&!o.length?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[D&&e.jsxs("div",{className:"border border-blue-700 bg-blue-900/10 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400",children:"Add New Parameter"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-name",className:"text-xs",children:"Parameter Name"}),e.jsx(je,{id:"new-param-name",placeholder:"parameter_name",value:k,onChange:P=>M(P.target.value),className:"mt-1 h-8 text-sm"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i,"/",k]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-type",className:"text-xs",children:"Type"}),e.jsxs(Zt,{value:W,onValueChange:P=>G(P),children:[e.jsx(es,{className:"mt-1 h-8 text-sm",children:e.jsx(Jt,{})}),e.jsxs(ts,{children:[e.jsx(Ee,{value:"String",children:"String"}),e.jsx(Ee,{value:"StringList",children:"StringList"}),e.jsx(Ee,{value:"SecureString",children:"SecureString"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-value",className:"text-xs",children:"Value"}),e.jsx(Qt,{id:"new-param-value",placeholder:"Parameter value...",value:I,onChange:P=>q(P.target.value),className:"mt-1 h-20 text-sm"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"new-param-desc",className:"text-xs",children:"Description (optional)"}),e.jsx(je,{id:"new-param-desc",placeholder:"What is this parameter for?",value:$,onChange:P=>F(P.target.value),className:"mt-1 h-8 text-sm"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>{R(!1),M(""),q(""),F("")},disabled:B,children:"Cancel"}),e.jsxs(ie,{size:"sm",onClick:J,disabled:!k||!I||B,children:[B?e.jsx(st,{className:"w-4 h-4 animate-spin mr-1"}):e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Create"]})]})]}),o.map(P=>{const Q=K(P.name),ee=Z(P.name);return e.jsxs("div",{className:`border rounded-lg p-3 space-y-2 ${ee?"border-gray-700 bg-gray-800/50":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:`w-4 h-4 ${ee?"text-green-400":"text-blue-400"}`}),e.jsx("code",{className:`text-sm font-mono ${ee?"text-green-400":"text-blue-400"}`,children:Q.toUpperCase().replace(/-/g,"_")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{variant:ee?"secondary":"outline",className:"text-xs",children:ee?"Auto":"Manual"}),e.jsx(Te,{variant:"outline",className:"text-xs",children:P.type})]})]}),P.description&&e.jsx("p",{className:"text-xs text-gray-400",children:P.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(xs,{className:"w-3 h-3 text-gray-500"}),e.jsx("code",{className:"text-gray-500",children:P.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(ie,{size:"sm",variant:"ghost",onClick:()=>U(P),className:"h-6 px-2 text-xs",children:[e.jsx(Lr,{className:"w-3 h-3 mr-1"}),"View"]}),!ee&&e.jsx(ie,{size:"sm",variant:"ghost",onClick:()=>Y(P.name),className:"h-6 w-6 p-0 text-red-400 hover:text-red-300",children:e.jsx(xr,{className:"w-3 h-3"})})]})]})]},P.name)}),!h&&o.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(yt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsxs("p",{className:"text-sm",children:["No parameters found for ",n]}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add Parameter" to create one'}),!d&&e.jsx("p",{className:"text-xs mt-2 text-gray-500",children:"If the service is not deployed yet, parameters will be available after deployment"})]})]})})]}),e.jsx(sa,{open:C,onOpenChange:A,children:e.jsxs(ra,{className:"max-w-4xl w-[90vw] max-h-[85vh]",children:[e.jsxs(na,{children:[e.jsxs(ia,{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4"}),p&&K(p.name).toUpperCase().replace(/-/g,"_")]}),e.jsx(el,{children:p?.description||"SSM Parameter"})]}),e.jsx("div",{className:"space-y-4 py-4",children:g?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"w-6 h-6 animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Parameter Path"}),e.jsx("code",{className:"text-sm text-gray-400 block p-2 bg-gray-800 rounded",children:p?.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{children:"Value"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(Te,{variant:"outline",children:p?.type}),p&&e.jsxs("span",{children:["Version: ",p.version]})]})]}),e.jsx(Qt,{value:y,onChange:P=>j(P.target.value),className:"font-mono text-sm min-h-[400px] resize-y",placeholder:"Enter parameter value..."})]}),p?.lastModifiedDate&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Last modified:"," ",new Date(p.lastModifiedDate).toLocaleString()]})]})}),e.jsxs(aa,{children:[e.jsx(ie,{variant:"outline",onClick:()=>A(!1),disabled:b,children:"Cancel"}),e.jsx(ie,{onClick:L,disabled:b||g||y===S,children:b?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})})]}):e.jsxs(ze,{className:"border-red-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{children:['Service "',n,'" not found in configuration.']})]})}function uF({config:t,onConfigChange:s,accountInfo:n,node:i}){const o=i.id.replace("service-",""),u=t.services?.find(m=>m.name===o),h=`${t.project}_${o}`,l=n?.accountId||t.ecr_account_id,d=t.ecr_account_region||t.region,f=`${l||"<YOUR_ACCOUNT_ID>"}.dkr.ecr.${d}.amazonaws.com/${h}`,p=m=>{if(!t.services)return;const y=t.services.map(j=>j.name===o?{...j,...m}:j);s({services:y})};return u?e.jsxs(fe,{className:"w-full",children:[e.jsxs(xe,{children:[e.jsxs(ge,{children:[o," Service Configuration"]}),e.jsx(we,{children:"Configure your service settings"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"essential",children:"Essential Container"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If this container stops, stop all other containers"})]}),e.jsx(ct,{id:"essential",checked:u.essential!==!1,onCheckedChange:m=>p({essential:m}),className:"data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600"})]}),e.jsx(Yr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"docker_image",children:"External Docker Image"}),e.jsx(je,{id:"docker_image",value:u.docker_image||"",onChange:m=>p({docker_image:m.target.value}),placeholder:"docker.io/myapp:latest",className:"bg-gray-800 border-gray-600 text-white font-mono"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional: Use external Docker image instead of the ECR repository"}),u.ecr_config&&e.jsx("div",{className:"mt-2 p-3 bg-gray-900/50 border border-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fr,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"text-xs text-gray-300",children:"ECR Configuration:"}),u.ecr_config.mode==="create_ecr"&&e.jsx(Te,{variant:"default",className:"text-xs",children:"Dedicated Repository"}),u.ecr_config.mode==="manual_repo"&&e.jsxs(Te,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[e.jsx(Xr,{className:"w-3 h-3"}),"Manual Repository"]}),u.ecr_config.mode==="use_existing"&&e.jsxs(Te,{variant:"outline",className:"text-xs flex items-center gap-1",children:[e.jsx(_w,{className:"w-3 h-3"}),"Shared Repository"]})]}),u.ecr_config.mode==="create_ecr"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 font-mono break-all",children:f}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A dedicated ECR repository will be created for this service"})]}),u.ecr_config.mode==="manual_repo"&&u.ecr_config.repository_uri&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 font-mono break-all",children:u.ecr_config.repository_uri}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Using manually specified ECR repository"})]}),u.ecr_config.mode==="use_existing"&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-300",children:["Source: ",e.jsxs("span",{className:"font-mono text-gray-400",children:[u.ecr_config.source_service_type?.replace("_"," ")," / ",u.ecr_config.source_service_name]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sharing ECR repository from another service"})]})]})]})}),!u.ecr_config&&e.jsx("div",{className:"mt-2 p-3 bg-blue-900/20 border border-blue-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-300",children:e.jsx("strong",{className:"text-blue-400",children:"Default ECR Repository (Dev only):"})}),e.jsx("p",{className:"text-xs font-mono text-gray-400 mt-1 break-all",children:f}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"ECR repositories for services are only created in development environment. In production, you must use an external Docker image."})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"container_command",children:"Container Command"}),e.jsx(je,{id:"container_command",value:Array.isArray(u.container_command)?u.container_command.join(", "):u.container_command||"",onChange:m=>{const y=m.target.value.split(",").map(j=>j.trim()).filter(j=>j);p({container_command:y.length>0?y:void 0})},placeholder:"npm, start",className:"bg-gray-800 border-gray-600 text-white font-mono"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Override container startup command (comma-separated)"})]}),e.jsx(Yr,{}),t.use_default_vpc?e.jsxs(ze,{className:"border-blue-600 bg-blue-900/20",children:[e.jsx(Le,{className:"h-4 w-4 text-blue-400"}),e.jsxs(Fe,{className:"text-xs text-gray-300",children:[e.jsx("strong",{children:"Default VPC:"})," host_port is automatically synced with container_port. For ECS Fargate, these should always match."]})]}):e.jsxs(ze,{className:"border-yellow-600 bg-yellow-900/20",children:[e.jsx(qp,{className:"h-4 w-4 text-yellow-400"}),e.jsxs(Fe,{className:"text-xs text-gray-300",children:[e.jsx("strong",{children:"Custom VPC (awsvpc mode):"})," host_port is automatically set to match container_port and cannot be changed. This is required for ECS Fargate with custom VPC."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"container_port",children:"Container Port"}),e.jsx(je,{id:"container_port",type:"number",value:u.container_port||3e3,onChange:m=>{const y=parseInt(m.target.value)||3e3;p({container_port:y,host_port:y})},placeholder:"3000",className:"bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Port your application listens on (default: 3000)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(re,{htmlFor:"host_port",children:["Host Port",!t.use_default_vpc&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(auto-synced)"})]}),e.jsx(je,{id:"host_port",type:"number",value:u.host_port||u.container_port||3e3,onChange:m=>{t.use_default_vpc&&p({host_port:parseInt(m.target.value)||3e3})},placeholder:"3000",disabled:!t.use_default_vpc,className:`${t.use_default_vpc?"bg-gray-800 border-gray-600 text-white":"bg-gray-900 border-gray-700 text-gray-500 cursor-not-allowed"}`}),e.jsx("p",{className:"text-xs text-gray-500",children:t.use_default_vpc?"Host port mapping (should match container_port for awsvpc)":"Automatically matches container_port (required for custom VPC)"})]}),e.jsx(Yr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:`create-api-domain-${o}`,children:"API Gateway Custom Domain"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Create API Gateway custom domain for this service"})]}),e.jsx(ct,{id:`create-api-domain-${o}`,checked:u.api_domain_prefix!==void 0&&u.api_domain_prefix!==null&&u.api_domain_prefix!=="",onCheckedChange:m=>p({api_domain_prefix:m?o:""}),className:"data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600"})]}),u.api_domain_prefix&&u.api_domain_prefix!==""&&e.jsxs("div",{className:"space-y-2 ml-4",children:[e.jsx(re,{htmlFor:`api-prefix-${o}`,children:"API Domain Prefix"}),e.jsx(je,{id:`api-prefix-${o}`,value:u.api_domain_prefix,onChange:m=>p({api_domain_prefix:m.target.value||o}),placeholder:o,className:"bg-gray-800 border-gray-600 text-white"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Subdomain prefix for this service (default: service name)"})]}),u.api_domain_prefix&&u.api_domain_prefix!==""?e.jsx("div",{className:"p-3 bg-green-900/20 border border-green-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-300",children:e.jsx("strong",{className:"text-green-400",children:"API Gateway custom domain will be created"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Route53 A record will point to API Gateway for this service"})]})]})}):e.jsx("div",{className:"p-3 bg-yellow-900/20 border border-yellow-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-300",children:e.jsx("strong",{className:"text-yellow-400",children:"API Gateway custom domain disabled"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Service will use default AWS API Gateway domain"})]})]})})]})]}):e.jsxs(ze,{className:"border-red-600",children:[e.jsx(qp,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{children:['Service "',o,'" not found in configuration.']})]})}function hF({config:t,onConfigChange:s,node:n}){const i=n.id.replace("service-",""),o=t.services?.find(h=>h.name===i),u=h=>{if(!t.services)return;const l=t.services.map(d=>d.name===i?{...d,...h}:d);s({services:l})};return o?e.jsxs(fe,{className:"w-full",children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5"}),"X-Ray Configuration"]}),e.jsxs(we,{children:["Enable AWS X-Ray distributed tracing for ",i]})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Enable X-Ray Tracing"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Trace requests as they travel through your service"})]}),e.jsx(ct,{checked:o.xray_enabled||!1,onCheckedChange:h=>u({xray_enabled:h}),className:"data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600"})]}),o.xray_enabled&&e.jsxs(ze,{children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(Fe,{children:"X-Ray tracing is enabled. Your service will send trace data to AWS X-Ray. Make sure your application is instrumented with the X-Ray SDK."})]})]})]}):e.jsxs(ze,{className:"border-red-600",children:[e.jsx(qp,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{children:['Service "',i,'" not found in configuration.']})]})}function lc({config:t,serviceName:s}){const[n,i]=E.useState(!1),o=t.env||"dev",u=t.region||"us-east-1",h=t.project||"myproject",l=t.account_id||"123456789012",d=s==="backend"?null:t.services?.find(v=>v.name===s),f=v=>{const b=/^(\d+)\.dkr\.ecr\.[^.]+\.amazonaws\.com\/.+$/,_=v.match(b);return _?_[1]!==l:!1},p=v=>!/^\d+\.dkr\.ecr\.[^.]+\.amazonaws\.com\/.+$/.test(v);let m=!1,y=!1;if(s==="backend")m=t.ecr_strategy==="cross_account";else if(d?.ecr_config){const v=d.ecr_config;v.mode==="manual_repo"&&v.repository_uri&&(m=f(v.repository_uri),y=p(v.repository_uri))}const j=d?.ecr_config?.repository_uri||"",w=m?`name: Deploy ${s} to AWS (${o})

on:
  push:
    branches: [main]
    paths:
      - '${s}/**'
      - '.github/workflows/${s}-${o}.yml'
  workflow_dispatch:

concurrency:
  group: deploy-${s}-${o}-\${{ github.ref }}
  cancel-in-progress: true

jobs:
  deploy:
    name: Trigger Deployment via EventBridge
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4.0.1
        with:
          role-to-assume: arn:aws:iam::${l}:role/${h}-github-actions-${o}
          aws-region: ${u}

      - name: Trigger deployment via EventBridge
        run: |
          echo "Sending deployment event to EventBridge..."
          aws events put-events \\
            --entries '[{
              "Source": "github.actions.${o}",
              "DetailType": "SERVICE_DEPLOY",
              "Detail": "{\\"service\\":\\"${s}\\",\\"env\\":\\"${o}\\",\\"trigger\\":\\"github\\",\\"commit\\":\\"'\${{ github.sha }}'\\",\\"branch\\":\\"'\${{ github.ref_name }}'\\"}",
              "EventBusName": "default"
            }]'
          echo " Deployment event sent successfully"

      - name: Deployment Status
        run: |
          echo " Deployment triggered for ${s} in ${o} environment"
          echo " The event-driven ECS service will:"
          echo "   1. Pull the latest image from cross-account ECR"
          echo "   2. Update the ECS service"
          echo "   3. Wait for service stability"
          echo ""
          echo "Monitor deployment in AWS Console:"
          echo "https://console.aws.amazon.com/ecs/v2/clusters/${h}-${o}/services/${s}/health?region=${u}"`:y?`name: Deploy ${s} to AWS (${o})

on:
  push:
    branches: [main]
    paths:
      - '${s}/**'
      - '.github/workflows/${s}-${o}.yml'
  workflow_dispatch:

concurrency:
  group: deploy-${s}-${o}-\${{ github.ref }}
  cancel-in-progress: true

jobs:
  deploy:
    name: Deploy Custom Docker Image to ECS
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4.0.1
        with:
          role-to-assume: arn:aws:iam::${l}:role/${h}-github-actions-${o}
          aws-region: ${u}

      - name: Deploy to ECS
        run: |
          echo "Deploying ${s} with image: ${j}"
          aws ecs update-service \\
            --cluster ${h}-${o} \\
            --service ${s} \\
            --force-new-deployment \\
            --region ${u}

      - name: Wait for service stability
        run: |
          echo "Waiting for service to stabilize..."
          aws ecs wait services-stable \\
            --cluster ${h}-${o} \\
            --services ${s} \\
            --region ${u}
          echo " Deployment completed successfully"
          echo "Using Docker image: ${j}"`:`name: Deploy ${s} to AWS (${o})

on:
  push:
    branches: [main]
    paths:
      - '${s}/**'
      - '.github/workflows/${s}-${o}.yml'
  workflow_dispatch:

concurrency:
  group: deploy-${s}-${o}-\${{ github.ref }}
  cancel-in-progress: true

jobs:
  deploy:
    name: Build and Deploy to ECS
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4.0.1
        with:
          role-to-assume: arn:aws:iam::${l}:role/${h}-github-actions-${o}
          aws-region: ${u}

      - name: Login to Amazon ECR
        id: login-ecr
        uses: aws-actions/amazon-ecr-login@v2

      - name: Build, tag, and push Docker image
        env:
          ECR_REGISTRY: \${{ steps.login-ecr.outputs.registry }}
          ECR_REPOSITORY: ${s}
          IMAGE_TAG: \${{ github.sha }}
        run: |
          # Build Docker image
          docker build -t $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG ${s}/
          docker tag $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG $ECR_REGISTRY/$ECR_REPOSITORY:latest

          # Create ECR repository if it doesn't exist
          aws ecr describe-repositories --repository-names $ECR_REPOSITORY || \\
            aws ecr create-repository --repository-name $ECR_REPOSITORY

          # Push images
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:latest

          echo " Image pushed: $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG"

      - name: Deploy to ECS
        run: |
          echo "Deploying ${s} to ECS..."
          aws ecs update-service \\
            --cluster ${h}-${o} \\
            --service ${s} \\
            --force-new-deployment \\
            --region ${u}

      - name: Wait for service stability
        run: |
          echo "Waiting for service to stabilize..."
          aws ecs wait services-stable \\
            --cluster ${h}-${o} \\
            --services ${s} \\
            --region ${u}
          echo " Deployment completed successfully"`,g=()=>{navigator.clipboard.writeText(w),i(!0),setTimeout(()=>i(!1),2e3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium ${m?"bg-purple-500/10 text-purple-400 border border-purple-500/20":y?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"}`,children:m?e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-4 h-4"}),"Cross-Account ECR (EventBridge)"]}):y?e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-4 h-4"}),"Custom Docker Image (Docker Hub, etc.)"]}):e.jsxs(e.Fragment,{children:[e.jsx(Kr,{className:"w-4 h-4"}),"Local ECR (Build & Push)"]})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:"Workflow File"}),e.jsx("button",{onClick:g,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded-lg text-sm text-slate-200 transition-colors",children:n?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 text-green-400"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-4 h-4"}),"Copy Workflow"]})})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-4 overflow-x-auto",children:[e.jsxs("div",{className:"text-xs text-slate-500 mb-2 font-mono",children:[".github/workflows/",s,"-",o,".yml"]}),e.jsx("pre",{className:"text-sm text-slate-300 font-mono whitespace-pre",children:w})]})]}),m&&e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200 mb-3",children:"EventBridge Event Schema"}),e.jsx("pre",{className:"text-xs text-slate-300 font-mono bg-slate-900 rounded p-3 overflow-x-auto",children:JSON.stringify({Source:`github.actions.${o}`,DetailType:"SERVICE_DEPLOY",Detail:{service:s,env:o,trigger:"github",commit:"<github.sha>",branch:"<github.ref_name>"}},null,2)}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-xs text-slate-400",children:["This event will be matched by EventBridge rules configured to listen for ",e.jsxs("code",{className:"px-1 py-0.5 bg-slate-800 rounded",children:["github.actions.",o]})," source and ",e.jsx("code",{className:"px-1 py-0.5 bg-slate-800 rounded",children:"SERVICE_DEPLOY"})," detail type."]}),e.jsxs("p",{className:"text-xs text-slate-400",children:[e.jsx("strong",{className:"text-slate-300",children:"Deployment Flow:"})," EventBridge  Lambda Function  ECS Service Update"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["The deployment Lambda function will receive this event, pull the latest image from the cross-account ECR, and trigger an ECS service update with the new image. ECS redeployment typically takes ",e.jsx("strong",{className:"text-slate-300",children:"1-3 minutes"}),"."]}),e.jsxs("p",{className:"text-xs text-slate-400",children:[" ",e.jsx("strong",{className:"text-slate-300",children:"Tip:"})," You can configure the Lambda function with a Slack webhook URL to receive deployment notifications in your Slack channel (start, success, or failure status)."]})]})]}),y&&e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom Docker Image Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-slate-900 rounded p-3",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Docker Image URI"}),e.jsx("code",{className:"text-xs text-slate-300 font-mono break-all",children:j})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs text-slate-400",children:[e.jsx("strong",{className:"text-slate-300",children:"Deployment Flow:"})," GitHub Actions  AWS ECS Service Update"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["This workflow deploys the pre-built Docker image from Docker Hub, GHCR, or any other container registry. The workflow does not build a new image; it triggers a deployment with the existing image configured in the service. ECS redeployment typically takes ",e.jsx("strong",{className:"text-slate-300",children:"1-3 minutes"}),"."]}),e.jsxs("p",{className:"text-xs text-slate-400",children:[" ",e.jsx("strong",{className:"text-slate-300",children:"Tip:"})," Make sure the ECS task definition references the correct image URI. Update the image tag in your service configuration when you want to deploy a different version."]})]})]})]})]})}function mF({config:t,onConfigChange:s}){const n=t.workload?.setup_fcnsns===!0,i=`/${t.env}/${t.project}/backend/gcm-server-key`,[o,u]=E.useState(""),[h,l]=E.useState(!1),[d,f]=E.useState(!1),[p,m]=E.useState(!1),[y,j]=E.useState(null),[S,w]=E.useState(!1),[g,v]=E.useState(!1),b=async()=>{try{f(!0),j(null);const A=await Be.getSSMParameter(i);u(A.value||""),v(!0)}catch(A){A instanceof Error&&A.message.includes("ParameterNotFound")?(u(""),v(!0)):j("Failed to load parameter")}finally{f(!1)}},_=A=>{s({workload:{...t.workload,setup_fcnsns:A}}),A||(v(!1),u(""),j(null),w(!1))},C=async()=>{try{m(!0),j(null),w(!1),await Be.createOrUpdateSSMParameter({name:i,value:o,type:"SecureString",overwrite:!0}),w(!0),setTimeout(()=>w(!1),3e3)}catch(A){j(A instanceof Error?A.message:"Failed to save parameter")}finally{m(!1)}};return e.jsxs(fe,{className:"w-full",children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-5 h-5"}),"Amazon SNS Configuration"]}),e.jsx(we,{children:"Firebase Cloud Messaging (FCM) push notification settings"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(re,{htmlFor:"sns-enabled",children:"Enable SNS/FCM"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable Firebase Cloud Messaging platform application for push notifications"})]}),e.jsx(ct,{id:"sns-enabled",checked:n,onCheckedChange:_,className:"data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-600"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Configuration Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400 min-w-[140px]",children:"Platform App Name:"}),e.jsxs("code",{className:"text-pink-400 font-mono",children:[t.project,"-fcm-",t.env]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400 min-w-[140px]",children:"Platform:"}),e.jsx("span",{className:"text-gray-200",children:"GCM (Google Cloud Messaging)"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400 min-w-[140px]",children:"Server Key Path:"}),e.jsxs("code",{className:"text-blue-400 font-mono text-xs break-all",children:["/",t.env,"/",t.project,"/backend/gcm-server-key"]})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"GCM/FCM Server Key"}),g&&e.jsx(ie,{onClick:b,disabled:d,size:"sm",variant:"ghost",className:"h-6 px-2",children:e.jsx(Wt,{className:`w-3 h-3 ${d?"animate-spin":""}`})})]}),g?d?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(st,{className:"w-5 h-5 animate-spin text-gray-400"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(je,{type:h?"text":"password",value:o,onChange:A=>u(A.target.value),placeholder:"Enter your FCM server key",className:"bg-gray-900 border-gray-700 text-white pr-10"}),e.jsx("button",{type:"button",onClick:()=>l(!h),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:h?e.jsx(Ho,{className:"w-4 h-4"}):e.jsx(Lr,{className:"w-4 h-4"})})]}),e.jsx(ie,{onClick:C,disabled:p||!o,size:"sm",className:"min-w-[80px]",children:p?e.jsx(st,{className:"w-4 h-4 animate-spin"}):S?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Saved"]}):"Update"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx(yt,{className:"w-3 h-3 inline mr-1"}),"Stored at:"," ",e.jsx("code",{className:"text-blue-400",children:i})]}),y&&e.jsxs(ze,{className:"border-red-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-red-600"}),e.jsx(Fe,{className:"text-xs",children:y})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(je,{type:h?"text":"password",value:o,onChange:A=>u(A.target.value),placeholder:"Enter your FCM server key",className:"bg-gray-900 border-gray-700 text-white pr-10"}),e.jsx("button",{type:"button",onClick:()=>l(!h),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:h?e.jsx(Ho,{className:"w-4 h-4"}):e.jsx(Lr,{className:"w-4 h-4"})})]}),e.jsx(ie,{onClick:C,disabled:p||!o,size:"sm",className:"min-w-[80px]",children:p?e.jsx(st,{className:"w-4 h-4 animate-spin"}):S?e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Saved"]}):"Upload"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("p",{className:"text-gray-500",children:[e.jsx(yt,{className:"w-3 h-3 inline mr-1"}),"Will be stored at:"," ",e.jsx("code",{className:"text-blue-400",children:i})]}),e.jsx(ie,{onClick:b,disabled:d,size:"sm",variant:"ghost",className:"h-6 px-2 text-xs",children:d?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-3 h-3 mr-1 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lr,{className:"w-3 h-3 mr-1"}),"Show Existing"]})})]}),y&&e.jsxs(ze,{className:"border-red-600",children:[e.jsx(Ye,{className:"h-4 w-4 text-red-600"}),e.jsx(Fe,{className:"text-xs",children:y})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"IAM Permissions"}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"The backend service will have these SNS permissions:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 ml-4",children:[e.jsx("li",{children:" sns:Publish - Send push notifications"}),e.jsx("li",{children:" sns:CreatePlatformEndpoint - Register device tokens"}),e.jsx("li",{children:" sns:DeleteEndpoint - Remove device tokens"}),e.jsx("li",{children:" sns:GetEndpointAttributes - Get endpoint details"}),e.jsx("li",{children:" sns:SetEndpointAttributes - Update endpoint settings"})]})]})]}),e.jsxs(ze,{className:"border-blue-600",children:[e.jsx(Le,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Fe,{className:"text-xs",children:[e.jsx("strong",{children:"Note:"})," This configuration is specifically for Firebase Cloud Messaging (FCM) push notifications. For other SNS features like topics, email subscriptions, or SMS, additional Terraform configuration would be required."]})]})]})]})}function fF({config:t,onConfigChange:s,accountInfo:n}){const i=t.sqs||{enabled:!1},o=d=>{s({sqs:{...i,enabled:d}})},u=d=>{s({sqs:{...i,...d}})},h=i.name||"default-queue",l=`https://sqs.${t.region}.amazonaws.com/${n?.accountId||"<ACCOUNT_ID>"}/${t.project}-${t.env}-${h}`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(YT,{className:"w-5 h-5"}),"Amazon SQS"]}),e.jsx(we,{children:"Simple Queue Service for asynchronous task processing"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(re,{htmlFor:"sqs-enabled",className:"text-base",children:"Enable SQS"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create a managed message queue for async processing"})]}),e.jsx(ct,{id:"sqs-enabled",checked:i.enabled,onCheckedChange:o})]})})]}),i.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5"}),"Queue Configuration"]}),e.jsx(we,{children:"Configure your SQS message queue settings"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"queue-name",children:"Queue Name"}),e.jsx(je,{id:"queue-name",value:i.name||"",onChange:d=>u({name:d.target.value}),placeholder:"default-queue"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Default: default-queue"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"Queue Details"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Full Queue Name:"}),e.jsxs("div",{className:"font-mono text-blue-400 break-all",children:[t.project,"-",t.env,"-",h]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Queue URL:"}),e.jsx("div",{className:"font-mono text-green-400 break-all",children:l})]})]})]})]})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5"}),"Auto-Integration"]}),e.jsx(we,{children:"SQS automatically integrates with these components when enabled"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Backend Service"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"SQS_QUEUE_URL environment variable automatically added"})]})]}),t.scheduled_tasks&&t.scheduled_tasks.length>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Scheduled Tasks"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Queue access and policies automatically configured"})]})]}),t.event_processor_tasks&&t.event_processor_tasks.length>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Event Processor Tasks"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Queue access and policies automatically configured"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"IAM Policies"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"SQS access policies automatically created and attached"})]})]})]})})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Environment Variables"]}),e.jsx(we,{children:"Variables automatically injected into services"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"Backend Service"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-mono text-blue-400",children:"SQS_QUEUE_URL"}),e.jsx(Te,{variant:"outline",className:"text-xs",children:"Auto-injected"})]}),e.jsx("div",{className:"text-xs font-mono text-gray-300 break-all bg-gray-900 p-2 rounded",children:l})]})})]}),(t.scheduled_tasks?.length||t.event_processor_tasks?.length)&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-2",children:"Tasks"}),e.jsx("p",{className:"text-xs text-gray-400",children:"SQS queue URL and access policies are automatically provided to all scheduled tasks and event processor tasks."})]})]})})]}),e.jsxs(fe,{children:[e.jsxs(xe,{children:[e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Queue Features"]}),e.jsx(we,{children:"Built-in SQS capabilities and configurations"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Standard Queue"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"At-least-once delivery with high throughput"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Dead Letter Queue"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Automatic DLQ for failed message processing"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"Encryption"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Server-side encryption with AWS managed keys"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded-lg",children:[e.jsx(vt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"CloudWatch Integration"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Metrics for queue depth, message age, and throughput"})]})]})]})})})]}),e.jsxs(fe,{children:[e.jsx(xe,{children:e.jsxs(ge,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Important Notes"]})}),e.jsxs(pe,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("p",{children:" Queue URL is automatically provided to backend services and tasks"}),e.jsx("p",{children:" IAM policies for SQS access are automatically created and attached"}),e.jsx("p",{children:" Dead letter queue is automatically configured for failed messages"}),e.jsx("p",{children:" Queue is created in the same region as your infrastructure"}),e.jsx("p",{children:" Message retention period is set to 14 days by default"})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>window.open(`https://console.aws.amazon.com/sqs/v2/home?region=${t.region}#/queues`,"_blank"),children:[e.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Open SQS Console"]})})]})]})]})]})}function pF({selectedNode:t,isOpen:s,onClose:n,config:i,onConfigChange:o,accountInfo:u,onDeleteNode:h}){const[l,d]=E.useState("settings"),[f,p]=E.useState(!1),[m,y]=E.useState(!1),j=E.useRef(null),S=E.useRef({}),w=E.useCallback(_=>{if(!_)return[];switch(_.type){case"github":return[{id:"settings",label:"Settings",icon:zt},{id:"example",label:"Example",icon:Wp}];case"ecr":return[{id:"settings",label:"Settings",icon:zt},{id:"repos",label:"Repos",icon:fr},{id:"push",label:"Push",icon:OR}];case"route53":return[{id:"settings",label:"Settings",icon:zt},{id:"dns",label:"DNS",icon:js}];case"aurora":return[{id:"settings",label:"Settings",icon:zt}];case"secrets-manager":return[{id:"settings",label:"Settings",icon:zt},{id:"description",label:"Description",icon:PA}];case"ses":return[{id:"settings",label:"Settings",icon:zt},{id:"status",label:"Status",icon:Ds},{id:"send",label:"Send Email",icon:Wa}];case"s3":return[{id:"settings",label:"Buckets",icon:Wr}];case"sns":return[{id:"settings",label:"Settings",icon:zt}];case"postgres":return[{id:"settings",label:"Settings",icon:zt},{id:"connection",label:"Connection",icon:zu}];case"sqs":return[{id:"settings",label:"Settings",icon:zt}];case"eventbridge":return[{id:"test",label:"Test Event",icon:Wa}];case"api-gateway":return[{id:"settings",label:"Settings",icon:zt}];case"alb":return[{id:"settings",label:"Settings",icon:zt},{id:"routing",label:"Routing",icon:qr}];case"ecs":return[{id:"settings",label:"Settings",icon:zt},{id:"notifications",label:"Notifications",icon:Pr},{id:"cluster",label:"Cluster",icon:_s},{id:"network",label:"Network",icon:qr},{id:"services",label:"Services",icon:Ds}];case"backend":return[{id:"settings",label:"Settings",icon:zt},{id:"cicd",label:"CI/CD",icon:Co},{id:"scaling",label:"Scaling",icon:Hu},{id:"xray",label:"X-Ray",icon:Ub},{id:"ssh",label:"SSH",icon:Vs},{id:"env",label:"Env Vars",icon:ls},{id:"params",label:"Parameters",icon:yt},{id:"s3",label:"S3 Buckets",icon:Wr},{id:"sns",label:"SNS",icon:Pr},{id:"iam",label:"IAM",icon:Kt},{id:"logs",label:"Logs",icon:xs},{id:"cloudwatch",label:"CloudWatch",icon:qn},{id:"alerts",label:"Alerts",icon:Pr}];case"scheduled-task":return[{id:"settings",label:"Settings",icon:zt},{id:"cicd",label:"CI/CD",icon:Co},{id:"env",label:"Env Vars",icon:ls},{id:"params",label:"Parameters",icon:yt},{id:"iam",label:"IAM",icon:Kt},{id:"cloudwatch",label:"CloudWatch",icon:qn},{id:"logs",label:"Logs",icon:xs}];case"event-task":return[{id:"settings",label:"Settings",icon:zt},{id:"cicd",label:"CI/CD",icon:Co},{id:"test",label:"Test Event",icon:Wa},{id:"env",label:"Env Vars",icon:ls},{id:"params",label:"Parameters",icon:yt},{id:"iam",label:"IAM",icon:Kt},{id:"cloudwatch",label:"CloudWatch",icon:qn},{id:"logs",label:"Logs",icon:xs}];case"service":return[{id:"settings",label:"Settings",icon:zt},{id:"cicd",label:"CI/CD",icon:Co},{id:"scaling",label:"Scaling",icon:Hu},{id:"xray",label:"X-Ray",icon:Ub},{id:"ssh",label:"SSH",icon:Vs},{id:"env",label:"Env Vars",icon:ls},{id:"params",label:"Parameters",icon:yt},{id:"iam",label:"IAM",icon:Kt},{id:"logs",label:"Logs",icon:xs},{id:"cloudwatch",label:"CloudWatch",icon:qn}];case"amplify":return[{id:"settings",label:"Settings",icon:zt},{id:"cicd",label:"CI/CD",icon:Co},{id:"branches",label:"Branches",icon:Kr},{id:"build",label:"Build",icon:Wp},{id:"domain",label:"Domain",icon:js},{id:"env",label:"Env Vars",icon:ls}];default:return[{id:"settings",label:"Settings",icon:zt},{id:"logs",label:"Logs",icon:xs},{id:"metrics",label:"Metrics",icon:FA},{id:"env",label:"Environment",icon:ls},{id:"connections",label:"Connections",icon:zu}]}},[]);E.useEffect(()=>{if(t){const _=w(t);!_.map(A=>A.id).includes(l)&&_.length>0&&d(_[0].id)}},[t,l,w]);const g=E.useCallback(()=>{if(j.current){const{scrollLeft:_,scrollWidth:C,clientWidth:A}=j.current;p(_>0),y(_<C-A-5)}},[]);E.useEffect(()=>{g();const _=j.current;if(_)return _.addEventListener("scroll",g),window.addEventListener("resize",g),()=>{_.removeEventListener("scroll",g),window.removeEventListener("resize",g)}},[g]);const v=_=>{j.current&&(j.current.scrollBy({left:_==="left"?-150:150,behavior:"smooth"}),setTimeout(()=>g(),350))},b=E.useCallback(_=>{const C=j.current,A=S.current[_];if(C&&A){const D=C.clientWidth,R=A.offsetLeft,k=A.offsetWidth,M=R-D/2+k/2;C.scrollTo({left:M,behavior:"smooth"}),setTimeout(()=>g(),350)}},[g]);return E.useEffect(()=>{if(l){const _=setTimeout(()=>{b(l)},100);return()=>clearTimeout(_)}},[l,b]),E.useEffect(()=>{if(t){const _=setTimeout(()=>{g()},150);return()=>clearTimeout(_)}},[t,g]),!s||!t?null:e.jsxs("div",{className:"fixed right-0 top-0 h-full w-[768px] bg-gray-900 border-l border-gray-700 shadow-xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex-1 pr-2",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:t.name}),i&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400 block",children:"Project"}),e.jsx("span",{className:"text-xs text-gray-300 font-mono",children:i.project})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400 block",children:"Region"}),e.jsx("span",{className:"text-xs text-gray-300 font-mono",children:i.region})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400 block",children:"Environment"}),e.jsx("span",{className:"text-xs text-gray-300 font-mono",children:i.env})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(t.type==="service"||t.type==="scheduled-task"||t.type==="event-task"||t.type==="amplify")&&h&&e.jsx(ie,{variant:"ghost",size:"icon",onClick:()=>{window.confirm(`Are you sure you want to delete ${t.name}? This action cannot be undone.`)&&(h(t.id,t.type),n())},className:"text-red-400 hover:text-red-300 hover:bg-red-900/20 flex-shrink-0",title:"Delete",children:e.jsx(xr,{className:"w-4 h-4"})}),e.jsx(ie,{variant:"ghost",size:"icon",onClick:n,className:"text-gray-400 hover:text-white flex-shrink-0",children:e.jsx(ds,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"relative flex-shrink-0 border-b border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>v("left"),disabled:!f,className:`absolute left-0 top-0 bottom-0 z-10 px-3 bg-gradient-to-r from-gray-900 via-gray-900 to-transparent flex items-center justify-center transition-all ${f?"opacity-100 cursor-pointer hover:bg-gradient-to-r hover:from-gray-800":"opacity-30 cursor-not-allowed"}`,"aria-label":"Scroll left",children:e.jsx(qA,{className:`w-5 h-5 ${f?"text-blue-400":"text-gray-600"}`})}),e.jsx("button",{type:"button",onClick:()=>v("right"),disabled:!m,className:`absolute right-0 top-0 bottom-0 z-10 px-3 bg-gradient-to-l from-gray-900 via-gray-900 to-transparent flex items-center justify-center transition-all ${m?"opacity-100 cursor-pointer hover:bg-gradient-to-l hover:from-gray-800":"opacity-30 cursor-not-allowed"}`,"aria-label":"Scroll right",children:e.jsx(YA,{className:`w-5 h-5 ${m?"text-blue-400":"text-gray-600"}`})}),e.jsx("div",{ref:j,className:"overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.jsx("div",{className:"flex min-w-max",children:w(t).map(_=>e.jsxs("button",{type:"button",ref:C=>{S.current[_.id]=C},onClick:()=>d(_.id),className:`flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium transition-colors whitespace-nowrap ${l===_.id?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,children:[e.jsx(_.icon,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:_.label})]},_.id))})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:[t.type==="postgres"&&i&&o?l==="connection"?e.jsx(pH,{config:i}):l==="settings"?e.jsx(xH,{config:i,onConfigChange:o,accountInfo:u}):null:l==="settings"&&(t.type==="ecs"&&i&&o?e.jsx(rH,{config:i,onConfigChange:o}):t.type==="backend"&&i&&o?e.jsx(W9,{config:i,onConfigChange:o,accountInfo:u}):t.type==="github"&&i&&o?e.jsx(uH,{config:i,onConfigChange:o}):t.type==="ecr"&&i&&o?e.jsx(eH,{config:i,onConfigChange:o,accountInfo:u}):t.type==="route53"&&i&&o?e.jsx(vH,{config:i,onConfigChange:o}):t.type==="api-gateway"&&i?e.jsx(y9,{config:i}):t.type==="alb"&&i&&o?e.jsx(n9,{config:i,onConfigChange:o}):t.type==="aurora"?e.jsx(b9,{}):t.type==="secrets-manager"&&i?e.jsx(fH,{config:i}):t.type==="ses"&&i&&o?e.jsx(jH,{config:i,onConfigChange:o}):t.type==="s3"&&i&&o?e.jsx(yH,{config:i,onConfigChange:o}):t.type==="sns"&&i&&o?e.jsx(mF,{config:i,onConfigChange:o}):t.type==="sqs"&&i&&o?e.jsx(fF,{config:i,onConfigChange:o,accountInfo:u}):t.type==="scheduled-task"&&i&&o?e.jsx(_H,{config:i,onConfigChange:o,accountInfo:u,node:t}):t.type==="event-task"&&i&&o?e.jsx(cH,{config:i,onConfigChange:o,accountInfo:u,node:t}):t.type==="service"&&i&&o?e.jsx(uF,{config:i,onConfigChange:o,accountInfo:u,node:t}):t.type==="amplify"&&i&&o?e.jsx(v9,{config:i,nodeId:t.id,onConfigChange:o}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"service-name",children:"Service Name"}),e.jsx(je,{id:"service-name",value:t.name,className:"mt-1 bg-gray-800 border-gray-600 text-white",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"service-url",children:"Service URL"}),e.jsx(je,{id:"service-url",value:t.url||"Not available",className:"mt-1 bg-gray-800 border-gray-600 text-white",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Status"}),e.jsx("div",{className:"mt-1 px-3 py-2 bg-gray-800 border border-gray-600 rounded-md",children:e.jsx("span",{className:`capitalize ${t.status==="running"?"text-green-400":t.status==="deploying"?"text-yellow-400":t.status==="error"?"text-red-400":"text-gray-400"}`,children:t.status})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{htmlFor:"auto-deploy",children:"Auto Deploy"}),e.jsx(ct,{id:"auto-deploy",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{htmlFor:"health-check",children:"Health Check"}),e.jsx(ct,{id:"health-check",defaultChecked:!0})]}),t.replicas&&e.jsxs("div",{children:[e.jsx(re,{htmlFor:"replicas",children:"Replicas"}),e.jsx(je,{id:"replicas",type:"number",value:t.replicas,className:"mt-1 bg-gray-800 border-gray-600 text-white",readOnly:!0})]}),t.configProperties&&e.jsx("div",{className:"mt-6",children:e.jsx(hH,{node:t})})]})),l==="logs"&&i&&(t.type==="backend"?e.jsx(Nu,{environment:i.env,serviceName:"backend"}):t.type==="service"?e.jsx(Nu,{environment:i.env,serviceName:t.id.replace("service-","")}):null),l==="metrics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-white mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"CPU Usage"}),e.jsx("div",{className:"text-2xl font-medium text-white",children:"23%"})]}),e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Memory"}),e.jsx("div",{className:"text-2xl font-medium text-white",children:"1.2GB"})]}),e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Requests/min"}),e.jsx("div",{className:"text-2xl font-medium text-white",children:"1.2K"})]}),e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Uptime"}),e.jsx("div",{className:"text-2xl font-medium text-white",children:"99.9%"})]})]})]})}),l==="connections"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-white",children:"Connected Services"}),e.jsx("div",{className:"space-y-2",children:["database","cache","api-gateway"].map(_=>e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{className:"text-white",children:_})]},_))})]}),l==="example"&&t.type==="github"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-white mb-4",children:"GitHub Actions Workflow Example"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-gray-400 font-mono",children:".github/workflows/deploy.yml"}),e.jsx(ie,{size:"sm",variant:"ghost",className:"text-xs",onClick:()=>{const _=u?.accountId||i?.account_id||"123456789012",C=i?.ecr_strategy==="cross_account"?`name: Deploy to AWS (${i?.env||"dev"})

on:
  workflow_dispatch: # Manual triggering enabled

env:
  AWS_REGION: ${i?.region||"us-east-1"}
  AWS_ACCOUNT_ID: "${_}"

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4.0.1
        with:
          role-to-assume: arn:aws:iam::\${{ env.AWS_ACCOUNT_ID }}:role/${i?.project||"project"}-${i?.env||"dev"}-github-actions-role
          role-session-name: github-actions-deploy
          aws-region: \${{ env.AWS_REGION }}

      - name: Trigger deployment via EventBridge
        run: |
          aws events put-events --entries 'Source=action.${i?.env||"dev"},DetailType=DEPLOY,Detail="{\\"service\\":\\"backend\\"}",EventBusName=default'`:`name: Deploy to AWS (${i?.env||"dev"})

on:
  push:
    branches: [ main ]

concurrency:
  group: deploy-\${{ github.ref }}
  cancel-in-progress: true

env:
  AWS_REGION: ${i?.region||"us-east-1"}
  AWS_ACCOUNT_ID: ${_}
  ECR_REPOSITORY: ${i?.project||"project"}-${i?.env||"dev"}-backend
  ECS_CLUSTER: ${i?.project||"project"}-${i?.env||"dev"}-cluster
  ECS_SERVICE: ${i?.project||"project"}-${i?.env||"dev"}-backend
  IAM_ROLE: arn:aws:iam::${_}:role/${i?.project||"project"}-${i?.env||"dev"}-github-actions-role

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v2
        with:
          role-to-assume: \${{ env.IAM_ROLE }}
          aws-region: \${{ env.AWS_REGION }}

      - name: Compute ECR registry
        id: ecr
        run: echo "ECR_REGISTRY=\${{ env.AWS_ACCOUNT_ID }}.dkr.ecr.\${{ env.AWS_REGION }}.amazonaws.com" >> "$GITHUB_ENV"

      - name: Ensure ECR repository exists
        run: |
          aws ecr describe-repositories --repository-names "$ECR_REPOSITORY" >/dev/null 2>&1 || \\
          aws ecr create-repository --repository-name "$ECR_REPOSITORY" >/dev/null

      - name: Login to ECR
        run: |
          aws ecr get-login-password --region $AWS_REGION | \\
          docker login --username AWS --password-stdin $ECR_REGISTRY

      - name: Build and push Docker image
        run: |
          docker build -t $ECR_REPOSITORY .
          docker tag $ECR_REPOSITORY:latest $ECR_REGISTRY/$ECR_REPOSITORY:latest
          docker tag $ECR_REPOSITORY:latest $ECR_REGISTRY/$ECR_REPOSITORY:\${{ github.sha }}
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:latest
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:\${{ github.sha }}

      - name: Deploy to ECS (force new deployment)
        run: |
          aws ecs update-service \\
            --cluster "$ECS_CLUSTER" \\
            --service "$ECS_SERVICE" \\
            --force-new-deployment \\
            --region "$AWS_REGION"
          aws ecs wait services-stable --cluster "$ECS_CLUSTER" --services "$ECS_SERVICE"`;navigator.clipboard.writeText(C)},children:"Copy"})]}),e.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto",children:(()=>{const _=u?.accountId||i?.account_id||"123456789012";return i?.ecr_strategy==="cross_account"?`name: Deploy to AWS (${i?.env||"dev"})

on:
  workflow_dispatch: # Manual triggering enabled

env:
  AWS_REGION: ${i?.region||"us-east-1"}
  AWS_ACCOUNT_ID: "${_}"

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4.0.1
        with:
          role-to-assume: arn:aws:iam::\${{ env.AWS_ACCOUNT_ID }}:role/${i?.project||"project"}-${i?.env||"dev"}-github-actions-role
          role-session-name: github-actions-deploy
          aws-region: \${{ env.AWS_REGION }}

      - name: Trigger deployment via EventBridge
        run: |
          aws events put-events --entries 'Source=action.${i?.env||"dev"},DetailType=DEPLOY,Detail="{\\"service\\":\\"backend\\"}",EventBusName=default'`:`name: Deploy to AWS (${i?.env||"dev"})

on:
  push:
    branches: [ main ]

concurrency:
  group: deploy-\${{ github.ref }}
  cancel-in-progress: true

env:
  AWS_REGION: ${i?.region||"us-east-1"}
  AWS_ACCOUNT_ID: ${_}
  ECR_REPOSITORY: ${i?.project||"project"}-${i?.env||"dev"}-backend
  ECS_CLUSTER: ${i?.project||"project"}-${i?.env||"dev"}-cluster
  ECS_SERVICE: ${i?.project||"project"}-${i?.env||"dev"}-backend
  IAM_ROLE: arn:aws:iam::${_}:role/${i?.project||"project"}-${i?.env||"dev"}-github-actions-role

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v2
        with:
          role-to-assume: \${{ env.IAM_ROLE }}
          aws-region: \${{ env.AWS_REGION }}

      - name: Compute ECR registry
        id: ecr
        run: echo "ECR_REGISTRY=\${{ env.AWS_ACCOUNT_ID }}.dkr.ecr.\${{ env.AWS_REGION }}.amazonaws.com" >> "$GITHUB_ENV"

      - name: Ensure ECR repository exists
        run: |
          aws ecr describe-repositories --repository-names "$ECR_REPOSITORY" >/dev/null 2>&1 || \\
          aws ecr create-repository --repository-name "$ECR_REPOSITORY" >/dev/null

      - name: Login to ECR
        run: |
          aws ecr get-login-password --region $AWS_REGION | \\
          docker login --username AWS --password-stdin $ECR_REGISTRY

      - name: Build and push Docker image
        run: |
          docker build -t $ECR_REPOSITORY .
          docker tag $ECR_REPOSITORY:latest $ECR_REGISTRY/$ECR_REPOSITORY:latest
          docker tag $ECR_REPOSITORY:latest $ECR_REGISTRY/$ECR_REPOSITORY:\${{ github.sha }}
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:latest
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:\${{ github.sha }}

      - name: Deploy to ECS (force new deployment)
        run: |
          aws ecs update-service \\
            --cluster "$ECS_CLUSTER" \\
            --service "$ECS_SERVICE" \\
            --force-new-deployment \\
            --region "$AWS_REGION"
          aws ecs wait services-stable --cluster "$ECS_CLUSTER" --services "$ECS_SERVICE"`})()})]}),(()=>{const _=u?.accountId||i?.ecr_account_id;return _?e.jsxs("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-2",children:"AWS Account Configuration"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"AWS Account ID"}),":"," ",_]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"Region"}),":"," ",i?.region||"us-east-1"]})]})]}):e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-xs text-gray-400",children:"AWS Account ID not detected. Deploy infrastructure first to populate account information."})]})})(),i?.ecr_strategy==="cross_account"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-2",children:"Generated Resources"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"ECS Cluster"}),":"," ",i?.project||"project","-",i?.env||"dev","-cluster"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"ECS Service"}),":"," ",i?.project||"project","-",i?.env||"dev","-backend"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"IAM Role"}),":"," ",i?.project||"project","-",i?.env||"dev","-github-actions-role"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"EventBridge"}),": Default event bus"]})]})]}),e.jsxs("div",{className:"bg-purple-900/20 border border-purple-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-400 mb-2",children:"Cross-Account Configuration"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-purple-300",children:"ECR Strategy"}),": Cross-Account"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-purple-300",children:"Source Account"}),":"," ",i?.ecr_account_id||"Not configured"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-purple-300",children:"Source Region"}),":"," ",i?.ecr_account_region||"Not configured"]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Workflow Features"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"Manual deployment"})," - Trigger via workflow_dispatch"]}),e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"EventBridge integration"})," ","- Event-driven deployments"]}),e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"Cross-account ECR"})," - Uses images from source account"]}),e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"OIDC authentication"})," - Passwordless AWS access"]}),e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"Lightweight deployment"})," - No build or push steps"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" This environment pulls container images from account"," ",e.jsx("code",{children:i?.ecr_account_id})]}),e.jsx("li",{children:" Images are built and pushed in the source environment"}),e.jsx("li",{children:" Deployment is triggered manually or via EventBridge events"}),e.jsx("li",{children:" Ensure cross-account ECR trust policies are deployed in source account"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-green-400 mb-2",children:"Generated Resources"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"ECR Repository"}),":"," ",i?.project||"project","-",i?.env||"dev","-backend"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"ECS Cluster"}),":"," ",i?.project||"project","-",i?.env||"dev","-cluster"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"ECS Service"}),":"," ",i?.project||"project","-",i?.env||"dev","-backend"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"text-green-300",children:"IAM Role"}),":"," ",i?.project||"project","-",i?.env||"dev","-github-actions-role"]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Workflow Features"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"Concurrency control"})," - Prevents overlapping deployments"]}),e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"Auto-create ECR repo"})," ","- Creates repository if it doesn't exist"]}),e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"Dual tagging"})," - Tags with both :latest and :sha for rollback"]}),e.jsxs("li",{children:[""," ",e.jsx("span",{className:"text-blue-300",children:"Deployment verification"})," ","- Waits for service stability"]}),e.jsxs("li",{children:[" ",e.jsx("span",{className:"text-blue-300",children:"OIDC authentication"})," - Passwordless AWS access"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" Ensure your ECS task definition uses the"," ",e.jsx("code",{children:":latest"})," tag for auto-updates"]}),e.jsx("li",{children:" The workflow will cancel any in-progress deployments when a new push occurs"}),e.jsx("li",{children:" Service stability check will fail the workflow if deployment fails"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"IAM Trust Policy"}),e.jsx("pre",{className:"text-xs text-gray-400 overflow-x-auto",children:`{
  "Version": "2012-10-17",
  "Statement": [{
    "Effect": "Allow",
    "Principal": {
      "Federated": "arn:aws:iam::\${AWS_ACCOUNT_ID}:oidc-provider/token.actions.githubusercontent.com"
    },
    "Action": "sts:AssumeRoleWithWebIdentity",
    "Condition": {
      "StringEquals": {
        "token.actions.githubusercontent.com:aud": "sts.amazonaws.com"
      },
      "StringLike": {
        "token.actions.githubusercontent.com:sub": "repo:Owner/Repo:*"
      }
    }
  }]
}`})]})]}),l==="repos"&&t.type==="ecr"&&i&&e.jsx(sH,{config:i,accountInfo:u}),l==="push"&&t.type==="ecr"&&i&&e.jsx(tH,{config:i,accountInfo:u}),l==="dns"&&t.type==="route53"&&i&&e.jsx(gH,{config:i}),l==="description"&&t.type==="secrets-manager"&&i&&e.jsx(mH,{config:i}),l==="status"&&t.type==="ses"&&i&&e.jsx(SH,{config:i}),l==="status"&&t.type==="alb"&&i&&e.jsx(i9,{config:i}),l==="routing"&&t.type==="alb"&&i&&o&&e.jsx(a9,{config:i,onConfigChange:o}),l==="send"&&t.type==="ses"&&i&&e.jsx(wH,{config:i}),l==="cicd"&&t.type==="backend"&&i&&e.jsx(lc,{config:i,serviceName:"backend",serviceType:"backend"}),l==="cicd"&&t.type==="service"&&i&&e.jsx(lc,{config:i,serviceName:t.id.replace("service-",""),serviceType:"service"}),l==="cicd"&&t.type==="scheduled-task"&&i&&e.jsx(lc,{config:i,serviceName:t.id.replace("scheduled-",""),serviceType:"scheduled-task"}),l==="cicd"&&t.type==="event-task"&&i&&e.jsx(lc,{config:i,serviceName:t.id.replace("event-",""),serviceType:"event-task"}),l==="cicd"&&t.type==="amplify"&&i&&e.jsx(lc,{config:i,serviceName:t.id.replace("amplify-",""),serviceType:"amplify"}),l==="scaling"&&t.type==="backend"&&i&&o&&e.jsx(Ej,{config:i,onConfigChange:o}),l==="xray"&&t.type==="backend"&&i&&o&&e.jsx(J9,{config:i,onConfigChange:o}),l==="ssh"&&t.type==="backend"&&i&&o&&e.jsx(Rj,{config:i,onConfigChange:o,accountInfo:u}),l==="env"&&t.type==="backend"&&i&&o&&e.jsx(j9,{config:i,accountInfo:u,onConfigChange:o}),l==="params"&&t.type==="backend"&&i&&e.jsx(w9,{config:i}),l==="s3"&&t.type==="backend"&&i&&o&&e.jsx(S9,{config:i,onConfigChange:o}),l==="sns"&&t.type==="backend"&&i&&e.jsx(V9,{config:i}),l==="iam"&&t.type==="backend"&&i&&o&&e.jsx(Sj,{config:i,onConfigChange:o}),l==="cloudwatch"&&t.type==="backend"&&i&&e.jsx(wj,{config:i}),l==="alerts"&&t.type==="backend"&&i&&e.jsx(_9,{config:i}),l==="scaling"&&t.type==="service"&&i&&o&&e.jsx(Ej,{config:i,onConfigChange:o,isService:!0,serviceName:t.id.replace("service-","")}),l==="xray"&&t.type==="service"&&i&&o&&e.jsx(hF,{config:i,onConfigChange:o,node:t}),l==="ssh"&&t.type==="service"&&i&&o&&e.jsx(Rj,{config:i,onConfigChange:o,accountInfo:u,isService:!0,serviceName:t.id.replace("service-","")}),l==="env"&&t.type==="service"&&i&&o&&e.jsx(NH,{config:i,accountInfo:u,node:t,onConfigChange:o}),l==="params"&&t.type==="service"&&i&&e.jsx(dF,{config:i,node:t}),l==="iam"&&t.type==="service"&&i&&o&&e.jsx(Sj,{config:i,node:t,onConfigChange:o}),l==="cloudwatch"&&t.type==="service"&&i&&e.jsx(wj,{config:i,node:t}),l==="env"&&t.type==="scheduled-task"&&i&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-white",children:"Environment Variables"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-3",children:"Static Environment Variables"}),i.sqs?.enabled?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-mono text-blue-400",children:"SQS_QUEUE_URL"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Only when SQS is enabled"})]}),e.jsxs("div",{className:"text-sm font-mono text-gray-300 break-all bg-gray-900 p-2 rounded",children:["https://sqs.",i.region,".amazonaws.com/",u?.accountId||"<ACCOUNT_ID>","/",i.project,"-",i.env,"-",i.sqs.name||"queue"]})]}):e.jsxs("p",{className:"text-sm text-gray-400",children:["No environment variables. Enable SQS to get"," ",e.jsx("code",{className:"text-blue-400",children:"SQS_QUEUE_URL"}),"."]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-gray-300",children:[e.jsx("strong",{className:"text-blue-400",children:"Note:"})," To set custom environment variables, create parameters in AWS Systems Manager Parameter Store under:"]}),e.jsxs("code",{className:"text-xs text-gray-400 block mt-1",children:["/",i.env,"/",i.project,"/task/",t.id.replace("scheduled-",""),"/"]})]})]})]}),l==="params"&&t.type==="scheduled-task"&&i&&e.jsx(Oj,{config:i,node:t}),l==="iam"&&t.type==="scheduled-task"&&i&&e.jsx(Mj,{config:i,node:t}),l==="cloudwatch"&&t.type==="scheduled-task"&&i&&e.jsx(Dj,{config:i,node:t}),l==="logs"&&t.type==="scheduled-task"&&i&&e.jsx(Nu,{environment:i.env,serviceName:t.id.replace("scheduled-","")}),l==="env"&&t.type==="event-task"&&i&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-white",children:"Environment Variables"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-200 mb-3",children:"Static Environment Variables"}),i.sqs?.enabled?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-mono text-blue-400",children:"SQS_QUEUE_URL"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Only when SQS is enabled"})]}),e.jsxs("div",{className:"text-sm font-mono text-gray-300 break-all bg-gray-900 p-2 rounded",children:["https://sqs.",i.region,".amazonaws.com/",u?.accountId||"<ACCOUNT_ID>","/",i.project,"-",i.env,"-",i.sqs.name||"queue"]})]}):e.jsxs("p",{className:"text-sm text-gray-400",children:["No environment variables. Enable SQS to get"," ",e.jsx("code",{className:"text-blue-400",children:"SQS_QUEUE_URL"}),"."]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-gray-300",children:[e.jsx("strong",{className:"text-blue-400",children:"Note:"})," To set custom environment variables, create parameters in AWS Systems Manager Parameter Store under:"]}),e.jsxs("code",{className:"text-xs text-gray-400 block mt-1",children:["/",i.env,"/",i.project,"/task/",t.id.replace("event-",""),"/"]})]})]})]}),l==="test"&&t.type==="event-task"&&i&&e.jsx(dH,{config:i,node:t}),l==="test"&&t.type==="eventbridge"&&i&&e.jsx(lH,{config:i}),l==="params"&&t.type==="event-task"&&i&&e.jsx(Oj,{config:i,node:t}),l==="iam"&&t.type==="event-task"&&i&&e.jsx(Mj,{config:i,node:t}),l==="cloudwatch"&&t.type==="event-task"&&i&&e.jsx(Dj,{config:i,node:t}),l==="logs"&&t.type==="event-task"&&i&&e.jsx(Nu,{environment:i.env,serviceName:t.id.replace("event-","")}),l==="cluster"&&t.type==="ecs"&&i&&e.jsx(nH,{config:i}),l==="network"&&t.type==="ecs"&&i&&e.jsx(aH,{config:i}),l==="services"&&t.type==="ecs"&&i&&e.jsx(iH,{config:i}),l==="notifications"&&t.type==="ecs"&&i&&o&&e.jsx(oH,{config:i,onConfigChange:o}),l==="build"&&t.type==="amplify"&&i&&o&&e.jsx(f9,{config:i,nodeId:t.id,onConfigChange:o}),l==="domain"&&t.type==="amplify"&&i&&o&&e.jsx(x9,{config:i,nodeId:t.id,onConfigChange:o}),l==="env"&&t.type==="amplify"&&i&&o&&e.jsx(g9,{config:i,nodeId:t.id,onConfigChange:o}),l==="branches"&&t.type==="amplify"&&i&&o&&e.jsx(o9,{config:i,nodeId:t.id,onConfigChange:o})]})]})}const xF=[{value:"us-east-1",label:"US East (N. Virginia)"},{value:"us-east-2",label:"US East (Ohio)"},{value:"us-west-1",label:"US West (N. California)"},{value:"us-west-2",label:"US West (Oregon)"},{value:"af-south-1",label:"Africa (Cape Town)"},{value:"ap-east-1",label:"Asia Pacific (Hong Kong)"},{value:"ap-south-1",label:"Asia Pacific (Mumbai)"},{value:"ap-south-2",label:"Asia Pacific (Hyderabad)"},{value:"ap-southeast-1",label:"Asia Pacific (Singapore)"},{value:"ap-southeast-2",label:"Asia Pacific (Sydney)"},{value:"ap-southeast-3",label:"Asia Pacific (Jakarta)"},{value:"ap-southeast-4",label:"Asia Pacific (Melbourne)"},{value:"ap-northeast-1",label:"Asia Pacific (Tokyo)"},{value:"ap-northeast-2",label:"Asia Pacific (Seoul)"},{value:"ap-northeast-3",label:"Asia Pacific (Osaka)"},{value:"ca-central-1",label:"Canada (Central)"},{value:"ca-west-1",label:"Canada West (Calgary)"},{value:"eu-central-1",label:"Europe (Frankfurt)"},{value:"eu-central-2",label:"Europe (Zurich)"},{value:"eu-west-1",label:"Europe (Ireland)"},{value:"eu-west-2",label:"Europe (London)"},{value:"eu-west-3",label:"Europe (Paris)"},{value:"eu-south-1",label:"Europe (Milan)"},{value:"eu-south-2",label:"Europe (Spain)"},{value:"eu-north-1",label:"Europe (Stockholm)"},{value:"il-central-1",label:"Israel (Tel Aviv)"},{value:"me-south-1",label:"Middle East (Bahrain)"},{value:"me-central-1",label:"Middle East (UAE)"},{value:"sa-east-1",label:"South America (So Paulo)"}];function gF({selectedEnvironment:t,config:s,activeEnvironmentProfile:n,activeEnvironmentAccountId:i,onConfigChange:o}){return t?e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 px-4 w-[calc(100%-8rem)]",children:e.jsx("div",{className:"bg-gray-800/95 backdrop-blur-sm rounded-lg border border-gray-700 shadow-lg w-fit mx-auto",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-3 gap-y-1.5 px-3 py-2 xl:px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 whitespace-nowrap",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide sm:inline hidden",children:"Environment"}),e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide sm:hidden",children:"Env"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:t})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-px bg-gray-600 flex-shrink-0 hidden xl:block"}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 whitespace-nowrap",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide sm:inline hidden",children:"Project"}),e.jsx("span",{className:"text-xs text-gray-400 sm:hidden",children:"Proj:"}),e.jsx("span",{className:"text-sm font-semibold text-white sm:inline hidden",title:s.project,children:s.project}),e.jsx("span",{className:"text-xs font-semibold text-white truncate max-w-[80px] sm:hidden",title:s.project,children:s.project})]}),e.jsx("div",{className:"h-5 w-px bg-gray-600 flex-shrink-0 hidden xl:block"}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 whitespace-nowrap",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide sm:inline hidden",children:"Region"}),e.jsx("span",{className:"text-xs text-gray-400 sm:hidden",children:"Reg:"}),e.jsxs(Zt,{value:s.region,onValueChange:u=>{o({region:u})},children:[e.jsx(es,{className:"h-7 xl:w-[200px] sm:w-[180px] w-[140px] sm:text-xs text-[10px] font-mono bg-gray-800/50 border-gray-600 hover:bg-gray-700/50 sm:h-7 h-6",children:e.jsx(Jt,{})}),e.jsx(ts,{children:xF.map(u=>e.jsx(Ee,{value:u.value,children:u.label},u.value))})]})]}),n&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-px bg-gray-600 flex-shrink-0 hidden xl:block"}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 whitespace-nowrap",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide sm:inline hidden",children:"Profile"}),e.jsx("span",{className:"text-xs text-gray-400 sm:hidden",children:"Prof:"}),e.jsx("span",{className:"sm:text-sm text-xs font-semibold text-white truncate sm:max-w-[120px] max-w-[80px]",title:n,children:n})]}),e.jsx("div",{className:"h-5 w-px bg-gray-600 flex-shrink-0 hidden xl:block"}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 whitespace-nowrap",children:[e.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide sm:inline hidden",children:"Account"}),e.jsx("span",{className:"text-xs text-gray-400 sm:hidden",children:"Acct:"}),e.jsx("span",{className:"sm:text-sm text-xs font-semibold text-white font-mono sm:max-w-none max-w-[100px] truncate",title:i,children:i})]})]})]})]})})}):null}function vF(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const yF=t=>{switch(t){case"success":return jF;case"info":return SF;case"warning":return wF;case"error":return NF;default:return null}},bF=Array(12).fill(0),_F=({visible:t,className:s})=>ae.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},ae.createElement("div",{className:"sonner-spinner"},bF.map((n,i)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),jF=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),wF=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SF=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),NF=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CF=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),EF=()=>{const[t,s]=ae.useState(document.hidden);return ae.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let kx=1;class kF{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:i,...o}=s,u=typeof s?.id=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:kx++,h=this.toasts.find(d=>d.id===u),l=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),h?this.toasts=this.toasts.map(d=>d.id===u?(this.publish({...d,...s,id:u,title:i}),{...d,...s,id:u,dismissible:l,title:i}):d):this.addToast({title:i,...o,dismissible:l,id:u}),u},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(s instanceof Function?s():s);let u=i!==void 0,h;const l=o.then(async f=>{if(h=["resolve",f],ae.isValidElement(f))u=!1,this.create({id:i,type:"default",message:f});else if(TF(f)&&!f.ok){u=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,S=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:y,...S})}else if(f instanceof Error){u=!1;const m=typeof n.error=="function"?await n.error(f):n.error,y=typeof n.description=="function"?await n.description(f):n.description,S=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:y,...S})}else if(n.success!==void 0){u=!1;const m=typeof n.success=="function"?await n.success(f):n.success,y=typeof n.description=="function"?await n.description(f):n.description,S=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:i,type:"success",description:y,...S})}}).catch(async f=>{if(h=["reject",f],n.error!==void 0){u=!1;const p=typeof n.error=="function"?await n.error(f):n.error,m=typeof n.description=="function"?await n.description(f):n.description,j=typeof p=="object"&&!ae.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:m,...j})}}).finally(()=>{u&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,p)=>l.then(()=>h[0]==="reject"?p(h[1]):f(h[1])).catch(p));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(s,n)=>{const i=n?.id||kx++;return this.create({jsx:s(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const tr=new kF,AF=(t,s)=>{const n=s?.id||kx++;return tr.addToast({title:t,...s,id:n}),n},TF=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",RF=AF,DF=()=>tr.toasts,MF=()=>tr.getActiveToasts();Object.assign(RF,{success:tr.success,info:tr.info,warning:tr.warning,error:tr.error,custom:tr.custom,message:tr.message,promise:tr.promise,dismiss:tr.dismiss,loading:tr.loading},{getHistory:DF,getToasts:MF});vF("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Cu(t){return t.label!==void 0}const OF=3,PF="24px",LF="16px",Wj=4e3,BF=356,IF=14,$F=45,HF=200;function dn(...t){return t.filter(Boolean).join(" ")}function zF(t){const[s,n]=t.split("-"),i=[];return s&&i.push(s),n&&i.push(n),i}const FF=t=>{var s,n,i,o,u,h,l,d,f;const{invert:p,toast:m,unstyled:y,interacting:j,setHeights:S,visibleToasts:w,heights:g,index:v,toasts:b,expanded:_,removeToast:C,defaultRichColors:A,closeButton:D,style:R,cancelButtonStyle:k,actionButtonStyle:M,className:I="",descriptionClassName:q="",duration:W,position:G,gap:$,expandByDefault:F,classNames:B,icons:V,closeButtonAriaLabel:O="Close toast"}=t,[H,U]=ae.useState(null),[L,Y]=ae.useState(null),[J,K]=ae.useState(!1),[Z,oe]=ae.useState(!1),[P,Q]=ae.useState(!1),[ee,te]=ae.useState(!1),[ye,me]=ae.useState(!1),[Ce,Ue]=ae.useState(0),[Ge,pt]=ae.useState(0),Ne=ae.useRef(m.duration||W||Wj),ke=ae.useRef(null),ht=ae.useRef(null),us=v===0,Us=v+1<=w,kt=m.type,wt=m.dismissible!==!1,xt=m.className||"",qt=m.descriptionClassName||"",Gt=ae.useMemo(()=>g.findIndex(qe=>qe.toastId===m.id)||0,[g,m.id]),Ps=ae.useMemo(()=>{var qe;return(qe=m.closeButton)!=null?qe:D},[m.closeButton,D]),$t=ae.useMemo(()=>m.duration||W||Wj,[m.duration,W]),Ls=ae.useRef(0),Bt=ae.useRef(0),At=ae.useRef(0),Ke=ae.useRef(null),[Cs,Ht]=G.split("-"),gs=ae.useMemo(()=>g.reduce((qe,Dt,ss)=>ss>=Gt?qe:qe+Dt.height,0),[g,Gt]),Tt=EF(),Ir=m.invert||p,_n=kt==="loading";Bt.current=ae.useMemo(()=>Gt*$+gs,[Gt,gs]),ae.useEffect(()=>{Ne.current=$t},[$t]),ae.useEffect(()=>{K(!0)},[]),ae.useEffect(()=>{const qe=ht.current;if(qe){const Dt=qe.getBoundingClientRect().height;return pt(Dt),S(ss=>[{toastId:m.id,height:Dt,position:m.position},...ss]),()=>S(ss=>ss.filter(ys=>ys.toastId!==m.id))}},[S,m.id]),ae.useLayoutEffect(()=>{if(!J)return;const qe=ht.current,Dt=qe.style.height;qe.style.height="auto";const ss=qe.getBoundingClientRect().height;qe.style.height=Dt,pt(ss),S(ys=>ys.find(Mt=>Mt.toastId===m.id)?ys.map(Mt=>Mt.toastId===m.id?{...Mt,height:ss}:Mt):[{toastId:m.id,height:ss,position:m.position},...ys])},[J,m.title,m.description,S,m.id,m.jsx,m.action,m.cancel]);const Ys=ae.useCallback(()=>{oe(!0),Ue(Bt.current),S(qe=>qe.filter(Dt=>Dt.toastId!==m.id)),setTimeout(()=>{C(m)},HF)},[m,C,S,Bt]);ae.useEffect(()=>{if(m.promise&&kt==="loading"||m.duration===1/0||m.type==="loading")return;let qe;return _||j||Tt?(()=>{if(At.current<Ls.current){const ys=new Date().getTime()-Ls.current;Ne.current=Ne.current-ys}At.current=new Date().getTime()})():(()=>{Ne.current!==1/0&&(Ls.current=new Date().getTime(),qe=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),Ys()},Ne.current))})(),()=>clearTimeout(qe)},[_,j,m,kt,Tt,Ys]),ae.useEffect(()=>{m.delete&&(Ys(),m.onDismiss==null||m.onDismiss.call(m,m))},[Ys,m.delete]);function _r(){var qe;if(V?.loading){var Dt;return ae.createElement("div",{className:dn(B?.loader,m==null||(Dt=m.classNames)==null?void 0:Dt.loader,"sonner-loader"),"data-visible":kt==="loading"},V.loading)}return ae.createElement(_F,{className:dn(B?.loader,m==null||(qe=m.classNames)==null?void 0:qe.loader),visible:kt==="loading"})}const tn=m.icon||V?.[kt]||yF(kt);var sn,vs;return ae.createElement("li",{tabIndex:0,ref:ht,className:dn(I,xt,B?.toast,m==null||(s=m.classNames)==null?void 0:s.toast,B?.default,B?.[kt],m==null||(n=m.classNames)==null?void 0:n[kt]),"data-sonner-toast":"","data-rich-colors":(sn=m.richColors)!=null?sn:A,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":J,"data-promise":!!m.promise,"data-swiped":ye,"data-removed":Z,"data-visible":Us,"data-y-position":Cs,"data-x-position":Ht,"data-index":v,"data-front":us,"data-swiping":P,"data-dismissible":wt,"data-type":kt,"data-invert":Ir,"data-swipe-out":ee,"data-swipe-direction":L,"data-expanded":!!(_||F&&J),"data-testid":m.testId,style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${Z?Ce:Bt.current}px`,"--initial-height":F?"auto":`${Ge}px`,...R,...m.style},onDragEnd:()=>{Q(!1),U(null),Ke.current=null},onPointerDown:qe=>{qe.button!==2&&(_n||!wt||(ke.current=new Date,Ue(Bt.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(Q(!0),Ke.current={x:qe.clientX,y:qe.clientY})))},onPointerUp:()=>{var qe,Dt,ss;if(ee||!wt)return;Ke.current=null;const ys=Number(((qe=ht.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rn=Number(((Dt=ht.current)==null?void 0:Dt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Mt=new Date().getTime()-((ss=ke.current)==null?void 0:ss.getTime()),Bs=H==="x"?ys:rn,jn=Math.abs(Bs)/Mt;if(Math.abs(Bs)>=$F||jn>.11){Ue(Bt.current),m.onDismiss==null||m.onDismiss.call(m,m),Y(H==="x"?ys>0?"right":"left":rn>0?"down":"up"),Ys(),te(!0);return}else{var Is,$s;(Is=ht.current)==null||Is.style.setProperty("--swipe-amount-x","0px"),($s=ht.current)==null||$s.style.setProperty("--swipe-amount-y","0px")}me(!1),Q(!1),U(null)},onPointerMove:qe=>{var Dt,ss,ys;if(!Ke.current||!wt||((Dt=window.getSelection())==null?void 0:Dt.toString().length)>0)return;const Mt=qe.clientY-Ke.current.y,Bs=qe.clientX-Ke.current.x;var jn;const Is=(jn=t.swipeDirections)!=null?jn:zF(G);!H&&(Math.abs(Bs)>1||Math.abs(Mt)>1)&&U(Math.abs(Bs)>Math.abs(Mt)?"x":"y");let $s={x:0,y:0};const oa=ar=>1/(1.5+Math.abs(ar)/20);if(H==="y"){if(Is.includes("top")||Is.includes("bottom"))if(Is.includes("top")&&Mt<0||Is.includes("bottom")&&Mt>0)$s.y=Mt;else{const ar=Mt*oa(Mt);$s.y=Math.abs(ar)<Math.abs(Mt)?ar:Mt}}else if(H==="x"&&(Is.includes("left")||Is.includes("right")))if(Is.includes("left")&&Bs<0||Is.includes("right")&&Bs>0)$s.x=Bs;else{const ar=Bs*oa(Bs);$s.x=Math.abs(ar)<Math.abs(Bs)?ar:Bs}(Math.abs($s.x)>0||Math.abs($s.y)>0)&&me(!0),(ss=ht.current)==null||ss.style.setProperty("--swipe-amount-x",`${$s.x}px`),(ys=ht.current)==null||ys.style.setProperty("--swipe-amount-y",`${$s.y}px`)}},Ps&&!m.jsx&&kt!=="loading"?ae.createElement("button",{"aria-label":O,"data-disabled":_n,"data-close-button":!0,onClick:_n||!wt?()=>{}:()=>{Ys(),m.onDismiss==null||m.onDismiss.call(m,m)},className:dn(B?.closeButton,m==null||(i=m.classNames)==null?void 0:i.closeButton)},(vs=V?.close)!=null?vs:CF):null,(kt||m.icon||m.promise)&&m.icon!==null&&(V?.[kt]!==null||m.icon)?ae.createElement("div",{"data-icon":"",className:dn(B?.icon,m==null||(o=m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||_r():null,m.type!=="loading"?tn:null):null,ae.createElement("div",{"data-content":"",className:dn(B?.content,m==null||(u=m.classNames)==null?void 0:u.content)},ae.createElement("div",{"data-title":"",className:dn(B?.title,m==null||(h=m.classNames)==null?void 0:h.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?ae.createElement("div",{"data-description":"",className:dn(q,qt,B?.description,m==null||(l=m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),ae.isValidElement(m.cancel)?m.cancel:m.cancel&&Cu(m.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||k,onClick:qe=>{Cu(m.cancel)&&wt&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,qe),Ys())},className:dn(B?.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,ae.isValidElement(m.action)?m.action:m.action&&Cu(m.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||M,onClick:qe=>{Cu(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,qe),!qe.defaultPrevented&&Ys())},className:dn(B?.actionButton,m==null||(f=m.classNames)==null?void 0:f.actionButton)},m.action.label):null)};function Vj(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function UF(t,s){const n={};return[t,s].forEach((i,o)=>{const u=o===1,h=u?"--mobile-offset":"--offset",l=u?LF:PF;function d(f){["top","right","bottom","left"].forEach(p=>{n[`${h}-${p}`]=typeof f=="number"?`${f}px`:f})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(f=>{i[f]===void 0?n[`${h}-${f}`]=l:n[`${h}-${f}`]=typeof i[f]=="number"?`${i[f]}px`:i[f]}):d(l)}),n}const WF=ae.forwardRef(function(s,n){const{id:i,invert:o,position:u="bottom-right",hotkey:h=["altKey","KeyT"],expand:l,closeButton:d,className:f,offset:p,mobileOffset:m,theme:y="light",richColors:j,duration:S,style:w,visibleToasts:g=OF,toastOptions:v,dir:b=Vj(),gap:_=IF,icons:C,containerAriaLabel:A="Notifications"}=s,[D,R]=ae.useState([]),k=ae.useMemo(()=>i?D.filter(J=>J.toasterId===i):D.filter(J=>!J.toasterId),[D,i]),M=ae.useMemo(()=>Array.from(new Set([u].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,u]),[I,q]=ae.useState([]),[W,G]=ae.useState(!1),[$,F]=ae.useState(!1),[B,V]=ae.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=ae.useRef(null),H=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=ae.useRef(null),L=ae.useRef(!1),Y=ae.useCallback(J=>{R(K=>{var Z;return(Z=K.find(oe=>oe.id===J.id))!=null&&Z.delete||tr.dismiss(J.id),K.filter(({id:oe})=>oe!==J.id)})},[]);return ae.useEffect(()=>tr.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{R(K=>K.map(Z=>Z.id===J.id?{...Z,delete:!0}:Z))});return}setTimeout(()=>{Qw.flushSync(()=>{R(K=>{const Z=K.findIndex(oe=>oe.id===J.id);return Z!==-1?[...K.slice(0,Z),{...K[Z],...J},...K.slice(Z+1)]:[J,...K]})})})}),[D]),ae.useEffect(()=>{if(y!=="system"){V(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:K})=>{V(K?"dark":"light")})}catch{J.addListener(({matches:Z})=>{try{V(Z?"dark":"light")}catch(oe){console.error(oe)}})}},[y]),ae.useEffect(()=>{D.length<=1&&G(!1)},[D]),ae.useEffect(()=>{const J=K=>{var Z;if(h.every(Q=>K[Q]||K.code===Q)){var P;G(!0),(P=O.current)==null||P.focus()}K.code==="Escape"&&(document.activeElement===O.current||(Z=O.current)!=null&&Z.contains(document.activeElement))&&G(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[h]),ae.useEffect(()=>{if(O.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,L.current=!1)}},[O.current]),ae.createElement("section",{ref:n,"aria-label":`${A} ${H}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((J,K)=>{var Z;const[oe,P]=J.split("-");return k.length?ae.createElement("ol",{key:J,dir:b==="auto"?Vj():b,tabIndex:-1,ref:O,className:f,"data-sonner-toaster":!0,"data-sonner-theme":B,"data-y-position":oe,"data-x-position":P,style:{"--front-toast-height":`${((Z=I[0])==null?void 0:Z.height)||0}px`,"--width":`${BF}px`,"--gap":`${_}px`,...w,...UF(p,m)},onBlur:Q=>{L.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(L.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||L.current||(L.current=!0,U.current=Q.relatedTarget)},onMouseEnter:()=>G(!0),onMouseMove:()=>G(!0),onMouseLeave:()=>{$||G(!1)},onDragEnd:()=>G(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},k.filter(Q=>!Q.position&&K===0||Q.position===J).map((Q,ee)=>{var te,ye;return ae.createElement(FF,{key:Q.id,icons:C,index:ee,toast:Q,defaultRichColors:j,duration:(te=v?.duration)!=null?te:S,className:v?.className,descriptionClassName:v?.descriptionClassName,invert:o,visibleToasts:g,closeButton:(ye=v?.closeButton)!=null?ye:d,interacting:$,position:J,style:v?.style,unstyled:v?.unstyled,classNames:v?.classNames,cancelButtonStyle:v?.cancelButtonStyle,actionButtonStyle:v?.actionButtonStyle,closeButtonAriaLabel:v?.closeButtonAriaLabel,removeToast:Y,toasts:k.filter(me=>me.position==Q.position),heights:I.filter(me=>me.position==Q.position),setHeights:q,expandByDefault:l,gap:_,expanded:W,swipeDirections:s.swipeDirections})})):null}))}),VF=({...t})=>e.jsx(WF,{theme:"system",className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t});function qF(t,s){const[n,i]=E.useState(null),[o,u]=E.useState(!1),[h,l]=E.useState(null),d=E.useCallback(async()=>{if(!t){i(null);return}u(!0),l(null);try{const f=await Be.getPricing(t);i(f)}catch(f){l(f),i(null)}finally{u(!1)}},[t]);return E.useEffect(()=>{d()},[d]),{pricing:n,loading:o,error:h,refreshPricing:d}}function GF(){const[t,s]=E.useState(null),[n,i]=E.useState(!1),[o,u]=E.useState(null),[h,l]=E.useState(!1),[d,f]=E.useState(null),[p,m]=E.useState(null),[y,j]=E.useState(!1),[S,w]=E.useState(!1),[g,v]=E.useState(!1),[b,_]=E.useState(!1),[C,A]=E.useState("idle"),[D,R]=E.useState(null),[k,M]=E.useState(null),[I,q]=E.useState(0),{pricing:W}=qF(o),G=E.useCallback(ee=>{s(ee),i(!!ee)},[]),$=E.useCallback(async ee=>{u(ee),l(!1);try{const ye=(await Be.getEnvironments()).find(me=>me.name===ee);ye&&(R(ye.profile||null),M(ye.accountId||null))}catch(te){console.error("Failed to fetch environment details:",te)}},[]);E.useEffect(()=>{(async()=>{try{const ye=(await Be.getEnvironments()).find(me=>me.isActive);ye?(u(ye.name),R(ye.profile||null),M(ye.accountId||null),l(!1)):l(!0)}catch(te){console.error("Failed to check active environment:",te),l(!0)}})()},[]);const F=E.useCallback(async ee=>{try{const te=await Be.getEnvironmentConfig(ee),ye=vA(te);f(ye)}catch(te){console.error("Failed to load configuration:",te)}},[]),B=E.useCallback(async()=>{try{const ee=await Be.getAccountInfo();m(ee)}catch(ee){console.error("Failed to load account info:",ee)}},[]);E.useEffect(()=>{o&&(F(o),B())},[o,B,F]);const V=E.useCallback(async ee=>{if(o){A("saving");try{const te=yA(ee,{indent:2,lineWidth:-1,noRefs:!0,sortKeys:!1});await Be.updateEnvironmentConfig(o,te),console.log("Configuration saved successfully"),A("success"),q(ye=>ye+1),setTimeout(()=>A("idle"),2e3)}catch(te){console.error("Failed to save configuration:",te),A("error"),setTimeout(()=>A("idle"),3e3)}finally{}}},[o]),O=E.useCallback(async ee=>{f(te=>{if(!te)return te;const ye={...te,...ee};return JSON.stringify(te)===JSON.stringify(ye)?te:(V(ye),ye)})},[V]),H=async ee=>{if(!d)return;const te={...d,services:[...d.services||[],ee]};f(te),await V(te)},U=async ee=>{if(!d)return;const te={...d,scheduled_tasks:[...d.scheduled_tasks||[],ee]};f(te),await V(te)},L=async ee=>{if(!d)return;const te={...d,event_processor_tasks:[...d.event_processor_tasks||[],ee]};f(te),await V(te)},Y=async ee=>{if(!d)return;const te={...d,amplify_apps:[...d.amplify_apps||[],ee]};f(te),await V(te)},J=async(ee,te)=>{if(!d)return;const ye={...d};if(te==="service"){const me=ee.replace("service-","");ye.services=(d.services||[]).filter(Ce=>Ce.name!==me)}else if(te==="scheduled-task"){const me=ee.replace("scheduled-","");ye.scheduled_tasks=(d.scheduled_tasks||[]).filter(Ce=>Ce.name!==me)}else if(te==="event-task"){const me=ee.replace("event-","");ye.event_processor_tasks=(d.event_processor_tasks||[]).filter(Ce=>Ce.name!==me)}else if(te==="amplify"){const me=ee.replace("amplify-","");ye.amplify_apps=(d.amplify_apps||[]).filter(Ce=>Ce.name!==me)}f(ye),await V(ye)},K=()=>(d?.services||[]).map(ee=>ee.name),Z=()=>(d?.scheduled_tasks||[]).map(ee=>ee.name),oe=()=>(d?.event_processor_tasks||[]).map(ee=>ee.name),P=()=>(d?.amplify_apps||[]).map(ee=>ee.name),Q=()=>["backend",...(d?.services||[]).map(te=>te.name)];return e.jsx(P7,{children:e.jsxs("div",{className:"size-full bg-gray-950 text-white relative overflow-hidden",children:[e.jsx(K7,{open:h,onSelect:$}),e.jsx(gF,{selectedEnvironment:o,config:d,activeEnvironmentProfile:D,activeEnvironmentAccountId:k,onConfigChange:O}),C!=="idle"&&e.jsx("div",{className:"absolute top-4 right-4 z-50",children:e.jsxs("div",{className:`
            flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg
            ${C==="saving"?"bg-blue-900/90 border border-blue-700":""}
            ${C==="success"?"bg-green-900/90 border border-green-700":""}
            ${C==="error"?"bg-red-900/90 border border-red-700":""}
          `,children:[C==="saving"&&e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-4 h-4 animate-spin text-blue-400"}),e.jsx("span",{className:"text-sm text-blue-200",children:"Saving configuration..."})]}),C==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm text-green-200",children:"Configuration saved"})]}),C==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-200",children:"Failed to save configuration"})]})]})}),e.jsxs(Zx,{children:[e.jsx(Y7,{onNodeSelect:G,selectedNode:t,config:d,environmentName:o||void 0,onAddService:()=>j(!0),onAddScheduledTask:()=>w(!0),onAddEventTask:()=>v(!0),onAddAmplify:()=>_(!0),pricing:W}),e.jsx(pF,{selectedNode:t,isOpen:n,onClose:()=>{i(!1),s(null)},config:d||void 0,onConfigChange:O,accountInfo:p||void 0,onDeleteNode:J})]}),e.jsx(W$,{open:y,onClose:()=>j(!1),onAdd:H,existingServices:K(),config:d||{}}),e.jsx(U$,{open:S,onClose:()=>w(!1),onAdd:U,existingTasks:Z()}),e.jsx(F$,{open:g,onClose:()=>v(!1),onAdd:L,existingTasks:oe(),availableServices:Q(),config:d||{}}),e.jsx(p$,{open:b,onClose:()=>_(!1),onAdd:Y,existingApps:P(),environmentName:o||void 0,projectName:d?.project,config:d||void 0}),e.jsx("div",{className:"absolute bottom-4 left-4 z-40",children:e.jsx(Q7,{})}),e.jsx(VF,{})]})})}Xk.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(GF,{})}));
